{
  "version": "1.0",
  "createdAt": "2026-02-01T02:40:02.408Z",
  "chunks": [
    {
      "id": "3d80b0c6",
      "filePath": "llm-service/src/index.ts",
      "content": "// Core\nexport * from './core/types.js'\nexport * from './core/provider.js'\nexport * from './core/interceptor.js'\nexport { UnifiedLLMClient } from './core/client.js'\nexport { PromptTemplate } from './core/prompt-template.js'\nexport type { PromptTemplateConfig } from './core/prompt-template.js'\n\n// Providers\nexport { OpenAIProvider } from './providers/openai.js'\nexport type { OpenAIProviderOptions } from './providers/openai.js'\n\n// Interceptors\nexport { CostTracker } from './interceptors/cost-tracker.js'\nexport { RateLimiter } from './interceptors/rate-limiter.js'\nexport type { RateLimiterOptions } from './interceptors/rate-limiter.js'\nexport { Logger } from './interceptors/logger.js'\nexport type { LoggerOptions } from './interceptors/logger.js'\nexport { RetryInterceptor } from './interceptors/retry.js'\nexport type { RetryOptions } from './interceptors/retry.js'",
      "startLine": 1,
      "endLine": 21,
      "type": "other",
      "embedding": [
        -0.024800002574920654,
        0.024384863674640656,
        -0.0630769208073616,
        0.037539154291152954,
        0.09245571494102478,
        0.026634592562913895,
        -0.005792655516415834,
        0.06196121126413345,
        0.03099118359386921,
        0.05074024200439453,
        0.030108466744422913,
        -0.07359082996845245,
        -0.023436522111296654,
        0.03727421909570694,
        0.05827123299241066,
        0.011635634116828442,
        0.008078344166278839,
        -0.02083948440849781,
        -0.03085041046142578,
        0.0065224310383200645,
        0.03753457963466644,
        0.07776720821857452,
        0.07144458591938019,
        -0.002497931243851781,
        -0.013585123233497143,
        -0.047844160348176956,
        -0.024248991161584854,
        -0.041726961731910706,
        -0.03644997999072075,
        -0.019685646519064903,
        -0.012537646107375622,
        -0.03071996569633484,
        -0.08863641321659088,
        -0.05493830516934395,
        0.09136256575584412,
        0.064997099339962,
        0.015220270492136478,
        0.01623690314590931,
        -0.025553133338689804,
        -0.04453148692846298,
        0.07652048021554947,
        0.09638754278421402,
        -0.028630657121539116,
        -0.10098440200090408,
        0.06337285786867142,
        -0.03459988906979561,
        -0.056246157735586166,
        -0.014148584567010403,
        -0.004221945069730282,
        0.020025618374347687,
        -0.0059135970659554005,
        -0.017432089895009995,
        -0.014473853632807732,
        -0.048824504017829895,
        0.00290619395673275,
        0.041116584092378616,
        -0.04157256335020065,
        0.016289321705698967,
        0.041688546538352966,
        0.012025224976241589,
        -0.07661176472902298,
        -0.07270479202270508,
        -0.008045577444136143,
        -0.06458358466625214,
        -0.014319868758320808,
        0.002918180078268051,
        -0.036531947553157806,
        0.04353233426809311,
        -0.03149333968758583,
        -0.02631915546953678,
        -0.04473528265953064,
        0.0005275649600662291,
        -0.02118113823235035,
        -0.0854918360710144,
        -0.017006266862154007,
        -0.06401418149471283,
        -0.009933261200785637,
        0.12846912443637848,
        0.027076253667473793,
        -0.08924367278814316,
        0.03684651106595993,
        -0.07221635431051254,
        -0.02150539681315422,
        0.05990979075431824,
        0.028082391247153282,
        0.07818078994750977,
        0.040380723774433136,
        -0.00809002760797739,
        0.13343966007232666,
        -0.00971743743866682,
        0.0178779736161232,
        -0.04579529911279678,
        0.000626482767984271,
        -0.005126895383000374,
        -0.04913616552948952,
        -0.02146149054169655,
        -0.10377177596092224,
        0.07250963151454926,
        -0.052995093166828156,
        0.04973941296339035,
        -0.02439727447926998,
        -0.09584016352891922,
        0.024872666224837303,
        0.09346003085374832,
        -0.059189196676015854,
        -0.035164207220077515,
        0.03440451994538307,
        0.05600166693329811,
        0.010943838395178318,
        0.04088117554783821,
        0.051779136061668396,
        0.06779201328754425,
        0.023317214101552963,
        -0.03578591346740723,
        0.02897617034614086,
        -0.012855677865445614,
        -0.023950327187776566,
        -0.0874975174665451,
        0.0286088939756155,
        0.05147266387939453,
        0.07723022252321243,
        -0.049564044922590256,
        0.02133476361632347,
        0.021809207275509834,
        0.07443075627088547,
        0.04252300411462784,
        0.13916102051734924,
        3.7499434265322255e-33,
        0.05191227048635483,
        0.025321882218122482,
        -0.012645465321838856,
        0.0659298449754715,
        0.038002654910087585,
        0.04854409769177437,
        0.049394458532333374,
        0.025466302409768105,
        0.006403847131878138,
        0.03440936654806137,
        -0.08580636233091354,
        0.04343617334961891,
        -0.08201777189970016,
        0.006614553742110729,
        -0.009737121872603893,
        -0.07849040627479553,
        0.019830798730254173,
        0.031506460160017014,
        0.07404526323080063,
        -0.004774635192006826,
        0.04717382788658142,
        0.04326914995908737,
        -0.03994720056653023,
        0.009384245611727238,
        0.0065444959327578545,
        0.08118946105241776,
        0.009336479939520359,
        -0.002199253300204873,
        -0.03692895919084549,
        0.01368427649140358,
        0.1290091723203659,
        0.039896268397569656,
        0.03672676905989647,
        0.05468573421239853,
        -0.06418612599372864,
        0.007908979430794716,
        -0.03168243169784546,
        -0.02832525223493576,
        -0.07790578156709671,
        -0.02297407202422619,
        -0.04841962829232216,
        0.0523194819688797,
        -0.09816083312034607,
        0.009283363819122314,
        -0.035106830298900604,
        -0.10453999787569046,
        0.04085394740104675,
        -0.014708294533193111,
        0.13629551231861115,
        -0.06423744559288025,
        -0.08447300642728806,
        0.02227710373699665,
        0.016095217317342758,
        -0.03987136110663414,
        0.059609148651361465,
        -0.052526410669088364,
        -0.009463581256568432,
        0.019146913662552834,
        0.031187279149889946,
        -0.06816823035478592,
        0.001530586858280003,
        -0.030160408467054367,
        -0.018344180658459663,
        -0.09839285165071487,
        0.03656546398997307,
        0.08140258491039276,
        -0.07885272055864334,
        -0.018244000151753426,
        0.00804222747683525,
        -0.0375497080385685,
        0.015176885761320591,
        -0.04017772153019905,
        0.04931483045220375,
        0.007905501872301102,
        0.08590123802423477,
        -0.009772962890565395,
        0.011095888912677765,
        0.08314792066812515,
        0.0218714140355587,
        -0.061517756432294846,
        -0.0729326605796814,
        -0.04262751340866089,
        -0.05667327344417572,
        0.07242612540721893,
        0.10994215309619904,
        -0.05804034322500229,
        -0.006043420638889074,
        0.00952855870127678,
        0.06375347077846527,
        0.08532539010047913,
        -0.020039180293679237,
        0.0017329836264252663,
        -0.04776174947619438,
        0.0591982938349247,
        -0.053001370280981064,
        -4.23145015720002e-33,
        0.01344412099570036,
        0.042763691395521164,
        -0.07077299803495407,
        0.00362239102832973,
        -0.044385649263858795,
        -0.032021161168813705,
        -0.053774964064359665,
        0.08464376628398895,
        0.012010155245661736,
        0.002815835876390338,
        -0.019178174436092377,
        -0.001231132191605866,
        0.03969466686248779,
        0.0139189837500453,
        -0.04841918498277664,
        -0.030330365523695946,
        -0.00769020663574338,
        0.04687274247407913,
        0.015460073947906494,
        -0.08329371362924576,
        -0.06158682331442833,
        0.005047954618930817,
        0.05560145527124405,
        -0.019323470070958138,
        0.006642830558121204,
        0.10401271283626556,
        0.09540891647338867,
        0.09053217619657516,
        -0.014175649732351303,
        -0.05455596372485161,
        -0.010077683255076408,
        0.020372774451971054,
        -0.055940743535757065,
        0.10409773886203766,
        -0.07879897207021713,
        0.017608029767870903,
        -0.008515848778188229,
        0.0866461843252182,
        -0.050319820642471313,
        0.018443498760461807,
        0.04093165323138237,
        -0.051273562014102936,
        -0.06270677596330643,
        -0.015884796157479286,
        -0.06067737936973572,
        -0.060874029994010925,
        0.03482836112380028,
        -0.03857509419322014,
        0.03152190148830414,
        -0.07605015486478806,
        0.04108959436416626,
        -0.0549195259809494,
        -0.0064236074686050415,
        -0.0031508689280599356,
        -0.06394696980714798,
        0.01571519486606121,
        0.12282510846853256,
        -0.12271307408809662,
        -0.049654267728328705,
        -0.023108791559934616,
        0.05116484314203262,
        -0.025062162429094315,
        0.0010714131640270352,
        -0.005369198974221945,
        0.03069380484521389,
        -0.022784579545259476,
        0.03902079164981842,
        0.0856005996465683,
        0.03905567154288292,
        -0.0042746528051793575,
        -0.09449819475412369,
        -0.08965232968330383,
        0.06779643148183823,
        -0.027399489656090736,
        0.04002935066819191,
        0.013579956255853176,
        -0.04861430451273918,
        -0.09005963802337646,
        0.09775573015213013,
        -0.03882190212607384,
        -0.039078254252672195,
        -0.05924559384584427,
        -0.03151584789156914,
        -0.04357903078198433,
        -0.01854499615728855,
        -0.047738056629896164,
        0.06928802281618118,
        0.08738578110933304,
        0.0671248510479927,
        0.0692114382982254,
        -0.07455887645483017,
        -0.022958140820264816,
        0.041695524007081985,
        0.025469698011875153,
        0.012281243689358234,
        -5.1960928004746165e-8,
        -0.07642008364200592,
        -0.03254498913884163,
        -0.0376402847468853,
        0.024749869480729103,
        -0.008659511804580688,
        -0.043874457478523254,
        -0.0009909986983984709,
        -0.028096158057451248,
        -0.015005350112915039,
        0.00854287575930357,
        -0.002834443934261799,
        0.08950760960578918,
        -0.010462919250130653,
        -0.024123502895236015,
        -0.0023845925461500883,
        -0.06118638440966606,
        0.007661213167011738,
        0.024072809144854546,
        -0.05599658936262131,
        -0.07759217917919159,
        -0.0662599429488182,
        -0.012770529836416245,
        0.02442828193306923,
        -0.06612600386142731,
        0.040240176022052765,
        -0.030196528881788254,
        -0.025153348222374916,
        0.04002729058265686,
        0.020198184996843338,
        -0.014314341358840466,
        -0.11903370916843414,
        0.0136422635987401,
        0.038032323122024536,
        -0.018386170268058777,
        -0.10754925012588501,
        0.05517294630408287,
        0.04136572405695915,
        -0.027307752519845963,
        0.0536525584757328,
        -0.029500775039196014,
        0.003129336517304182,
        0.00031522492645308375,
        -0.04183219000697136,
        0.004709900356829166,
        -0.008015856146812439,
        0.014861512929201126,
        -0.0569864921271801,
        0.0022546437103301287,
        0.01998017355799675,
        -0.02787250466644764,
        -0.06540187448263168,
        -0.04311448708176613,
        0.020031144842505455,
        0.005647857207804918,
        -0.06383536010980606,
        -0.04025479033589363,
        -0.005828303750604391,
        -0.08195731043815613,
        0.021932249888777733,
        -0.0024276224430650473,
        0.05060628801584244,
        -0.04896567389369011,
        0.012745878659188747,
        -0.02162552811205387
      ]
    },
    {
      "id": "1549aa6a",
      "filePath": "05-rag-codebase/src/types.ts",
      "content": "// 代码块：从源文件切分出来的最小单元\nexport interface CodeChunk {\n\tid: string;\n\tfilePath: string;      // 相对路径\n\tcontent: string;       // 代码内容\n\tstartLine: number;     // 起始行号\n\tendLine: number;       // 结束行号\n\ttype: 'function' | 'class' | 'other';  // 块类型\n\tname?: string;         // 函数/类名\n}\n\n// 带向量的代码块\nexport interface IndexedChunk extends CodeChunk {\n\tembedding: number[];\n}\n\n// 向量存储结构\nexport interface VectorStore {\n\tversion: string;\n\tcreatedAt: string;\n\tchunks: IndexedChunk[];\n}\n\n// 检索结果\nexport interface RetrievalResult {\n\tchunk: IndexedChunk;\n\tscore: number;         // 相似度分数\n}\n\n// Rerank 结果\nexport interface RerankResult {\n\tchunk: IndexedChunk;\n\trelevanceScore: number;  // LLM 打分 0-10\n\treason?: string;         // 打分理由\n}",
      "startLine": 1,
      "endLine": 36,
      "type": "other",
      "embedding": [
        -0.09240671247243881,
        0.04014946147799492,
        -0.0038626641035079956,
        0.06873263418674469,
        0.015044104307889938,
        0.09114037454128265,
        0.008060276508331299,
        0.05970532447099686,
        -0.011842461302876472,
        -0.017757099121809006,
        -0.008210746571421623,
        -0.005347842816263437,
        0.012338140979409218,
        -0.04479030892252922,
        0.026644427329301834,
        0.02611699141561985,
        -0.11928509175777435,
        0.025495585054159164,
        -0.03484877943992615,
        -0.0772181898355484,
        0.06772866100072861,
        0.03268088772892952,
        0.02829543873667717,
        -0.05594538524746895,
        -0.012662146240472794,
        0.041361093521118164,
        -0.025379572063684464,
        0.011540720239281654,
        0.05905080959200859,
        -0.018172606825828552,
        0.01589037850499153,
        0.07922030985355377,
        -0.003054260276257992,
        0.08943793177604675,
        -0.02530115470290184,
        0.09131159633398056,
        -0.02210480161011219,
        -0.04473281279206276,
        -0.0007519437349401414,
        0.0015063175233080983,
        -0.008472294546663761,
        0.09235288947820663,
        -0.00416102958843112,
        -0.07952709496021271,
        0.04796881228685379,
        -0.08773979544639587,
        -0.08070804923772812,
        -0.10778524726629257,
        -0.016412988305091858,
        0.010146561078727245,
        -0.11085523664951324,
        0.01612069457769394,
        -0.05871989578008652,
        -0.022587811574339867,
        0.10291654616594315,
        0.012263305485248566,
        -0.024135811254382133,
        -0.03483370691537857,
        0.014978398568928242,
        0.00634939968585968,
        0.02698071487247944,
        -0.047456659376621246,
        0.09792681783437729,
        -0.11551591753959656,
        -0.0150070209056139,
        -0.06555518507957458,
        -0.04050498083233833,
        0.12043863534927368,
        0.012764932587742805,
        -0.030545054003596306,
        -0.059455711394548416,
        0.04144241288304329,
        -0.027261847630143166,
        0.05363450199365616,
        -0.03927849605679512,
        -0.002830405021086335,
        -0.06840924173593521,
        -0.006192544475197792,
        0.03186127170920372,
        -0.03374829143285751,
        -0.06662648916244507,
        -0.004930978175252676,
        0.07567406445741653,
        0.05289089307188988,
        0.008970559574663639,
        0.06331240385770798,
        0.051572613418102264,
        -0.07915131747722626,
        -0.03360261023044586,
        0.05744675174355507,
        -0.005316838156431913,
        -0.023847894743084908,
        0.028613636270165443,
        0.061811111867427826,
        0.05752015486359596,
        0.03618418052792549,
        -0.0145206768065691,
        0.01773793250322342,
        -0.022582314908504486,
        0.06761085987091064,
        -0.0470229871571064,
        0.04844263568520546,
        0.011140173301100731,
        -0.029397400096058846,
        -0.08397487550973892,
        0.011264322325587273,
        0.033155933022499084,
        0.011249156668782234,
        -0.02864658087491989,
        -0.026551442220807076,
        -0.035716667771339417,
        0.032634250819683075,
        -0.07580499351024628,
        -0.10842353105545044,
        -0.07774737477302551,
        -0.05265400558710098,
        0.04471846669912338,
        -0.07231258600950241,
        0.03764081001281738,
        0.050486400723457336,
        0.11338300257921219,
        0.07811275124549866,
        -0.07042362540960312,
        0.019810110330581665,
        -0.01963023468852043,
        -0.012686473317444324,
        0.08968283981084824,
        2.650835453691255e-33,
        0.004329080227762461,
        -0.046377453953027725,
        -0.04652880132198334,
        0.04330665245652199,
        -0.011710931546986103,
        -0.11068641394376755,
        -0.0036847717128694057,
        0.02832556888461113,
        -0.12066885083913803,
        0.02596643939614296,
        -0.04645615443587303,
        0.02745114080607891,
        -0.09655340760946274,
        0.027916690334677696,
        -0.010119210928678513,
        -0.06545387208461761,
        0.02281961776316166,
        -0.03604935109615326,
        -0.00702989287674427,
        -0.0006916340789757669,
        0.011605722829699516,
        -0.006755659822374582,
        0.007607138715684414,
        -0.0002105594758177176,
        0.024892907589673996,
        0.07275064289569855,
        0.039830178022384644,
        -0.05713561549782753,
        -0.04599738493561745,
        -0.011485311202704906,
        0.09818669408559799,
        -0.09099294990301132,
        0.033721283078193665,
        -0.04862241446971893,
        0.012888426892459393,
        -0.012283417396247387,
        0.009036087431013584,
        0.04932422563433647,
        -0.1398233026266098,
        0.019473738968372345,
        0.035082392394542694,
        -0.02138732559978962,
        -0.04744088649749756,
        -0.009631112217903137,
        0.04462943226099014,
        0.022520147264003754,
        0.012718386016786098,
        0.016368331387639046,
        0.02371971122920513,
        -0.0418902151286602,
        -0.029753049835562706,
        0.10205863416194916,
        0.010185840539634228,
        0.0026326184161007404,
        0.0444815531373024,
        -0.009496358223259449,
        -0.004652136005461216,
        0.028560694307088852,
        -0.009903076104819775,
        -0.02261359989643097,
        -0.05474391579627991,
        0.018109364435076714,
        0.008890651166439056,
        0.06162380799651146,
        0.01044677384197712,
        0.018345549702644348,
        0.05392049625515938,
        -0.022469693794846535,
        0.04076406732201576,
        -0.0330548994243145,
        -0.007287132553756237,
        -0.010933243669569492,
        0.003787364810705185,
        0.023848656564950943,
        0.010807415470480919,
        -0.05330926179885864,
        -0.08344137668609619,
        -0.03254444897174835,
        0.03861677646636963,
        -0.11185172200202942,
        -0.05312573164701462,
        -0.1344068944454193,
        -0.012334580533206463,
        -0.029613373801112175,
        0.04460097476840019,
        0.015028458088636398,
        0.0048471069894731045,
        -0.07702114433050156,
        0.05473465099930763,
        -0.02504771761596203,
        -0.0631456971168518,
        -0.0018476444529369473,
        -0.035047512501478195,
        -0.12578758597373962,
        0.0007177538354881108,
        -4.743892225761611e-33,
        0.13575837016105652,
        0.020183509215712547,
        -0.059200432151556015,
        -0.05010131374001503,
        -0.005343208089470863,
        0.011974679306149483,
        0.07012130320072174,
        0.05519035458564758,
        -0.054728664457798004,
        0.07921790331602097,
        -0.06316616386175156,
        -0.005340633913874626,
        0.04349657520651817,
        -0.03885706141591072,
        -0.0014166575856506824,
        0.05384817719459534,
        -0.06286437064409256,
        -0.010477784089744091,
        -0.00047914168681018054,
        0.008468279615044594,
        -0.029096694663167,
        0.0711384043097496,
        0.0043397461995482445,
        0.05180066451430321,
        -0.030276453122496605,
        0.08806537091732025,
        0.07324244827032089,
        0.05739966407418251,
        -0.008988874964416027,
        -0.03676276654005051,
        0.06242518126964569,
        -0.07472001761198044,
        -0.029181528836488724,
        0.021849049255251884,
        -0.01468028873205185,
        -0.016770856454968452,
        0.026301657781004906,
        0.007044400088489056,
        -0.04930856078863144,
        0.060757704079151154,
        -0.010884852148592472,
        -0.013790431432425976,
        -0.07205244898796082,
        -0.005163318011909723,
        -0.018043071031570435,
        -0.063292495906353,
        -0.02531798742711544,
        0.06623821705579758,
        -0.027399657294154167,
        -0.10166893154382706,
        0.025026043877005577,
        0.0005949633778072894,
        -0.038595106452703476,
        -0.0855507031083107,
        0.01617739349603653,
        -0.01870287023484707,
        -0.030410241335630417,
        -0.05665536969900131,
        -0.048295795917510986,
        0.007399033289402723,
        0.03085337206721306,
        -0.04494951665401459,
        -0.0035630285274237394,
        -0.0011286067310720682,
        0.07032017409801483,
        -0.09765966981649399,
        -0.0393403060734272,
        -0.07221724838018417,
        -0.07120317220687866,
        -0.04948067292571068,
        0.00507627846673131,
        0.04178125038743019,
        0.07363368570804596,
        -0.03463632985949516,
        0.04130198806524277,
        0.03158213198184967,
        0.03801138699054718,
        0.09239034354686737,
        0.10028182715177536,
        0.012639068998396397,
        -0.011231468990445137,
        -0.003952807281166315,
        0.07299171388149261,
        0.007839172147214413,
        -0.02429400384426117,
        -0.0033190050162374973,
        0.020888904109597206,
        0.14441782236099243,
        0.017717011272907257,
        -0.0402161069214344,
        -0.06897781044244766,
        -0.029826931655406952,
        0.004926004912704229,
        0.0023403242230415344,
        0.028654344379901886,
        -5.549134840521219e-8,
        -0.11101346462965012,
        -0.044271018356084824,
        -0.10657525062561035,
        0.01908656395971775,
        -0.04594475030899048,
        0.004905664827674627,
        -0.07684844732284546,
        0.04491335526108742,
        -0.02119848132133484,
        -0.03926616534590721,
        0.008061300963163376,
        0.03739968314766884,
        -0.14247770607471466,
        0.02605738677084446,
        0.04689648002386093,
        -0.08772352337837219,
        0.0027827415615320206,
        0.06752590835094452,
        -0.018969668075442314,
        -0.029646318405866623,
        -0.017510712146759033,
        0.06227880343794823,
        0.015612279064953327,
        -0.03161973878741264,
        0.026721317321062088,
        -0.028400901705026627,
        -0.020574694499373436,
        0.02639835886657238,
        0.019799666479229927,
        0.044126275926828384,
        0.06509365886449814,
        0.038404639810323715,
        0.04683716967701912,
        -0.037757206708192825,
        -0.011966588906943798,
        -0.01778455078601837,
        0.09411220252513885,
        -0.03208138793706894,
        -0.0033788285218179226,
        0.026397012174129486,
        0.1008945032954216,
        -0.02234429121017456,
        -0.034045979380607605,
        -0.005204598419368267,
        0.04193178936839104,
        -0.056041352450847626,
        0.010634440928697586,
        -0.01430326048284769,
        0.10133440047502518,
        0.025228189304471016,
        -0.02132043056190014,
        -0.08476989716291428,
        -0.10240095853805542,
        -0.002809371566399932,
        -0.024391110986471176,
        -0.013233993202447891,
        -0.022876104339957237,
        0.02078523114323616,
        0.00864739716053009,
        -0.007622999604791403,
        0.033864960074424744,
        -0.01769915409386158,
        0.047728702425956726,
        0.02470969781279564
      ]
    },
    {
      "id": "d030d2c6",
      "filePath": "05-rag-codebase/src/store.ts",
      "content": "// store.ts - 向量存储\n// 职责：保存和加载向量索引，使用本地 JSON 文件\n\nimport { readFileSync, writeFileSync, existsSync, mkdirSync } from 'fs';\nimport { dirname } from 'path';\nimport type { IndexedChunk, VectorStore } from './types.js';\n\nconst STORE_VERSION = '1.0';\n\n/**\n * 保存向量索引到文件\n */",
      "startLine": 1,
      "endLine": 12,
      "type": "other",
      "embedding": [
        -0.09919744729995728,
        0.0832175612449646,
        -0.022905681282281876,
        0.02459103800356388,
        -0.03504766523838043,
        0.04498670622706413,
        0.015844831243157387,
        0.02590133808553219,
        0.019239962100982666,
        0.054954297840595245,
        0.0495699942111969,
        0.0561603344976902,
        -0.05417193844914436,
        -0.0453026108443737,
        -0.0395943820476532,
        0.029205048456788063,
        -0.11138308793306351,
        0.09967086464166641,
        -0.01019511092454195,
        -0.02625860832631588,
        -0.032411765307188034,
        -8.001724722817016e-7,
        0.054680269211530685,
        -0.03213959559798241,
        0.032928213477134705,
        0.01694101095199585,
        -0.03279316797852516,
        -0.035965174436569214,
        0.05341107025742531,
        0.03147673234343529,
        0.01852521300315857,
        0.04320104420185089,
        0.008006391115486622,
        0.046195920556783676,
        0.06299033015966415,
        0.11016391217708588,
        -0.012057489715516567,
        -0.05351198464632034,
        -0.013322573155164719,
        0.002211406361311674,
        0.09217189252376556,
        0.14386804401874542,
        -0.046741973608732224,
        -0.04118473082780838,
        -0.018938928842544556,
        -0.06021346151828766,
        -0.057593658566474915,
        0.0038566740695387125,
        -0.05893543362617493,
        0.01473657414317131,
        -0.08781730383634567,
        0.023119905963540077,
        -0.08175165951251984,
        -0.06397190690040588,
        0.012788373045623302,
        0.007326167542487383,
        0.025582127273082733,
        0.06533109396696091,
        0.04729178920388222,
        0.013376569375395775,
        0.05924633517861366,
        -0.017498290166258812,
        0.037949126213788986,
        -0.07507913559675217,
        0.03447292372584343,
        0.03047863207757473,
        -0.014352964237332344,
        0.13465984165668488,
        0.028945889323949814,
        -0.06055035442113876,
        -0.022116055712103844,
        0.04636808857321739,
        -0.07091931253671646,
        0.03634440898895264,
        -0.0490865521132946,
        -0.028977617621421814,
        -0.024796349927783012,
        0.03532523289322853,
        0.019799191504716873,
        -0.08595534414052963,
        0.003304764861240983,
        -0.09862082451581955,
        0.07782623916864395,
        0.012127182446420193,
        -0.043313849717378616,
        0.05068757012486458,
        0.036995261907577515,
        -0.05925934761762619,
        0.048820242285728455,
        -0.01811528392136097,
        -0.0035541888792067766,
        -0.01483212225139141,
        0.02354739047586918,
        -0.009447882883250713,
        -0.0019196225330233574,
        0.022389866411685944,
        0.02414795197546482,
        0.1337796300649643,
        -0.03399519994854927,
        -0.0002815568295773119,
        -0.0023493494372814894,
        -0.03256833180785179,
        0.049426767975091934,
        0.03541446477174759,
        -0.05018586665391922,
        -0.06430399417877197,
        -0.012305566109716892,
        -0.06643828004598618,
        -0.03135807812213898,
        -0.024840746074914932,
        -0.04206382855772972,
        0.10168115794658661,
        -0.06826750934123993,
        -0.06559126079082489,
        -0.06704971194267273,
        -0.03285912796854973,
        -0.03674642741680145,
        -0.052866820245981216,
        0.055295515805482864,
        0.07251735776662827,
        0.08857326954603195,
        -0.007036734372377396,
        -0.020695816725492477,
        0.02520495466887951,
        -0.08383145183324814,
        -0.07528651505708694,
        0.1099616065621376,
        5.1395272573919145e-33,
        -0.08738361299037933,
        -0.0006247078999876976,
        0.017731472849845886,
        0.06989198178052902,
        0.014844024553894997,
        -0.14749296009540558,
        0.039823710918426514,
        -0.037296995520591736,
        -0.13810774683952332,
        0.03802071139216423,
        -0.09862881153821945,
        0.012111512012779713,
        -0.08829429745674133,
        0.005692736711353064,
        -0.024824973195791245,
        -0.04490796849131584,
        0.01876455545425415,
        -0.04950213059782982,
        0.07708536833524704,
        0.012770552188158035,
        0.06158556789159775,
        0.01986144296824932,
        -0.015711650252342224,
        0.003925777040421963,
        -0.04285020753741264,
        -0.04213080182671547,
        0.03454045206308365,
        -0.03970552235841751,
        0.04302346706390381,
        0.011290489695966244,
        0.099269337952137,
        -0.010129650123417377,
        0.03629596158862114,
        0.041964322328567505,
        0.0033755898475646973,
        0.008674989454448223,
        0.006821153219789267,
        0.013046217150986195,
        -0.10196332633495331,
        -0.007389943581074476,
        0.04205698519945145,
        -0.0027069621719419956,
        -0.059752706438302994,
        0.026280418038368225,
        0.039214082062244415,
        0.03765709698200226,
        -0.035507746040821075,
        -0.07527794688940048,
        0.04970434308052063,
        0.05101977661252022,
        -0.09181059896945953,
        0.12350184470415115,
        -0.07390224933624268,
        0.041210610419511795,
        0.07349058240652084,
        -0.03510376811027527,
        0.010433436371386051,
        -0.050828367471694946,
        0.032247766852378845,
        -0.027343904599547386,
        0.06653537601232529,
        0.03033342957496643,
        0.008320934139192104,
        0.014101277105510235,
        0.042250312864780426,
        -0.07714744657278061,
        -0.024414798244833946,
        -0.04127588868141174,
        -0.00858326070010662,
        -0.0020173112861812115,
        -0.04751397296786308,
        0.012125923298299313,
        0.05915502458810806,
        0.011801712214946747,
        0.015072117559611797,
        -0.010962052270770073,
        -0.07479111105203629,
        0.026263847947120667,
        -0.040156543254852295,
        -0.12902112305164337,
        -0.003913452848792076,
        -0.10702291876077652,
        -0.014823476783931255,
        0.045920781791210175,
        0.04139161482453346,
        -0.019655263051390648,
        -0.06812021881341934,
        -0.011530560441315174,
        0.05497812479734421,
        -0.01636294089257717,
        0.011019127443432808,
        -0.03423042595386505,
        -0.02811720222234726,
        -0.05745766684412956,
        -0.0435316227376461,
        -7.56514515663432e-33,
        0.09891925752162933,
        -0.0724470466375351,
        -0.05598733574151993,
        -0.020358286798000336,
        -0.1012999638915062,
        -0.03511293977499008,
        -0.017083603888750076,
        0.024007733911275864,
        -0.010995583608746529,
        0.04499654099345207,
        -0.051690518856048584,
        0.0032385867089033127,
        0.09854650497436523,
        0.031454671174287796,
        0.05064953863620758,
        0.06287930905818939,
        0.05433966964483261,
        -0.04264163225889206,
        -0.021325983107089996,
        0.0077642761170864105,
        -0.011843577027320862,
        -0.048558227717876434,
        0.007064471021294594,
        0.12873993813991547,
        -0.025969430804252625,
        0.004159875214099884,
        0.050034940242767334,
        0.0049463058821856976,
        -0.04597955569624901,
        -0.06280262768268585,
        -0.02942666970193386,
        -0.011229932308197021,
        -0.028468532487750053,
        0.06728965044021606,
        -0.08368652313947678,
        -0.10664669424295425,
        0.024214614182710648,
        -0.010661383159458637,
        -0.05145478993654251,
        -0.025032121688127518,
        -0.025474857538938522,
        0.023280838504433632,
        -0.08198855072259903,
        -0.01993713341653347,
        0.05163699761033058,
        -0.04426930099725723,
        0.02047567442059517,
        0.04535064473748207,
        0.008663138374686241,
        -0.0816640555858612,
        0.04501429200172424,
        -0.03340954706072807,
        0.002165107987821102,
        -0.12008581310510635,
        0.017248714342713356,
        0.018519114702939987,
        0.016369283199310303,
        -0.08875737339258194,
        -0.003331477753818035,
        -0.008831918239593506,
        0.04359962046146393,
        -0.02866099402308464,
        -0.02880050428211689,
        -0.0745776891708374,
        -0.004336988087743521,
        -0.06272109597921371,
        -0.05098230391740799,
        0.043446388095617294,
        -0.01779933087527752,
        -0.06830912083387375,
        0.020925628021359444,
        -0.010257907211780548,
        0.038368623703718185,
        -0.007344668265432119,
        -0.01418544352054596,
        0.00048629051889292896,
        0.026168333366513252,
        0.005875099916011095,
        0.08453454822301865,
        0.00044352293480187654,
        -0.03844330459833145,
        0.08962972462177277,
        0.04887353628873825,
        0.05093034356832504,
        -0.0022220504470169544,
        0.016948670148849487,
        -0.05570017173886299,
        0.008399547077715397,
        0.011998803354799747,
        -0.04005540907382965,
        -0.02093622460961342,
        0.046794045716524124,
        -0.04479748383164406,
        0.0059629096649587154,
        0.0595250278711319,
        -5.178983641940249e-8,
        -0.11420360207557678,
        -0.025761112570762634,
        -0.14038899540901184,
        -0.0062154438346624374,
        -0.024497684091329575,
        -0.03292879834771156,
        -0.01675058901309967,
        0.019078446552157402,
        0.03955401852726936,
        -0.02576555125415325,
        0.005060537718236446,
        -0.013644888997077942,
        -0.0970984548330307,
        0.03202752023935318,
        -0.0555880144238472,
        -0.03973447531461716,
        -0.011759359389543533,
        0.08150589466094971,
        -0.0017837780760601163,
        0.008284235373139381,
        0.004516967572271824,
        0.068267323076725,
        0.10986240953207016,
        -0.007548303809016943,
        0.01252009253948927,
        -0.0027438695542514324,
        0.053258657455444336,
        -0.01361166313290596,
        0.06962356716394424,
        -0.010684743523597717,
        -0.03104163520038128,
        0.0017800434725359082,
        0.030866557732224464,
        -0.03481743857264519,
        -0.022310640662908554,
        0.021091358736157417,
        0.1001451313495636,
        0.029863422736525536,
        0.055177606642246246,
        0.01474670972675085,
        0.04079855605959892,
        -0.0023336252197623253,
        -0.004075524862855673,
        0.0222761370241642,
        0.03283542022109032,
        -0.03346070647239685,
        0.0001242278522113338,
        0.021256759762763977,
        0.06551635265350342,
        0.00801817700266838,
        -0.016744842752814293,
        -0.014919526875019073,
        -0.09040284156799316,
        0.1043180301785469,
        -0.005692580249160528,
        -0.034246720373630524,
        -0.08694951981306076,
        -0.024359392002224922,
        -0.003786997403949499,
        -0.0438542515039444,
        0.0005025945720262825,
        -0.020726807415485382,
        0.015263634733855724,
        0.022976458072662354
      ]
    },
    {
      "id": "83739353",
      "filePath": "05-rag-codebase/src/store.ts",
      "content": "export function saveStore(chunks: IndexedChunk[], filePath: string): void {\n\tconst store: VectorStore = {\n\t\tversion: STORE_VERSION,\n\t\tcreatedAt: new Date().toISOString(),\n\t\tchunks,\n\t};\n\n\t// 确保目录存在\n\tconst dir = dirname(filePath);\n\tif (!existsSync(dir)) {\n\t\tmkdirSync(dir, { recursive: true });\n\t}\n\n\twriteFileSync(filePath, JSON.stringify(store, null, 2), 'utf-8');\n\tconsole.log(`[store] 保存了 ${chunks.length} 个 chunks 到 ${filePath}`);\n}\n\n/**\n * 从文件加载向量索引\n */",
      "startLine": 13,
      "endLine": 32,
      "type": "function",
      "name": "saveStore",
      "embedding": [
        -0.06938664615154266,
        0.05900620296597481,
        -0.015622214414179325,
        0.03642340749502182,
        -0.01563323102891445,
        0.02562933973968029,
        0.0026517396327108145,
        0.050126392394304276,
        0.041273728013038635,
        0.035406459122896194,
        0.04395122826099396,
        0.01506079826503992,
        -0.04929913207888603,
        -0.046569351106882095,
        -0.03670133650302887,
        0.011901358142495155,
        -0.1539536714553833,
        0.08537501096725464,
        -0.07583564519882202,
        -0.047739479690790176,
        0.011635948903858662,
        -0.012185432948172092,
        0.03487654775381088,
        -0.012415485456585884,
        0.09741387516260147,
        0.05215109512209892,
        -0.011361551471054554,
        -0.04059207811951637,
        0.049878545105457306,
        0.035449471324682236,
        0.04122551530599594,
        -0.017997313290834427,
        0.03240162134170532,
        0.016663305461406708,
        0.0776667520403862,
        0.14558115601539612,
        -0.026236552745103836,
        -0.04934953153133392,
        -0.008211811073124409,
        -0.03450192138552666,
        0.038171906024217606,
        0.1272386908531189,
        -0.05190207436680794,
        -0.020144091919064522,
        0.0055627175606787205,
        0.01424651313573122,
        -0.023197293281555176,
        0.02052992396056652,
        -0.05341847240924835,
        0.029956519603729248,
        -0.05675622075796127,
        0.06265449523925781,
        -0.09525040537118912,
        0.0034130034036934376,
        0.04961743205785751,
        -0.005816474091261625,
        0.00695247994735837,
        0.012445122003555298,
        -0.01999654807150364,
        0.05941042676568031,
        0.016045870259404182,
        -0.041321951895952225,
        0.014272642321884632,
        -0.09702380746603012,
        0.05109689012169838,
        0.029172707349061966,
        -0.005290839355438948,
        0.11124460399150848,
        0.00838177278637886,
        -0.031165793538093567,
        -0.03944907709956169,
        0.0885365754365921,
        -0.10969529300928116,
        0.05174217373132706,
        -0.04610106348991394,
        0.022645920515060425,
        0.03151470050215721,
        0.02669721469283104,
        -0.03805426508188248,
        -0.04524165764451027,
        -0.005940220318734646,
        -0.06923099607229233,
        0.050880737602710724,
        -0.05388113483786583,
        -0.050001874566078186,
        0.04325685650110245,
        0.032568905502557755,
        -0.004601683001965284,
        -0.024394704028964043,
        -0.03465503826737404,
        -0.03553377091884613,
        -0.02033892832696438,
        0.06314487755298615,
        -0.016392184421420097,
        -0.021981164813041687,
        0.010825907811522484,
        0.05499361827969551,
        0.11667740345001221,
        -0.0012221679789945483,
        0.007685836870223284,
        0.021076608449220657,
        0.03698888048529625,
        0.0668599009513855,
        -0.008372007869184017,
        -0.05541617050766945,
        -0.07589813321828842,
        0.020036257803440094,
        -0.018925795331597328,
        0.0017578894039615989,
        0.009676220826804638,
        -0.012712176889181137,
        0.12583987414836884,
        -0.03365657478570938,
        -0.01414214726537466,
        -0.03677016869187355,
        -0.03507483750581741,
        -0.05275987833738327,
        -0.053576793521642685,
        0.04732189327478409,
        0.116529680788517,
        0.10294672101736069,
        -0.003911217208951712,
        -0.02246137522161007,
        0.05363574996590614,
        -0.052889104932546616,
        -0.05122855305671692,
        0.1358422040939331,
        5.736391493519639e-33,
        -0.04920507222414017,
        0.0026980203110724688,
        0.03706225007772446,
        0.044232938438653946,
        0.0033553405664861202,
        -0.09162010997533798,
        0.020671984180808067,
        -0.03061935119330883,
        -0.0920165553689003,
        0.012713329866528511,
        -0.10900437086820602,
        -0.011482669971883297,
        -0.0686073899269104,
        0.004352262709289789,
        -0.011945816688239574,
        -0.05587957054376602,
        0.014778160490095615,
        -0.046234142035245895,
        0.062218330800533295,
        0.03841433674097061,
        0.029101986438035965,
        0.018032651394605637,
        0.01608230359852314,
        -0.01156677957624197,
        -0.05115841329097748,
        -0.09488797187805176,
        0.04086395353078842,
        -0.05106639489531517,
        0.03403439745306969,
        -0.00982726737856865,
        0.04948220029473305,
        -0.025762934237718582,
        0.0263663362711668,
        0.0312529131770134,
        0.01796594262123108,
        -0.0010668450267985463,
        -0.014138851314783096,
        0.016971217468380928,
        -0.1340339332818985,
        -0.0069746654480695724,
        0.053772762417793274,
        0.003088149707764387,
        -0.039096396416425705,
        0.07855094224214554,
        0.0014657998690381646,
        -0.011363591998815536,
        -0.06536974012851715,
        -0.09515484422445297,
        -0.01276281289756298,
        0.027468184009194374,
        -0.05328058451414108,
        0.12377135455608368,
        -0.003351594554260373,
        0.038429245352745056,
        0.06284528225660324,
        -0.05801589414477348,
        0.03185573220252991,
        -0.09826815873384476,
        0.0179457888007164,
        -0.009807812049984932,
        0.05788054317235947,
        0.05943407490849495,
        0.054389435797929764,
        0.06743356585502625,
        0.0008130860514938831,
        -0.06454204022884369,
        0.014557245187461376,
        -0.008178242482244968,
        0.009754486382007599,
        -0.002043043961748481,
        -0.02649594098329544,
        -0.012077482417225838,
        0.049161795526742935,
        -0.052309513092041016,
        -0.009273706935346127,
        -0.02407800406217575,
        -0.06419821083545685,
        0.008109409362077713,
        -0.0562165342271328,
        -0.15993855893611908,
        -0.012389160692691803,
        -0.10134691745042801,
        -0.001881712581962347,
        -0.0011614057002589107,
        0.01207942795008421,
        -0.02167850360274315,
        -0.023480428382754326,
        -0.06535256654024124,
        0.04038573056459427,
        -0.04468713700771332,
        -0.006947942078113556,
        -0.019677862524986267,
        0.007146310526877642,
        -0.07558322697877884,
        -0.012884286232292652,
        -6.862369246839492e-33,
        0.1406099945306778,
        -0.04613916575908661,
        -0.0009110021637752652,
        0.0019683337304741144,
        -0.08730154484510422,
        -0.022715598344802856,
        0.008516172878444195,
        0.1140766441822052,
        -0.04259345680475235,
        0.031525880098342896,
        -0.1101636067032814,
        0.002622877014800906,
        0.04331614077091217,
        0.025519758462905884,
        0.012170981615781784,
        0.013872910290956497,
        0.06680478900671005,
        -0.0284953061491251,
        0.038459815084934235,
        -0.012106240727007389,
        -0.002309491392225027,
        -0.054435599595308304,
        0.03100917860865593,
        0.12425710260868073,
        -0.018916981294751167,
        0.02292020618915558,
        0.05995805189013481,
        -0.013050752691924572,
        -0.04421258717775345,
        -0.06772471964359283,
        -0.030377225950360298,
        -0.002942194463685155,
        -0.004271944984793663,
        0.006891016848385334,
        -0.052097100764513016,
        -0.10458172857761383,
        0.026678195223212242,
        0.018918775022029877,
        0.004373008850961924,
        0.03222886100411415,
        -0.03946844860911369,
        0.032149314880371094,
        -0.05403084307909012,
        -0.004640913102775812,
        0.047407131642103195,
        -0.04119253158569336,
        0.043546367436647415,
        0.08903981745243073,
        0.005408048629760742,
        -0.05768121778964996,
        0.06895620375871658,
        -0.05378234013915062,
        -0.052058786153793335,
        -0.10354289412498474,
        0.04432404413819313,
        -0.0024141648318618536,
        -0.03381835296750069,
        -0.09856411069631577,
        -0.007350661791861057,
        -0.024901002645492554,
        -0.040910664945840836,
        -0.05313481390476227,
        0.0023309714160859585,
        -0.11586446315050125,
        -0.003250367008149624,
        -0.05166337266564369,
        0.0012468320783227682,
        0.01503567211329937,
        -0.005703013390302658,
        -0.027803100645542145,
        0.005461222492158413,
        0.009463130496442318,
        0.023745929822325706,
        0.019594447687268257,
        -0.02106204256415367,
        -0.010286004282534122,
        -0.04122268408536911,
        -0.050708651542663574,
        0.06303627043962479,
        0.015253332443535328,
        -0.049009814858436584,
        0.06177902594208717,
        0.02078905515372753,
        0.03803043067455292,
        0.04829513654112816,
        -0.024443790316581726,
        -0.0573224239051342,
        0.023878764361143112,
        0.002204879419878125,
        -0.0626298263669014,
        0.0018808774184435606,
        0.0792766585946083,
        -0.0226284209638834,
        0.014541521668434143,
        0.07317087799310684,
        -5.1966228653554936e-8,
        -0.07403384894132614,
        -0.036816950887441635,
        -0.1476907879114151,
        0.03232554718852043,
        -0.007932771928608418,
        -0.0726839229464531,
        0.004991658963263035,
        -0.02208651788532734,
        0.06586379557847977,
        -0.03525761142373085,
        0.03245868161320686,
        -0.004027145449072123,
        -0.1470833271741867,
        -0.013307121582329273,
        -0.07442391663789749,
        -0.020544148981571198,
        0.02816862240433693,
        0.03446342796087265,
        0.0029634300153702497,
        0.0209286417812109,
        0.02313961461186409,
        0.05519409477710724,
        0.07513993978500366,
        -0.02874426171183586,
        -0.0015966048231348395,
        -0.04259758070111275,
        0.0605258010327816,
        0.05575505644083023,
        0.03079007938504219,
        -0.05036386847496033,
        0.04242900758981705,
        0.019089531153440475,
        0.03352708742022514,
        -0.019223369657993317,
        -0.04363596811890602,
        -0.011382445693016052,
        0.08403334766626358,
        0.033235128968954086,
        0.07492997497320175,
        0.012108663097023964,
        0.07612597197294235,
        0.004784413613379002,
        -0.0083111971616745,
        0.014516339637339115,
        -0.030340448021888733,
        -0.07768668234348297,
        -0.029858635738492012,
        0.053022600710392,
        0.06734238564968109,
        -0.0015339783858507872,
        0.011967808939516544,
        -0.022106941789388657,
        -0.04597651585936546,
        0.08774451166391373,
        0.044722095131874084,
        -0.07473593205213547,
        -0.059936318546533585,
        0.01001251395791769,
        0.0371563658118248,
        -0.009862959384918213,
        0.03168346732854843,
        -0.005576661787927151,
        0.020073117688298225,
        0.006441864650696516
      ]
    },
    {
      "id": "878615e6",
      "filePath": "05-rag-codebase/src/store.ts",
      "content": "export function loadStore(filePath: string): VectorStore | null {\n\tif (!existsSync(filePath)) {\n\t\tconsole.log(`[store] 索引文件不存在: ${filePath}`);\n\t\treturn null;\n\t}\n\n\ttry {\n\t\tconst content = readFileSync(filePath, 'utf-8');\n\t\tconst store = JSON.parse(content) as VectorStore;\n\n\t\t// 版本检查\n\t\tif (store.version !== STORE_VERSION) {\n\t\t\tconsole.log(`[store] 索引版本不匹配 (${store.version} vs ${STORE_VERSION})，需要重建`);\n\t\t\treturn null;\n\t\t}\n\n\t\tconsole.log(`[store] 加载了 ${store.chunks.length} 个 chunks (创建于 ${store.createdAt})`);\n\t\treturn store;\n\t} catch (error) {\n\t\tconsole.error(`[store] 加载索引失败:`, error);\n\t\treturn null;\n\t}\n}",
      "startLine": 33,
      "endLine": 56,
      "type": "function",
      "name": "loadStore",
      "embedding": [
        -0.07545307278633118,
        0.05071491748094559,
        0.011296214535832405,
        0.0026730757672339678,
        0.019967781379818916,
        0.014339104294776917,
        -0.017027385532855988,
        0.038237642496824265,
        0.025523824617266655,
        0.015173718333244324,
        0.044501759111881256,
        0.0016090343706309795,
        -0.04457195848226547,
        -0.0010651479242369533,
        0.07011331617832184,
        0.026201417669653893,
        -0.1262287199497223,
        0.06086612492799759,
        -0.06176472455263138,
        -0.05181223526597023,
        0.010565436445176601,
        -0.02109500579535961,
        0.004386143758893013,
        -0.01017091702669859,
        0.043976690620183945,
        0.001717140432447195,
        -0.019900325685739517,
        -0.03580973297357559,
        0.037282492965459824,
        0.025545824319124222,
        -0.0011881026439368725,
        -0.013272535987198353,
        -0.030796583741903305,
        0.00974565651267767,
        0.07740730047225952,
        0.09495630860328674,
        -0.016276242211461067,
        -0.07921231538057327,
        0.007704186253249645,
        -0.032960228621959686,
        0.052393969148397446,
        0.14453651010990143,
        -0.06264951825141907,
        -0.02534310892224312,
        0.04417070373892784,
        -0.0011395990150049329,
        -0.03951358422636986,
        0.017154963687062263,
        -0.04086219519376755,
        0.026514781638979912,
        -0.027129825204610825,
        0.059954334050416946,
        -0.05936143919825554,
        -0.003488456131890416,
        0.04677687585353851,
        0.0007593538612127304,
        -0.0074675558134913445,
        0.02642163820564747,
        0.00003583857323974371,
        0.046815089881420135,
        -0.006187039893120527,
        -0.05509786307811737,
        0.022887684404850006,
        -0.09438344091176987,
        0.06391112506389618,
        0.009624021127820015,
        -0.016170009970664978,
        0.1087014377117157,
        -0.008859769441187382,
        -0.032006654888391495,
        -0.04654474928975105,
        0.027875369414687157,
        -0.04889190196990967,
        0.049287669360637665,
        -0.06758669018745422,
        -0.01260125171393156,
        0.00017403186939191073,
        -0.009567715227603912,
        -0.04877496883273125,
        -0.010738234966993332,
        -0.051039401441812515,
        -0.09518489986658096,
        0.03773244842886925,
        -0.050474971532821655,
        -0.05126561224460602,
        0.06253192573785782,
        0.007930932566523552,
        -0.015094985254108906,
        -0.008135981857776642,
        -0.009613171219825745,
        -0.033800337463617325,
        -0.014136532321572304,
        0.07952775806188583,
        0.025465354323387146,
        0.024274731054902077,
        0.0394253246486187,
        0.035542409867048264,
        0.07695130258798599,
        -0.0008577746921218932,
        0.04510295018553734,
        -0.0046649049036204815,
        0.03746616095304489,
        0.10841083526611328,
        -0.029070526361465454,
        -0.03284066915512085,
        -0.07996037602424622,
        0.013448200188577175,
        -0.0014351906720548868,
        -0.024980565533041954,
        -0.009867867454886436,
        -0.004725304897874594,
        0.10920103639364243,
        -0.03197743743658066,
        -0.03309892117977142,
        -0.06186781823635101,
        -0.020250439643859863,
        0.008818146772682667,
        -0.047441210597753525,
        0.0011496322695165873,
        0.07620631903409958,
        0.12644216418266296,
        -0.00582680432125926,
        -0.0074687316082417965,
        0.05931434407830238,
        -0.025577222928404808,
        -0.055795103311538696,
        0.16013257205486298,
        6.067239154004372e-33,
        -0.056216560304164886,
        -0.01094320323318243,
        0.033067937940359116,
        0.029000362381339073,
        -0.034160204231739044,
        -0.08213052898645401,
        0.03263963758945465,
        -0.01971910335123539,
        -0.127964586019516,
        0.015806499868631363,
        -0.09129048883914948,
        0.04525574669241905,
        -0.09345779567956924,
        0.01873275823891163,
        -0.005786363501101732,
        0.02560444176197052,
        0.027179034426808357,
        -0.06344318389892578,
        0.11575227230787277,
        0.03495068475604057,
        0.032270025461912155,
        -0.03126375377178192,
        0.014703814871609211,
        -0.013274557888507843,
        -0.030617348849773407,
        -0.06512869894504547,
        0.01842385344207287,
        -0.0037788422778248787,
        0.009153512306511402,
        -0.030015360563993454,
        0.08250952512025833,
        -0.02873113565146923,
        0.0406283475458622,
        0.025784283876419067,
        0.02538885362446308,
        -0.043641433119773865,
        0.009372890926897526,
        0.004130489192903042,
        -0.15041711926460266,
        -0.03009253367781639,
        0.061003804206848145,
        -0.0013768973294645548,
        -0.016535386443138123,
        0.08867524564266205,
        0.0008043949492275715,
        -0.017398856580257416,
        -0.04695134982466698,
        -0.08466505259275436,
        -0.006011004559695721,
        -0.011756458319723606,
        -0.04286574944853783,
        0.14037133753299713,
        -0.028061049059033394,
        0.033202163875103,
        0.08713392913341522,
        -0.07747088372707367,
        0.02745627425611019,
        -0.0993252545595169,
        0.02500547096133232,
        -0.028628308326005936,
        0.08599414676427841,
        -0.007289152126759291,
        0.038787223398685455,
        0.06298559904098511,
        0.04094872623682022,
        -0.025914080440998077,
        -0.02658824995160103,
        -0.012538384646177292,
        0.001345666591078043,
        -0.051605474203825,
        -0.015063590370118618,
        -0.04188032075762749,
        0.04545058682560921,
        -0.045791950076818466,
        0.021929556503891945,
        -0.036616094410419464,
        -0.0694933533668518,
        0.027622206136584282,
        -0.01820654608309269,
        -0.1389586627483368,
        -0.008350631222128868,
        -0.09298400580883026,
        -0.005645045544952154,
        0.07195480912923813,
        -0.06121940538287163,
        0.06859038025140762,
        0.020404750481247902,
        -0.0987725630402565,
        0.07120569795370102,
        -0.004108825698494911,
        -0.04779477044939995,
        -0.0148035679012537,
        -0.028452225029468536,
        -0.055661216378211975,
        0.022998346015810966,
        -6.337472815630938e-33,
        0.10482889413833618,
        -0.055845268070697784,
        -0.02290327288210392,
        -0.006857295520603657,
        -0.08098126947879791,
        -0.0606992281973362,
        0.015456256456673145,
        0.10559391230344772,
        0.008284448646008968,
        0.01972200535237789,
        -0.045699167996644974,
        -0.013779162429273129,
        0.02143773064017296,
        0.04915571212768555,
        -0.009048704989254475,
        0.05281428247690201,
        0.06391526013612747,
        -0.04066919535398483,
        0.03606065362691879,
        0.009964515455067158,
        0.022037601098418236,
        -0.05793539062142372,
        0.03010631911456585,
        0.09950266778469086,
        -0.031395383179187775,
        0.02284589782357216,
        0.050820209085941315,
        -0.059158992022275925,
        -0.10439309477806091,
        -0.04122496023774147,
        -0.01569502428174019,
        0.015733931213617325,
        -0.000957073294557631,
        0.03992128372192383,
        -0.050255607813596725,
        -0.11433231085538864,
        0.05259096994996071,
        0.03960207849740982,
        -0.010836347937583923,
        0.010145843960344791,
        -0.033941444009542465,
        0.022066090255975723,
        -0.06876087933778763,
        -0.04454408958554268,
        -0.007306726183742285,
        -0.05941806361079216,
        0.09397950023412704,
        0.09059685468673706,
        0.03787591680884361,
        -0.08450409024953842,
        0.05888117477297783,
        -0.031697750091552734,
        -0.009079564362764359,
        -0.1022283062338829,
        0.05828246474266052,
        -0.025145787745714188,
        -0.011188275180757046,
        -0.11155638098716736,
        0.001871149055659771,
        -0.04979701340198517,
        -0.0067113246768713,
        -0.04014936089515686,
        -0.04260275512933731,
        -0.07512806355953217,
        -0.018502481281757355,
        -0.034989822655916214,
        -0.0032164654694497585,
        0.03998999297618866,
        0.0533263236284256,
        -0.0049605644308030605,
        -0.029349640011787415,
        0.015045017004013062,
        0.06106691062450409,
        -0.006474646739661694,
        -0.028093885630369186,
        0.007877182215452194,
        -0.029565056785941124,
        -0.05132204294204712,
        0.08470999449491501,
        0.011669940315186977,
        -0.013462645001709461,
        0.021076658740639687,
        0.02236006036400795,
        0.04433780536055565,
        0.04003299027681351,
        0.006220612674951553,
        -0.034349020570516586,
        0.018290916457772255,
        0.0226098895072937,
        -0.05194507911801338,
        -0.004519683308899403,
        0.05843859538435936,
        -0.0666777566075325,
        0.015028692781925201,
        0.055765531957149506,
        -5.192087471073137e-8,
        -0.08111042529344559,
        -0.06038207933306694,
        -0.14650264382362366,
        0.005042433273047209,
        -0.017327986657619476,
        -0.039900824427604675,
        0.05288813263177872,
        -0.025674570351839066,
        0.06341205537319183,
        -0.02259892039000988,
        -0.011838027276098728,
        0.000602942134719342,
        -0.12895113229751587,
        -0.02627176232635975,
        -0.07274385541677475,
        0.0062845628708601,
        0.007397192995995283,
        0.08997452259063721,
        0.0011263990309089422,
        0.048445332795381546,
        0.024898411706089973,
        0.08318334072828293,
        0.09384442120790482,
        -0.04779057577252388,
        0.04077532887458801,
        0.00010210921755060554,
        0.020661018788814545,
        0.016493208706378937,
        0.023890862241387367,
        -0.04303881898522377,
        0.053191643208265305,
        0.016253283247351646,
        0.013673466630280018,
        -0.00419777212664485,
        0.006240478716790676,
        0.012635361403226852,
        0.11086570471525192,
        0.05503345653414726,
        0.028986359015107155,
        0.02397085912525654,
        0.074651338160038,
        0.005981103982776403,
        -0.04787761718034744,
        0.011870549991726875,
        -0.01759655773639679,
        -0.08873903751373291,
        -0.009985371492803097,
        0.046268485486507416,
        0.09594367444515228,
        0.0034433486871421337,
        0.02584226243197918,
        -0.037928931415081024,
        -0.023920489475131035,
        0.0691567063331604,
        -0.008657192811369896,
        -0.09967952221632004,
        -0.05073559284210205,
        0.01596638932824135,
        -0.018307404592633247,
        -0.0016948394477367401,
        0.0630301982164383,
        -0.03065764158964157,
        0.0443393811583519,
        0.0015502753667533398
      ]
    },
    {
      "id": "437537c1",
      "filePath": "05-rag-codebase/src/splitter.ts",
      "content": "// splitter.ts - 代码切分器\n// 职责：将代码文件切分成有意义的 chunks（按函数/类边界）\n// 策略：使用正则匹配函数和类定义，保持代码语义完整性\n\nimport type { CodeChunk } from './types.js';\nimport type { LoadedFile } from './loader.js';\nimport { createHash } from 'crypto';\n\n// 最大 chunk 大小（字符数），超过会被进一步切分\nconst MAX_CHUNK_SIZE = 2000;\n// 最小 chunk 大小，太小的块会被合并\nconst MIN_CHUNK_SIZE = 100;\n\n/**\n * 生成 chunk ID\n */",
      "startLine": 1,
      "endLine": 16,
      "type": "other",
      "embedding": [
        -0.13300007581710815,
        0.05495322123169899,
        -0.012710949406027794,
        -0.03883335366845131,
        0.017125841230154037,
        -0.02914832904934883,
        0.029074784368276596,
        0.0941760390996933,
        0.01342860423028469,
        0.022327596321702003,
        0.06164074316620827,
        0.01673695258796215,
        -0.005894130561500788,
        -0.08925258368253708,
        0.011719444766640663,
        0.008114982396364212,
        -0.16882047057151794,
        0.05261765420436859,
        -0.0945117399096489,
        -0.09840031713247299,
        0.05373165383934975,
        -0.09843659400939941,
        0.018584126606583595,
        0.007075292989611626,
        0.11927923560142517,
        0.040636997669935226,
        -0.03397142514586449,
        0.06743951141834259,
        0.010044402442872524,
        -0.047488924115896225,
        0.08272697031497955,
        0.04158329963684082,
        0.05453433096408844,
        -0.010069414041936398,
        0.04182993993163109,
        0.1013888493180275,
        -0.033106449991464615,
        -0.024076979607343674,
        0.0015202320646494627,
        0.032564934343099594,
        0.00982450321316719,
        0.052669987082481384,
        0.0025905631482601166,
        -0.06348055601119995,
        0.011742164380848408,
        -0.0011239489540457726,
        -0.058363400399684906,
        0.03619924932718277,
        -0.03886044770479202,
        -0.05420772358775139,
        -0.0785464271903038,
        0.06872837245464325,
        -0.051790762692689896,
        0.041344430297613144,
        0.015068748034536839,
        -0.042400822043418884,
        -0.0005214742850512266,
        -0.05763624981045723,
        0.008304150775074959,
        0.06878986954689026,
        -0.05998348817229271,
        0.09231157600879669,
        0.07071727514266968,
        -0.05864068120718002,
        0.07303591817617416,
        -0.031030649319291115,
        0.00477907620370388,
        0.043034955859184265,
        -0.05447285622358322,
        0.03559836372733116,
        -0.0791272297501564,
        0.0822792798280716,
        -0.043345000594854355,
        0.0830303281545639,
        -0.02065524086356163,
        -0.05919058993458748,
        -0.046909838914871216,
        -0.03234318271279335,
        -0.016961921006441116,
        -0.0666983500123024,
        -0.12038005143404007,
        -0.029217060655355453,
        0.1062500923871994,
        0.029343154281377792,
        -0.02443891391158104,
        0.048601437360048294,
        -0.005407697521150112,
        0.011651735752820969,
        0.026799175888299942,
        0.020145799964666367,
        -0.04958389326930046,
        0.017094435170292854,
        0.013459596782922745,
        0.10088592767715454,
        0.016737811267375946,
        0.0486440435051918,
        0.022715002298355103,
        0.06664715707302094,
        -0.010384424589574337,
        0.04815008491277695,
        -0.010237148031592369,
        0.0017246645875275135,
        0.0680907666683197,
        -0.03134886547923088,
        -0.020458221435546875,
        -0.07960506528615952,
        0.056946463882923126,
        0.02344965934753418,
        0.061546195298433304,
        0.02009407989680767,
        0.06840760260820389,
        0.011455516330897808,
        -0.022644495591521263,
        -0.06774937361478806,
        -0.030469929799437523,
        -0.00465845363214612,
        0.07362852245569229,
        -0.0373259074985981,
        0.005201185122132301,
        0.04361586272716522,
        0.06587086617946625,
        0.014626063406467438,
        -0.1284349113702774,
        0.023034019395709038,
        -0.06005321070551872,
        -0.007853850722312927,
        0.10408317297697067,
        1.929369367389345e-33,
        -0.0691487118601799,
        -0.021219400689005852,
        0.017679186537861824,
        0.053448308259248734,
        0.001387421041727066,
        -0.04901709035038948,
        -0.06294760853052139,
        0.002704389626160264,
        -0.140335813164711,
        0.09331944584846497,
        -0.04558399319648743,
        -0.035043831914663315,
        -0.058556124567985535,
        0.009764795191586018,
        -0.0533282570540905,
        -0.1200139969587326,
        0.02737554721534252,
        -0.02436300925910473,
        -0.03366047888994217,
        -0.036864567548036575,
        -0.027618171647191048,
        -0.01895422674715519,
        0.03496531769633293,
        0.05173751711845398,
        -0.04015301913022995,
        0.022890670225024223,
        0.037590477615594864,
        -0.06953377276659012,
        -0.0070968992076814175,
        0.008483368903398514,
        0.08177567273378372,
        -0.01856294833123684,
        -0.00011944261495955288,
        -0.02261105552315712,
        0.04888199642300606,
        0.006872662343084812,
        0.01920080929994583,
        -0.014555622823536396,
        -0.12938931584358215,
        -0.01670970767736435,
        0.03275205194950104,
        -0.003758934559300542,
        0.0032560252584517,
        -0.02102317474782467,
        -0.00003811371425399557,
        0.009464398957788944,
        -0.008655671961605549,
        0.03194821998476982,
        0.04192163795232773,
        0.029534971341490746,
        -0.02273247018456459,
        0.09405248612165451,
        0.018023211508989334,
        0.04326288402080536,
        0.021756509318947792,
        -0.03007463365793228,
        0.004803279880434275,
        -0.0796232670545578,
        -0.0024454044178128242,
        -0.012582271359860897,
        0.007639761548489332,
        0.030091848224401474,
        -0.013301745988428593,
        0.07874526083469391,
        0.008443247526884079,
        0.017884206026792526,
        0.05436702445149422,
        -0.027098264545202255,
        -0.00862022116780281,
        0.03409036993980408,
        -0.05620419234037399,
        -0.048442594707012177,
        0.057538725435733795,
        -0.00029076720238663256,
        -0.0450776182115078,
        -0.03640315681695938,
        -0.030340729281306267,
        0.054059479385614395,
        -0.01046616118401289,
        -0.15133008360862732,
        0.020946022123098373,
        -0.03718888759613037,
        0.03300073742866516,
        -0.08573178201913834,
        -0.042088039219379425,
        0.04275112226605415,
        -0.0067538246512413025,
        -0.04204684495925903,
        0.019206194207072258,
        -0.04966002330183983,
        -0.08470029383897781,
        -0.05444512516260147,
        0.017714926972985268,
        -0.12924715876579285,
        -0.04722541570663452,
        -4.270291061945081e-33,
        0.05048146843910217,
        0.0026380284689366817,
        -0.058256518095731735,
        0.038223523646593094,
        0.03025834448635578,
        0.01068850327283144,
        0.0379040464758873,
        0.11341734230518341,
        0.04668991640210152,
        0.06259028613567352,
        -0.0317685529589653,
        -0.04133933410048485,
        0.012630912475287914,
        -0.031040813773870468,
        0.0894990861415863,
        -0.00762605806812644,
        0.015334723517298698,
        0.07472255825996399,
        0.05326320603489876,
        0.018079470843076706,
        0.000029488075597328134,
        0.052152156829833984,
        -0.021748147904872894,
        0.11956293880939484,
        -0.008336968719959259,
        0.06239011138677597,
        -0.016642794013023376,
        0.013739197514951229,
        -0.046036701649427414,
        -0.059817682951688766,
        -0.06589412689208984,
        -0.021403426304459572,
        -0.06265883147716522,
        0.015184455551207066,
        -0.06869566440582275,
        -0.11924301087856293,
        -0.0164226982742548,
        0.039927177131175995,
        -0.008523707278072834,
        0.009735869243741035,
        -0.0485689602792263,
        -0.018778756260871887,
        -0.04544266685843468,
        0.014750470407307148,
        0.007297266274690628,
        -0.026227345690131187,
        0.02742517925798893,
        0.08047900348901749,
        -0.029568063095211983,
        -0.020104894414544106,
        0.01466402132064104,
        -0.014410935342311859,
        0.0028824065811932087,
        -0.030838968232274055,
        -0.002292962744832039,
        0.02701212838292122,
        -0.08828606456518173,
        -0.024929579347372055,
        -0.1047099232673645,
        -0.07815868407487869,
        -0.05387376248836517,
        -0.0005277982563711703,
        -0.015006699599325657,
        -0.03132811561226845,
        0.06806989014148712,
        -0.029477816075086594,
        -0.04392566531896591,
        -0.057229962199926376,
        0.025026272982358932,
        -0.05806315317749977,
        -0.008083188906311989,
        0.020816532894968987,
        0.12531766295433044,
        -0.02910040318965912,
        -0.038033902645111084,
        -0.0031434663105756044,
        -0.07623326778411865,
        -0.004856524523347616,
        0.02676876075565815,
        0.10822955518960953,
        -0.020236046984791756,
        0.008279441855847836,
        0.0793135017156601,
        0.05701364576816559,
        -0.02155233919620514,
        -0.023968761786818504,
        -0.03594627603888512,
        0.07700303941965103,
        -0.030441515147686005,
        -0.042222797870635986,
        -0.0639650821685791,
        0.07342683523893356,
        0.08834266662597656,
        0.03369313105940819,
        0.04080556333065033,
        -5.1057718053471035e-8,
        0.0017945303115993738,
        -0.032602958381175995,
        -0.15267807245254517,
        -0.02791273407638073,
        0.00840582512319088,
        -0.024403855204582214,
        -0.0673191025853157,
        0.003009109990671277,
        -0.014568583108484745,
        -0.015773296356201172,
        0.0671369731426239,
        0.03892337158322334,
        -0.08658884465694427,
        0.020055582746863365,
        -0.06154775619506836,
        -0.06846585869789124,
        -0.029614917933940887,
        0.06739051640033722,
        -0.06223580241203308,
        -0.032059937715530396,
        -0.020969191566109657,
        0.0553118921816349,
        0.05221922695636749,
        -0.008287142030894756,
        -0.010584567673504353,
        -0.024303898215293884,
        -0.05865238979458809,
        0.021963169798254967,
        -0.04465606436133385,
        0.003909866791218519,
        -0.0036070120986551046,
        0.004172086715698242,
        0.04508298635482788,
        -0.06199713423848152,
        -0.02139085717499256,
        0.057808730751276016,
        0.010930618271231651,
        0.007686344441026449,
        0.06899594515562057,
        -0.009188789874315262,
        0.05301890894770622,
        -0.04505641758441925,
        0.004362258594483137,
        0.020510587841272354,
        0.009630867280066013,
        -0.07623739540576935,
        -0.027088304981589317,
        0.0013398746959865093,
        0.021053720265626907,
        0.0393151231110096,
        0.038794759660959244,
        0.016310319304466248,
        -0.05054005980491638,
        -0.023609939962625504,
        -0.013458280824124813,
        -0.04084346815943718,
        -0.010485845617949963,
        0.0020394548773765564,
        -0.014056672342121601,
        -0.02359224110841751,
        0.049028005450963974,
        -0.006791491527110338,
        0.06064319610595703,
        -0.0025892886333167553
      ]
    },
    {
      "id": "38f275ce",
      "filePath": "05-rag-codebase/src/splitter.ts",
      "content": "function generateId(filePath: string, startLine: number): string {\n\tconst hash = createHash('md5')\n\t\t.update(`${filePath}:${startLine}`)\n\t\t.digest('hex')\n\t\t.slice(0, 8);\n\treturn hash;\n}\n\n/**\n * 切分单个文件为 chunks\n * 尝试按函数/类边界切分，如果失败则按固定行数切分\n */",
      "startLine": 17,
      "endLine": 28,
      "type": "function",
      "name": "generateId",
      "embedding": [
        -0.10296040773391724,
        0.06158662214875221,
        -0.008803999051451683,
        -0.061494212597608566,
        0.0032985955476760864,
        -0.004109851084649563,
        0.0005292597925290465,
        0.04029408097267151,
        -0.009539957158267498,
        0.06488952040672302,
        -0.012985718436539173,
        0.0050561875104904175,
        -0.011502178385853767,
        -0.0783720389008522,
        0.0030326200649142265,
        0.037421002984046936,
        -0.20359143614768982,
        0.0026710948441177607,
        -0.0815919041633606,
        -0.1023142859339714,
        0.05371078848838806,
        0.0015500946901738644,
        0.02300845831632614,
        -0.017679231241345406,
        0.06758859753608704,
        0.0067686173133552074,
        0.0741361603140831,
        0.04966424033045769,
        0.03706914559006691,
        -0.028756510466337204,
        0.15987226366996765,
        0.060069333761930466,
        -0.06873627752065659,
        -0.059842292219400406,
        0.010612411424517632,
        0.09570842981338501,
        -0.04459165036678314,
        0.05751088634133339,
        -0.007533595431596041,
        0.0015797127271071076,
        0.07076270133256912,
        0.05620010569691658,
        -0.037140194326639175,
        -0.010758808813989162,
        0.023546354845166206,
        -0.03814484179019928,
        -0.06251134723424911,
        0.06792862713336945,
        0.06094072386622429,
        -0.016174400225281715,
        -0.0607963465154171,
        0.0470995269715786,
        -0.05581651255488396,
        0.029477601870894432,
        0.011356639675796032,
        -0.05327475816011429,
        -0.07016829401254654,
        -0.06650502234697342,
        0.01587633602321148,
        0.04393839091062546,
        -0.02717704325914383,
        0.025141021236777306,
        0.06218532472848892,
        -0.06825213879346848,
        0.13963443040847778,
        0.027180589735507965,
        -0.007174315862357616,
        0.011624469421803951,
        0.004329650197178125,
        -0.01998719945549965,
        -0.06436175107955933,
        0.010788374580442905,
        -0.0050044916570186615,
        0.11542519927024841,
        -0.06011538580060005,
        -0.026143956929445267,
        -0.04872557520866394,
        -0.016808578744530678,
        0.03379524126648903,
        -0.043188147246837616,
        -0.09131241589784622,
        -0.03183307498693466,
        0.059269875288009644,
        0.015275773592293262,
        -0.02621479146182537,
        0.04607069864869118,
        -0.029688362032175064,
        0.07346825301647186,
        -0.00433982303366065,
        -0.0008067167364060879,
        -0.01459015253931284,
        0.04164530709385872,
        0.04602121561765671,
        0.027292920276522636,
        0.030187811702489853,
        0.014236115850508213,
        -0.0012894552201032639,
        0.09787328541278839,
        0.01859784685075283,
        0.013753997161984444,
        -0.05250174552202225,
        0.04045465216040611,
        0.06036772206425667,
        0.0022090754937380552,
        -0.04885255917906761,
        -0.056271132081747055,
        0.06462132930755615,
        -0.0030995463021099567,
        -0.003922007977962494,
        -0.027140146121382713,
        0.029347781091928482,
        0.08833498507738113,
        -0.028051037341356277,
        -0.0832645371556282,
        0.007382802199572325,
        -0.009267551824450493,
        -0.035996388643980026,
        -0.028036922216415405,
        0.040042951703071594,
        0.04030181095004082,
        -0.000032016199838835746,
        -0.009380769915878773,
        -0.08315186202526093,
        0.0718635842204094,
        -0.010034172795712948,
        -0.0491357259452343,
        0.07747119665145874,
        1.9494332192479582e-33,
        -0.0473007969558239,
        0.009343421086668968,
        0.09270858019590378,
        0.09274367988109589,
        0.021311314776539803,
        -0.028280744329094887,
        -0.05779612064361572,
        -0.06197010353207588,
        -0.12629999220371246,
        0.08749173581600189,
        -0.0943610668182373,
        -0.08346760272979736,
        0.011719073168933392,
        -0.03724384307861328,
        -0.0013985169352963567,
        -0.07693106681108475,
        0.004076262470334768,
        -0.002495694672688842,
        -0.045968085527420044,
        0.012184062972664833,
        -0.07387931644916534,
        0.02798030897974968,
        0.030055781826376915,
        -0.028103575110435486,
        0.005364335607737303,
        0.042527347803115845,
        0.01736849546432495,
        -0.1009070947766304,
        0.06398060917854309,
        -0.006768794264644384,
        0.039176180958747864,
        -0.009060799144208431,
        -0.012538228183984756,
        0.021403150632977486,
        0.008277625776827335,
        0.013998221606016159,
        -0.07530974596738815,
        0.04022945836186409,
        -0.1255052238702774,
        0.011542955413460732,
        0.0807151198387146,
        -0.013002552092075348,
        -0.008754913695156574,
        0.0632597953081131,
        -0.08205241709947586,
        -0.03104756586253643,
        -0.07069369405508041,
        0.0031598967034369707,
        0.08009766787290573,
        0.026001213118433952,
        -0.015011845156550407,
        0.11633259057998657,
        0.03289039805531502,
        -0.02697957679629326,
        0.050845593214035034,
        -0.05933137983083725,
        0.04019516706466675,
        -0.00534546235576272,
        0.06325070559978485,
        0.03729896992444992,
        0.010616673156619072,
        0.0410037487745285,
        -0.03388333320617676,
        0.09943477809429169,
        0.05167539417743683,
        -0.05975141003727913,
        0.09458792954683304,
        -0.030071206390857697,
        0.05328788980841637,
        0.051929548382759094,
        -0.04710911959409714,
        -0.042358700186014175,
        0.01842876523733139,
        -0.028723692521452904,
        0.01653861626982689,
        0.019889717921614647,
        -0.027045192196965218,
        -0.01867261715233326,
        -0.04321220889687538,
        -0.048850368708372116,
        -0.031627118587493896,
        -0.016595421358942986,
        -0.008618487045168877,
        -0.052914589643478394,
        0.004919526632875204,
        0.04650852456688881,
        -0.0701107531785965,
        -0.10229533165693283,
        -0.006063201930373907,
        -0.04293925687670708,
        0.016586940735578537,
        -0.10002381354570389,
        -0.04109853133559227,
        -0.05479879677295685,
        -0.030787575989961624,
        -4.653304957667399e-33,
        0.06596174091100693,
        -0.02849092334508896,
        0.01944005861878395,
        -0.019966498017311096,
        -0.06172047555446625,
        0.013605966232717037,
        0.04309365898370743,
        0.10036952048540115,
        -0.05446865037083626,
        0.08059513568878174,
        0.050506941974163055,
        0.051980216056108475,
        -0.01861673593521118,
        0.007018241100013256,
        0.0272950641810894,
        0.001139387721195817,
        0.0803796797990799,
        0.025165623053908348,
        0.06603338569402695,
        0.012846416793763638,
        0.041999153792858124,
        0.06339676678180695,
        0.0003194091550540179,
        0.08479849994182587,
        -0.023347891867160797,
        0.052927739918231964,
        0.10872294008731842,
        -0.01224454864859581,
        0.01600765809416771,
        -0.05706176906824112,
        -0.054811809211969376,
        0.01817355863749981,
        -0.04928721487522125,
        0.014713059179484844,
        -0.048661038279533386,
        -0.09748701751232147,
        -0.000005554896688408917,
        0.06462042033672333,
        0.011275713331997395,
        0.050519075244665146,
        -0.11624561995267868,
        0.056312549859285355,
        -0.05276575684547424,
        0.02525937743484974,
        -0.05321003869175911,
        -0.06165739893913269,
        0.03186580166220665,
        0.1404571533203125,
        -0.03468993306159973,
        -0.011411464773118496,
        0.05750139430165291,
        -0.020536676049232483,
        0.04201770946383476,
        -0.09329661726951599,
        0.014940808527171612,
        -0.048557721078395844,
        -0.026554936543107033,
        -0.05868241935968399,
        -0.057560309767723083,
        -0.005791979841887951,
        -0.028887778520584106,
        0.010845689103007317,
        0.020213738083839417,
        -0.09822633117437363,
        0.027805062010884285,
        -0.0016755502438172698,
        -0.07461763918399811,
        -0.04738800972700119,
        -0.018939899280667305,
        0.011311842128634453,
        -0.06082267686724663,
        -0.010349143296480179,
        0.05568261444568634,
        0.028125464916229248,
        -0.004256793763488531,
        0.01649997942149639,
        -0.014954493381083012,
        -0.01904166117310524,
        0.041986219584941864,
        0.036038871854543686,
        0.02441946044564247,
        -0.03710160404443741,
        0.035450976341962814,
        -0.027297403663396835,
        -0.01397455483675003,
        -0.08889426290988922,
        0.001540746190585196,
        0.04688281938433647,
        0.04703064262866974,
        -0.03526301309466362,
        -0.014219822362065315,
        0.045386917889118195,
        -0.03388124704360962,
        0.05101645737886429,
        -0.013268525712192059,
        -4.13314715785873e-8,
        -0.06328457593917847,
        -0.024964764714241028,
        -0.09442295134067535,
        -0.03280064836144447,
        0.03414713218808174,
        -0.001283293473534286,
        -0.10176835209131241,
        -0.043600622564554214,
        0.04774852842092514,
        -0.022036723792552948,
        0.048056382685899734,
        -0.026110541075468063,
        -0.035708799958229065,
        0.015308026224374771,
        -0.03020527772605419,
        -0.05214310064911842,
        0.008974319323897362,
        0.06515240669250488,
        -0.024197695776820183,
        -0.07371902465820312,
        -0.040494345128536224,
        0.04610167443752289,
        0.021901583299040794,
        -0.043600209057331085,
        0.04863552004098892,
        -0.02571878954768181,
        -0.024174220860004425,
        0.0244975034147501,
        -0.026137439534068108,
        -0.057899411767721176,
        -0.00854426994919777,
        0.017977479845285416,
        -0.008387692272663116,
        -0.026945292949676514,
        -0.024747194722294807,
        0.09282487630844116,
        0.022137101739645004,
        0.014448086731135845,
        0.08180933445692062,
        -0.03701323643326759,
        0.06177496537566185,
        0.009084372781217098,
        0.017084572464227676,
        -0.004819750785827637,
        -0.07079415023326874,
        -0.0831114649772644,
        -0.06119878590106964,
        0.05445496737957001,
        0.006970689631998539,
        -0.0359145887196064,
        -0.009694120846688747,
        -0.018957626074552536,
        -0.019032472744584084,
        -0.08598790317773819,
        -0.0317809171974659,
        -0.055760763585567474,
        -0.028697557747364044,
        -0.04142949357628822,
        0.01840335689485073,
        -0.028657086193561554,
        0.014379053376615047,
        -0.045987047255039215,
        0.030260363593697548,
        -0.0039029051549732685
      ]
    },
    {
      "id": "803e0252",
      "filePath": "05-rag-codebase/src/splitter.ts",
      "content": "function splitFile(file: LoadedFile): CodeChunk[] {\n\tconst chunks: CodeChunk[] = [];\n\tconst lines = file.content.split('\\n');\n\n\t// 正则：匹配函数定义（export function, async function, const xxx = 等）\n\tconst functionPattern = /^(export\\s+)?(async\\s+)?function\\s+(\\w+)/;\n\tconst arrowFunctionPattern = /^(export\\s+)?(const|let)\\s+(\\w+)\\s*=\\s*(async\\s*)?\\(/;\n\tconst classPattern = /^(export\\s+)?(abstract\\s+)?class\\s+(\\w+)/;\n\n\t// 标记代码块的起始位置\n\tinterface BlockMarker {\n\t\tstartLine: number;\n\t\ttype: 'function' | 'class' | 'other';\n\t\tname?: string;\n\t}\n\n\tconst markers: BlockMarker[] = [];\n\n\t// 扫描所有函数/类定义的位置\n\tfor (let i = 0; i < lines.length; i++) {\n\t\tconst line = lines[i];\n\t\tconst trimmed = line.trim();\n\n\t\tlet match = trimmed.match(functionPattern);\n\t\tif (match) {\n\t\t\tmarkers.push({ startLine: i, type: 'function', name: match[3] });\n\t\t\tcontinue;\n\t\t}\n\n\t\tmatch = trimmed.match(arrowFunctionPattern);\n\t\tif (match) {\n\t\t\tmarkers.push({ startLine: i, type: 'function', name: match[3] });\n\t\t\tcontinue;\n\t\t}\n\n\t\tmatch = trimmed.match(classPattern);\n\t\tif (match) {\n\t\t\tmarkers.push({ startLine: i, type: 'class', name: match[3] });\n\t\t\tcontinue;\n\t\t}\n\t}\n\n\t// 如果没找到任何标记，整个文件作为一个 chunk\n\tif (markers.length === 0) {\n\t\tconst content = file.content.trim();\n\t\tif (content.length >= MIN_CHUNK_SIZE) {\n\t\t\tchunks.push({\n\t\t\t\tid: generateId(file.filePath, 0),\n\t\t\t\tfilePath: file.filePath,\n\t\t\t\tcontent,",
      "startLine": 29,
      "endLine": 78,
      "type": "function",
      "name": "splitFile (part 1)",
      "embedding": [
        -0.13284392654895782,
        0.0327756293118,
        0.0752296894788742,
        -0.006322126369923353,
        0.02743460237979889,
        -0.004473078530281782,
        0.051972463726997375,
        0.027598820626735687,
        -0.020597949624061584,
        -0.015556261874735355,
        -0.04661297798156738,
        0.038565635681152344,
        -0.09023302793502808,
        -0.04782446101307869,
        0.0703604593873024,
        0.05720676854252815,
        -0.15757761895656586,
        0.03777137026190758,
        -0.08686818182468414,
        -0.08209911733865738,
        0.05508234351873398,
        -0.029397593811154366,
        -0.004122257698327303,
        0.02082006074488163,
        0.055367402732372284,
        0.10319975763559341,
        0.020712340250611305,
        -0.010298742912709713,
        -0.016221430152654648,
        -0.004781159572303295,
        0.03619474545121193,
        -0.027232538908720016,
        -0.007803794462233782,
        0.08485376089811325,
        -0.048077475279569626,
        0.06703510880470276,
        -0.07010708749294281,
        0.0030777575448155403,
        0.03661598265171051,
        -0.017839213833212852,
        -0.017824094742536545,
        0.08622767776250839,
        -0.0689542219042778,
        -0.05843020975589752,
        0.1317182332277298,
        -0.027699684724211693,
        -0.041969168931245804,
        -0.03675376623868942,
        0.013619286008179188,
        0.03765765577554703,
        -0.0526404045522213,
        0.0036803274415433407,
        -0.10796793550252914,
        0.014670521020889282,
        0.09485620260238647,
        -0.026556774973869324,
        0.04911567643284798,
        -0.07493264228105545,
        0.05987633392214775,
        -0.01045532152056694,
        0.007532588206231594,
        -0.04532651603221893,
        0.05500589311122894,
        -0.07655645161867142,
        0.08919596672058105,
        -0.009665677323937416,
        -0.052869439125061035,
        0.12960462272167206,
        0.05526899918913841,
        0.049947306513786316,
        -0.03786690533161163,
        0.09021485596895218,
        0.044657547026872635,
        0.058945007622241974,
        -0.051216986030340195,
        0.008356334641575813,
        -0.05645975470542908,
        0.03429922088980675,
        -0.01126616820693016,
        -0.02327832765877247,
        -0.007778394967317581,
        -0.0638061910867691,
        0.044010311365127563,
        0.035723112523555756,
        0.006277603097259998,
        0.06583930552005768,
        -0.06167237460613251,
        -0.06606663018465042,
        -0.04800055921077728,
        -0.04929671436548233,
        -0.08808904141187668,
        0.044034454971551895,
        0.0166112519800663,
        0.05089225620031357,
        0.07094179838895798,
        0.03396543115377426,
        0.015922829508781433,
        0.010335356928408146,
        0.01954677514731884,
        0.07895341515541077,
        -0.021315312013030052,
        0.01910005882382393,
        -0.0077345408499240875,
        -0.03771058842539787,
        -0.03142426535487175,
        0.004889845848083496,
        -0.007256285287439823,
        -0.056688372045755386,
        -0.023334061726927757,
        -0.02224883623421192,
        0.0005139610730111599,
        -0.013395886868238449,
        -0.014618867076933384,
        -0.003202516585588455,
        -0.06313062459230423,
        -0.04403484985232353,
        0.02991272695362568,
        -0.04962782934308052,
        0.07658012956380844,
        0.1225070059299469,
        0.13435187935829163,
        0.01914861984550953,
        -0.05204175040125847,
        0.008739611133933067,
        0.008943556807935238,
        -0.027384642511606216,
        0.11201631277799606,
        7.389192754099424e-33,
        -0.02990851178765297,
        -0.05999298766255379,
        -0.021542025730013847,
        -0.001293402398005128,
        -0.0043034628033638,
        -0.04155215248465538,
        -0.029956992715597153,
        -0.053634777665138245,
        -0.12151254713535309,
        0.001499288366176188,
        -0.0006588575197383761,
        -0.0831335112452507,
        -0.02433909848332405,
        0.029300015419721603,
        -0.004198037553578615,
        -0.06402745097875595,
        0.05928901582956314,
        -0.04180769622325897,
        0.0030261732172220945,
        0.049726180732250214,
        -0.024753205478191376,
        0.007026046048849821,
        -0.050868093967437744,
        0.02995084784924984,
        0.018597910180687904,
        -0.0105189373716712,
        0.005679174326360226,
        -0.013550705276429653,
        -0.03838053345680237,
        -0.023361647501587868,
        0.07851964980363846,
        -0.04850887507200241,
        0.034212544560432434,
        -0.02967931516468525,
        0.041251637041568756,
        0.033693525940179825,
        -0.0031597178895026445,
        0.004068324342370033,
        -0.10835843533277512,
        -0.04241514205932617,
        0.03284658491611481,
        -0.02216336317360401,
        -0.05198121443390846,
        0.007082474417984486,
        -0.008035191334784031,
        0.0047421990893781185,
        -0.03601614013314247,
        0.05271477997303009,
        0.010268851183354855,
        -0.006771146785467863,
        -0.01745600625872612,
        0.09546509385108948,
        0.005427827592939138,
        -0.053883474320173264,
        0.04764319956302643,
        -0.007042255252599716,
        0.019202712923288345,
        0.0013269264018163085,
        -0.007930641993880272,
        0.014358141459524632,
        -0.06687894463539124,
        0.01355757750570774,
        -0.036885153502225876,
        0.04220414534211159,
        0.013064591214060783,
        0.03306998312473297,
        0.020131690427660942,
        0.03216589242219925,
        0.016235731542110443,
        -0.0354737751185894,
        -0.06426999717950821,
        -0.02438068762421608,
        0.030419906601309776,
        -0.050376422703266144,
        -0.015487036667764187,
        -0.004089043941348791,
        -0.08312716335058212,
        -0.0020149771589785814,
        -0.04213178530335426,
        -0.14984989166259766,
        -0.050765205174684525,
        -0.05338401719927788,
        0.018680064007639885,
        -0.025749854743480682,
        0.01563490927219391,
        -0.01372558157891035,
        0.020659442991018295,
        -0.09206642210483551,
        0.00438866438344121,
        -0.01146780140697956,
        -0.029530560597777367,
        0.008083047345280647,
        -0.02898707613348961,
        -0.06896049529314041,
        0.018360240384936333,
        -6.927670896763547e-33,
        0.1133507564663887,
        0.08302996307611465,
        -0.02258092537522316,
        0.019809698686003685,
        0.02669234201312065,
        0.004469525068998337,
        0.011914193630218506,
        0.051700420677661896,
        -0.0017467112047597766,
        0.09483209252357483,
        -0.0458102710545063,
        -0.05602036416530609,
        -0.008069229312241077,
        -0.03318389132618904,
        -0.0027351488824933767,
        0.06182590126991272,
        -0.05696474015712738,
        0.024607520550489426,
        0.04812271147966385,
        -0.03491109237074852,
        0.04258133843541145,
        0.01873997412621975,
        0.0902794599533081,
        0.043639615178108215,
        -0.061112966388463974,
        0.06018596887588501,
        0.025223074480891228,
        0.06539653986692429,
        -0.021371137350797653,
        -0.038585592061281204,
        -0.01717548258602619,
        -0.0548723042011261,
        -0.03000219538807869,
        -0.015666509047150612,
        -0.0006082908948883414,
        -0.10319270193576813,
        0.03355821222066879,
        0.11531087756156921,
        -0.010135214775800705,
        0.031342074275016785,
        -0.010395760647952557,
        0.010651318356394768,
        -0.040275659412145615,
        -0.05521301552653313,
        -0.004706122446805239,
        -0.003471702104434371,
        0.030621103942394257,
        0.16220992803573608,
        -0.07102148979902267,
        -0.048767343163490295,
        0.001825246261432767,
        -0.01567944511771202,
        -0.078356072306633,
        -0.06071470305323601,
        0.01803187094628811,
        -0.008662641979753971,
        -0.0028753229416906834,
        -0.053996890783309937,
        -0.03312689810991287,
        0.0008851509192027152,
        -0.035517022013664246,
        -0.06478681415319443,
        0.05311490222811699,
        -0.006318140309303999,
        0.17732316255569458,
        -0.0561533123254776,
        -0.016354229301214218,
        -0.03335295245051384,
        0.032958079129457474,
        0.06573306769132614,
        -0.04852746054530144,
        0.05811290442943573,
        0.044833485037088394,
        0.01725984737277031,
        0.06553991883993149,
        0.04368717968463898,
        0.015098736621439457,
        -0.0007336352136917412,
        0.0803273543715477,
        0.04159023240208626,
        -0.028965415433049202,
        -0.07085680216550827,
        0.044489260762929916,
        0.05353504419326782,
        -0.0006966945948079228,
        0.042155954986810684,
        -0.03869960457086563,
        0.06508452445268631,
        0.030170904472470284,
        -0.07015198469161987,
        -0.039677947759628296,
        -0.0013628905871883035,
        0.037123288959264755,
        -0.05832686647772789,
        -0.052324771881103516,
        -4.88598494996495e-8,
        -0.06268936395645142,
        -0.06819001585245132,
        -0.09724065661430359,
        0.011790208518505096,
        -0.03671836107969284,
        -0.027000587433576584,
        -0.006534332409501076,
        0.011438936926424503,
        0.019214102998375893,
        -0.04946693032979965,
        0.05817052349448204,
        0.07798703014850616,
        -0.042725153267383575,
        -0.008772780187427998,
        -0.013078022748231888,
        -0.07633530348539352,
        0.06909236311912537,
        0.01554347574710846,
        -0.06120052933692932,
        0.02454433962702751,
        -0.008369368501007557,
        0.030796566978096962,
        -0.02022918313741684,
        0.018887752667069435,
        0.044907208532094955,
        -0.025127137079834938,
        0.052142433822155,
        0.07432907074689865,
        0.0015772349433973432,
        0.03635227680206299,
        -0.0014799651689827442,
        -0.0019477629102766514,
        0.03964325040578842,
        -0.03737839683890343,
        0.022042065858840942,
        -0.06056182086467743,
        0.09236633032560349,
        -0.0032481446396559477,
        0.02438192255795002,
        0.11231674253940582,
        0.08509762585163116,
        0.016693826764822006,
        0.019336331635713577,
        -0.011193972080945969,
        0.026042334735393524,
        -0.10985103249549866,
        0.003917606081813574,
        -0.030680814757943153,
        0.07676383852958679,
        0.009114905260503292,
        -0.035177212208509445,
        -0.0641968697309494,
        -0.09352470189332962,
        -0.04051150754094124,
        -0.027150776237249374,
        -0.07688893377780914,
        0.009499461390078068,
        0.06314597278833389,
        -0.030091047286987305,
        -0.00011530047049745917,
        0.049464792013168335,
        -0.031806688755750656,
        0.06421604752540588,
        0.027244172990322113
      ]
    },
    {
      "id": "f7fba9fb",
      "filePath": "05-rag-codebase/src/splitter.ts",
      "content": "if (content.length >= MIN_CHUNK_SIZE) {\n\t\t\tchunks.push({\n\t\t\t\tid: generateId(file.filePath, 0),\n\t\t\t\tfilePath: file.filePath,\n\t\t\t\tcontent,\n\t\t\t\tstartLine: 1,\n\t\t\t\tendLine: lines.length,\n\t\t\t\ttype: 'other',\n\t\t\t});\n\t\t}\n\t\treturn chunks;\n\t}\n\n\t// 处理文件开头到第一个标记之间的内容（通常是 import 语句）\n\tif (markers[0].startLine > 0) {\n\t\tconst headerContent = lines.slice(0, markers[0].startLine).join('\\n').trim();\n\t\tif (headerContent.length >= MIN_CHUNK_SIZE) {\n\t\t\tchunks.push({\n\t\t\t\tid: generateId(file.filePath, 0),\n\t\t\t\tfilePath: file.filePath,\n\t\t\t\tcontent: headerContent,\n\t\t\t\tstartLine: 1,\n\t\t\t\tendLine: markers[0].startLine,\n\t\t\t\ttype: 'other',\n\t\t\t});\n\t\t}\n\t}\n\n\t// 按标记切分\n\tfor (let i = 0; i < markers.length; i++) {\n\t\tconst current = markers[i];\n\t\tconst nextStart = markers[i + 1]?.startLine ?? lines.length;\n\n\t\tconst content = lines.slice(current.startLine, nextStart).join('\\n').trim();\n\n\t\t// 跳过太小的块\n\t\tif (content.length < MIN_CHUNK_SIZE) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// 如果块太大，进一步切分\n\t\tif (content.length > MAX_CHUNK_SIZE) {\n\t\t\tconst subChunks = splitLargeBlock(\n\t\t\t\tfile.filePath,\n\t\t\t\tcontent,\n\t\t\t\tcurrent.startLine,\n\t\t\t\tcurrent.type,\n\t\t\t\tcurrent.name\n\t\t\t);\n\t\t\tchunks.push(...subChunks);",
      "startLine": 74,
      "endLine": 123,
      "type": "function",
      "name": "splitFile (part 2)",
      "embedding": [
        -0.0919288843870163,
        0.04256749898195267,
        0.07336949557065964,
        -0.01990354433655739,
        0.057413991540670395,
        -0.003945657052099705,
        0.039768073707818985,
        0.06375833600759506,
        -0.028986448422074318,
        0.016132017597556114,
        -0.0061596836894750595,
        -0.014817909337580204,
        -0.05248454213142395,
        -0.03890616074204445,
        0.04929138347506523,
        0.03857556730508804,
        -0.14986786246299744,
        0.03473734110593796,
        -0.07364938408136368,
        -0.12894666194915771,
        0.03365263715386391,
        -0.016648368909955025,
        0.01254685502499342,
        0.020041709765791893,
        0.06669493764638901,
        0.06525767594575882,
        -0.02389627695083618,
        0.013660772703588009,
        0.01931743323802948,
        -0.026463733986020088,
        0.06344162672758102,
        -0.002337341895326972,
        0.021226247772574425,
        0.04315091669559479,
        0.033183980733156204,
        0.04578607529401779,
        -0.05148778110742569,
        0.0005911649204790592,
        -0.006669274996966124,
        0.0015686461701989174,
        0.01328797172755003,
        0.07384095340967178,
        -0.036857981234788895,
        -0.027447305619716644,
        0.0880909189581871,
        -0.0026390207931399345,
        -0.0692836195230484,
        0.01828157901763916,
        0.015368517488241196,
        0.013716614805161953,
        -0.08584340661764145,
        0.01329384371638298,
        -0.12836463749408722,
        0.04687703028321266,
        0.06515072286128998,
        -0.024041350930929184,
        -0.026372555643320084,
        -0.05479448661208153,
        0.03641270101070404,
        0.03678939491510391,
        -0.01580134965479374,
        -0.018170258030295372,
        0.048852358013391495,
        -0.10407600551843643,
        0.11670555174350739,
        -0.010698067955672741,
        -0.037933748215436935,
        0.11604104936122894,
        0.04536057636141777,
        0.06228991970419884,
        -0.03980165719985962,
        0.10243000835180283,
        -0.007079008501023054,
        0.08771476149559021,
        -0.10579931735992432,
        -0.03362560272216797,
        -0.02980988845229149,
        0.01600932702422142,
        -0.0033811216708272696,
        -0.07472396641969681,
        -0.07076746225357056,
        -0.04938681051135063,
        0.06642848998308182,
        0.012540685944259167,
        -0.010227378457784653,
        -0.0129748759791255,
        -0.005892706569284201,
        0.0005179272266104817,
        -0.04015541449189186,
        -0.04330601915717125,
        -0.06777139753103256,
        0.07590487599372864,
        0.023463614284992218,
        0.07827744632959366,
        0.016021834686398506,
        0.04668422415852547,
        -0.019115151837468147,
        0.021648211404681206,
        0.04802350327372551,
        0.08050273358821869,
        0.007023191079497337,
        0.04452772065997124,
        0.022922493517398834,
        -0.022451959550380707,
        -0.053550947457551956,
        -0.06947135925292969,
        0.035708747804164886,
        -0.015448099002242088,
        -0.006753585767000914,
        -0.005080447997897863,
        0.010504767298698425,
        0.041577283293008804,
        -0.0034708031453192234,
        -0.03354440629482269,
        -0.050947073847055435,
        -0.042916636914014816,
        0.02497529238462448,
        -0.006256738677620888,
        0.034118566662073135,
        0.07126030325889587,
        0.08123072236776352,
        0.003691979916766286,
        -0.08546773344278336,
        0.025941526517271996,
        0.012894988991320133,
        -0.04245434328913689,
        0.1409076303243637,
        5.74929144199396e-33,
        -0.054442062973976135,
        -0.02908136695623398,
        0.042725175619125366,
        0.05541110783815384,
        -0.004496360197663307,
        -0.027492577210068703,
        -0.06505855172872543,
        -0.041824519634246826,
        -0.15776322782039642,
        0.033567167818546295,
        -0.030783912166953087,
        -0.0871187150478363,
        -0.01111436728388071,
        0.02793053537607193,
        0.021158933639526367,
        -0.1057707667350769,
        0.037292368710041046,
        -0.03124162182211876,
        -0.03658078610897064,
        0.026798507198691368,
        -0.029967669397592545,
        -0.049072738736867905,
        -0.02348514087498188,
        0.017259567975997925,
        0.0004236222303006798,
        -0.02807345613837242,
        0.015726806595921516,
        -0.017889147624373436,
        -0.03416799008846283,
        -0.03016163781285286,
        0.05436401441693306,
        -0.05224461853504181,
        0.002106532221660018,
        -0.029939452186226845,
        0.047694943845272064,
        -0.004002101719379425,
        -0.004610047210007906,
        -0.0016575463814660907,
        -0.11591078341007233,
        0.0016135337064042687,
        0.03926820307970047,
        -0.007441361900418997,
        -0.051230523735284805,
        0.00274182902649045,
        -0.03376506268978119,
        -0.0033956458792090416,
        -0.04362237825989723,
        0.03565926477313042,
        -0.0291617289185524,
        -0.005718551576137543,
        0.0021116058342158794,
        0.0910029336810112,
        0.03204627335071564,
        -0.01171234529465437,
        0.060996878892183304,
        -0.004336880519986153,
        0.005280681420117617,
        -0.019347643479704857,
        -0.0007215272053144872,
        0.014400186948478222,
        -0.0048868535086512566,
        -0.012694102711975574,
        -0.06020396202802658,
        0.07139185816049576,
        0.03262919560074806,
        0.04123417288064957,
        0.04343124479055405,
        0.026191705837845802,
        0.04926695674657822,
        -0.06194241717457771,
        -0.058811478316783905,
        -0.03618546575307846,
        0.08105415105819702,
        -0.06777939200401306,
        -0.054370611906051636,
        -0.030932258814573288,
        -0.046714406460523605,
        0.006167378276586533,
        -0.031866565346717834,
        -0.15135718882083893,
        -0.032538317143917084,
        -0.04500950500369072,
        0.03447540104389191,
        -0.08924293518066406,
        0.038900140672922134,
        -0.015434682369232178,
        -0.003204160137102008,
        -0.049309443682432175,
        -0.027971720322966576,
        -0.05339290201663971,
        -0.04745984449982643,
        0.016506453976035118,
        0.020489264279603958,
        -0.07711510360240936,
        0.02529960498213768,
        -4.8402030493183736e-33,
        0.09619733691215515,
        0.04837753251194954,
        -0.02402493543922901,
        -0.01728086918592453,
        0.03473009914159775,
        -0.01786166988313198,
        0.046556100249290466,
        0.08600598573684692,
        0.026663556694984436,
        0.09111304581165314,
        -0.062323834747076035,
        -0.04408608376979828,
        0.007028975058346987,
        -0.03049764409661293,
        -0.004300244618207216,
        0.030800333246588707,
        0.017885928973555565,
        0.04094524681568146,
        0.06465640664100647,
        -0.01650395058095455,
        -0.015400564298033714,
        0.04606800898909569,
        0.06371837854385376,
        0.05638428404927254,
        -0.021597232669591904,
        0.08468982577323914,
        0.03580576181411743,
        0.06411638855934143,
        -0.05704352632164955,
        -0.07122480869293213,
        -0.030301246792078018,
        -0.07225139439105988,
        -0.04679867997765541,
        -0.014963226392865181,
        0.014913083985447884,
        -0.1207025870680809,
        0.02734307013452053,
        0.0818028450012207,
        -0.032847754657268524,
        0.07321398705244064,
        -0.04360593482851982,
        0.016676677390933037,
        -0.024190273135900497,
        -0.061664801090955734,
        0.011493707075715065,
        0.004467500373721123,
        0.05673457309603691,
        0.15149211883544922,
        -0.11287864297628403,
        -0.02413271926343441,
        -0.02330183796584606,
        -0.034559279680252075,
        -0.022107213735580444,
        -0.045254919677972794,
        0.023889683187007904,
        -0.032536160200834274,
        -0.033782001584768295,
        -0.031296152621507645,
        -0.07207983732223511,
        -0.06418658047914505,
        -0.039421822875738144,
        -0.024042604491114616,
        0.009183915331959724,
        0.012907633557915688,
        0.1943495124578476,
        -0.025693219155073166,
        -0.009853365831077099,
        -0.0424843393266201,
        0.026483355090022087,
        0.03518116846680641,
        -0.058508723974227905,
        0.08800459653139114,
        0.081244558095932,
        -0.00014868221478536725,
        0.05281421169638634,
        0.06972945481538773,
        -0.008476655930280685,
        0.012878399342298508,
        0.05520840361714363,
        0.02343728579580784,
        -0.05126933753490448,
        -0.04039374366402626,
        0.05217423662543297,
        0.029134273529052734,
        -0.010012074373662472,
        0.029144221916794777,
        -0.050668083131313324,
        0.0435962975025177,
        0.04629596695303917,
        -0.054159194231033325,
        -0.05440546199679375,
        0.011360502801835537,
        0.08843783289194107,
        -0.0023894277401268482,
        -0.03921085223555565,
        -4.77008157417913e-8,
        -0.054746683686971664,
        -0.08456839621067047,
        -0.12253043055534363,
        0.00644213380292058,
        0.03413666784763336,
        -0.0026187992189079523,
        -0.03307700157165527,
        0.03985380381345749,
        0.032381076365709305,
        -0.015441734343767166,
        0.060420915484428406,
        0.03533078730106354,
        -0.046852290630340576,
        0.033690135926008224,
        -0.02637629583477974,
        -0.10616711527109146,
        0.0618344321846962,
        -0.0024255402386188507,
        -0.06575033068656921,
        0.005771174561232328,
        0.0024070132058113813,
        0.05279464274644852,
        -0.010753735899925232,
        0.011475855484604836,
        0.049922339618206024,
        -0.044743798673152924,
        0.025073528289794922,
        0.07345998287200928,
        -0.004028793890029192,
        -0.05227968841791153,
        -0.008793710730969906,
        -0.005548532586544752,
        0.028883328661322594,
        0.003748684423044324,
        0.013140755705535412,
        -0.0072376905009150505,
        0.0819418653845787,
        0.031671058386564255,
        0.027970822528004646,
        0.05621464550495148,
        0.10645729303359985,
        0.0395093597471714,
        0.03726606443524361,
        -0.027352096512913704,
        0.04158468917012215,
        -0.09144433587789536,
        0.0014537732349708676,
        -0.03541950136423111,
        0.0587024986743927,
        -0.006345783825963736,
        -0.03332212567329407,
        -0.059248290956020355,
        -0.03549003601074219,
        -0.0365104153752327,
        -0.016798097640275955,
        -0.08159860968589783,
        0.011849216185510159,
        0.082604318857193,
        -0.006003520917147398,
        0.01719641499221325,
        0.03699910268187523,
        -0.014658477157354355,
        0.02821674570441246,
        0.015565858222544193
      ]
    },
    {
      "id": "1813b41a",
      "filePath": "05-rag-codebase/src/splitter.ts",
      "content": "current.startLine,\n\t\t\t\tcurrent.type,\n\t\t\t\tcurrent.name\n\t\t\t);\n\t\t\tchunks.push(...subChunks);\n\t\t} else {\n\t\t\tchunks.push({\n\t\t\t\tid: generateId(file.filePath, current.startLine),\n\t\t\t\tfilePath: file.filePath,\n\t\t\t\tcontent,\n\t\t\t\tstartLine: current.startLine + 1,\n\t\t\t\tendLine: nextStart,\n\t\t\t\ttype: current.type,\n\t\t\t\tname: current.name,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn chunks;\n}\n\n/**\n * 切分过大的代码块\n * 按固定行数切分，保持上下文重叠\n */",
      "startLine": 119,
      "endLine": 143,
      "type": "function",
      "name": "splitFile (part 3)",
      "embedding": [
        -0.15201546251773834,
        0.05819614976644516,
        0.030203232541680336,
        -0.010340478271245956,
        0.021369552239775658,
        0.00570633402094245,
        0.01301591657102108,
        0.04532158374786377,
        -0.031323548406362534,
        0.04741676151752472,
        0.012985305860638618,
        -0.0006586709059774876,
        -0.024657834321260452,
        -0.08840383589267731,
        0.02358577400445938,
        0.044337812811136246,
        -0.15567325055599213,
        0.05276789888739586,
        -0.026085268706083298,
        -0.11846640706062317,
        0.024907194077968597,
        0.007531597279012203,
        0.004614538978785276,
        0.018467005342245102,
        0.08255812525749207,
        0.04246216267347336,
        -0.036172106862068176,
        0.026824278756976128,
        0.053382568061351776,
        -0.03727284073829651,
        0.08581516891717911,
        0.027377020567655563,
        0.020496046170592308,
        0.02652878500521183,
        0.02804778330028057,
        0.06857381761074066,
        -0.04309781640768051,
        0.04256921634078026,
        -0.033226724714040756,
        0.04595042020082474,
        0.040917832404375076,
        0.04099533334374428,
        -0.007935826666653156,
        -0.0507613867521286,
        0.0577356182038784,
        0.0022106817923486233,
        -0.10176710784435272,
        0.01603267900645733,
        0.0038793154526501894,
        -0.008117792196571827,
        -0.09902966767549515,
        0.030043411999940872,
        -0.08170216530561447,
        0.06185073405504227,
        0.06654483824968338,
        -0.042832307517528534,
        -0.0041766781359910965,
        -0.022910799831151962,
        0.0005611758679151535,
        0.07251332700252533,
        -0.0074040861800313,
        0.01374754123389721,
        0.0014780252240598202,
        -0.09183818846940994,
        0.13513211905956268,
        0.035573724657297134,
        -0.02062048204243183,
        0.10587622225284576,
        0.020922601222991943,
        -0.00013569247676059604,
        -0.07848285883665085,
        0.05949202924966812,
        -0.016090208664536476,
        0.058496613055467606,
        -0.08003267645835876,
        -0.07686665654182434,
        -0.04297471418976784,
        0.04632972180843353,
        -0.017646998167037964,
        -0.12032705545425415,
        -0.0409700907766819,
        -0.005094960331916809,
        0.06549066305160522,
        -0.011199606582522392,
        -0.07026609033346176,
        0.03816962242126465,
        -0.009484277106821537,
        0.0029731106478720903,
        -0.02638942562043667,
        -0.010262690484523773,
        -0.04636850953102112,
        0.0018369979225099087,
        0.0881882905960083,
        0.08123190701007843,
        -0.026685427874326706,
        0.025258246809244156,
        -0.012627723626792431,
        0.02504071220755577,
        0.07606669515371323,
        0.029225602746009827,
        -0.041512664407491684,
        0.05349874868988991,
        0.09918262809515,
        -0.025940360501408577,
        -0.06074628233909607,
        -0.12606877088546753,
        0.03850845247507095,
        -0.0005329644773155451,
        0.053247153759002686,
        0.0012912852689623833,
        0.01773836277425289,
        0.024878978729248047,
        -0.04233282804489136,
        -0.07717413455247879,
        -0.0030721123330295086,
        -0.06550946831703186,
        0.0017703218618407845,
        -0.04223259538412094,
        0.060348719358444214,
        0.07201599329710007,
        0.014004332944750786,
        -0.016223061829805374,
        -0.04292473942041397,
        0.007996429689228535,
        0.023231714963912964,
        -0.028439294546842575,
        0.10004331171512604,
        2.445537385701058e-33,
        -0.023905690759420395,
        -0.0029026425909250975,
        0.06438358873128891,
        0.11918151378631592,
        0.038328856229782104,
        -0.06662949919700623,
        -0.07428112626075745,
        -0.03577454388141632,
        -0.1439598649740219,
        0.0866297036409378,
        -0.03320275619626045,
        -0.0934692770242691,
        -0.03602147847414017,
        0.02680540457367897,
        0.00608803890645504,
        -0.10649232566356659,
        -0.010207297280430794,
        -0.06745944917201996,
        -0.07282993197441101,
        0.0009568404057063162,
        -0.04969536140561104,
        0.04235605522990227,
        -0.013801653869450092,
        0.03130406513810158,
        -0.04092632606625557,
        -0.034287627786397934,
        0.045936014503240585,
        -0.08075952529907227,
        -0.007895133458077908,
        0.00811855960637331,
        0.053792066872119904,
        -0.04488634690642357,
        0.0006408272311091423,
        0.0043780081905424595,
        0.011926560662686825,
        0.031156575307250023,
        -0.024178091436624527,
        0.0005077497917227447,
        -0.08643365651369095,
        0.0022625925485044718,
        0.02305091731250286,
        -0.017826523631811142,
        -0.02032092958688736,
        0.047406699508428574,
        -0.04075222462415695,
        -0.0023868342395871878,
        -0.05845055729150772,
        0.006531922146677971,
        0.04394053667783737,
        0.008810474537312984,
        -0.013998392038047314,
        0.11999791115522385,
        0.04994674399495125,
        0.03650391846895218,
        0.04594794660806656,
        -0.012232443317770958,
        -0.034531231969594955,
        0.0595867782831192,
        0.06290239095687866,
        -0.004598621279001236,
        0.015065125189721584,
        0.004981405101716518,
        -0.04774825647473335,
        0.11653877049684525,
        0.014253050088882446,
        -0.0017497357912361622,
        0.022493455559015274,
        0.0028452223632484674,
        0.08171515166759491,
        0.01817457005381584,
        -0.07991283386945724,
        -0.03880052641034126,
        0.02600817196071148,
        -0.03902975842356682,
        -0.004490335006266832,
        0.01249970868229866,
        -0.0037922943010926247,
        0.012257102876901627,
        -0.024734467267990112,
        -0.1169983521103859,
        -0.04639395698904991,
        -0.009875334799289703,
        0.07829710841178894,
        -0.09726833552122116,
        0.0357445552945137,
        0.036506086587905884,
        -0.013777748681604862,
        -0.06421235203742981,
        0.024539168924093246,
        -0.047895949333906174,
        -0.06644970923662186,
        -0.030805980786681175,
        0.01084743719547987,
        -0.05170945078134537,
        0.027633441612124443,
        -3.0721789141160264e-33,
        0.13567711412906647,
        0.0415838398039341,
        -0.032196782529354095,
        -0.07187309116125107,
        -0.000990724191069603,
        0.0024379706010222435,
        0.0075099291279911995,
        0.09206047654151917,
        -0.014102013781666756,
        0.12468788772821426,
        -0.04591161757707596,
        0.020836513489484787,
        0.05924326553940773,
        -0.023509925231337547,
        0.006694929674267769,
        -0.040355052798986435,
        0.0789647027850151,
        0.024752583354711533,
        0.06383851170539856,
        0.0191680695861578,
        -0.01325043011456728,
        -0.06109186261892319,
        -0.01501904521137476,
        0.06674404442310333,
        0.015911728143692017,
        0.07127866894006729,
        0.06070667877793312,
        0.04844296723604202,
        -0.008524449542164803,
        -0.037008900195360184,
        -0.028557131066918373,
        -0.032538384199142456,
        -0.02575497329235077,
        -0.012747183442115784,
        -0.06224238499999046,
        -0.10164212435483932,
        -0.012902839109301567,
        0.07118987292051315,
        0.005047493614256382,
        0.014360598288476467,
        -0.08452550321817398,
        0.06622769683599472,
        -0.046698737889528275,
        -0.034947171807289124,
        0.0072672138921916485,
        -0.04341781884431839,
        0.04583074897527695,
        0.08104418218135834,
        -0.1340784728527069,
        -0.03566346690058708,
        0.016217395663261414,
        -0.05257859453558922,
        0.024944789707660675,
        -0.06380438804626465,
        0.0059943171218037605,
        -0.05518099293112755,
        -0.036491066217422485,
        -0.022378677502274513,
        -0.10638463497161865,
        -0.047776125371456146,
        -0.012678367085754871,
        0.04748207703232765,
        -0.025833427906036377,
        -0.07210992276668549,
        0.09522140771150589,
        -0.05768588185310364,
        -0.024790868163108826,
        -0.035312190651893616,
        0.009241310879588127,
        -0.05144893005490303,
        -0.0003820658312179148,
        0.02197783626616001,
        0.029184672981500626,
        0.009639140218496323,
        -0.03519761934876442,
        0.05356766656041145,
        0.0055009773932397366,
        -0.0003494897682685405,
        0.027485709637403488,
        0.031665317714214325,
        0.007994799874722958,
        -0.05371561646461487,
        0.04919392988085747,
        -0.020309848710894585,
        -0.024164428934454918,
        -0.01968587003648281,
        -0.014175252057611942,
        0.054047591984272,
        0.04422834515571594,
        -0.0770793929696083,
        -0.013538054190576077,
        0.030781928449869156,
        0.07931891828775406,
        0.061289623379707336,
        -0.015528611838817596,
        -4.540381226547652e-8,
        -0.0545942522585392,
        -0.03756406158208847,
        -0.13425427675247192,
        0.009258444420993328,
        0.04913018271327019,
        -0.003704172559082508,
        -0.05786157771945,
        0.00989975593984127,
        0.0168522410094738,
        -0.02111397683620453,
        0.04102472588419914,
        0.006549438927322626,
        -0.05090121552348137,
        0.04365038871765137,
        -0.00769883394241333,
        -0.053864941000938416,
        0.04339812323451042,
        0.06563542783260345,
        -0.0510796457529068,
        0.01642756536602974,
        0.009250788949429989,
        0.001873624394647777,
        0.06462185829877853,
        0.00536675238981843,
        -0.024538712576031685,
        -0.002778055611997843,
        -0.03085964173078537,
        0.014124621637165546,
        -0.03151214122772217,
        -0.04711640998721123,
        -0.041686464101076126,
        0.042678698897361755,
        0.009077143855392933,
        0.0029700424056500196,
        0.00034176092594861984,
        0.08729805797338486,
        0.07458455115556717,
        0.033932991325855255,
        0.06122386083006859,
        0.01332035381346941,
        0.11495847254991531,
        -0.05155142769217491,
        0.08063776791095734,
        -0.0025302227586507797,
        -0.04850737750530243,
        -0.10682957619428635,
        -0.05340774357318878,
        0.02813739888370037,
        0.017584605142474174,
        -0.019896801561117172,
        -0.009993377141654491,
        -0.009414332918822765,
        -0.021029511466622353,
        -0.013291805982589722,
        -0.012154859490692616,
        -0.004159063100814819,
        0.007823917083442211,
        0.04165498539805412,
        0.008003774099051952,
        -0.04096777364611626,
        0.007080942392349243,
        -0.014862025156617165,
        0.026484290137887,
        0.04863990843296051
      ]
    },
    {
      "id": "123f34d0",
      "filePath": "05-rag-codebase/src/splitter.ts",
      "content": "function splitLargeBlock(\n\tfilePath: string,\n\tcontent: string,\n\tbaseStartLine: number,\n\ttype: 'function' | 'class' | 'other',\n\tname?: string\n): CodeChunk[] {\n\tconst chunks: CodeChunk[] = [];\n\tconst lines = content.split('\\n');\n\tconst chunkSize = 50;  // 每个子块最多 50 行\n\tconst overlap = 5;     // 重叠 5 行保持上下文\n\n\tfor (let i = 0; i < lines.length; i += chunkSize - overlap) {\n\t\tconst endIdx = Math.min(i + chunkSize, lines.length);\n\t\tconst chunkContent = lines.slice(i, endIdx).join('\\n').trim();\n\n\t\tif (chunkContent.length >= MIN_CHUNK_SIZE) {\n\t\t\tchunks.push({\n\t\t\t\tid: generateId(filePath, baseStartLine + i),\n\t\t\t\tfilePath,\n\t\t\t\tcontent: chunkContent,\n\t\t\t\tstartLine: baseStartLine + i + 1,\n\t\t\t\tendLine: baseStartLine + endIdx,\n\t\t\t\ttype,\n\t\t\t\tname: name ? `${name} (part ${Math.floor(i / (chunkSize - overlap)) + 1})` : undefined,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn chunks;\n}\n\n/**\n * 切分多个文件\n */",
      "startLine": 144,
      "endLine": 178,
      "type": "function",
      "name": "splitLargeBlock",
      "embedding": [
        -0.16347435116767883,
        0.09240351617336273,
        0.04094919189810753,
        -0.017840098589658737,
        0.013477904722094536,
        -0.003857723902910948,
        0.033079344779253006,
        0.03963456302881241,
        -0.04714576154947281,
        0.011128384619951248,
        -0.005039806943386793,
        0.0023455522023141384,
        -0.025380296632647514,
        -0.05894907936453819,
        0.021312059834599495,
        0.045511677861213684,
        -0.17484982311725616,
        0.068048857152462,
        -0.09521592408418655,
        -0.1587461233139038,
        0.06143006309866905,
        0.016160305589437485,
        -0.027548961341381073,
        0.029395267367362976,
        0.09046223759651184,
        0.07854118198156357,
        -0.004719932563602924,
        0.021619271486997604,
        0.05326671525835991,
        -0.03213777765631676,
        0.06522336602210999,
        0.02107618935406208,
        0.05130195617675781,
        0.03612333536148071,
        -0.006052856799215078,
        0.07050012797117233,
        -0.0931246280670166,
        0.013067827560007572,
        0.007362529169768095,
        0.029477840289473534,
        0.0006931343814358115,
        0.0803513303399086,
        -0.0018488182686269283,
        -0.0525909885764122,
        0.08853113651275635,
        -0.02706683799624443,
        -0.06107255071401596,
        -0.001715801889076829,
        -0.026208337396383286,
        -0.011255482211709023,
        -0.053763020783662796,
        0.029243703931570053,
        -0.06996188312768936,
        0.030323753133416176,
        0.07514378428459167,
        -0.09771870821714401,
        0.025984525680541992,
        -0.0740116685628891,
        0.019408028572797775,
        0.025316156446933746,
        -0.02298666350543499,
        -0.00874406099319458,
        0.051494911313056946,
        -0.12187924236059189,
        0.0984313115477562,
        -0.005272299982607365,
        -0.0276951864361763,
        0.12972261011600494,
        0.020410725846886635,
        0.0717867836356163,
        -0.06568311154842377,
        0.12825626134872437,
        0.018755869939923286,
        0.09319791942834854,
        -0.04234149679541588,
        -0.009816926904022694,
        -0.018292661756277084,
        0.04314584657549858,
        0.006031735800206661,
        -0.04498613625764847,
        -0.08549034595489502,
        -0.04806915298104286,
        0.034030891954898834,
        -0.031660228967666626,
        -0.01788724958896637,
        0.03830670192837715,
        -0.009129666723310947,
        0.021174203604459763,
        -0.007725967559963465,
        -0.026059240102767944,
        -0.049372319132089615,
        0.03853610157966614,
        0.010871347039937973,
        0.04039990156888962,
        0.0299976859241724,
        0.030901148915290833,
        -0.023674042895436287,
        0.008793697692453861,
        0.0013587073190137744,
        0.05750102922320366,
        -0.043454550206661224,
        0.056509312242269516,
        0.03387615829706192,
        -0.030840743333101273,
        -0.07221580296754837,
        -0.021058635786175728,
        0.07196103781461716,
        0.03226213902235031,
        -0.003876675385981798,
        -0.044303376227617264,
        0.033023983240127563,
        0.011509209871292114,
        -0.009076438844203949,
        -0.005848262459039688,
        -0.0016903915675356984,
        -0.06844238191843033,
        0.0921618640422821,
        -0.057750239968299866,
        0.08999250084161758,
        0.05444653704762459,
        0.08927014470100403,
        0.012729944661259651,
        -0.0470181368291378,
        0.055220190435647964,
        0.007365790661424398,
        -0.051774293184280396,
        0.08592241257429123,
        8.654190714161259e-33,
        -0.052587494254112244,
        -0.010456343181431293,
        0.01530209369957447,
        0.07718144357204437,
        0.019941726699471474,
        -0.025158729404211044,
        -0.06641820818185806,
        -0.05707859247922897,
        -0.1283586323261261,
        0.09280652552843094,
        -0.07327084243297577,
        -0.04225904121994972,
        -0.004376293160021305,
        0.02166125923395157,
        -0.007984611205756664,
        -0.08766086399555206,
        0.04863617569208145,
        -0.03867032006382942,
        -0.05703570321202278,
        0.0002444644342176616,
        -0.03681516274809837,
        -0.02126202918589115,
        -0.03936673328280449,
        -0.0005114931263960898,
        -0.03092968463897705,
        -0.04844274744391441,
        0.03578456491231918,
        -0.09859748184680939,
        -0.02339155040681362,
        -0.0227699913084507,
        0.0632745698094368,
        -0.0358581505715847,
        -0.0035440828651189804,
        0.0044007753022015095,
        0.046443190425634384,
        0.03202332183718681,
        0.019412368535995483,
        -0.01321239024400711,
        -0.08467291295528412,
        0.022227725014090538,
        0.02060609869658947,
        -0.0008073351345956326,
        -0.0006590894190594554,
        0.01792432926595211,
        0.013001978397369385,
        -0.009030068293213844,
        -0.009523938409984112,
        0.03145241364836693,
        -0.008993152529001236,
        -0.009260452352464199,
        0.0038355046417564154,
        0.11399640142917633,
        0.06293681263923645,
        -0.019637692719697952,
        0.03551395982503891,
        -0.006431597750633955,
        0.018132291734218597,
        0.011629000306129456,
        0.03451921045780182,
        0.07124979048967361,
        -0.027347691357135773,
        0.00984435249119997,
        -0.05231262370944023,
        0.11311302334070206,
        0.04789184033870697,
        0.000624445267021656,
        0.02170879952609539,
        -0.0047186994925141335,
        0.0395699143409729,
        0.0042354511097073555,
        -0.06480012834072113,
        -0.05557190254330635,
        0.03972809761762619,
        0.0077985175885260105,
        -0.01592447981238365,
        -0.06902769953012466,
        -0.04825206845998764,
        -0.023097410798072815,
        -0.04370688274502754,
        -0.15255315601825714,
        0.009685481898486614,
        -0.023630416020751,
        0.07255372405052185,
        -0.11165955662727356,
        -0.006077283062040806,
        0.023939333856105804,
        0.0001738533901516348,
        -0.09125392138957977,
        -0.024240367114543915,
        -0.06819713860750198,
        -0.08316507935523987,
        -0.06131822615861893,
        0.04940621927380562,
        -0.08905777335166931,
        0.066808320581913,
        -9.056234761397436e-33,
        0.11966738849878311,
        0.026857569813728333,
        0.0249637421220541,
        -0.04153023287653923,
        0.017741097137331963,
        -0.010980895720422268,
        0.04001414030790329,
        0.07925957441329956,
        -0.001667645527049899,
        0.04709753394126892,
        -0.03306393697857857,
        0.012040437199175358,
        0.0022421686444431543,
        -0.019934626296162605,
        0.035507380962371826,
        0.020064452663064003,
        -0.005698968190699816,
        -0.009803078137338161,
        0.06576066464185715,
        0.011783263646066189,
        -0.026360416784882545,
        0.015370655804872513,
        0.07435830682516098,
        0.06208362802863121,
        -0.053826890885829926,
        0.0833977535367012,
        0.021151965484023094,
        0.05635503679513931,
        -0.0024967147037386894,
        -0.07971197366714478,
        -0.07749795913696289,
        -0.07130573689937592,
        -0.04526488855481148,
        -0.03430335968732834,
        -0.02833043597638607,
        -0.08704239130020142,
        0.013011950068175793,
        0.08350863307714462,
        -0.0033393194898962975,
        0.010649424046278,
        -0.03971511498093605,
        0.012211327441036701,
        -0.020140884444117546,
        -0.04751911386847496,
        0.022604184225201607,
        0.0034483543131500483,
        0.035955216735601425,
        0.12961196899414062,
        -0.10698233544826508,
        -0.04702100157737732,
        -0.03664913401007652,
        0.007323573809117079,
        -0.026716595515608788,
        -0.009672996588051319,
        0.009456316940486431,
        -0.04648813232779503,
        -0.05877979099750519,
        -0.0399109423160553,
        -0.05169285088777542,
        -0.03265947103500366,
        -0.04715464636683464,
        -0.009801089763641357,
        0.02675105445086956,
        -0.038663748651742935,
        0.1427755355834961,
        -0.04417518898844719,
        -0.0308651365339756,
        -0.037206441164016724,
        -0.018316900357604027,
        0.03644924983382225,
        -0.029935197904706,
        0.07962270826101303,
        0.056523192673921585,
        -0.0027416564989835024,
        -0.030915265902876854,
        0.025821801275014877,
        0.004127973690629005,
        0.002360045211389661,
        0.056444816291332245,
        0.05268760398030281,
        -0.00977818202227354,
        -0.025905223563313484,
        0.03221191093325615,
        -0.02060755342245102,
        -0.03502095490694046,
        -0.012687083333730698,
        -0.019885580986738205,
        0.07996875792741776,
        0.061704568564891815,
        -0.06604594737291336,
        -0.05560273677110672,
        -0.021153714507818222,
        0.029846511781215668,
        -0.022168593481183052,
        -0.01432775054126978,
        -5.6263548486867876e-8,
        -0.030961427837610245,
        -0.04269611835479736,
        -0.13818395137786865,
        -0.03813571110367775,
        -0.00658319192007184,
        -0.011079961434006691,
        -0.044541195034980774,
        -0.006760002579540014,
        -0.0024401077535003424,
        -0.05765518173575401,
        0.08849095553159714,
        0.04070384427905083,
        -0.05281878262758255,
        0.03691453859210014,
        -0.04295025020837784,
        -0.039711322635412216,
        -0.0023299874737858772,
        0.01581062190234661,
        -0.051213935017585754,
        0.00045944316661916673,
        -0.024819903075695038,
        0.015479383990168571,
        -0.00048451535985805094,
        0.015348049812018871,
        0.014953579753637314,
        -0.055439602583646774,
        -0.01932600326836109,
        0.05371356010437012,
        0.043878789991140366,
        -0.04006161540746689,
        0.020947523415088654,
        0.01716001331806183,
        0.04136171564459801,
        0.016958780586719513,
        0.025484509766101837,
        -0.007451941259205341,
        0.05932760238647461,
        0.030353160575032234,
        0.03469233214855194,
        0.035645756870508194,
        0.08261894434690475,
        0.006426813080906868,
        0.05579078197479248,
        -0.024724991992115974,
        0.044632695615291595,
        -0.1312803477048874,
        -0.04313722997903824,
        -0.028590278699994087,
        0.05805276334285736,
        0.01310280803591013,
        -0.0046330783516168594,
        -0.016161657869815826,
        -0.05205347388982773,
        -0.004590767435729504,
        -0.024762367829680443,
        -0.09546376019716263,
        0.002554947044700384,
        0.0035411587450653315,
        0.0010331935482099652,
        -0.004723140969872475,
        0.02567244879901409,
        -0.050427284091711044,
        0.04700159281492233,
        0.019054818898439407
      ]
    },
    {
      "id": "113bd8a6",
      "filePath": "05-rag-codebase/src/splitter.ts",
      "content": "export function splitFiles(files: LoadedFile[]): CodeChunk[] {\n\tconst allChunks: CodeChunk[] = [];\n\n\tfor (const file of files) {\n\t\tconst chunks = splitFile(file);\n\t\tallChunks.push(...chunks);\n\t}\n\n\tconsole.log(`[splitter] 切分出 ${allChunks.length} 个 chunks`);\n\treturn allChunks;\n}",
      "startLine": 179,
      "endLine": 190,
      "type": "function",
      "name": "splitFiles",
      "embedding": [
        -0.11038707196712494,
        0.02984168939292431,
        0.02112109772861004,
        0.0010247047757729888,
        0.06573156267404556,
        -0.013139990158379078,
        -0.017263468354940414,
        0.04476417973637581,
        -0.012979986146092415,
        0.04471131041646004,
        0.01541801355779171,
        0.03345657140016556,
        -0.09251270443201065,
        -0.06814146786928177,
        0.050745561718940735,
        -0.002949830610305071,
        -0.18875160813331604,
        0.030659157782793045,
        -0.05134778097271919,
        -0.07690493017435074,
        0.044029686599969864,
        -0.017731238156557083,
        -0.03639344125986099,
        -0.003146498231217265,
        0.11563101410865784,
        0.05497615784406662,
        -0.01737830601632595,
        -0.037784870713949203,
        0.019288066774606705,
        -0.01620773784816265,
        0.09414442628622055,
        -0.015734804794192314,
        -0.020810937508940697,
        0.02731296233832836,
        0.010453169234097004,
        0.05303646996617317,
        -0.08722840994596481,
        0.025906112045049667,
        -0.012259084731340408,
        0.022581811994314194,
        0.03017270565032959,
        0.06449209898710251,
        -0.03739729896187782,
        -0.0529201403260231,
        0.03976140543818474,
        -0.015435835346579552,
        -0.08285140246152878,
        -0.004263398703187704,
        0.028615016490221024,
        -0.02118382789194584,
        -0.05627686157822609,
        0.04231338948011398,
        -0.08516889810562134,
        0.05621708929538727,
        0.09576767683029175,
        -0.10034575313329697,
        0.0019493430154398084,
        -0.045595645904541016,
        0.0010607063304632902,
        0.10092049837112427,
        -0.01836518943309784,
        0.009423932991921902,
        -0.0014674757840111852,
        -0.07894144207239151,
        0.1535380333662033,
        0.011197823099792004,
        -0.045515358448028564,
        0.10575752705335617,
        -0.012407097034156322,
        0.007966467179358006,
        -0.0894785076379776,
        0.08730174601078033,
        -0.008306317031383514,
        0.058624833822250366,
        -0.00550352456048131,
        -0.06435578316450119,
        -0.018266981467604637,
        0.05734192579984665,
        0.027299752458930016,
        -0.016715826466679573,
        -0.056665290147066116,
        -0.020638728514313698,
        0.03740224987268448,
        -0.027213649824261665,
        -0.053348198533058167,
        0.0630953311920166,
        -0.003542484948411584,
        0.04800834879279137,
        -0.042470380663871765,
        -0.034295544028282166,
        -0.05985541641712189,
        -0.001321593765169382,
        0.03558843210339546,
        0.11177840828895569,
        -0.05858323723077774,
        -0.003946184646338224,
        -0.018769297748804092,
        0.04514670372009277,
        0.035927560180425644,
        -0.012180951423943043,
        -0.04786013439297676,
        0.009270550683140755,
        0.13193900883197784,
        -0.0339943952858448,
        -0.06964505463838577,
        -0.08214631676673889,
        0.06119424104690552,
        -0.017551572993397713,
        0.08610980957746506,
        0.03335743770003319,
        0.00973601546138525,
        0.06687235087156296,
        -0.014350762590765953,
        -0.04660416394472122,
        -0.018486622720956802,
        -0.05327213928103447,
        -0.04396239295601845,
        -0.057206232100725174,
        0.06815450638532639,
        0.09302894026041031,
        0.0329841785132885,
        0.01551596075296402,
        -0.034427542239427567,
        0.0622422955930233,
        0.03785232454538345,
        -0.03290858864784241,
        0.10319479554891586,
        5.253440006826287e-33,
        -0.0692802295088768,
        -0.023528534919023514,
        0.04538843035697937,
        0.11717701703310013,
        0.005780803970992565,
        -0.06007538363337517,
        -0.051298171281814575,
        -0.07516614347696304,
        -0.10114488750696182,
        0.11578705161809921,
        -0.06044461578130722,
        -0.005896603222936392,
        -0.012315543368458748,
        0.052413202822208405,
        -0.01784544438123703,
        -0.06989636272192001,
        0.03766777738928795,
        -0.06194303184747696,
        -0.017730137333273888,
        0.036648496985435486,
        -0.04123525321483612,
        -0.004868948832154274,
        -0.016465913504362106,
        0.07801233232021332,
        -0.04127425700426102,
        -0.02758152037858963,
        0.015543082728981972,
        -0.03473347797989845,
        -0.01596396043896675,
        0.02054382860660553,
        0.08133375644683838,
        0.006229683756828308,
        -0.0062487125396728516,
        0.0014558415859937668,
        0.07360824197530746,
        -0.0012568214442580938,
        -0.08017324656248093,
        0.04569162800908089,
        -0.14526696503162384,
        0.02027193084359169,
        0.012633536010980606,
        -0.026248056441545486,
        -0.046764031052589417,
        0.040273796766996384,
        -0.011001907289028168,
        -0.037857551127672195,
        -0.036484621465206146,
        0.005530313588678837,
        0.07566452026367188,
        0.013351964764297009,
        -0.01716676354408264,
        0.12510444223880768,
        0.04393642395734787,
        -0.0007363382028415799,
        0.06467754393815994,
        -0.009678022935986519,
        0.037044864147901535,
        -0.004394148010760546,
        0.06170535460114479,
        0.014859913848340511,
        0.026389745995402336,
        0.013758358545601368,
        -0.03629325330257416,
        0.03973544389009476,
        -0.009588656947016716,
        0.00013942510122433305,
        0.003906854894012213,
        0.025283535942435265,
        0.02316751889884472,
        0.06040637195110321,
        -0.05570811405777931,
        -0.03561445698142052,
        0.03332939371466637,
        -0.055176880210638046,
        -0.0008215988054871559,
        0.007239328697323799,
        0.008564438670873642,
        0.006540099624544382,
        -0.03254523128271103,
        -0.1241498664021492,
        -0.016851624473929405,
        0.01955317333340645,
        0.06909988820552826,
        -0.10366733372211456,
        0.029532233253121376,
        0.012135965749621391,
        -0.060880716890096664,
        -0.09654128551483154,
        0.027805034071207047,
        0.02284691110253334,
        -0.07388408482074738,
        -0.030835306271910667,
        0.0010577879147604108,
        -0.11154133081436157,
        0.012307663448154926,
        -5.362988366141247e-33,
        0.1252422332763672,
        0.051919106394052505,
        -0.013777964748442173,
        -0.04731766879558563,
        -0.024017583578824997,
        0.022637182846665382,
        0.0059700021520257,
        0.13055655360221863,
        0.012729862704873085,
        0.12122811377048492,
        -0.032093096524477005,
        -0.010952254757285118,
        0.012564440257847309,
        -0.0031402702443301678,
        0.015640757977962494,
        -0.00734458165243268,
        0.055449262261390686,
        -0.02297275885939598,
        0.06966570764780045,
        -0.006145523861050606,
        0.014576032757759094,
        -0.04749482497572899,
        0.06647231429815292,
        0.049663543701171875,
        -0.03495291993021965,
        0.06826220452785492,
        0.07369031012058258,
        -0.00471084751188755,
        0.016929836943745613,
        -0.07432326674461365,
        -0.04281698912382126,
        -0.039301373064517975,
        -0.0397036150097847,
        0.012337461113929749,
        -0.06817170977592468,
        -0.08606916666030884,
        -0.009718306362628937,
        0.0954994186758995,
        0.02020130306482315,
        0.0018845165614038706,
        -0.09945646673440933,
        0.02948702499270439,
        -0.03817143663764,
        -0.0074441097676754,
        -0.04188889265060425,
        -0.06831017881631851,
        0.057554204016923904,
        0.06856400519609451,
        -0.06297040730714798,
        -0.04569730907678604,
        0.020189989358186722,
        -0.03305063769221306,
        -0.0015226415125653148,
        -0.040535688400268555,
        -0.0017206048360094428,
        -0.04052699729800224,
        -0.02089410275220871,
        -0.04205162078142166,
        -0.015133697539567947,
        -0.01889326237142086,
        -0.04222559183835983,
        -0.0028261381667107344,
        0.0076501211151480675,
        -0.09191808104515076,
        0.04917583242058754,
        -0.03336620703339577,
        -0.026134196668863297,
        0.002715212060138583,
        0.0017819680506363511,
        0.02046944573521614,
        -0.02854771353304386,
        0.024014754220843315,
        0.02315514348447323,
        0.005710524041205645,
        -0.03968796133995056,
        0.05229826644062996,
        -0.0642225444316864,
        -0.05848102271556854,
        0.06212819740176201,
        0.05139761045575142,
        0.03476017713546753,
        -0.043588683009147644,
        0.044010043144226074,
        -0.05374244228005409,
        -0.012630087323486805,
        -0.0026767596136778593,
        -0.0013416849542409182,
        0.03132075071334839,
        0.03769105672836304,
        -0.08571448922157288,
        -0.00832869578152895,
        0.015391003340482712,
        0.10947920382022858,
        0.04058099165558815,
        -0.00009495350968791172,
        -4.137068287946022e-8,
        -0.028068678453564644,
        -0.007694557309150696,
        -0.1188511997461319,
        -0.02888658083975315,
        -0.0120851444080472,
        -0.03692479059100151,
        -0.00925788376480341,
        0.055169325321912766,
        -0.028679259121418,
        0.04928906634449959,
        0.06300445646047592,
        0.009898576885461807,
        -0.01759733259677887,
        0.03523097187280655,
        0.025821981951594353,
        -0.06066085398197174,
        0.047358497977256775,
        0.07007971405982971,
        -0.02838275022804737,
        0.016147730872035027,
        0.0003638189227785915,
        0.03384960815310478,
        0.08833303302526474,
        0.01977117359638214,
        0.04169845208525658,
        -0.04013514146208763,
        -0.02799217216670513,
        0.032736197113990784,
        -0.024781888350844383,
        -0.026194902136921883,
        -0.040346477180719376,
        0.026772938668727875,
        0.01017708983272314,
        -0.07379626482725143,
        0.0007649299222975969,
        0.04114580154418945,
        0.009769164025783539,
        0.019107043743133545,
        0.06766001880168915,
        0.012358466163277626,
        0.06978737562894821,
        -0.03835892677307129,
        0.07229882478713989,
        0.018597615882754326,
        -0.10007061809301376,
        -0.06128996983170509,
        -0.042715806514024734,
        0.026787061244249344,
        0.011224285699427128,
        -0.03540424257516861,
        0.0006231549778021872,
        -0.0012508833315223455,
        -0.08608738332986832,
        0.025764737278223038,
        0.004105605650693178,
        -0.027118541300296783,
        -0.029845885932445526,
        -0.022084103897213936,
        0.0027421838603913784,
        -0.05244110897183418,
        -0.034300170838832855,
        -0.003425206057727337,
        -0.00793542806059122,
        0.019584093242883682
      ]
    },
    {
      "id": "41886817",
      "filePath": "05-rag-codebase/src/retriever.ts",
      "content": "// retriever.ts - 向量检索\n// 职责：基于余弦相似度进行粗筛，返回 Top-N 候选\n\nimport type { IndexedChunk, RetrievalResult } from './types.js';\n\n/**\n * 计算两个向量的余弦相似度\n * 余弦相似度 = (A·B) / (|A| * |B|)\n */",
      "startLine": 1,
      "endLine": 9,
      "type": "other",
      "embedding": [
        -0.11806251108646393,
        0.11613153666257858,
        -0.013417227193713188,
        0.04246791452169418,
        -0.022209754213690758,
        0.03685315325856209,
        0.03407137468457222,
        0.0330062136054039,
        0.009141724556684494,
        -0.02370234951376915,
        0.03166476637125015,
        0.048598870635032654,
        -0.00880215410143137,
        -0.03002658113837242,
        -0.033443327993154526,
        0.03642302006483078,
        -0.10348324477672577,
        0.06553442031145096,
        -0.02339455857872963,
        -0.06903655081987381,
        0.012204747647047043,
        0.06039790064096451,
        0.01242517028003931,
        -0.05123817175626755,
        -0.00300335674546659,
        0.01823541149497032,
        -0.05115369334816933,
        -0.022789163514971733,
        0.05296821892261505,
        -0.003364305943250656,
        -0.018977034837007523,
        0.045038919895887375,
        -0.009073794819414616,
        0.061535343527793884,
        0.002745979931205511,
        0.020364614203572273,
        -0.07074785232543945,
        -0.013265063054859638,
        0.10601377487182617,
        0.017799202352762222,
        0.0553043968975544,
        0.054463423788547516,
        0.0272455383092165,
        -0.05013442039489746,
        0.029201017692685127,
        -0.0287996344268322,
        -0.07023452967405319,
        0.005397113971412182,
        -0.019275326281785965,
        0.0038433861918747425,
        -0.12134459614753723,
        0.044354263693094254,
        -0.06226424500346184,
        -0.00039755654870532453,
        0.06945571303367615,
        -0.020432520657777786,
        -0.037433922290802,
        -0.054417237639427185,
        0.011752304621040821,
        0.0033593568950891495,
        0.004501474555581808,
        -0.04930047690868378,
        0.032647158950567245,
        -0.10779493302106857,
        0.05777779594063759,
        -0.006434364710003138,
        0.02257593348622322,
        0.04367448017001152,
        0.015318279154598713,
        -0.03948435187339783,
        -0.019291991367936134,
        -0.02102239616215229,
        -0.0338761992752552,
        0.03044252283871174,
        -0.007922166958451271,
        -0.052050475031137466,
        -0.07042516022920609,
        0.023715367540717125,
        0.02546696551144123,
        0.00494030537083745,
        -0.047897595912218094,
        -0.09429094940423965,
        0.09498842060565948,
        0.09918709844350815,
        -0.033827587962150574,
        0.022519029676914215,
        -0.040418826043605804,
        -0.05642446130514145,
        0.04321316257119179,
        0.0006096858414821327,
        -0.014202376827597618,
        -0.0318581648170948,
        0.007414572406560183,
        0.025273235514760017,
        -0.011405072174966335,
        0.028334420174360275,
        0.0018931581871584058,
        0.062069300562143326,
        -0.047065358608961105,
        0.0181225948035717,
        -0.005846384912729263,
        -0.022594980895519257,
        0.034269217401742935,
        -0.0011996710672974586,
        -0.14845728874206543,
        -0.013849020004272461,
        0.058902498334646225,
        -0.03379032388329506,
        0.03537499159574509,
        0.0002999545249622315,
        -0.004663842264562845,
        0.038161225616931915,
        -0.011978300288319588,
        -0.07343226671218872,
        -0.09212195873260498,
        -0.04580776393413544,
        -0.004222817253321409,
        -0.076626256108284,
        0.04249478131532669,
        -0.0006661265506409109,
        0.07052363455295563,
        0.015197559259831905,
        0.00751552265137434,
        -0.017511771991848946,
        -0.0016394465928897262,
        -0.00628103269264102,
        0.07066236436367035,
        6.225302001887691e-33,
        -0.07913878560066223,
        0.0819583386182785,
        -0.010115308687090874,
        0.008643864654004574,
        -0.0813850611448288,
        -0.09032504260540009,
        0.01779140904545784,
        -0.04597657918930054,
        -0.10376553237438202,
        0.05102076753973961,
        -0.11570049822330475,
        0.03542255982756615,
        -0.10639935731887817,
        -0.06580682098865509,
        -0.04038901627063751,
        0.005251930095255375,
        0.023242628201842308,
        -0.02058713138103485,
        -0.01591464877128601,
        0.003890790045261383,
        0.05985470116138458,
        0.06755319237709045,
        -0.030795684084296227,
        0.033468738198280334,
        -0.04489629715681076,
        0.002402125857770443,
        -0.01775181107223034,
        -0.02218695729970932,
        -0.03775714710354805,
        0.020640984177589417,
        0.09652430564165115,
        0.02093070186674595,
        -0.0018074295949190855,
        -0.02864258363842964,
        0.04174404218792915,
        0.017246877774596214,
        0.021518435329198837,
        0.05850210413336754,
        -0.06155054271221161,
        0.013030030764639378,
        0.04251006618142128,
        0.0407276377081871,
        -0.014554014429450035,
        -0.016467461362481117,
        -0.0077035860158503056,
        0.01013499591499567,
        -0.03373652696609497,
        -0.02257411554455757,
        0.0575326643884182,
        0.008802835829555988,
        -0.07561115175485611,
        0.06135515496134758,
        0.008485295809805393,
        0.07021500170230865,
        0.06495638936758041,
        0.007289647590368986,
        0.034424226731061935,
        0.07668454945087433,
        0.01973498985171318,
        0.053800541907548904,
        0.0785665512084961,
        -0.05059235170483589,
        0.03260857239365578,
        -0.0038159338291734457,
        -0.01810208335518837,
        -0.06964431703090668,
        0.022796548902988434,
        0.0024143243208527565,
        0.005236318800598383,
        0.041687216609716415,
        0.028005946427583694,
        0.0023848852142691612,
        0.08384425938129425,
        0.015312708914279938,
        0.06188328191637993,
        -0.059592727571725845,
        -0.04803722724318504,
        0.0035538491792976856,
        0.02662643976509571,
        -0.1295243352651596,
        -0.002863605273887515,
        -0.07815896719694138,
        0.03512602671980858,
        -0.008782506920397282,
        0.011534979566931725,
        0.034744132310152054,
        -0.016423556953668594,
        -0.052728865295648575,
        0.04322853311896324,
        -0.06464066356420517,
        -0.05249585956335068,
        -0.0333523154258728,
        -0.05863458290696144,
        -0.07964251935482025,
        -0.03289485722780228,
        -8.39897178881454e-33,
        0.08790367096662521,
        -0.03117327392101288,
        -0.037349164485931396,
        -0.041515618562698364,
        -0.07854060083627701,
        -0.04454851150512695,
        0.08024150133132935,
        0.009501641616225243,
        0.0024964080657809973,
        0.10050910711288452,
        0.033049799501895905,
        -0.012027314864099026,
        0.05999119207262993,
        -0.07375580817461014,
        0.11345960944890976,
        0.10145434737205505,
        -0.0015855878591537476,
        -0.043954998254776,
        -0.04750654846429825,
        -0.014982093125581741,
        -0.00018407114839646965,
        -0.05858774110674858,
        -0.06058945134282112,
        0.10762514919042587,
        -0.058112308382987976,
        0.0639401227235794,
        0.09004376828670502,
        0.035721734166145325,
        0.0011278854217380285,
        -0.05071430280804634,
        -0.003954045008867979,
        -0.048234619200229645,
        -0.03556343540549278,
        0.07530790567398071,
        -0.1035747081041336,
        -0.02429555356502533,
        0.034966256469488144,
        0.014003423042595387,
        -0.025860046967864037,
        0.0017532730707898736,
        -0.025714652612805367,
        -0.0028579586651176214,
        -0.045209094882011414,
        0.03982337564229965,
        0.08369152992963791,
        -0.07927217334508896,
        -0.00354728358797729,
        0.07490194588899612,
        0.040779996663331985,
        -0.14582601189613342,
        0.08187547326087952,
        -0.04284697398543358,
        0.02825358882546425,
        -0.0792798325419426,
        -0.032918330281972885,
        0.02219937928020954,
        -0.016269370913505554,
        -0.07102517038583755,
        -0.052610110491514206,
        -0.010298614390194416,
        -0.0009292379836551845,
        -0.03591594099998474,
        -0.07336939126253128,
        0.01499223429709673,
        0.008283494971692562,
        -0.0424690879881382,
        -0.003392388578504324,
        -0.04386671632528305,
        -0.04926231876015663,
        -0.10122179239988327,
        -0.008981632068753242,
        -0.008692340925335884,
        0.1122334897518158,
        -0.000014313879546534736,
        0.05897010490298271,
        0.04168747365474701,
        -0.0035214750096201897,
        0.06134416535496712,
        0.07102697342634201,
        0.009082087315618992,
        -0.07738889753818512,
        0.0560380257666111,
        0.054456282407045364,
        -0.007311009801924229,
        -0.05575559288263321,
        -0.042857520282268524,
        -0.05489606782793999,
        0.02595113031566143,
        0.005083094816654921,
        -0.07767098397016525,
        -0.008526156656444073,
        -0.046412765979766846,
        0.00028942988137714565,
        -0.02199518121778965,
        0.06654451787471771,
        -4.8620133696886114e-8,
        -0.11405244469642639,
        -0.04178095608949661,
        -0.10409023612737656,
        -0.06756101548671722,
        -0.0438297837972641,
        0.016831090673804283,
        -0.059349220246076584,
        0.03529055789113045,
        0.0157026294618845,
        -0.030243560671806335,
        0.004304075613617897,
        0.011852610856294632,
        -0.09129743278026581,
        0.050216782838106155,
        0.01077963225543499,
        -0.007268183398991823,
        0.00011963711585849524,
        0.06035832688212395,
        -0.03316368907690048,
        -0.031920433044433594,
        -0.03944690153002739,
        0.008748739026486874,
        0.14941754937171936,
        -0.07403159141540527,
        -0.02526816539466381,
        -0.01490180753171444,
        -0.07419175654649734,
        -0.015517986379563808,
        0.045421112328767776,
        0.029202794656157494,
        -0.04492105171084404,
        0.01672494038939476,
        0.0796554833650589,
        -0.07728760689496994,
        -0.004103939980268478,
        0.021090883761644363,
        0.08104212582111359,
        -0.013063245452940464,
        0.00024398352252319455,
        0.03626611456274986,
        0.10048092156648636,
        -0.040603216737508774,
        -0.014178779907524586,
        0.033839352428913116,
        0.004755467642098665,
        -0.020259538665413857,
        -0.009421599097549915,
        0.031191186979413033,
        0.10007381439208984,
        -0.02913619391620159,
        0.04161645472049713,
        -0.05787397921085358,
        -0.08046429604291916,
        0.0480484813451767,
        -0.08821555227041245,
        -0.06298365443944931,
        -0.031010523438453674,
        -0.043126944452524185,
        0.03298941254615784,
        -0.05562203750014305,
        0.07111012190580368,
        0.025570781901478767,
        -0.0003284214762970805,
        0.011575893498957157
      ]
    },
    {
      "id": "50ccaa98",
      "filePath": "05-rag-codebase/src/retriever.ts",
      "content": "function cosineSimilarity(a: number[], b: number[]): number {\n\tif (a.length !== b.length) {\n\t\tthrow new Error(`向量维度不匹配: ${a.length} vs ${b.length}`);\n\t}\n\n\tlet dotProduct = 0;\n\tlet normA = 0;\n\tlet normB = 0;\n\n\tfor (let i = 0; i < a.length; i++) {\n\t\tdotProduct += a[i] * b[i];\n\t\tnormA += a[i] * a[i];\n\t\tnormB += b[i] * b[i];\n\t}\n\n\tconst magnitude = Math.sqrt(normA) * Math.sqrt(normB);\n\tif (magnitude === 0) return 0;\n\n\treturn dotProduct / magnitude;\n}\n\n/**\n * 检索与查询最相似的 Top-N 个 chunks\n * @param queryEmbedding 查询向量\n * @param chunks 所有候选 chunks\n * @param topN 返回数量\n */",
      "startLine": 10,
      "endLine": 36,
      "type": "function",
      "name": "cosineSimilarity",
      "embedding": [
        -0.09358064085245132,
        0.017620285972952843,
        -0.07981640845537186,
        -0.07937657833099365,
        -0.014682754874229431,
        -0.025716179981827736,
        0.0028769802302122116,
        0.08984536677598953,
        -0.06004123017191887,
        0.02845895290374756,
        -0.004947304725646973,
        -0.001900367089547217,
        0.009234762750566006,
        -0.028894994407892227,
        0.029369834810495377,
        0.018596259877085686,
        -0.04969816282391548,
        0.056109726428985596,
        -0.061897601932287216,
        -0.08904056251049042,
        0.017129018902778625,
        0.027627509087324142,
        -0.07413164526224136,
        0.023385867476463318,
        0.08630337566137314,
        0.07392004877328873,
        0.012859710492193699,
        -0.008184092119336128,
        0.09239169955253601,
        -0.02199835516512394,
        0.053272247314453125,
        -0.038436710834503174,
        0.03360764682292938,
        0.031113961711525917,
        0.011423211544752121,
        0.0243939608335495,
        -0.02479659952223301,
        -0.026052456349134445,
        0.013266882859170437,
        -0.006886912975460291,
        0.004464270081371069,
        0.0929594486951828,
        -0.007221933454275131,
        0.005655757151544094,
        0.08844815939664841,
        0.014300345443189144,
        -0.06469843536615372,
        0.006489214953035116,
        -0.00762169947847724,
        -0.0303516648709774,
        -0.16601991653442383,
        0.03159671276807785,
        -0.09554644674062729,
        -0.013147639110684395,
        0.04282761365175247,
        -0.10576928406953812,
        -0.013321049511432648,
        -0.0590759702026844,
        0.07605032622814178,
        -0.015016632154583931,
        -0.00911078043282032,
        -0.05295094475150108,
        0.08967290818691254,
        -0.08510658144950867,
        0.0879284217953682,
        -0.0068915775045752525,
        0.07079818844795227,
        0.04964570701122284,
        -0.0002413335460005328,
        0.0895170196890831,
        -0.05080706998705864,
        0.06947363168001175,
        -0.10509157925844193,
        0.07075429707765579,
        -0.037048373371362686,
        0.03443669527769089,
        -0.05526602268218994,
        -0.025209931656718254,
        -0.019556956365704536,
        -0.05740863457322121,
        -0.05611715465784073,
        -0.007410528603941202,
        0.053200237452983856,
        -0.03303292393684387,
        -0.011952563188970089,
        0.02864323928952217,
        0.005508803762495518,
        0.02995416894555092,
        0.1318456381559372,
        -0.013087863102555275,
        -0.07067907601594925,
        0.027836771681904793,
        -0.04348031058907509,
        0.010723750106990337,
        0.036583494395017624,
        0.04730580374598503,
        -0.0031463869381695986,
        0.039538998156785965,
        -0.013446544297039509,
        0.0543847419321537,
        0.024924999102950096,
        -0.013972343876957893,
        -0.025103013962507248,
        0.013012980110943317,
        -0.12382731586694717,
        -0.03027995117008686,
        0.12777692079544067,
        0.12234318256378174,
        0.12147079408168793,
        0.03790516406297684,
        0.0508066788315773,
        0.057909607887268066,
        0.016697097569704056,
        -0.0684460774064064,
        0.014466074295341969,
        -0.019542641937732697,
        0.10319177806377411,
        -0.07188638299703598,
        0.08829223364591599,
        0.01397641096264124,
        0.05630248412489891,
        0.012332954443991184,
        -0.06810308992862701,
        0.04642372578382492,
        0.01382254995405674,
        0.017727909609675407,
        0.05006992816925049,
        1.0068693188548457e-32,
        -0.07535816729068756,
        0.02457665652036667,
        0.05695832148194313,
        0.018651437014341354,
        -0.08783955127000809,
        -0.0035823327489197254,
        -0.0573890283703804,
        -0.013772551901638508,
        -0.04555787518620491,
        0.033759791404008865,
        -0.0989031195640564,
        -0.018398916348814964,
        -0.013094943948090076,
        -0.013827399350702763,
        0.05981118977069855,
        -0.08879081159830093,
        0.09393507242202759,
        0.006776879075914621,
        -0.05217159539461136,
        -0.02175355888903141,
        0.001019632793031633,
        -0.05518694221973419,
        -0.048069510608911514,
        0.09236173331737518,
        -0.07487562298774719,
        -0.041258834302425385,
        0.05282486602663994,
        -0.015312688425183296,
        -0.1075134128332138,
        0.0033429283648729324,
        0.06623966991901398,
        -0.024776900187134743,
        -0.049435291439294815,
        0.027317117899656296,
        0.07779182493686676,
        -0.05476110056042671,
        -0.02216521091759205,
        0.01585540920495987,
        -0.03673156723380089,
        -0.010255585424602032,
        -0.009939048439264297,
        0.008058837614953518,
        -0.02823818475008011,
        0.04392051324248314,
        -0.024345023557543755,
        -0.054622575640678406,
        0.011381786316633224,
        0.042563002556562424,
        -0.043397240340709686,
        -0.03508089482784271,
        -0.04467156156897545,
        0.07156025618314743,
        0.02405734360218048,
        0.05871981009840965,
        0.026904579252004623,
        -0.006924712099134922,
        0.02297082729637623,
        -0.021820031106472015,
        0.020342104136943817,
        0.08787253499031067,
        0.02468961663544178,
        -0.002666284330189228,
        0.038915231823921204,
        0.017327450215816498,
        0.0075514973141252995,
        -0.014308828860521317,
        -0.04177020490169525,
        -0.002048111753538251,
        0.04888618737459183,
        0.01693050004541874,
        0.0043176207691431046,
        -0.03084520436823368,
        0.025211235508322716,
        0.023066699504852295,
        0.002987402258440852,
        -0.030092380940914154,
        0.06886569410562515,
        -0.0018972714897245169,
        -0.08638880401849747,
        -0.14051873981952667,
        -0.03357013314962387,
        0.012567617930471897,
        0.0764923170208931,
        -0.14190666377544403,
        -0.06716993451118469,
        -0.017111141234636307,
        -0.010055561549961567,
        -0.11468824744224548,
        -0.03339620307087898,
        -0.09069808572530746,
        -0.034097570925951004,
        -0.018942194059491158,
        0.026820991188287735,
        -0.027019847184419632,
        -0.07998253405094147,
        -8.527324751664794e-33,
        0.012117489241063595,
        0.0514838881790638,
        -0.000904168700799346,
        -0.030836239457130432,
        -0.06314682960510254,
        -0.009136471897363663,
        0.04590838775038719,
        -0.03585606813430786,
        -0.05912001430988312,
        0.006907826289534569,
        -0.01685403659939766,
        -0.08800581097602844,
        0.0392225980758667,
        0.010991916060447693,
        0.03257262706756592,
        0.0581129714846611,
        0.04203968122601509,
        -0.0036201677285134792,
        0.04910079389810562,
        0.05273550748825073,
        -0.012593366205692291,
        0.031750015914440155,
        0.0416012778878212,
        0.021276645362377167,
        -0.023764777928590775,
        0.11131999641656876,
        -0.03809654340147972,
        0.0032783476635813713,
        -0.03480347990989685,
        -0.02684582769870758,
        -0.032351940870285034,
        -0.015333631075918674,
        -0.04130319133400917,
        0.005696638487279415,
        -0.0731206163764,
        -0.06920146197080612,
        0.024897867813706398,
        -0.029637552797794342,
        -0.024090010672807693,
        -0.06779861450195312,
        0.01515817642211914,
        -0.00013302791921887547,
        -0.01685854233801365,
        0.015483265742659569,
        0.017365794628858566,
        -0.04137559235095978,
        0.07440730929374695,
        0.04058299586176872,
        0.007676646113395691,
        0.004509667865931988,
        0.0377543643116951,
        -0.00006685142579954118,
        -0.004490294028073549,
        0.03144324570894241,
        -0.008776696398854256,
        -0.023000231012701988,
        -0.07034588605165482,
        -0.008197798393666744,
        0.010462870821356773,
        -0.10307768732309341,
        -0.07709328085184097,
        -0.0007129522855393589,
        0.004073743708431721,
        -0.007034468464553356,
        0.10425063222646713,
        0.021245134994387627,
        0.0443192757666111,
        -0.02288348227739334,
        -0.0020770521368831396,
        0.0000781952912802808,
        -0.04585688188672066,
        0.12212514877319336,
        0.08297030627727509,
        0.03832370042800903,
        -0.055720120668411255,
        -0.02459110878407955,
        -0.010255514644086361,
        -0.0400315560400486,
        -0.03769635781645775,
        0.06393822282552719,
        -0.022516800090670586,
        0.052758630365133286,
        0.06279238313436508,
        0.02794288471341133,
        -0.05619474872946739,
        0.02116655930876732,
        -0.03580303117632866,
        0.0327758714556694,
        0.018725136294960976,
        0.025276046246290207,
        -0.08788637816905975,
        -0.013993741013109684,
        0.01498347893357277,
        0.00015787247684784234,
        0.05069676786661148,
        -5.747368447828194e-8,
        -0.07204391062259674,
        -0.06208197772502899,
        -0.16107288002967834,
        0.008366899564862251,
        0.029533814638853073,
        -0.008571046404540539,
        -0.06155534088611603,
        -0.030659183859825134,
        0.013476845808327198,
        -0.03187589347362518,
        -0.004955384414643049,
        -0.011995317414402962,
        -0.05084989592432976,
        0.036115650087594986,
        -0.014979299157857895,
        -0.01822391338646412,
        -0.00019217407680116594,
        -0.06024855002760887,
        -0.000740442075766623,
        -0.039688535034656525,
        -0.0038157296366989613,
        0.01787465065717697,
        0.07257237285375595,
        0.05449383333325386,
        0.052982352674007416,
        -0.0642513632774353,
        -0.06979810446500778,
        0.0486675389111042,
        0.1263308823108673,
        -0.03337743505835533,
        -0.0386759378015995,
        0.017239868640899658,
        0.052564721554517746,
        -0.061354219913482666,
        -0.022412654012441635,
        -0.024160930886864662,
        0.05104954540729523,
        0.10354362428188324,
        -0.013330486603081226,
        0.048398613929748535,
        0.014307073317468166,
        0.009187334217131138,
        0.011846199631690979,
        0.0352005697786808,
        0.04363533481955528,
        -0.03478492051362991,
        0.017259106040000916,
        0.010888679884374142,
        0.007546246983110905,
        -0.0499480701982975,
        0.037500832229852676,
        -0.001370002399198711,
        0.015096195973455906,
        0.07022595405578613,
        -0.02040846459567547,
        -0.13374727964401245,
        -0.038284819573163986,
        -0.02837139181792736,
        0.0058608464896678925,
        0.032059259712696075,
        0.044012751430273056,
        -0.014156507328152657,
        -0.0007918516639620066,
        -0.021106576547026634
      ]
    },
    {
      "id": "4cb16c51",
      "filePath": "05-rag-codebase/src/retriever.ts",
      "content": "export function retrieve(\n\tqueryEmbedding: number[],\n\tchunks: IndexedChunk[],\n\ttopN: number\n): RetrievalResult[] {\n\t// 计算所有 chunks 的相似度\n\tconst scored: RetrievalResult[] = chunks.map(chunk => ({\n\t\tchunk,\n\t\tscore: cosineSimilarity(queryEmbedding, chunk.embedding),\n\t}));\n\n\t// 按相似度降序排序\n\tscored.sort((a, b) => b.score - a.score);\n\n\t// 返回 Top-N\n\tconst results = scored.slice(0, topN);\n\n\tconsole.log(`[retriever] 粗筛 Top-${topN}，相似度范围: ${results[results.length - 1]?.score.toFixed(4)} ~ ${results[0]?.score.toFixed(4)}`);\n\n\treturn results;\n}",
      "startLine": 37,
      "endLine": 58,
      "type": "function",
      "name": "retrieve",
      "embedding": [
        -0.020174115896224976,
        0.06792507320642471,
        0.01630839705467224,
        0.022174658253788948,
        0.030964722856879234,
        0.06162453070282936,
        0.00039873135392554104,
        0.07656005769968033,
        0.06804339587688446,
        0.02487936057150364,
        -0.05498867854475975,
        0.024663064628839493,
        -0.035869400948286057,
        -0.027167994529008865,
        0.009748701006174088,
        -0.04747921600937843,
        -0.08505140990018845,
        0.04263020306825638,
        -0.03754908964037895,
        -0.14607851207256317,
        0.02679411880671978,
        0.03409707173705101,
        -0.005211532115936279,
        -0.01783055067062378,
        0.05355411767959595,
        0.001423437031917274,
        -0.08670192956924438,
        0.003068534191697836,
        0.06389405578374863,
        -0.008639873005449772,
        -0.017374232411384583,
        -0.012157566845417023,
        0.036330901086330414,
        0.07651061564683914,
        -0.05738386884331703,
        0.009984211064875126,
        -0.06997257471084595,
        -0.04961515963077545,
        0.05785662308335304,
        -0.009494887664914131,
        0.08402980118989944,
        0.08010268211364746,
        0.028128357604146004,
        -0.07743384689092636,
        0.07323376089334488,
        -0.016821715980768204,
        -0.14538522064685822,
        -0.01628018356859684,
        -0.017376776784658432,
        0.046418607234954834,
        -0.10418591648340225,
        0.08250689506530762,
        -0.07057684659957886,
        -0.02501959726214409,
        0.0592552050948143,
        0.013734702952206135,
        -0.04073679819703102,
        -0.09840301424264908,
        0.008776682429015636,
        -0.03539576381444931,
        -0.04654065892100334,
        -0.10132315754890442,
        0.05209599435329437,
        -0.06959431618452072,
        0.08756063878536224,
        -0.05541928485035896,
        0.03730088472366333,
        0.07665294408798218,
        0.018546242266893387,
        0.051336951553821564,
        0.022539330646395683,
        0.03428724780678749,
        0.020272109657526016,
        -0.009516668505966663,
        -0.04387303441762924,
        -0.027455803006887436,
        -0.10702834278345108,
        -0.020837262272834778,
        -0.0029283904004842043,
        0.038840580731630325,
        -0.05997379124164581,
        -0.05205029994249344,
        0.04308313876390457,
        0.03242746740579605,
        0.008142981678247452,
        -0.001987805124372244,
        0.06332145631313324,
        -0.04945719242095947,
        0.041182659566402435,
        -0.022950822487473488,
        -0.06074121221899986,
        0.012912013567984104,
        -0.0014741688501089811,
        0.10444647818803787,
        -0.016357015818357468,
        0.06028850004076958,
        0.0236034095287323,
        0.03222993016242981,
        0.04352038353681564,
        0.06084698438644409,
        -0.013177599757909775,
        0.061159901320934296,
        0.003421252593398094,
        -0.06177191436290741,
        -0.13335779309272766,
        -0.04601593688130379,
        0.0583256371319294,
        0.05534623563289642,
        0.04693828523159027,
        -0.0008037400548346341,
        0.012558383867144585,
        0.07511378079652786,
        0.052319787442684174,
        -0.012887940742075443,
        -0.09843237698078156,
        -0.058209922164678574,
        0.05667954310774803,
        -0.05153019353747368,
        0.05866488814353943,
        0.03938706964254379,
        0.08744627237319946,
        0.07718249410390854,
        -0.019347751513123512,
        0.016478590667247772,
        0.028777364641427994,
        0.056893229484558105,
        0.1118115782737732,
        7.782452919799082e-33,
        -0.056251462548971176,
        -0.001478079822845757,
        0.0719841942191124,
        -0.012819955125451088,
        -0.036623258143663406,
        -0.01931070163846016,
        -0.009759831242263317,
        -0.008721784688532352,
        -0.10501603037118912,
        0.06831774115562439,
        -0.11778321117162704,
        0.074440136551857,
        0.0012224797392264009,
        -0.02928602695465088,
        0.036601487547159195,
        -0.047278717160224915,
        0.08155110478401184,
        -0.005703460890799761,
        -0.02267087809741497,
        0.08300675451755524,
        0.010095594450831413,
        -0.009463782422244549,
        0.014779684133827686,
        0.019543657079339027,
        0.004297913517802954,
        -0.026646340265870094,
        -0.029887916520237923,
        -0.005543417762964964,
        -0.11437038332223892,
        -0.004444338381290436,
        0.047277066856622696,
        0.026164067909121513,
        -0.015837019309401512,
        -0.017055466771125793,
        0.06583002209663391,
        -0.03967665135860443,
        0.026317035779356956,
        0.0538330040872097,
        -0.10070561617612839,
        0.032147280871868134,
        0.047559529542922974,
        0.016828179359436035,
        -0.024221230298280716,
        -0.0035191690549254417,
        -0.06812810897827148,
        -0.002363978885114193,
        -0.02274712733924389,
        -0.019048050045967102,
        0.05197804793715477,
        0.023622047156095505,
        -0.07457676529884338,
        0.08638561517000198,
        0.02452613040804863,
        0.005538672208786011,
        0.05246305838227272,
        -0.029152942821383476,
        0.07085391134023666,
        0.01226208545267582,
        0.011890353634953499,
        0.002945133950561285,
        0.027604177594184875,
        -0.026838641613721848,
        0.04199700057506561,
        -0.005053738132119179,
        -0.004449404310435057,
        0.011129247024655342,
        0.010526483878493309,
        -0.004527681972831488,
        0.04691164940595627,
        -0.004192040767520666,
        0.014491638168692589,
        0.00380335608497262,
        0.046311311423778534,
        -0.025195494294166565,
        0.028551513329148293,
        -0.033854447305202484,
        -0.04272234067320824,
        -0.027169527485966682,
        0.017862722277641296,
        -0.14112015068531036,
        0.011968014761805534,
        -0.06538952142000198,
        -0.01036855299025774,
        -0.03080618567764759,
        0.027612043544650078,
        0.05011368170380592,
        -0.005331519525498152,
        -0.09408904612064362,
        0.030472679063677788,
        -0.043247975409030914,
        -0.07458513975143433,
        -0.021561838686466217,
        -0.006681626662611961,
        -0.09186244010925293,
        -0.07223133742809296,
        -6.329620513367446e-33,
        0.059315141290426254,
        0.02162112668156624,
        -0.05142691358923912,
        -0.019794218242168427,
        -0.03730648756027222,
        -0.030229756608605385,
        0.035318683832883835,
        0.04685242846608162,
        -0.023369917646050453,
        0.06280981004238129,
        0.055858079344034195,
        -0.048410288989543915,
        0.006045527756214142,
        -0.036729730665683746,
        0.03508424013853073,
        0.08650022000074387,
        0.01909235492348671,
        -0.025545239448547363,
        -0.046366166323423386,
        -0.06751709431409836,
        0.05437999591231346,
        -0.012494528666138649,
        0.016082575544714928,
        0.08630647510290146,
        -0.029159825295209885,
        0.10403742641210556,
        0.11031238734722137,
        -0.04025883972644806,
        -0.038656119257211685,
        -0.08219221234321594,
        0.009068576619029045,
        -0.08902149647474289,
        -0.013618947006762028,
        0.003846140578389168,
        -0.08904925733804703,
        -0.05185201019048691,
        0.046708814799785614,
        -0.016153963282704353,
        -0.06465182453393936,
        0.05519689992070198,
        -0.034376662224531174,
        0.0020490235183387995,
        -0.04902699217200279,
        0.023794639855623245,
        0.0433424673974514,
        -0.05459959805011749,
        0.03572716563940048,
        0.0835786759853363,
        -0.005345206707715988,
        -0.07364063709974289,
        0.03736302629113197,
        -0.004443767014890909,
        -0.04535975679755211,
        0.005433947779238224,
        -0.026485882699489594,
        -0.05878623202443123,
        -0.07215584069490433,
        -0.09084621071815491,
        -0.051927465945482254,
        -0.020312832668423653,
        0.006173634901642799,
        0.0014828662388026714,
        -0.03075585514307022,
        0.014670779928565025,
        0.050075463950634,
        0.028011774644255638,
        0.0032218792475759983,
        -0.04578598216176033,
        -0.033215053379535675,
        0.04648028686642647,
        -0.08720827847719193,
        0.003734586527571082,
        0.13657572865486145,
        0.008762426674365997,
        -0.006036170292645693,
        0.0662204921245575,
        -0.07853306829929352,
        0.0799059346318245,
        0.07763589918613434,
        0.03411225974559784,
        -0.05084061250090599,
        0.01300305686891079,
        0.033400628715753555,
        0.024961275979876518,
        -0.007155530620366335,
        -0.03928781673312187,
        0.03622527793049812,
        0.030811816453933716,
        0.025729309767484665,
        -0.029683994129300117,
        -0.0003176299505867064,
        -0.011309691704809666,
        0.005497849080711603,
        0.00219842791557312,
        0.06405667215585709,
        -5.300192995605357e-8,
        -0.08362769335508347,
        -0.05705665796995163,
        -0.16263578832149506,
        0.03921756520867348,
        -0.06630436331033707,
        0.030761269852519035,
        0.012334457598626614,
        0.023391662165522575,
        -0.023339882493019104,
        -0.024417711421847343,
        0.03620327264070511,
        -0.0029972742777317762,
        -0.06440303474664688,
        -0.0005104225710965693,
        0.05883549153804779,
        -0.025965481996536255,
        0.01375844981521368,
        0.06069345772266388,
        -0.05072978511452675,
        -0.042354051023721695,
        -0.03548995032906532,
        0.04400905594229698,
        0.06750006228685379,
        -0.038016967475414276,
        -0.0034970042761415243,
        -0.016984105110168457,
        -0.03627678006887436,
        0.0600789450109005,
        0.03882785886526108,
        -0.026256034150719643,
        -0.05782989040017128,
        0.011282546445727348,
        0.07485926151275635,
        -0.005692784674465656,
        0.013708512298762798,
        -0.03325849771499634,
        -0.002314545214176178,
        0.011578705161809921,
        0.014417761005461216,
        0.04992593079805374,
        0.05134586989879608,
        -0.00956388283520937,
        -0.006006665527820587,
        0.04428112134337425,
        0.0038783710915595293,
        -0.06555194407701492,
        0.014972636476159096,
        0.02818254567682743,
        0.11595506966114044,
        -0.045597534626722336,
        0.036980558186769485,
        -0.07750923186540604,
        -0.11175420880317688,
        0.02111303061246872,
        -0.02441948652267456,
        -0.08332465589046478,
        -0.03862940892577171,
        -0.009687135927379131,
        -0.04800146445631981,
        -0.0064598130993545055,
        0.0672496035695076,
        -0.05821367725729942,
        -0.048232875764369965,
        0.0019112813752144575
      ]
    },
    {
      "id": "e0c51207",
      "filePath": "05-rag-codebase/src/reranker.ts",
      "content": "// reranker.ts - 精排模块\n// 职责：使用 LLM 对候选 chunks 进行精细评分，选出最相关的 Top-K\n\nimport OpenAI from 'openai';\nimport type { RetrievalResult, RerankResult, IndexedChunk } from './types.js';\n\n/**\n * 创建 OpenAI 客户端\n */",
      "startLine": 1,
      "endLine": 9,
      "type": "other",
      "embedding": [
        -0.06383368372917175,
        -0.0025947417598217726,
        -0.011624311096966267,
        0.05526170879602432,
        0.04246485233306885,
        0.03166572377085686,
        0.028117014095187187,
        0.028500016778707504,
        0.03132764995098114,
        -0.03136361762881279,
        0.04539269953966141,
        0.05716366693377495,
        -0.02654554322361946,
        -0.028769025579094887,
        -0.012120287865400314,
        0.0064855036325752735,
        -0.07450401037931442,
        0.09600959718227386,
        -0.02779339998960495,
        -0.11401800066232681,
        0.03346055746078491,
        0.024234691634774208,
        0.03563445433974266,
        -0.031539544463157654,
        0.04983236640691757,
        0.005653108935803175,
        -0.05065083131194115,
        0.0046008434146642685,
        0.02982518821954727,
        -0.044270388782024384,
        0.021213766187429428,
        0.06285509467124939,
        0.037641022354364395,
        0.029983440414071083,
        0.027114516124129295,
        0.10729928314685822,
        -0.10814511030912399,
        -0.0807768851518631,
        -0.004383522551506758,
        -0.019087443128228188,
        0.07145161181688309,
        0.07501660287380219,
        0.020956378430128098,
        -0.05711445212364197,
        0.05666462332010269,
        -0.04992429539561272,
        -0.11642894893884659,
        -0.03625192493200302,
        -0.014515373855829239,
        -0.04582507163286209,
        -0.13209931552410126,
        0.03486010432243347,
        -0.14011090993881226,
        0.04046228155493736,
        0.08703891932964325,
        0.013974888250231743,
        -0.030826035887002945,
        -0.052552103996276855,
        -0.0158438291400671,
        -0.011926417239010334,
        0.0348433293402195,
        -0.01323233637958765,
        0.05961819365620613,
        -0.10194043070077896,
        0.05928599089384079,
        -0.023356091231107712,
        0.0058588674291968346,
        0.055253852158784866,
        0.0034400622826069593,
        -0.06831809878349304,
        0.03626466915011406,
        0.0493750274181366,
        -0.024710090830922127,
        0.035620640963315964,
        -0.06246122345328331,
        -0.0478774793446064,
        -0.041507136076688766,
        0.04314473643898964,
        0.032778799533843994,
        -0.0030097896233201027,
        -0.06093969568610191,
        -0.07305615395307541,
        0.06927183270454407,
        0.08393214643001556,
        0.004776655230671167,
        0.007472227793186903,
        0.02462609112262726,
        -0.07354345172643661,
        0.0552130788564682,
        0.011626452207565308,
        -0.042154740542173386,
        0.009621309116482735,
        0.04458742216229439,
        0.049472689628601074,
        0.012168286368250847,
        0.02775619365274906,
        -0.0353563129901886,
        0.02875998243689537,
        -0.02446793019771576,
        0.07469882071018219,
        -0.0290328711271286,
        0.019198525696992874,
        0.0428939126431942,
        0.02491612359881401,
        -0.140658438205719,
        0.0092740748077631,
        0.06404555588960648,
        0.057931918650865555,
        -0.0070286700502038,
        -0.012177340686321259,
        0.02821752429008484,
        -0.0192277692258358,
        0.02180044911801815,
        -0.09752988070249557,
        -0.04922680929303169,
        -0.0026988147292286158,
        -0.011380847543478012,
        -0.021958118304610252,
        0.030740074813365936,
        0.04735473915934563,
        0.04368222877383232,
        0.02613772451877594,
        -0.01336600910872221,
        -0.03390068560838699,
        0.01948864758014679,
        0.03231986612081528,
        0.0735708698630333,
        6.291805594785462e-33,
        -0.025332681834697723,
        0.03598746657371521,
        0.02263466827571392,
        -0.005064448341727257,
        0.004593190271407366,
        -0.06183136999607086,
        0.018762115389108658,
        -0.03445709869265556,
        -0.1259845644235611,
        -0.000894418335519731,
        -0.11276456713676453,
        0.07955518364906311,
        -0.10088538378477097,
        -0.011354764923453331,
        0.001099500572308898,
        -0.07809657603502274,
        0.02199089713394642,
        0.03700152039527893,
        -0.021707791835069656,
        -0.014098672196269035,
        0.027774659916758537,
        0.03754325211048126,
        0.02990376576781273,
        0.0021660018246620893,
        -0.08031441271305084,
        -0.010276523418724537,
        -0.022997068241238594,
        -0.12255048006772995,
        -0.018282245844602585,
        0.017566507682204247,
        0.09933185577392578,
        0.006396295968443155,
        -0.04227224364876747,
        -0.00799289159476757,
        0.0217205248773098,
        0.03615887090563774,
        -0.046563148498535156,
        0.039663173258304596,
        -0.0742059051990509,
        -0.048243310302495956,
        0.025237271562218666,
        0.06706854701042175,
        -0.04211229830980301,
        -0.07677412033081055,
        -0.023679854348301888,
        -0.00023226896882988513,
        -0.029326006770133972,
        0.040684774518013,
        0.04366077482700348,
        0.004594085272401571,
        -0.04639112204313278,
        0.08598095178604126,
        0.027902383357286453,
        0.06141801178455353,
        0.021390020847320557,
        -0.05019264668226242,
        0.01698552630841732,
        0.07963225245475769,
        0.04435554891824722,
        0.015832755714654922,
        0.04240894317626953,
        -0.04041779413819313,
        -0.004034220706671476,
        0.03854428604245186,
        0.0053643882274627686,
        0.005915102548897266,
        -0.005494189448654652,
        -0.00037922084447927773,
        0.05493680015206337,
        0.01875496096909046,
        0.03745126351714134,
        0.019144799560308456,
        0.059487007558345795,
        0.011669625528156757,
        -0.003605579724535346,
        -0.06458508223295212,
        -0.02170061506330967,
        -0.018451185896992683,
        -0.0017612045630812645,
        -0.13863198459148407,
        -0.0026673541869968176,
        -0.10439347475767136,
        0.011226838454604149,
        -0.047572262585163116,
        0.01253613643348217,
        0.013930371031165123,
        -0.03552273288369179,
        -0.04607501998543739,
        0.0931273102760315,
        -0.00944742001593113,
        -0.050953458994627,
        -0.04443484917283058,
        -0.04384635388851166,
        -0.06300631165504456,
        -0.03914002329111099,
        -6.167153969772359e-33,
        0.059403933584690094,
        -0.005525851156562567,
        -0.039215121418237686,
        -0.05718022957444191,
        -0.0025568914134055376,
        -0.06092287227511406,
        -0.03292328491806984,
        0.10081584751605988,
        -0.01785404235124588,
        0.09163090586662292,
        0.0031978259794414043,
        -0.03794625774025917,
        0.09325618296861649,
        -0.02370736375451088,
        0.04091273620724678,
        0.04351111501455307,
        0.031219208613038063,
        -0.0018436950631439686,
        -0.06649012863636017,
        0.0013893735595047474,
        -0.02742644026875496,
        -0.025048760697245598,
        -0.016421714797616005,
        0.10023607313632965,
        0.013655751943588257,
        0.11201255023479462,
        0.07091370970010757,
        0.01678519695997238,
        -0.03664880618453026,
        -0.07561369985342026,
        0.02638915181159973,
        -0.04819624125957489,
        -0.09191757440567017,
        0.06901761144399643,
        -0.04945159703493118,
        -0.002006321679800749,
        0.031572431325912476,
        -0.0146238524466753,
        -0.005896986927837133,
        0.054911550134420395,
        -0.011687560006976128,
        -0.011017064563930035,
        -0.024094633758068085,
        0.02208040840923786,
        0.045894838869571686,
        -0.06028736010193825,
        -0.04940478876233101,
        0.10862977057695389,
        -0.014225219376385212,
        -0.15030352771282196,
        0.02100442349910736,
        -0.006590626668184996,
        0.006478324998170137,
        -0.0950319766998291,
        -0.0341314859688282,
        0.027129629626870155,
        -0.010255477391183376,
        -0.007475378457456827,
        -0.08698876947164536,
        -0.054249078035354614,
        0.0001307114725932479,
        -0.0875951424241066,
        -0.05837135389447212,
        -0.023781782016158104,
        0.028104672208428383,
        -0.05115208774805069,
        -0.014347140677273273,
        0.0026126739103347063,
        -0.06415238231420517,
        -0.09936349093914032,
        -0.07112583518028259,
        -0.023382771760225296,
        0.09761803597211838,
        -0.020790232345461845,
        -0.02636721543967724,
        0.009726906195282936,
        -0.008042286150157452,
        0.08462245762348175,
        0.11157020181417465,
        -0.014224059879779816,
        -0.0003311006585136056,
        0.004150221589952707,
        0.07064802944660187,
        -0.009860807098448277,
        0.0024030786007642746,
        0.0028309777844697237,
        0.04449272155761719,
        0.03985028713941574,
        0.03292274847626686,
        0.005758845247328281,
        -0.03454093262553215,
        -0.019633322954177856,
        0.05495913699269295,
        0.0028959785122424364,
        0.0799923911690712,
        -4.492233784958444e-8,
        -0.11810743808746338,
        -0.09023921191692352,
        -0.07617805898189545,
        0.05752949416637421,
        0.013455064967274666,
        0.02747788280248642,
        -0.03128274902701378,
        0.1318977177143097,
        0.009122260846197605,
        0.01838100142776966,
        0.015319181606173515,
        0.016161317005753517,
        -0.0909886285662651,
        0.015362943522632122,
        0.01311775017529726,
        0.013622104190289974,
        -0.0398402139544487,
        0.085333913564682,
        -0.0438847616314888,
        -0.10017657279968262,
        -0.03506237268447876,
        0.021590882912278175,
        0.13532708585262299,
        -0.015731658786535263,
        -0.0691026821732521,
        -0.04807586222887039,
        -0.028776679188013077,
        0.014691884629428387,
        0.0065185134299099445,
        -0.007996945641934872,
        -0.008562260307371616,
        0.0035232463851571083,
        0.09133078902959824,
        -0.07410192489624023,
        -0.022780323401093483,
        0.060168299823999405,
        0.060500726103782654,
        -0.010470511391758919,
        -0.03542084991931915,
        -0.018240969628095627,
        0.029306799173355103,
        -0.002935677068307996,
        0.03486083447933197,
        0.013677023351192474,
        0.007147436961531639,
        -0.04703548550605774,
        -0.06315642595291138,
        0.04352366924285889,
        0.06309962272644043,
        -0.03183257207274437,
        -0.006249598693102598,
        -0.08004255592823029,
        -0.07248002290725708,
        0.0007133105536922812,
        -0.017325226217508316,
        0.009858348406851292,
        -0.021170178428292274,
        0.013554949313402176,
        -0.02132670395076275,
        -0.033021483570337296,
        0.05773451551795006,
        0.026413101702928543,
        0.013976698741316795,
        0.01818130910396576
      ]
    },
    {
      "id": "2b19aa3d",
      "filePath": "05-rag-codebase/src/reranker.ts",
      "content": "function createClient(): OpenAI {\n\treturn new OpenAI({\n\t\tapiKey: process.env.OPENAI_API_KEY,\n\t\tbaseURL: process.env.OPENAI_BASE_URL,\n\t});\n}\n\n/**\n * 获取 Chat 模型名称\n */",
      "startLine": 10,
      "endLine": 19,
      "type": "function",
      "name": "createClient",
      "embedding": [
        -0.09511791169643402,
        -0.03970535099506378,
        -0.048084139823913574,
        0.04230479523539543,
        0.022944120690226555,
        -0.04273507371544838,
        0.010705296881496906,
        0.016081025823950768,
        0.044654153287410736,
        0.032495543360710144,
        0.0186857208609581,
        -0.022551333531737328,
        -0.02704220823943615,
        0.021858226507902145,
        0.11170996725559235,
        0.08681982755661011,
        -0.011348008178174496,
        0.0013801967725157738,
        -0.01925136335194111,
        -0.07551709562540054,
        -0.002675111871212721,
        0.024153482168912888,
        0.03379182517528534,
        -0.010602420195937157,
        0.03594854474067688,
        -0.08297036588191986,
        0.015687013044953346,
        0.0047744447365403175,
        0.05963386222720146,
        0.017251545563340187,
        0.08388173580169678,
        0.0253179632127285,
        0.019316859543323517,
        0.00818327721208334,
        0.012507165782153606,
        0.11178828030824661,
        -0.06485787034034729,
        -0.05889533460140228,
        -0.008754264563322067,
        -0.017160404473543167,
        0.09233075380325317,
        0.028057830408215523,
        -0.02304610051214695,
        -0.07059934735298157,
        0.04866403713822365,
        -0.05720146372914314,
        -0.047323595732450485,
        -0.030415767803788185,
        -0.003682270646095276,
        0.009698599576950073,
        -0.08413386344909668,
        0.010806127451360226,
        -0.06653410196304321,
        -0.02189525216817856,
        0.032986972481012344,
        0.0023762634955346584,
        -0.06699031591415405,
        0.0012106382055208087,
        -0.01428244262933731,
        -0.003555070608854294,
        0.06683111190795898,
        -0.08027107268571854,
        0.07769068330526352,
        -0.04428793489933014,
        0.006244889460504055,
        0.012663133442401886,
        -0.0935288667678833,
        0.016283677890896797,
        0.0054696048609912395,
        -0.07997900247573853,
        0.03863180801272392,
        0.012913822196424007,
        -0.011442817747592926,
        0.004472917877137661,
        -0.057288676500320435,
        -0.014422787353396416,
        -0.021656479686498642,
        0.044502340257167816,
        -0.0024758281651884317,
        -0.010035144165158272,
        0.026736026629805565,
        0.0006094364216551185,
        -0.006471606437116861,
        0.06398284435272217,
        0.03322179242968559,
        0.11007755249738693,
        0.06334438174962997,
        -0.06708235293626785,
        0.061146434396505356,
        -0.02609262242913246,
        -0.007052533328533173,
        0.053521186113357544,
        0.02425079420208931,
        -0.012566306628286839,
        0.045632973313331604,
        -0.030463116243481636,
        -0.08100245147943497,
        -0.013905074447393417,
        -0.0974591001868248,
        0.0827869400382042,
        -0.050233982503414154,
        0.0006902547902427614,
        -0.02023591287434101,
        0.048986438661813736,
        -0.05527196452021599,
        -0.006563756614923477,
        0.04857853427529335,
        0.09061728417873383,
        -0.009497318416833878,
        0.023129422217607498,
        -0.019776759669184685,
        0.0066854991018772125,
        0.06544643640518188,
        -0.027670126408338547,
        -0.04916473478078842,
        0.031199177727103233,
        -0.04852506145834923,
        -0.00967435259371996,
        0.03881440684199333,
        0.07236617058515549,
        0.0589318610727787,
        -0.05436435341835022,
        -0.08453726768493652,
        -0.015332541428506374,
        -0.011097332462668419,
        0.0035815993323922157,
        0.11818118393421173,
        6.0988412176002754e-33,
        0.04020974785089493,
        0.06302286684513092,
        0.03089728392660618,
        -0.011860689148306847,
        0.0888017788529396,
        -0.021619554609060287,
        0.03244887292385101,
        -0.054473672062158585,
        -0.07367473095655441,
        -0.08213508129119873,
        -0.06704414635896683,
        0.044362712651491165,
        -0.029702214524149895,
        -0.07433029264211655,
        -0.025160785764455795,
        -0.04255514219403267,
        -0.018244639039039612,
        0.06986337900161743,
        0.09465488791465759,
        -0.016041241586208344,
        -0.03995664417743683,
        0.02170603536069393,
        0.009499029256403446,
        0.007090277969837189,
        -0.037576526403427124,
        0.03521200641989708,
        -0.002078005112707615,
        -0.11756230890750885,
        0.026158737018704414,
        0.0034846654161810875,
        0.11212246119976044,
        0.02162114903330803,
        -0.0783112570643425,
        0.0411713682115078,
        -0.0030086156912148,
        -0.005684749223291874,
        -0.055687014013528824,
        0.02603841759264469,
        -0.10486166179180145,
        0.000781937618739903,
        0.024552952498197556,
        0.040261410176754,
        -0.14030197262763977,
        -0.03474240005016327,
        -0.051107339560985565,
        -0.04721168428659439,
        -0.029464954510331154,
        0.03237352892756462,
        0.07968205958604813,
        0.027660539373755455,
        -0.060334328562021255,
        0.0613521970808506,
        0.02198954112827778,
        0.031128261238336563,
        0.05272957310080528,
        -0.12812942266464233,
        -0.030177973210811615,
        -0.03303408622741699,
        0.05759977176785469,
        -0.024607952684164047,
        -0.024702029302716255,
        -0.030131887644529343,
        -0.0344708226621151,
        -0.004116621799767017,
        0.029810503125190735,
        -0.006333865690976381,
        0.005492744501680136,
        -0.0387883335351944,
        0.08175807446241379,
        -0.031888507306575775,
        0.06511950492858887,
        0.013307892717421055,
        -0.05308443307876587,
        0.050405487418174744,
        -0.03641590476036072,
        -0.017859579995274544,
        -0.00808786042034626,
        0.011988039128482342,
        0.027479566633701324,
        -0.07391323894262314,
        0.0004701563448179513,
        -0.062036413699388504,
        -0.025640005245804787,
        0.04886850714683533,
        0.02429729327559471,
        -0.016025105491280556,
        -0.05617678537964821,
        -0.030381223186850548,
        0.04884261265397072,
        0.05088295787572861,
        -0.03856407105922699,
        -0.0259398203343153,
        -0.02498341165482998,
        0.03448491543531418,
        -0.060037676244974136,
        -4.062016972866388e-33,
        0.05221639946103096,
        -0.013437031768262386,
        -0.07576064765453339,
        -0.001864188234321773,
        -0.04490698128938675,
        -0.056755296885967255,
        0.012837831862270832,
        0.06054769083857536,
        -0.02580864354968071,
        0.11018151044845581,
        0.07536575198173523,
        -0.03206103295087814,
        0.10319281369447708,
        0.0459311418235302,
        0.048920515924692154,
        -0.005212654825299978,
        0.0419166199862957,
        0.03506382554769516,
        -0.051320239901542664,
        0.02954142354428768,
        0.003269279608502984,
        0.03986270725727081,
        -0.03994816169142723,
        0.04067770391702652,
        0.042400702834129333,
        0.11531301587820053,
        0.09895628690719604,
        0.00589417340233922,
        -0.06523971259593964,
        -0.11571428179740906,
        -0.006738234311342239,
        0.037535008043050766,
        -0.1047624945640564,
        0.052544210106134415,
        0.005569860804826021,
        0.026395291090011597,
        0.06288737058639526,
        0.053694482892751694,
        -0.04054788127541542,
        -0.007970061153173447,
        0.03400113806128502,
        -0.03992214426398277,
        -0.06746520102024078,
        0.004163327161222696,
        -0.01367334183305502,
        -0.06407802551984787,
        0.014452279545366764,
        0.015885187312960625,
        -0.08223549276590347,
        -0.08268605172634125,
        0.08097295463085175,
        -0.026986800134181976,
        0.02562558464705944,
        -0.12549005448818207,
        -0.018349487334489822,
        0.04421304538846016,
        0.09860936552286148,
        -0.034786731004714966,
        -0.015745015814900398,
        -0.051424551755189896,
        0.08414912968873978,
        -0.12377557903528214,
        -0.03314035385847092,
        0.00104709027800709,
        -0.01202149223536253,
        -0.04544563591480255,
        0.02782907523214817,
        0.1005760207772255,
        -0.028406202793121338,
        -0.06317698210477829,
        -0.09705784171819687,
        -0.027067795395851135,
        0.04494722932577133,
        0.010169649496674538,
        -0.006033073645085096,
        0.004529683385044336,
        0.04273374751210213,
        -0.014477981254458427,
        0.0855330377817154,
        0.01191338337957859,
        -0.047049686312675476,
        -0.05375969782471657,
        0.10279839485883713,
        -0.016316065564751625,
        0.026584820821881294,
        -0.0063032228499650955,
        0.040139395743608475,
        -0.000988408806733787,
        0.07547467947006226,
        0.06414221972227097,
        -0.08804311603307724,
        -0.008520390838384628,
        -0.028835386037826538,
        0.06802033632993698,
        0.1063627153635025,
        -4.057983815641819e-8,
        -0.0942160040140152,
        -0.06237825006246567,
        -0.04986920952796936,
        0.1050347313284874,
        -0.035169556736946106,
        0.0014483268605545163,
        -0.001882247976027429,
        0.03052862361073494,
        0.04289977625012398,
        0.017037449404597282,
        -0.06717104464769363,
        0.032824378460645676,
        -0.059890542179346085,
        0.01292797364294529,
        0.003311280393972993,
        0.011657924391329288,
        -0.024198491126298904,
        0.09488625079393387,
        0.00864474754780531,
        -0.13799159228801727,
        -0.018219267949461937,
        0.007827824912965298,
        0.10022138059139252,
        -0.0771198570728302,
        -0.03965023532509804,
        -0.07712189108133316,
        0.019019225612282753,
        0.016824575141072273,
        -0.03956609219312668,
        -0.062147945165634155,
        -0.0035659889690577984,
        -0.020683061331510544,
        0.06610477715730667,
        -0.05842394009232521,
        -0.03494754806160927,
        0.023201879113912582,
        -0.002171844244003296,
        0.016389470547437668,
        -0.001517054857686162,
        -0.014873718842864037,
        0.004732221830636263,
        0.0967656672000885,
        -0.005445811897516251,
        -0.03283705562353134,
        0.00740412063896656,
        0.03841670602560043,
        -0.027497580274939537,
        0.004357450641691685,
        0.03338013216853142,
        -0.04351966083049774,
        0.001680331421084702,
        -0.05198293179273605,
        -0.01329838391393423,
        0.0023997919633984566,
        -0.016870329156517982,
        0.02483161725103855,
        -0.02566995844244957,
        0.009904100559651852,
        -0.06998180598020554,
        -0.006014921236783266,
        0.04866805672645569,
        0.07942795753479004,
        0.01608475297689438,
        -0.006036668084561825
      ]
    },
    {
      "id": "597c5eef",
      "filePath": "05-rag-codebase/src/reranker.ts",
      "content": "function getModel(): string {\n\treturn process.env.OPENAI_MODEL || 'gpt-4o-mini';\n}\n\n/**\n * 构建评分 prompt\n */",
      "startLine": 20,
      "endLine": 26,
      "type": "function",
      "name": "getModel",
      "embedding": [
        -0.031418293714523315,
        -0.007940297946333885,
        -0.019588908180594444,
        0.05911168456077576,
        0.0654638484120369,
        0.012819688767194748,
        0.03957125544548035,
        0.07905100286006927,
        0.0016473818104714155,
        0.011073553934693336,
        0.026860011741518974,
        -0.007026222068816423,
        -0.06956739723682404,
        -0.017978765070438385,
        0.004961476195603609,
        0.008514204993844032,
        -0.028202366083860397,
        0.04921172559261322,
        -0.036532774567604065,
        -0.09103043377399445,
        -0.011596718803048134,
        0.022764544934034348,
        0.02972731925547123,
        0.015576553530991077,
        0.0031071333214640617,
        -0.057191167026758194,
        0.03758502006530762,
        0.04697936773300171,
        0.01047934778034687,
        0.012144569307565689,
        0.014166750945150852,
        0.01864548958837986,
        -0.011673801578581333,
        -0.01014640647917986,
        0.049230627715587616,
        0.10231243073940277,
        -0.023767812177538872,
        -0.10549017786979675,
        -0.01209224946796894,
        -0.02103167586028576,
        0.07017716020345688,
        0.010160873644053936,
        -0.0022169221192598343,
        -0.05989984795451164,
        0.10447430610656738,
        -0.11439956724643707,
        -0.07509120553731918,
        -0.0910555049777031,
        -0.003147467505186796,
        -0.034998569637537,
        -0.05547281354665756,
        -0.0043111457489430904,
        -0.07824834436178207,
        -0.019176729023456573,
        0.0996619462966919,
        -0.0005283414502628148,
        -0.012432045303285122,
        -0.07503675669431686,
        0.038771700114011765,
        -0.035568203777074814,
        0.02997993491590023,
        -0.05032464861869812,
        -0.05595427379012108,
        -0.02453463338315487,
        0.014445788227021694,
        0.01869828812777996,
        -0.036356907337903976,
        0.06596703827381134,
        -0.00733190169557929,
        -0.1085614338517189,
        0.021202055737376213,
        0.009049421176314354,
        -0.046547651290893555,
        -0.03498111665248871,
        -0.04837563633918762,
        -0.04579748213291168,
        -0.009759042412042618,
        0.06165549159049988,
        0.0744248479604721,
        -0.026194490492343903,
        -0.00020394376770127565,
        -0.015412820503115654,
        0.02395455539226532,
        0.02277257852256298,
        0.029868602752685547,
        0.04746880382299423,
        0.049242228269577026,
        0.003358924761414528,
        0.15378974378108978,
        -0.017419608309864998,
        -0.060353007167577744,
        0.07465370744466782,
        -0.04130693897604942,
        0.027070268988609314,
        -0.038140393793582916,
        -0.028887154534459114,
        -0.08941012620925903,
        -0.01962995156645775,
        -0.059178661555051804,
        0.08679001778364182,
        -0.052110690623521805,
        0.06272690743207932,
        0.042658668011426926,
        0.0844762846827507,
        -0.06658825278282166,
        -0.031604669988155365,
        0.0605795755982399,
        0.09172137826681137,
        0.008960628882050514,
        -0.01217735931277275,
        0.006561826914548874,
        0.020726768299937248,
        0.05673926696181297,
        -0.027419857680797577,
        0.002308726543560624,
        -0.0313679538667202,
        -0.02434234693646431,
        -0.051717933267354965,
        -0.01309020072221756,
        0.10000347346067429,
        0.006704096682369709,
        0.03334444761276245,
        -0.07157670706510544,
        -0.015583097003400326,
        -0.00032200702116824687,
        0.04097716137766838,
        0.07113023102283478,
        6.30386469745696e-33,
        0.0434800386428833,
        0.0323796346783638,
        0.07941421121358871,
        0.02071399614214897,
        0.07726139575242996,
        0.056730687618255615,
        -0.01279861107468605,
        -0.11364314705133438,
        -0.03182324022054672,
        -0.030178986489772797,
        -0.09392162412405014,
        0.028242681175470352,
        -0.08772691339254379,
        -0.11117342114448547,
        -0.003945082891732454,
        -0.011899776756763458,
        -0.02163039892911911,
        0.06529136747121811,
        -0.00040747071034274995,
        0.04063764214515686,
        0.04129565507173538,
        0.027283135801553726,
        -0.05599316209554672,
        -0.022813869640231133,
        -0.04290571063756943,
        0.06500785052776337,
        -0.03560738265514374,
        -0.04579487070441246,
        0.0024260065983980894,
        0.05037572607398033,
        0.11681178212165833,
        -0.009499759413301945,
        -0.03796137124300003,
        0.05364496633410454,
        -0.043576423078775406,
        -0.012639254331588745,
        0.010983777232468128,
        0.007307703606784344,
        -0.010586152784526348,
        -0.0513441227376461,
        -0.001449133618734777,
        -0.02214241214096546,
        -0.07693620026111603,
        -0.030505336821079254,
        -0.03597288578748703,
        -0.019505389034748077,
        0.033025674521923065,
        0.06162455677986145,
        0.09092690050601959,
        0.010635360144078732,
        -0.0577671155333519,
        0.09099353849887848,
        -0.00239058886654675,
        0.013952666893601418,
        -0.02640780434012413,
        0.010002501308918,
        -0.015578868798911572,
        0.041805993765592575,
        0.08447050303220749,
        -0.00421026861295104,
        -0.0009611889254301786,
        0.015055198222398758,
        0.015665477141737938,
        -0.02072060853242874,
        0.05490996688604355,
        -0.013304227031767368,
        -0.005780547857284546,
        -0.09894222766160965,
        0.11358998715877533,
        0.04052520543336868,
        -0.020410211756825447,
        -0.01031643059104681,
        0.014600923284888268,
        0.0288175530731678,
        0.07998650521039963,
        -0.05775997415184975,
        0.04558456316590309,
        -0.021823225542902946,
        -0.038551054894924164,
        -0.07537102699279785,
        -0.05524022504687309,
        -0.061978843063116074,
        -0.039970435202121735,
        -0.008778377436101437,
        0.06191572546958923,
        -0.04540708288550377,
        -0.01155758649110794,
        -0.012620407156646252,
        -0.007455147337168455,
        0.007581163197755814,
        -0.04233549162745476,
        -0.06705839931964874,
        -0.10409984737634659,
        0.030116921290755272,
        -0.038543086498975754,
        -5.339259175959976e-33,
        0.10638050734996796,
        0.009842348285019398,
        0.012639975175261497,
        -0.033521756529808044,
        -0.0294235497713089,
        -0.08449440449476242,
        0.0011580599239096045,
        0.07389820367097855,
        0.007693760562688112,
        0.079062320291996,
        0.11556512862443924,
        -0.04092636704444885,
        0.0399722121655941,
        0.03670091554522514,
        0.11470307409763336,
        0.04684119671583176,
        0.03041422739624977,
        -0.048038456588983536,
        -0.01442955993115902,
        0.018154239282011986,
        -0.010153627023100853,
        0.02972007915377617,
        -0.060650650411844254,
        0.06973916292190552,
        -0.002675017574802041,
        0.09436599165201187,
        0.09503330290317535,
        -0.013166423887014389,
        -0.030067933723330498,
        -0.09244240820407867,
        -0.0222141332924366,
        0.02487838640809059,
        -0.09725335985422134,
        0.09152723103761673,
        -0.06546901166439056,
        0.010688270442187786,
        0.10825034230947495,
        -0.00010709155321819708,
        -0.030949728563427925,
        0.09126068651676178,
        0.016003165394067764,
        0.04076548293232918,
        -0.07291442900896072,
        -0.003957519773393869,
        -0.03832602873444557,
        0.0028659359086304903,
        0.05864614620804787,
        -0.0012824757723137736,
        -0.015402399934828281,
        -0.1368837207555771,
        0.038278527557849884,
        -0.06012111157178879,
        0.007636472582817078,
        -0.04504770785570145,
        -0.027176445350050926,
        -0.007834477350115776,
        0.07485175877809525,
        -0.06798028200864792,
        -0.09233839809894562,
        -0.009984918870031834,
        0.05784955620765686,
        -0.1084563359618187,
        -0.0045121898874640465,
        -0.05176114663481712,
        -0.029036743566393852,
        -0.03964098170399666,
        0.03776350989937782,
        -0.011640558950603008,
        0.007834313437342644,
        -0.05148061737418175,
        -0.10751360654830933,
        0.0019375401316210628,
        0.06373123824596405,
        0.021639682352542877,
        -0.05252476781606674,
        0.06307527422904968,
        -0.02382875233888626,
        0.000341520324582234,
        0.09355971217155457,
        -0.013206258416175842,
        0.022470461204648018,
        -0.03289620578289032,
        0.07516007125377655,
        -0.06507512927055359,
        0.00799661036580801,
        -0.08147814124822617,
        0.0387607142329216,
        0.0686580166220665,
        0.0673489198088646,
        0.03041849285364151,
        -0.11780993640422821,
        -0.010081521235406399,
        0.043045494705438614,
        0.07477296143770218,
        0.01637047715485096,
        -4.140683884656937e-8,
        -0.10066280514001846,
        -0.04324623569846153,
        -0.0034271914046257734,
        0.03594927489757538,
        -0.030061978846788406,
        0.04191587120294571,
        -0.008230184204876423,
        0.0076658716425299644,
        0.038101013749837875,
        0.014159420505166054,
        -0.015977222472429276,
        -0.00200711190700531,
        -0.0543835274875164,
        -0.01827787049114704,
        0.02375914342701435,
        -0.0035973964259028435,
        -0.042869504541158676,
        0.08814253658056259,
        -0.03227926790714264,
        -0.09235985577106476,
        -0.014323695562779903,
        -0.007880537770688534,
        0.09559397399425507,
        -0.04012458771467209,
        0.010904357768595219,
        -0.047626934945583344,
        -0.05025753006339073,
        -0.006166114006191492,
        -0.01211615838110447,
        -0.005331920925527811,
        0.049658603966236115,
        0.004364120773971081,
        0.060567889362573624,
        0.0015382759738713503,
        -0.06592667102813721,
        0.05406514182686806,
        0.06220020726323128,
        0.06703746318817139,
        0.031086228787899017,
        0.013857167214155197,
        0.03924787417054176,
        0.017030630260705948,
        -0.049300070852041245,
        0.006934192031621933,
        -0.03174469992518425,
        0.020445238798856735,
        -0.020269321277737617,
        -0.05131246894598007,
        0.048128820955753326,
        -0.009766624309122562,
        0.006985384505242109,
        -0.04816596210002899,
        -0.0750441700220108,
        -0.016391390934586525,
        -0.08760572969913483,
        0.02282583899796009,
        -0.010619254782795906,
        -0.017158521339297295,
        -0.09584756195545197,
        -0.05477628856897354,
        0.006279451306909323,
        0.04164154827594757,
        -0.031418170779943466,
        0.004730821121484041
      ]
    },
    {
      "id": "0d7869c1",
      "filePath": "05-rag-codebase/src/reranker.ts",
      "content": "function buildPrompt(query: string, chunk: IndexedChunk): string {\n\treturn `你是一个代码相关性评分专家。请评估以下代码片段与用户问题的相关性。\n\n## 用户问题\n${query}\n\n## 代码片段\n文件: ${chunk.filePath}\n类型: ${chunk.type}${chunk.name ? ` (${chunk.name})` : ''}\n行号: ${chunk.startLine}-${chunk.endLine}\n\n\\`\\`\\`typescript\n${chunk.content}\n\\`\\`\\`\n\n## 评分要求\n请给出 0-10 的相关性评分：\n- 0-2: 完全不相关\n- 3-4: 略微相关，但不是直接答案\n- 5-6: 中等相关，包含部分有用信息\n- 7-8: 高度相关，能直接回答问题的一部分\n- 9-10: 完美匹配，是回答问题的核心代码\n\n请严格按照以下 JSON 格式回复，不要包含其他内容：\n{\"score\": <分数>, \"reason\": \"<简短理由>\"}`;\n}\n\n/**\n * 解析 LLM 响应\n */",
      "startLine": 27,
      "endLine": 56,
      "type": "function",
      "name": "buildPrompt",
      "embedding": [
        -0.1414208561182022,
        0.019625231623649597,
        -0.0013060817727819085,
        0.03638380393385887,
        -0.003437628736719489,
        0.012878548353910446,
        0.04250041022896767,
        0.08490056544542313,
        0.017750270664691925,
        0.011785347945988178,
        0.02528066746890545,
        -0.015347780659794807,
        0.04861515015363693,
        -0.07657667249441147,
        0.01838691160082817,
        0.026836832985281944,
        -0.08684885501861572,
        -0.004309636075049639,
        -0.021038008853793144,
        -0.07981962710618973,
        0.005449298769235611,
        0.009060535579919815,
        0.03629225119948387,
        0.004836631938815117,
        0.06143447756767273,
        0.06614549458026886,
        -0.04344729334115982,
        0.06085174158215523,
        0.033909060060977936,
        -0.03422229364514351,
        -0.005616425070911646,
        0.1157640591263771,
        0.0018648713594302535,
        0.015417893417179585,
        0.06186935678124428,
        0.1478719860315323,
        -0.028315939009189606,
        -0.04004936292767525,
        -0.0401022844016552,
        0.01920175552368164,
        0.01809542253613472,
        0.06657734513282776,
        -0.014635084196925163,
        -0.08237400650978088,
        0.028122296556830406,
        -0.03358200564980507,
        -0.06936711817979813,
        -0.06235826388001442,
        -0.13048024475574493,
        -0.04059179127216339,
        -0.1351330280303955,
        0.027149196714162827,
        -0.10991745442152023,
        -0.018180955201387405,
        0.10978617519140244,
        -0.027079680934548378,
        -0.029399175196886063,
        0.014639499597251415,
        -0.024214550852775574,
        -0.0014903475530445576,
        -0.015768887475132942,
        0.006330340169370174,
        0.01741287298500538,
        -0.07272034138441086,
        0.053428009152412415,
        0.012325757183134556,
        -0.02544843778014183,
        0.06715147942304611,
        0.05157268047332764,
        -0.017107058316469193,
        -0.07444705069065094,
        0.0270660649985075,
        -0.05593892186880112,
        0.05996227636933327,
        -0.021867098286747932,
        0.04239208623766899,
        -0.013487509451806545,
        -0.0016755848191678524,
        -0.04289412498474121,
        -0.11148786544799805,
        -0.10576523095369339,
        -0.05250328406691551,
        0.07367473095655441,
        0.036620523780584335,
        -0.05655441805720329,
        0.07611234486103058,
        0.02038787677884102,
        -0.029698416590690613,
        0.0996146872639656,
        0.016823720186948776,
        -0.006840122863650322,
        -0.05120740458369255,
        0.01218398567289114,
        0.05287259444594383,
        0.04895361512899399,
        0.07881387323141098,
        -0.05585361644625664,
        0.05235159769654274,
        0.020954668521881104,
        0.028011342510581017,
        -0.028874248266220093,
        0.031978730112314224,
        0.032386597245931625,
        0.0016087671974673867,
        -0.0506768524646759,
        -0.0037996640894562006,
        0.019261162728071213,
        0.010771006345748901,
        0.049376457929611206,
        -0.07861436903476715,
        -0.008112231269478798,
        -0.037547942250967026,
        -0.024618778377771378,
        -0.1208966001868248,
        -0.052441373467445374,
        -0.06509552896022797,
        0.04213665798306465,
        -0.08331145346164703,
        0.025892319157719612,
        0.07711905986070633,
        0.09442077577114105,
        0.001812006696127355,
        -0.09614599496126175,
        0.020689627155661583,
        -0.041241638362407684,
        -0.052694909274578094,
        0.0835067629814148,
        -1.4528505898598754e-33,
        0.011820806190371513,
        -0.03222048282623291,
        0.021702399477362633,
        -0.024826720356941223,
        0.052169594913721085,
        -0.03878924250602722,
        0.025715377181768417,
        -0.0017153160879388452,
        -0.13594375550746918,
        0.06197425350546837,
        -0.04375747591257095,
        0.008135061711072922,
        -0.13240648806095123,
        0.032172348350286484,
        -0.007480580825358629,
        -0.07156246155500412,
        -0.012932226993143559,
        0.009760263375937939,
        -0.043700382113456726,
        0.04215819388628006,
        0.017038146033883095,
        0.03805140033364296,
        -0.008833466097712517,
        -0.005734368693083525,
        -0.004870220087468624,
        0.03702402114868164,
        0.03743414580821991,
        -0.0318964421749115,
        -0.08922784775495529,
        -0.020142579451203346,
        0.04069273918867111,
        -0.07807983458042145,
        -0.02615087479352951,
        -0.008128483779728413,
        -0.01999371312558651,
        -0.04533543810248375,
        -0.029204044491052628,
        -0.00600727554410696,
        -0.0773472785949707,
        -0.012925475835800171,
        0.010998445563018322,
        -0.00007954477769089863,
        -0.04276904836297035,
        0.022968605160713196,
        0.01382901705801487,
        -0.04089600592851639,
        -0.10774247348308563,
        -0.0071075791493058205,
        0.03902437537908554,
        -0.051133718341588974,
        -0.005584831815212965,
        0.1289995312690735,
        0.09222651273012161,
        0.04803888499736786,
        0.04592042416334152,
        0.003220427082851529,
        -0.006629806477576494,
        -0.004300709348171949,
        0.015461615286767483,
        0.020312275737524033,
        0.010879489593207836,
        0.007226799614727497,
        -0.009799410589039326,
        0.03344451263546944,
        0.09262790530920029,
        0.03002554178237915,
        0.05571739375591278,
        -0.00015453583910129964,
        0.0842190608382225,
        -0.0028447487857192755,
        -0.023950044065713882,
        -0.026230163872241974,
        0.03491448983550072,
        0.02285630814731121,
        0.03588816151022911,
        -0.04690216854214668,
        -0.08419550955295563,
        -0.02807176299393177,
        0.012063735164701939,
        -0.10082945972681046,
        -0.029243873432278633,
        -0.07401208579540253,
        0.005439269356429577,
        -0.07430392503738403,
        -0.021722253412008286,
        0.012909244745969772,
        -0.028352221474051476,
        -0.10024823993444443,
        -0.019823450595140457,
        -0.07531871646642685,
        -0.03506467863917351,
        -0.01340776588767767,
        -0.04098115116357803,
        -0.03647158667445183,
        -0.029764091596007347,
        -3.9478151252901104e-33,
        0.07230522483587265,
        0.022065795958042145,
        -0.06510171294212341,
        -0.011522512882947922,
        -0.04651500657200813,
        -0.04641604423522949,
        0.01966818794608116,
        0.014828088693320751,
        0.05147469416260719,
        0.08435974270105362,
        -0.024654865264892578,
        0.00015705605619587004,
        0.026877818629145622,
        -0.02748389169573784,
        0.006932851858437061,
        0.05433591082692146,
        -0.01047743484377861,
        -0.024420849978923798,
        -0.00007553731120424345,
        -0.008478943258523941,
        -0.044446855783462524,
        0.07079692929983139,
        -0.08330035209655762,
        0.05967780947685242,
        -0.017876550555229187,
        0.020966000854969025,
        0.049782462418079376,
        0.010070065036416054,
        -0.04699306935071945,
        0.0028943566139787436,
        0.024099132046103477,
        -0.02302374877035618,
        -0.07234718650579453,
        0.010575935244560242,
        -0.0582573227584362,
        -0.07977298647165298,
        -0.00776743795722723,
        -0.01673894189298153,
        -0.01602848246693611,
        -0.005674160551279783,
        0.027227887883782387,
        0.0319569855928421,
        0.009982786141335964,
        -0.03106052242219448,
        0.013266138732433319,
        0.00954580120742321,
        0.022700805217027664,
        0.0422481931746006,
        -0.033388424664735794,
        -0.09550078213214874,
        0.06324519217014313,
        -0.02824295498430729,
        0.01968887820839882,
        -0.05266273394227028,
        -0.02447371371090412,
        0.004747647792100906,
        -0.06348922848701477,
        -0.03802017867565155,
        -0.1444416344165802,
        -0.030015854164958,
        0.04221290349960327,
        0.03066111169755459,
        0.03468542918562889,
        -0.0825403556227684,
        -0.0018179533071815968,
        -0.014596207067370415,
        -0.04354427382349968,
        -0.06120799109339714,
        0.012167655862867832,
        -0.07992018759250641,
        -0.040864188224077225,
        -0.035936981439590454,
        0.06779607385396957,
        0.0088710468262434,
        -0.008586582727730274,
        0.028117602691054344,
        -0.011781048960983753,
        0.07033993303775787,
        0.021985895931720734,
        0.0662635788321495,
        -0.004483056254684925,
        -0.0011921928962692618,
        0.040670283138751984,
        0.09687365591526031,
        -0.03114033117890358,
        -0.009206432849168777,
        -0.04633478820323944,
        0.11829785257577896,
        0.017900360748171806,
        -0.059721119701862335,
        0.02657018043100834,
        0.004299427382647991,
        -0.004306065384298563,
        0.056837379932403564,
        -0.006162384990602732,
        -5.796529478629964e-8,
        -0.04742763563990593,
        -0.08187661319971085,
        -0.15433816611766815,
        -0.017495499923825264,
        0.01180891040712595,
        -0.006804822478443384,
        -0.04454520344734192,
        0.01622573472559452,
        0.0003382658469490707,
        -0.014080465771257877,
        0.020091848447918892,
        -0.017393460497260094,
        -0.1348022222518921,
        0.004643462132662535,
        -0.03989081084728241,
        -0.06185778230428696,
        -0.014732505194842815,
        0.08557460457086563,
        -0.03070244751870632,
        -0.08654744923114777,
        -0.008057435974478722,
        0.06240423023700714,
        0.010655120015144348,
        -0.06419498473405838,
        -0.035271868109703064,
        -0.007097420748323202,
        -0.021363016217947006,
        0.0240600798279047,
        -0.022879697382450104,
        0.029178956523537636,
        0.08738697320222855,
        -0.009312992915511131,
        0.04818624630570412,
        -0.03616133704781532,
        0.05322639271616936,
        0.018653754144906998,
        0.14720305800437927,
        0.0022537766490131617,
        -0.01042428333312273,
        0.013911399058997631,
        0.09845591336488724,
        0.01578008383512497,
        0.024650197476148605,
        0.03558789938688278,
        0.026912381872534752,
        -0.08500713855028152,
        -0.012469175271689892,
        0.024591999128460884,
        0.049981821328401566,
        -0.035236556082963943,
        0.03266175091266632,
        0.006607606075704098,
        -0.12402686476707458,
        -0.0012683173408731818,
        0.023416349664330482,
        0.004550587851554155,
        -0.019584432244300842,
        0.0178415235131979,
        -0.03693486005067825,
        -0.03603651374578476,
        0.05164065212011337,
        0.019533222541213036,
        0.0900048092007637,
        0.03034755028784275
      ]
    },
    {
      "id": "c7c5a769",
      "filePath": "05-rag-codebase/src/reranker.ts",
      "content": "function parseResponse(content: string): { score: number; reason: string } {\n\ttry {\n\t\t// 尝试直接解析 JSON\n\t\tconst parsed = JSON.parse(content);\n\t\treturn {\n\t\t\tscore: Math.min(10, Math.max(0, Number(parsed.score) || 0)),\n\t\t\treason: String(parsed.reason || ''),\n\t\t};\n\t} catch {\n\t\t// 如果解析失败，尝试提取数字\n\t\tconst match = content.match(/(\\d+)/);\n\t\treturn {\n\t\t\tscore: match ? Math.min(10, Math.max(0, Number(match[1]))) : 0,\n\t\t\treason: '解析失败',\n\t\t};\n\t}\n}\n\n/**\n * 对单个 chunk 进行评分\n */",
      "startLine": 57,
      "endLine": 77,
      "type": "function",
      "name": "parseResponse",
      "embedding": [
        -0.10682259500026703,
        0.06858276575803757,
        0.06722000986337662,
        -0.012775086797773838,
        0.002406843937933445,
        0.02383219636976719,
        0.020332075655460358,
        0.07408072799444199,
        0.02665533684194088,
        -0.0020953603088855743,
        -0.02994195558130741,
        -0.003155975602567196,
        -0.026873093098402023,
        0.05853090062737465,
        0.060334913432598114,
        -0.023839130997657776,
        -0.09546859562397003,
        0.046810321509838104,
        -0.08553861081600189,
        -0.15851753950119019,
        0.021299904212355614,
        0.027840251103043556,
        -0.013520436361432076,
        0.026976700872182846,
        0.02342946082353592,
        0.014891942031681538,
        -0.0022200928069651127,
        0.024230951443314552,
        0.06891277432441711,
        0.05923284962773323,
        0.0011583548039197922,
        -0.02257908321917057,
        0.02563982643187046,
        0.03505693003535271,
        -0.0013282656436786056,
        0.06788245588541031,
        -0.05924370139837265,
        -0.06571481376886368,
        0.06008540466427803,
        0.019926205277442932,
        0.02742007002234459,
        0.023863771930336952,
        0.009652568027377129,
        -0.09263318032026291,
        0.08696632087230682,
        -0.041779931634664536,
        -0.04494422674179077,
        -0.007018935400992632,
        -0.039579398930072784,
        0.011767511256039143,
        -0.03705395385622978,
        0.08743592351675034,
        -0.09618528187274933,
        -0.001931719365529716,
        0.09542616456747055,
        0.0011764529626816511,
        0.013096923008561134,
        -0.06198392063379288,
        0.013031795620918274,
        -0.075856052339077,
        -0.0054328301921486855,
        -0.0850791335105896,
        0.03851112350821495,
        -0.05729110911488533,
        0.037697017192840576,
        -0.051378414034843445,
        -0.05653863772749901,
        0.08284427225589752,
        -0.008124898187816143,
        0.06417480856180191,
        0.006630551535636187,
        0.03556383401155472,
        0.011906285770237446,
        0.07721103727817535,
        -0.05751121789216995,
        0.03392026573419571,
        -0.03552582859992981,
        -0.09049177169799805,
        -0.024801142513751984,
        0.0425582230091095,
        -0.021973934024572372,
        -0.11340759694576263,
        0.04286240041255951,
        0.09329802542924881,
        0.010101567953824997,
        0.025112923234701157,
        0.018283503130078316,
        0.02194901369512081,
        0.04924668371677399,
        -0.011736959218978882,
        0.009336654096841812,
        -0.02209542691707611,
        0.04776068776845932,
        0.0667436271905899,
        0.02168600633740425,
        0.11307520419359207,
        -0.08090865612030029,
        -0.07450254261493683,
        -0.043128758668899536,
        0.07314971834421158,
        -0.03625860810279846,
        0.09402616322040558,
        0.025868648663163185,
        -0.040021661669015884,
        -0.03330134600400925,
        0.008852159604430199,
        0.047315262258052826,
        0.0395345538854599,
        0.023488901555538177,
        -0.020661579445004463,
        0.036884915083646774,
        0.05394537001848221,
        0.012868196703493595,
        -0.010802078992128372,
        -0.10251408815383911,
        -0.06278050690889359,
        0.0367857962846756,
        -0.03527074679732323,
        0.030725352466106415,
        0.0949418693780899,
        0.04720935598015785,
        0.05431583523750305,
        -0.059458259493112564,
        0.033930886536836624,
        0.060880739241838455,
        0.0085858553647995,
        0.07577573508024216,
        1.0259099763494651e-32,
        -0.02962091565132141,
        -0.0010535488836467266,
        0.03219659999012947,
        -0.0627066120505333,
        -0.0583517849445343,
        -0.0453065000474453,
        -0.0653768852353096,
        -0.025111204013228416,
        -0.08507218211889267,
        0.006982055492699146,
        -0.04826623946428299,
        -0.04104812070727348,
        -0.022661954164505005,
        -0.09234556555747986,
        -0.013147345744073391,
        -0.049658164381980896,
        0.03571949154138565,
        -0.026005253195762634,
        0.021578693762421608,
        0.051858287304639816,
        -0.013489295728504658,
        -0.05639367550611496,
        0.002448413521051407,
        -0.02405031956732273,
        0.004052342381328344,
        0.0002666678046807647,
        -0.005269646178930998,
        -0.03477573022246361,
        -0.04457773640751839,
        -0.025025853887200356,
        0.054998792707920074,
        -0.04361572489142418,
        -0.03657646104693413,
        0.01979983225464821,
        0.10563599318265915,
        -0.02989227883517742,
        0.014395863749086857,
        0.026731766760349274,
        -0.09506749361753464,
        -0.06402195245027542,
        -0.06099630147218704,
        0.00940586719661951,
        -0.09745831787586212,
        -0.0011240759631618857,
        -0.02574801817536354,
        -0.014358967542648315,
        -0.04326733201742172,
        0.018438871949911118,
        0.0674101933836937,
        -0.0007472980068996549,
        0.014734318479895592,
        0.15052124857902527,
        0.021576642990112305,
        0.01235438697040081,
        0.03270048275589943,
        -0.047549474984407425,
        0.05890893191099167,
        0.012011801823973656,
        0.06602517515420914,
        0.029717212542891502,
        0.028588173910975456,
        -0.02481565997004509,
        0.0093619953840971,
        0.016915978863835335,
        0.06530645489692688,
        0.025097694247961044,
        -0.00216741394251585,
        -0.03276505321264267,
        0.054536428302526474,
        0.009906990453600883,
        -0.012602060101926327,
        0.007244288921356201,
        -0.04025081917643547,
        -0.02781682088971138,
        -0.015819577500224113,
        -0.06815410405397415,
        -0.008148256689310074,
        -0.005935602821409702,
        0.017064915969967842,
        -0.11782234907150269,
        0.004862127359956503,
        -0.08602200448513031,
        -0.019518058747053146,
        0.019829142838716507,
        -0.0028168116696178913,
        0.07740364223718643,
        -0.02019231580197811,
        -0.1266830414533615,
        0.027006886899471283,
        -0.0822010412812233,
        -0.0365615114569664,
        -0.049925778061151505,
        -0.09917520731687546,
        -0.04802613705396652,
        -0.034909527748823166,
        -9.574967194103865e-33,
        0.024386517703533173,
        0.006723764352500439,
        -0.05578651651740074,
        -0.061487581580877304,
        0.007435931358486414,
        -0.07714128494262695,
        0.007093414664268494,
        0.05011904612183571,
        0.07481084764003754,
        0.12706653773784637,
        0.010653777979314327,
        -0.05975404381752014,
        -0.0068612173199653625,
        0.026554344221949577,
        -0.01143936812877655,
        0.059747640043497086,
        -0.02235381118953228,
        0.017053702846169472,
        -0.013212812133133411,
        -0.01853051222860813,
        0.02871837466955185,
        0.037501394748687744,
        0.009203566238284111,
        0.05429244413971901,
        -0.04917486757040024,
        0.08128410577774048,
        0.09350711107254028,
        -0.018529409542679787,
        -0.05307544767856598,
        -0.0321313738822937,
        -0.0069555845111608505,
        -0.032037265598773956,
        0.006052317563444376,
        0.02696501836180687,
        -0.05686161294579506,
        -0.07761722803115845,
        0.023401061072945595,
        0.0023866191040724516,
        -0.04758892208337784,
        0.0328921414911747,
        0.04158448427915573,
        0.02993099018931389,
        -0.04493384435772896,
        0.006036802195012569,
        -0.004805588163435459,
        -0.031486183404922485,
        0.026571301743388176,
        0.08393403142690659,
        -0.03912540525197983,
        -0.0847010686993599,
        -0.006724734324961901,
        -0.01862432062625885,
        0.028428174555301666,
        -0.011298594065010548,
        0.0065752118825912476,
        -0.034092653542757034,
        -0.0152831906452775,
        -0.05014938488602638,
        -0.06345528364181519,
        -0.009004670195281506,
        0.009015459567308426,
        0.01340700313448906,
        -0.011130069382488728,
        0.017089033499360085,
        0.06868328154087067,
        -0.0053387600928545,
        -0.014916831627488136,
        -0.04720720648765564,
        0.014041747897863388,
        -0.0013069909764453769,
        -0.05081121250987053,
        0.0659976378083229,
        0.06075168773531914,
        -0.00840776227414608,
        -0.013215452432632446,
        0.01785542629659176,
        -0.04130474105477333,
        0.04064749926328659,
        0.0770639032125473,
        0.052588704973459244,
        0.009107357822358608,
        -0.03242819011211395,
        0.043921906501054764,
        0.08151379227638245,
        -0.02571120671927929,
        -0.037404708564281464,
        0.03561504930257797,
        0.0947287529706955,
        0.03364984318614006,
        -0.023715263232588768,
        -0.015591160394251347,
        0.028778716921806335,
        0.0006447678315453231,
        0.004653925076127052,
        0.022434493526816368,
        -5.748393760995896e-8,
        -0.13681353628635406,
        -0.08906903862953186,
        -0.1790497601032257,
        0.06740909069776535,
        -0.05489350110292435,
        0.06264741718769073,
        -0.033866699784994125,
        -0.06939416378736496,
        0.026319539174437523,
        -0.030851144343614578,
        0.007111466024070978,
        0.00504336366429925,
        -0.1377764791250229,
        -0.022063907235860825,
        -0.040646642446517944,
        0.01098721195012331,
        -0.0299004428088665,
        0.0636139065027237,
        -0.037141501903533936,
        -0.00704918010160327,
        0.026005025953054428,
        0.024080686271190643,
        0.00601848354563117,
        -0.030306106433272362,
        0.029608499258756638,
        0.01791282929480076,
        -0.03139464557170868,
        0.02842850238084793,
        -0.04510866850614548,
        -0.041578128933906555,
        0.04763762280344963,
        -0.03967318311333656,
        0.025613324716687202,
        -0.028062090277671814,
        -0.01293601468205452,
        0.03660568594932556,
        0.03691444545984268,
        -0.0018310339655727148,
        0.01953396014869213,
        0.08198673278093338,
        0.08051075786352158,
        0.04365266487002373,
        -0.049156252294778824,
        0.04860968887805939,
        0.02220362238585949,
        -0.06869357824325562,
        0.00222389935515821,
        0.02896912395954132,
        0.09050270169973373,
        -0.04979737848043442,
        0.02305491827428341,
        -0.10055078566074371,
        -0.08414345979690552,
        -0.047598015516996384,
        -0.03161004185676575,
        -0.026055892929434776,
        -0.04832454398274422,
        0.020288486033678055,
        -0.11890644580125809,
        -0.0012011690996587276,
        0.15183009207248688,
        0.0580441877245903,
        0.06982175260782242,
        -0.01058985386043787
      ]
    },
    {
      "id": "2cb93561",
      "filePath": "05-rag-codebase/src/reranker.ts",
      "content": "async function scoreChunk(\n\tclient: OpenAI,\n\tmodel: string,\n\tquery: string,\n\tchunk: IndexedChunk\n): Promise<RerankResult> {\n\ttry {\n\t\tconst response = await client.chat.completions.create({\n\t\t\tmodel,\n\t\t\tmessages: [{ role: 'user', content: buildPrompt(query, chunk) }],\n\t\t\ttemperature: 0,\n\t\t\tmax_tokens: 100,\n\t\t});\n\n\t\tconst content = response.choices[0]?.message?.content || '';\n\t\tconst { score, reason } = parseResponse(content);\n\n\t\treturn {\n\t\t\tchunk,\n\t\t\trelevanceScore: score,\n\t\t\treason,\n\t\t};\n\t} catch (error) {\n\t\tconsole.error(`[reranker] 评分失败 (${chunk.filePath}):`, error);\n\t\treturn {\n\t\t\tchunk,\n\t\t\trelevanceScore: 0,\n\t\t\treason: '评分出错',\n\t\t};\n\t}\n}\n\n/**\n * 对候选 chunks 进行重排序\n * @param query 用户问题\n * @param candidates 粗筛结果\n * @param topK 返回数量\n */",
      "startLine": 78,
      "endLine": 115,
      "type": "function",
      "name": "scoreChunk",
      "embedding": [
        -0.07554558664560318,
        0.022811010479927063,
        0.0008242522599175572,
        0.14124679565429688,
        0.013536246493458748,
        0.018149826675653458,
        0.01043171901255846,
        0.05929918587207794,
        0.0420624203979969,
        -0.01503092609345913,
        -0.03510584309697151,
        -0.022287962958216667,
        -0.0237292367964983,
        0.019708912819623947,
        0.03352813795208931,
        0.005503250751644373,
        -0.04342849925160408,
        -0.04305553063750267,
        -0.022691497579216957,
        -0.09363282471895218,
        0.014757814817130566,
        0.020514994859695435,
        0.03461820259690285,
        -0.005164069123566151,
        0.03681385517120361,
        -0.050698861479759216,
        -0.04254269599914551,
        -0.04504925757646561,
        0.012868543155491352,
        0.024510053917765617,
        0.032666634768247604,
        -0.036968957632780075,
        -0.0033193337731063366,
        0.040757015347480774,
        -0.04588629677891731,
        0.11664655059576035,
        -0.05035056918859482,
        -0.10425758361816406,
        -0.004590000957250595,
        -0.007582716178148985,
        0.06399381160736084,
        0.04554491490125656,
        -0.06108636409044266,
        -0.05200013518333435,
        0.12785926461219788,
        -0.13146638870239258,
        -0.06863544136285782,
        -0.04050903022289276,
        0.010378691367805004,
        0.041552964597940445,
        -0.11003224551677704,
        0.027186477556824684,
        -0.09567371010780334,
        0.03939839452505112,
        0.06539356708526611,
        0.06922774761915207,
        -0.07665780186653137,
        0.005812493152916431,
        -0.013108457438647747,
        -0.06366471201181412,
        0.009733201935887337,
        -0.1303563416004181,
        0.05051712691783905,
        -0.07744695991277695,
        0.0835929661989212,
        -0.0434558242559433,
        -0.048043400049209595,
        0.060280270874500275,
        -0.0057536824606359005,
        0.03827277570962906,
        0.05258486047387123,
        0.03099607490003109,
        -0.013545493595302105,
        0.017867516726255417,
        -0.03298279270529747,
        0.01344661321491003,
        -0.024564074352383614,
        0.021464727818965912,
        0.03208863362669945,
        0.05204217880964279,
        -0.06843145936727524,
        -0.0851120799779892,
        0.003047064645215869,
        0.010660955682396889,
        -0.0074121844954788685,
        0.047005072236061096,
        0.04718054458498955,
        -0.0602610781788826,
        0.030252840369939804,
        -0.06796875596046448,
        -0.028428884223103523,
        -0.011206143535673618,
        -0.02267218753695488,
        0.06380293518304825,
        0.017354726791381836,
        0.0740276426076889,
        -0.08264981210231781,
        -0.010242531076073647,
        -0.030105456709861755,
        0.05450468882918358,
        -0.025944354012608528,
        0.01562446914613247,
        0.009055147878825665,
        -0.032278940081596375,
        -0.062107477337121964,
        -0.01637214422225952,
        0.03121998719871044,
        0.052542585879564285,
        -0.053269099444150925,
        -0.011654971167445183,
        -0.04303733631968498,
        0.07917250692844391,
        0.0506000816822052,
        0.016994070261716843,
        -0.011444835923612118,
        -0.017093902453780174,
        0.0027948638889938593,
        -0.047101251780986786,
        0.024669170379638672,
        0.10337255895137787,
        0.11619874089956284,
        0.057644445449113846,
        -0.016092220321297646,
        0.0016131909796968102,
        0.05466253310441971,
        -0.009632213972508907,
        0.10631335526704788,
        4.479845337840216e-33,
        0.05779643356800079,
        0.02671436406672001,
        0.01491053681820631,
        0.06285230815410614,
        0.07714536786079407,
        0.03489605709910393,
        0.03179825097322464,
        -0.025649437680840492,
        -0.12544940412044525,
        -0.020289327949285507,
        -0.07751879096031189,
        0.0004033723671454936,
        0.01391132827848196,
        -0.07747925817966461,
        -0.004445022903382778,
        -0.04403528571128845,
        0.0014872344909235835,
        0.024727527052164078,
        0.05017915368080139,
        0.06276637315750122,
        -0.008755264803767204,
        -0.008360610343515873,
        0.018107544630765915,
        0.00641646608710289,
        0.00823237095028162,
        -0.0037936712615191936,
        0.0017178371781483293,
        -0.05303540453314781,
        -0.08445283025503159,
        -0.019520308822393417,
        0.0874883383512497,
        -0.022859344258904457,
        -0.04146610200405121,
        0.021288126707077026,
        0.04408354312181473,
        -0.018507884815335274,
        -0.019767066463828087,
        0.010371237061917782,
        -0.1339457482099533,
        -0.042615845799446106,
        0.019557509571313858,
        0.010920554399490356,
        -0.09037601202726364,
        -0.012149358168244362,
        -0.11155365407466888,
        -0.08670052886009216,
        -0.04064131900668144,
        0.01200085785239935,
        0.06702923029661179,
        0.008777832612395287,
        -0.03197893500328064,
        0.10491868108510971,
        0.05473977327346802,
        0.0029539461247622967,
        0.05827869102358818,
        -0.04621689021587372,
        0.01269387174397707,
        0.006448229309171438,
        0.0223857332020998,
        -0.028092171996831894,
        0.028236685320734978,
        -0.07229822129011154,
        -0.0011946010636165738,
        -0.02945290505886078,
        0.04110205918550491,
        -0.0036846385337412357,
        -0.04248565062880516,
        -0.017308039590716362,
        0.09235876053571701,
        -0.038687124848365784,
        0.02999611385166645,
        0.0005140628200024366,
        -0.004284352995455265,
        0.0027840640395879745,
        -0.01881329156458378,
        -0.04320967569947243,
        -0.08150329440832138,
        -0.0012293895706534386,
        0.05826740711927414,
        -0.13209471106529236,
        0.00020998161926399916,
        -0.121516153216362,
        -0.0918416827917099,
        0.02776484005153179,
        0.028196152299642563,
        0.06938864290714264,
        -0.03716519847512245,
        -0.07608669251203537,
        0.024430911988019943,
        0.013080617412924767,
        -0.03661934286355972,
        -0.02160034514963627,
        -0.025261597707867622,
        -0.05598895996809006,
        -0.028760099783539772,
        -3.818298055690557e-33,
        0.06078195944428444,
        -0.021195674315094948,
        -0.06704644113779068,
        -0.022059282287955284,
        0.05197989195585251,
        -0.02509741112589836,
        0.03330503776669502,
        0.03715488687157631,
        -0.009815637953579426,
        0.038853079080581665,
        0.001444586436264217,
        -0.030720898881554604,
        0.057398851960897446,
        0.037839312106370926,
        0.0005544506711885333,
        0.07926027476787567,
        -0.014380030333995819,
        -0.056746773421764374,
        -0.009809612296521664,
        -0.06624965369701385,
        0.02445775642991066,
        0.028730735182762146,
        -0.05094451457262039,
        0.08338999003171921,
        -0.03642607480287552,
        0.09713927656412125,
        0.031053509563207626,
        -0.0026173004880547523,
        -0.04518953710794449,
        -0.07049503177404404,
        0.02304953522980213,
        -0.03136531636118889,
        -0.10423702001571655,
        0.03244680538773537,
        0.04196539148688316,
        -0.029188962653279305,
        0.03217792138457298,
        -0.0032514415215700865,
        -0.06969394534826279,
        0.0654999166727066,
        0.07950638234615326,
        -0.002920013852417469,
        -0.09036142379045486,
        -0.011094339191913605,
        0.024370845407247543,
        -0.0368647500872612,
        0.03209979087114334,
        0.02020217850804329,
        -0.014521654695272446,
        -0.04519977420568466,
        0.035427276045084,
        -0.05634622648358345,
        -0.0007158302469179034,
        0.0004971183952875435,
        -0.038045696914196014,
        -0.05145689472556114,
        -0.0265016108751297,
        -0.0954952985048294,
        0.032922230660915375,
        -0.014919786714017391,
        0.017159385606646538,
        -0.035508181899785995,
        0.061218272894620895,
        -0.06050719693303108,
        0.017865659669041634,
        -0.07985522598028183,
        -0.0012909623328596354,
        0.029476821422576904,
        0.06701553612947464,
        0.008443760685622692,
        -0.04939595237374306,
        -0.00764499930664897,
        0.10302433371543884,
        0.027319956570863724,
        0.05023479089140892,
        0.016516709700226784,
        -0.041680268943309784,
        -0.03094908781349659,
        0.09611806273460388,
        0.04679257795214653,
        -0.049893710762262344,
        -0.011807132512331009,
        0.07663397490978241,
        0.07505042850971222,
        0.04563929885625839,
        -0.020677635446190834,
        0.06305292993783951,
        0.09690771251916885,
        0.005585170350968838,
        -0.007816950790584087,
        0.0034763035364449024,
        -0.02621903456747532,
        -0.022280806675553322,
        0.03656524792313576,
        0.05475178733468056,
        -5.642512590497972e-8,
        -0.1421520859003067,
        -0.02864459529519081,
        -0.14396612346172333,
        0.1012335866689682,
        -0.004632051568478346,
        0.005367600824683905,
        0.007145422510802746,
        -0.0055310954339802265,
        0.011061412282288074,
        0.0015053475508466363,
        -0.010414203628897667,
        -0.013543679378926754,
        -0.023644454777240753,
        -0.025442106649279594,
        0.027156462892889977,
        -0.029419193044304848,
        0.0021729578729718924,
        0.10109161585569382,
        -0.023895716294646263,
        -0.09515690803527832,
        0.04942106828093529,
        0.0320357084274292,
        0.0223449245095253,
        -0.0038082278333604336,
        0.035620614886283875,
        -0.03655590862035751,
        0.010638657957315445,
        0.05622420459985733,
        -0.048250772058963776,
        0.0018438608385622501,
        -0.03076963685452938,
        -0.013701171614229679,
        0.08498138189315796,
        -0.019505269825458527,
        0.00962752290070057,
        0.013214736245572567,
        0.08190640807151794,
        -0.033678386360406876,
        0.00297731114551425,
        0.05862775072455406,
        0.10526209324598312,
        0.07169070094823837,
        0.013730074279010296,
        0.028937388211488724,
        -0.014340491965413094,
        -0.05223878100514412,
        -0.028572745621204376,
        0.00543955247849226,
        0.08995946496725082,
        -0.03505181521177292,
        0.007408082485198975,
        -0.09558229893445969,
        -0.10339193046092987,
        0.010606725700199604,
        -0.02046237513422966,
        -0.03986988589167595,
        -0.005182519555091858,
        -0.0005828063585795462,
        -0.03841089457273483,
        0.015389923006296158,
        0.08637700974941254,
        0.014757211320102215,
        -0.019241925328969955,
        -0.01498359628021717
      ]
    },
    {
      "id": "8ef85c02",
      "filePath": "05-rag-codebase/src/reranker.ts",
      "content": "export async function rerank(\n\tquery: string,\n\tcandidates: RetrievalResult[],\n\ttopK: number\n): Promise<RerankResult[]> {\n\tconst client = createClient();\n\tconst model = getModel();\n\n\tconsole.log(`[reranker] 开始对 ${candidates.length} 个候选进行精排...`);\n\n\t// 并发评分（限制并发数避免 rate limit）\n\tconst concurrency = 5;\n\tconst results: RerankResult[] = [];\n\n\tfor (let i = 0; i < candidates.length; i += concurrency) {\n\t\tconst batch = candidates.slice(i, i + concurrency);\n\t\tconst batchResults = await Promise.all(\n\t\t\tbatch.map(c => scoreChunk(client, model, query, c.chunk))\n\t\t);\n\t\tresults.push(...batchResults);\n\t}\n\n\t// 按评分降序排序\n\tresults.sort((a, b) => b.relevanceScore - a.relevanceScore);\n\n\t// 返回 Top-K\n\tconst topResults = results.slice(0, topK);\n\n\tconsole.log(`[reranker] 精排完成，Top-${topK} 评分: ${topResults.map(r => r.relevanceScore).join(', ')}`);\n\n\treturn topResults;\n}",
      "startLine": 116,
      "endLine": 148,
      "type": "function",
      "name": "rerank",
      "embedding": [
        -0.06697018444538116,
        0.02791469171643257,
        -0.007920128293335438,
        0.046568263322114944,
        0.0009550254326313734,
        0.06935155391693115,
        0.01841329224407673,
        0.04442877322435379,
        0.02921571396291256,
        0.006128130946308374,
        -0.007147058844566345,
        -0.0013716380344703794,
        -0.012581413611769676,
        -0.07390054315328598,
        -0.004646866116672754,
        0.02314913272857666,
        -0.06512434035539627,
        0.01769833266735077,
        -0.058599378913640976,
        -0.13135609030723572,
        0.018200309947133064,
        0.03200756385922432,
        0.015547502785921097,
        0.002479906426742673,
        0.04994603991508484,
        -0.021963976323604584,
        -0.050736214965581894,
        -0.02589953877031803,
        -0.00916335079818964,
        -0.013123201206326485,
        -0.01689361222088337,
        0.009111128747463226,
        -0.05706443637609482,
        0.04236190766096115,
        -0.008671785704791546,
        0.059167198836803436,
        -0.11015546321868896,
        -0.060179147869348526,
        0.06928197294473648,
        -0.02894938923418522,
        0.08507964760065079,
        0.07749679684638977,
        -0.021297382190823555,
        -0.08104322105646133,
        0.10873911529779434,
        -0.08483525365591049,
        -0.08941303938627243,
        -0.01272681262344122,
        -0.007675427943468094,
        0.028341200202703476,
        -0.1046762466430664,
        0.04887497052550316,
        -0.08701860904693604,
        0.003730636788532138,
        0.09893101453781128,
        0.015840450301766396,
        -0.0137497428804636,
        -0.07362740486860275,
        -0.0360729843378067,
        -0.04525516927242279,
        0.002927829045802355,
        -0.134755939245224,
        0.04491443559527397,
        -0.06504081189632416,
        0.08068708330392838,
        -0.08862588554620743,
        0.018429020419716835,
        0.13585108518600464,
        0.0468815378844738,
        0.04653119668364525,
        0.018259407952427864,
        0.03502652421593666,
        -0.01740468479692936,
        -0.03640780597925186,
        -0.09833584725856781,
        0.019034946337342262,
        -0.0039000387769192457,
        0.013935872353613377,
        0.0110585056245327,
        0.029766295105218887,
        -0.10260166227817535,
        -0.04696236923336983,
        -0.004975301679223776,
        -0.005051731131970882,
        0.016610853374004364,
        0.013689468614757061,
        0.031772810965776443,
        -0.07684564590454102,
        0.014461449347436428,
        -0.05568980053067207,
        -0.06475802510976791,
        0.03210930526256561,
        -0.039066340774297714,
        0.05663387477397919,
        0.01636357791721821,
        0.08042847365140915,
        0.007619151379913092,
        0.03951496258378029,
        0.027230259031057358,
        0.07918655872344971,
        0.004754549823701382,
        0.03628043830394745,
        0.016254816204309464,
        -0.06791709363460541,
        -0.12815195322036743,
        -0.011716404929757118,
        0.008515212684869766,
        0.03462637588381767,
        -0.06707003712654114,
        -0.07917427271604538,
        0.00805516168475151,
        0.07980694621801376,
        0.001175818033516407,
        0.024521855637431145,
        -0.056147340685129166,
        -0.02090371586382389,
        0.007966051809489727,
        -0.07360145449638367,
        0.052564315497875214,
        0.06555084884166718,
        0.10155292600393295,
        0.09678341448307037,
        0.026554245501756668,
        0.0012181722559034824,
        0.004062129184603691,
        -0.005009698681533337,
        0.06760536134243011,
        5.613963756881498e-33,
        -0.006009073927998543,
        -0.03869134187698364,
        0.03125634416937828,
        -0.028658423572778702,
        0.03202124312520027,
        0.05248778313398361,
        0.030606452375650406,
        -0.03197083622217178,
        -0.15051808953285217,
        0.0017472740728408098,
        -0.07618653029203415,
        0.017427140846848488,
        -0.015738656744360924,
        -0.09329549223184586,
        -0.04479978233575821,
        -0.09223450720310211,
        0.07860293984413147,
        0.022297414019703865,
        -0.038508206605911255,
        0.05023666471242905,
        0.025892093777656555,
        0.011219410225749016,
        -0.024929823353886604,
        0.005923755466938019,
        -0.0053349630907177925,
        -0.06902270764112473,
        -0.014226042665541172,
        -0.004552042111754417,
        -0.0973983108997345,
        -0.005757367704063654,
        0.07749338448047638,
        0.05147243291139603,
        -0.022984007373452187,
        -0.0058442079462111,
        0.06028089299798012,
        0.00544410664588213,
        0.013503923080861568,
        -0.006890914868563414,
        -0.06859268248081207,
        -0.031046157702803612,
        -0.012610199861228466,
        0.03658447787165642,
        -0.06797461956739426,
        0.00009332995978184044,
        -0.05898909643292427,
        -0.05506507307291031,
        -0.05442731827497482,
        0.01593509316444397,
        0.029648102819919586,
        0.03594343736767769,
        -0.029401101171970367,
        0.02588396519422531,
        0.05101949721574783,
        -0.012025178410112858,
        0.04098089039325714,
        0.021647244691848755,
        0.04621584713459015,
        0.05453593656420708,
        0.012625718489289284,
        0.05949221923947334,
        -0.039517149329185486,
        -0.07310882955789566,
        -0.030248750001192093,
        -0.01709565706551075,
        0.016610924154520035,
        0.047534581273794174,
        -0.00015405246813315898,
        0.003034553024917841,
        0.07681144028902054,
        0.02374110370874405,
        0.01716669835150242,
        0.012506098486483097,
        0.05069276690483093,
        -0.00043160709901712835,
        0.05909440666437149,
        -0.025810154154896736,
        -0.0636732429265976,
        -0.02092673070728779,
        -0.034932252019643784,
        -0.10982003808021545,
        0.03391550853848457,
        -0.04791461303830147,
        -0.11100158840417862,
        0.031850993633270264,
        0.043610360473394394,
        0.055208440870046616,
        -0.050254929810762405,
        -0.06399622559547424,
        0.022933563217520714,
        -0.004702578764408827,
        -0.032572656869888306,
        0.02661709673702717,
        0.04459930956363678,
        -0.09273042529821396,
        -0.03306443989276886,
        -5.6869990576080097e-33,
        0.09258583933115005,
        0.03848933428525925,
        0.024344762787222862,
        -0.013588138855993748,
        0.08346983045339584,
        -0.02456946298480034,
        0.019477112218737602,
        -0.04203595221042633,
        -0.10894261300563812,
        0.0027098264545202255,
        -0.01233452744781971,
        -0.03408811241388321,
        0.027396390214562416,
        0.030885742977261543,
        0.08392097055912018,
        0.06277316063642502,
        0.07067426294088364,
        -0.024426693096756935,
        -0.0006761842523701489,
        -0.04100242257118225,
        0.04743187129497528,
        0.06103053316473961,
        -0.02403806522488594,
        0.0755305364727974,
        -0.028579965233802795,
        0.041712574660778046,
        0.009632822126150131,
        0.02927878312766552,
        -0.008590467274188995,
        -0.0897117406129837,
        0.011700857430696487,
        -0.08754732459783554,
        -0.1104682981967926,
        0.05714253708720207,
        0.029019290581345558,
        -0.028620963916182518,
        0.06550527364015579,
        -0.01648268848657608,
        -0.06955558061599731,
        0.07383731007575989,
        -0.004865326453000307,
        -0.03271184861660004,
        -0.04955492913722992,
        0.010982174426317215,
        0.051215868443250656,
        -0.03616108372807503,
        0.0002967945474665612,
        0.03387225791811943,
        0.0016862843185663223,
        -0.055311184376478195,
        0.014873909763991833,
        -0.02154870331287384,
        -0.09463681280612946,
        0.00933833234012127,
        -0.02672906406223774,
        -0.0867801234126091,
        -0.02142840437591076,
        -0.08748562633991241,
        0.037354644387960434,
        -0.00977193284779787,
        -0.0006794967921450734,
        -0.05391375720500946,
        0.064632348716259,
        -0.0014718183083459735,
        0.07002166658639908,
        -0.07351315766572952,
        -0.022772857919335365,
        -0.05170981585979462,
        -0.0022561163641512394,
        0.06969299167394638,
        -0.05533646419644356,
        0.06787023693323135,
        0.07658345252275467,
        0.015015555545687675,
        -0.01093962136656046,
        -0.00543417502194643,
        -0.06530549377202988,
        -0.027628222480416298,
        0.08924506604671478,
        0.0525515191257,
        -0.07422209531068802,
        0.031185593456029892,
        0.07735402882099152,
        0.04656687751412392,
        -0.02315148338675499,
        0.0013527448754757643,
        0.07371559739112854,
        0.05031687766313553,
        0.018245114013552666,
        -0.0491190105676651,
        -0.009588703513145447,
        -0.06720332056283951,
        0.00005827424683957361,
        0.01829543709754944,
        0.04899165779352188,
        -5.6573949080984676e-8,
        -0.10214851796627045,
        -0.06699228286743164,
        -0.12068882584571838,
        0.08916293829679489,
        0.028381887823343277,
        0.01657421514391899,
        -0.01625175029039383,
        0.04353739693760872,
        -0.007041153497993946,
        -0.025457657873630524,
        0.04105087369680405,
        -0.009645948186516762,
        -0.01902967318892479,
        -0.007456284947693348,
        0.0501285046339035,
        -0.02991577610373497,
        -0.01803138293325901,
        0.02789907529950142,
        -0.031082861125469208,
        -0.05766921490430832,
        0.0047804987989366055,
        0.056250277906656265,
        0.0316290482878685,
        0.012984002009034157,
        0.01952303573489189,
        -0.03593331575393677,
        0.08113382756710052,
        0.08089261502027512,
        0.05856766924262047,
        -0.007046679966151714,
        -0.04452844709157944,
        -0.03317224979400635,
        0.0946844145655632,
        -0.02125769853591919,
        -0.005258224904537201,
        -0.020668383687734604,
        0.04115673527121544,
        0.01606818474829197,
        0.03458688035607338,
        0.04076138883829117,
        0.03618054464459419,
        0.07195811718702316,
        0.033833324909210205,
        0.0759212076663971,
        0.04226606339216232,
        -0.08359178155660629,
        0.003563425736501813,
        -0.001380691770464182,
        0.096881203353405,
        -0.03996195271611214,
        -0.026477381587028503,
        -0.08714915812015533,
        -0.04818756505846977,
        0.01149010006338358,
        -0.028978120535612106,
        -0.01615661010146141,
        -0.00708109000697732,
        -0.03390339016914368,
        -0.006969308014959097,
        -0.007579950615763664,
        0.07909590005874634,
        -0.07061532139778137,
        -0.04777495190501213,
        0.002013616729527712
      ]
    },
    {
      "id": "67ad7ab8",
      "filePath": "05-rag-codebase/src/loader.ts",
      "content": "// loader.ts - 递归读取代码文件\n// 职责：遍历指定目录，读取所有 .ts 文件内容\n\nimport { readFileSync, statSync } from 'fs';\nimport { glob } from 'glob';\nimport { relative } from 'path';\n\nexport interface LoadedFile {\n\tfilePath: string;   // 相对于 rootDir 的路径\n\tcontent: string;    // 文件内容\n}\n\n// 默认忽略的目录和文件\nconst DEFAULT_IGNORE = [\n\t'**/node_modules/**',\n\t'**/dist/**',\n\t'**/*.test.ts',\n\t'**/*.spec.ts',\n\t'**/.*/**',\n];\n\n/**\n * 加载指定目录下的所有 TypeScript 文件\n * @param rootDir 根目录（绝对路径）\n * @param patterns 额外的 glob 模式，默认 ['**\\/*.ts']\n * @param ignore 忽略的模式\n */",
      "startLine": 1,
      "endLine": 27,
      "type": "other",
      "embedding": [
        -0.13764452934265137,
        0.02101431041955948,
        -0.03802957013249397,
        0.06639540195465088,
        0.005984548479318619,
        -0.043465834110975266,
        0.05120575428009033,
        0.05696367472410202,
        -0.032276637852191925,
        0.031200597062706947,
        0.029339153319597244,
        0.0008030314929783344,
        -0.007362691219896078,
        -0.021455716341733932,
        0.053860533982515335,
        0.049798671156167984,
        -0.11864122748374939,
        0.03294264152646065,
        -0.01346038468182087,
        -0.049268897622823715,
        0.00008680416067363694,
        0.009545424021780491,
        0.009660953655838966,
        -0.060595035552978516,
        0.03496623411774635,
        0.009689625352621078,
        -0.03278587386012077,
        -0.01197341550141573,
        0.03420325741171837,
        0.01045758556574583,
        -0.0062122708186507225,
        0.1340419352054596,
        -0.06474214792251587,
        0.01640811562538147,
        0.08194289356470108,
        0.08402746170759201,
        -0.029651213437318802,
        -0.08370515704154968,
        -0.03669700026512146,
        0.015130150131881237,
        0.07787112146615982,
        0.08380728214979172,
        -0.0000432878514402546,
        -0.06977835297584534,
        -0.006041009444743395,
        -0.08575540035963058,
        -0.057839278131723404,
        -0.0053421552293002605,
        -0.12463032454252243,
        -0.033888816833496094,
        -0.058448053896427155,
        -0.054328057914972305,
        -0.09411463886499405,
        -0.02859434485435486,
        0.09767935425043106,
        0.0004728333733510226,
        0.04813307896256447,
        -0.005836706142872572,
        0.044621359556913376,
        0.026874328032135963,
        -0.006436095107346773,
        0.021985571831464767,
        -0.0027406977023929358,
        -0.08394266664981842,
        0.030180320143699646,
        0.11364217102527618,
        -0.050293587148189545,
        0.10499927401542664,
        0.03542831540107727,
        -0.008167422376573086,
        -0.12086812406778336,
        0.008025632239878178,
        -0.05566641315817833,
        0.06623699516057968,
        0.00683252839371562,
        -0.05376109853386879,
        -0.07494710385799408,
        0.025899482890963554,
        -0.0460776649415493,
        -0.14855536818504333,
        -0.016993630677461624,
        -0.04734222590923309,
        0.09577666968107224,
        0.016740357503294945,
        -0.018033096566796303,
        0.11793560534715652,
        -0.0030618913006037474,
        -0.009020611643791199,
        0.03250062093138695,
        0.005926996469497681,
        -0.0035912718158215284,
        -0.0555349737405777,
        -0.06802570074796677,
        0.04815216362476349,
        -0.018941782414913177,
        0.0546429380774498,
        -0.013684649020433426,
        0.05397844687104225,
        -0.006802852265536785,
        0.026734042912721634,
        -0.02677031233906746,
        -0.03560733050107956,
        0.03459138795733452,
        0.06154727190732956,
        -0.044897567480802536,
        -0.005553416442126036,
        0.030107825994491577,
        -0.058272529393434525,
        0.005003765691071749,
        -0.017278321087360382,
        -0.026124509051442146,
        0.05836831033229828,
        -0.0496029295027256,
        -0.09844360500574112,
        -0.03722333908081055,
        -0.08002689480781555,
        0.05884844809770584,
        -0.018574850633740425,
        -0.03450113907456398,
        0.09666534513235092,
        0.09880027920007706,
        0.022814111784100533,
        -0.06566284596920013,
        0.0949082225561142,
        0.04047590121626854,
        -0.052043359726667404,
        0.07802689075469971,
        2.7348945037055798e-33,
        -0.024885745719075203,
        -0.0643085166811943,
        0.019219031557440758,
        0.029090389609336853,
        0.009581229649484158,
        -0.044573042541742325,
        0.04388909041881561,
        -0.08215087652206421,
        -0.0897257998585701,
        0.06552983820438385,
        -0.04878125339746475,
        0.03357721120119095,
        -0.10138718783855438,
        -0.0012178168399259448,
        -0.03187049925327301,
        -0.014958205632865429,
        0.04353170469403267,
        -0.032198913395404816,
        0.02521989308297634,
        0.03262927010655403,
        0.01477075181901455,
        0.058087099343538284,
        -0.04550592973828316,
        -0.018627475947141647,
        -0.04616103321313858,
        0.012326093390583992,
        0.0029353825375437737,
        -0.03793136775493622,
        0.04854825511574745,
        -0.004531831480562687,
        0.10746127367019653,
        -0.028661152347922325,
        0.04404277727007866,
        0.053037919104099274,
        -0.023890085518360138,
        -0.0400424599647522,
        -0.014770534820854664,
        -0.034763094037771225,
        -0.11546691507101059,
        0.017544995993375778,
        -0.04971998929977417,
        0.021455150097608566,
        -0.06171373650431633,
        0.048830799758434296,
        -0.007689210586249828,
        -0.036315709352493286,
        -0.01459953747689724,
        -0.030339833348989487,
        0.048118408769369125,
        -0.049911756068468094,
        -0.05885365232825279,
        0.0717880055308342,
        0.032930899411439896,
        0.00623016944155097,
        0.05925889313220978,
        -0.012196133844554424,
        -0.026354337111115456,
        -0.07848461717367172,
        0.0022793281823396683,
        0.057156868278980255,
        0.06129304692149162,
        -0.023360077291727066,
        -0.0524667464196682,
        0.009670563973486423,
        0.10088838636875153,
        -0.037067633122205734,
        0.012703224085271358,
        -0.03842395916581154,
        -0.01876797527074814,
        0.026307998225092888,
        -0.06097773090004921,
        -0.013820743188261986,
        -0.03504721447825432,
        0.016764743253588676,
        0.058767374604940414,
        -0.005879922769963741,
        -0.004927779082208872,
        0.06572291254997253,
        -0.04665379598736763,
        -0.11316413432359695,
        -0.016356516629457474,
        -0.0548962838947773,
        0.011872866190969944,
        -0.06440740823745728,
        0.014002975076436996,
        0.008914989419281483,
        -0.0376388281583786,
        -0.07399844378232956,
        0.03453115373849869,
        -0.11238455772399902,
        0.027331747114658356,
        -0.04183536767959595,
        -0.03955378755927086,
        -0.07350008934736252,
        -0.03308160603046417,
        -6.177781908071731e-33,
        0.11194535344839096,
        0.0734899565577507,
        -0.03196731209754944,
        -0.004629119765013456,
        -0.04198918864130974,
        -0.05333970859646797,
        0.0011908613378182054,
        -0.06287945061922073,
        0.014360894449055195,
        0.10579971224069595,
        -0.009525349363684654,
        0.046627555042505264,
        0.04292604699730873,
        -0.049506109207868576,
        0.04906449839472771,
        0.010928423143923283,
        0.022328395396471024,
        -0.044546112418174744,
        -0.002691809320822358,
        0.015505040064454079,
        -0.00440042931586504,
        0.029324065893888474,
        0.031318943947553635,
        0.006813426967710257,
        -0.06935785710811615,
        0.012465311214327812,
        -0.042361367493867874,
        0.03991349786520004,
        -0.04667101800441742,
        -0.022289063781499863,
        -0.06184181198477745,
        0.059661753475666046,
        -0.01677609793841839,
        -0.006539676338434219,
        -0.037818942219018936,
        -0.08157943934202194,
        -0.007677823305130005,
        0.07205914705991745,
        -0.0006413361988961697,
        -0.018229898065328598,
        0.00017508392920717597,
        0.028764724731445312,
        -0.04702576622366905,
        -0.06421878933906555,
        -0.02094937302172184,
        0.03388075530529022,
        0.01697429269552231,
        0.03660111501812935,
        -0.06490317732095718,
        -0.07707852870225906,
        0.05756411328911781,
        -0.022767698392271996,
        -0.004988089669495821,
        -0.04856232926249504,
        0.028512464836239815,
        0.012123803608119488,
        0.004985756240785122,
        -0.10340346395969391,
        -0.03503416106104851,
        -0.04514836147427559,
        0.08991038799285889,
        0.0062234122306108475,
        -0.019639765843749046,
        -0.089388407766819,
        -0.02533894032239914,
        -0.03111443482339382,
        -0.023927396163344383,
        -0.01884518377482891,
        0.03118363581597805,
        -0.0378003753721714,
        -0.0431782528758049,
        0.023323575034737587,
        0.00970982201397419,
        0.02064543031156063,
        -0.0015257744817063212,
        -0.0006243872339837253,
        0.0056774429976940155,
        -0.00541688920930028,
        0.054938800632953644,
        0.07901038974523544,
        -0.010661081410944462,
        0.07618628442287445,
        -0.004578110761940479,
        0.03415171802043915,
        -0.0008191819651983678,
        -0.0006770184845663607,
        -0.04125448688864708,
        0.09826347231864929,
        0.1389109492301941,
        -0.019906222820281982,
        -0.007069706451147795,
        0.04928138479590416,
        0.048178765922784805,
        0.06148889660835266,
        0.01943686604499817,
        -6.1605511803009e-8,
        -0.10449909418821335,
        -0.0658249482512474,
        -0.15254639089107513,
        -0.021700343117117882,
        -0.040943119674921036,
        -0.001646138378418982,
        -0.01821804605424404,
        -0.02032538875937462,
        0.027819084003567696,
        -0.011901740916073322,
        -0.006372957490384579,
        0.01184043288230896,
        -0.04600818455219269,
        -0.01596870832145214,
        -0.024816185235977173,
        -0.04766672104597092,
        0.03444164618849754,
        0.026315029710531235,
        -0.016838425770401955,
        0.010788275860249996,
        -0.01234497595578432,
        0.05816344544291496,
        0.029505662620067596,
        0.058358464390039444,
        0.010166848078370094,
        0.0014061847468838096,
        -0.0018004905432462692,
        -0.060971539467573166,
        0.009846093133091927,
        0.01853851042687893,
        0.033382583409547806,
        -0.03247612342238426,
        -0.02241956628859043,
        -0.07837655395269394,
        -0.05075614154338837,
        0.06533598899841309,
        0.11170297861099243,
        0.015024787746369839,
        0.032774344086647034,
        0.04141829162836075,
        0.05015118047595024,
        -0.009069861844182014,
        -0.006335671059787273,
        0.03041292354464531,
        0.03306274488568306,
        -0.1277603805065155,
        -0.006634613033384085,
        -0.023932350799441338,
        0.07741039991378784,
        -0.04798233136534691,
        0.05331934988498688,
        -0.06547009944915771,
        -0.11079907417297363,
        0.0642733946442604,
        0.015696246176958084,
        -0.03854868933558464,
        -0.037497151643037796,
        0.015361367724835873,
        -0.05792033299803734,
        0.0024594643618911505,
        0.017353976145386696,
        -0.015432522632181644,
        0.05310758575797081,
        0.012520776130259037
      ]
    },
    {
      "id": "1f826a26",
      "filePath": "05-rag-codebase/src/loader.ts",
      "content": "export async function loadFiles(\n\trootDir: string,\n\tpatterns: string[] = ['**/*.ts'],\n\tignore: string[] = DEFAULT_IGNORE\n): Promise<LoadedFile[]> {\n\tconst files: LoadedFile[] = [];\n\n\tfor (const pattern of patterns) {\n\t\tconst matches = await glob(pattern, {\n\t\t\tcwd: rootDir,\n\t\t\tignore,\n\t\t\tnodir: true,\n\t\t\tabsolute: true,\n\t\t});\n\n\t\tfor (const absPath of matches) {\n\t\t\tconst stat = statSync(absPath);\n\t\t\t// 跳过过大的文件（超过 100KB）\n\t\t\tif (stat.size > 100 * 1024) {\n\t\t\t\tconsole.log(`[loader] 跳过大文件: ${absPath} (${stat.size} bytes)`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst content = readFileSync(absPath, 'utf-8');\n\t\t\tconst filePath = relative(rootDir, absPath);\n\n\t\t\tfiles.push({ filePath, content });\n\t\t}\n\t}\n\n\tconsole.log(`[loader] 加载了 ${files.length} 个文件`);\n\treturn files;\n}",
      "startLine": 28,
      "endLine": 61,
      "type": "function",
      "name": "loadFiles",
      "embedding": [
        -0.13569413125514984,
        0.05506370589137077,
        0.00672208471223712,
        0.040935542434453964,
        0.022420523688197136,
        -0.05398799106478691,
        0.036485400050878525,
        0.05123986303806305,
        0.0302589051425457,
        0.029518740251660347,
        -0.0325598269701004,
        0.030938809737563133,
        -0.05402626842260361,
        -0.006261748261749744,
        0.021554185077548027,
        0.008344451896846294,
        -0.09712644666433334,
        0.030298130586743355,
        -0.0810578241944313,
        -0.06570420414209366,
        0.05495781451463699,
        -0.023816624656319618,
        0.0004230776394251734,
        -0.06632652878761292,
        0.07023444771766663,
        0.00954798236489296,
        -0.0747661143541336,
        -0.05871053785085678,
        0.03413092717528343,
        0.00642624543979764,
        0.023463981226086617,
        0.07980140298604965,
        -0.05106709897518158,
        -0.0064171431586146355,
        0.03158244118094444,
        0.06436847150325775,
        -0.08021532744169235,
        -0.09719908237457275,
        0.012093299999833107,
        -0.00530818710103631,
        0.054002489894628525,
        0.06762593984603882,
        -0.0017539566615596414,
        -0.0026783987414091825,
        0.014811361208558083,
        -0.03594188392162323,
        -0.039411626756191254,
        0.05601193383336067,
        -0.05016746744513512,
        0.009490208700299263,
        -0.010214847512543201,
        0.005695050582289696,
        -0.12662409245967865,
        -0.002499848837032914,
        0.07287490367889404,
        -0.033241692930459976,
        0.02682812511920929,
        -0.01729833520948887,
        -0.006846082396805286,
        0.04235021024942398,
        -0.02676323801279068,
        -0.05547172203660011,
        -0.0009608780383132398,
        -0.048531223088502884,
        0.05941372364759445,
        0.07070673257112503,
        -0.022920802235603333,
        0.09182947129011154,
        0.0051881917752325535,
        0.06783347576856613,
        -0.06595238298177719,
        0.05208618938922882,
        -0.04582919180393219,
        0.10859610885381699,
        0.010495692491531372,
        -0.039825696498155594,
        -0.044450435787439346,
        0.010854559950530529,
        -0.047506727278232574,
        -0.09937804192304611,
        -0.0664282813668251,
        -0.09096856415271759,
        0.10364357382059097,
        -0.034820906817913055,
        0.023558776825666428,
        0.09142196923494339,
        0.02542654052376747,
        -0.01903189904987812,
        0.014478765428066254,
        -0.053086210042238235,
        -0.029743345454335213,
        0.01940809190273285,
        -0.06586915254592896,
        0.06905844062566757,
        -0.030763614922761917,
        0.06280732899904251,
        -0.025252463296055794,
        0.09768080711364746,
        0.005206494592130184,
        0.027789587154984474,
        -0.022200938314199448,
        0.012923182919621468,
        0.0694887787103653,
        0.01656918413937092,
        -0.021192224696278572,
        -0.0416579432785511,
        0.01208444219082594,
        -0.013278475031256676,
        -0.01687656156718731,
        -0.022244885563850403,
        -0.025783991441130638,
        0.040757402777671814,
        -0.003533411305397749,
        -0.00992168765515089,
        -0.038489487022161484,
        -0.07770835608243942,
        0.05363502353429794,
        -0.002438695402815938,
        -0.03744037449359894,
        0.09403912723064423,
        0.10590816289186478,
        0.027209049090743065,
        -0.024290097877383232,
        0.041118599474430084,
        0.03740661218762398,
        -0.03766251355409622,
        0.07073312252759933,
        9.682482315533887e-33,
        -0.015719987452030182,
        -0.06509809195995331,
        0.04935332387685776,
        0.0432710275053978,
        -0.02056371234357357,
        -0.0311141237616539,
        0.019385207444429398,
        -0.054461125284433365,
        -0.0824543684720993,
        0.09423041343688965,
        -0.0509985014796257,
        0.06618890166282654,
        -0.08696718513965607,
        -0.038914088159799576,
        0.02271096780896187,
        0.01025752816349268,
        0.07077577710151672,
        -0.062490809708833694,
        0.044035404920578,
        0.03988661989569664,
        0.0011626159539446235,
        -0.015470867976546288,
        -0.031200522556900978,
        -0.012871811166405678,
        -0.04348311573266983,
        -0.04213867709040642,
        0.0015005463501438498,
        0.010773872956633568,
        0.012484935112297535,
        -0.007789111230522394,
        0.1156209260225296,
        -0.05460942164063454,
        0.038613952696323395,
        0.00815210398286581,
        0.01439990196377039,
        -0.07627049088478088,
        -0.02759864367544651,
        0.004150693770498037,
        -0.15499399602413177,
        0.016449281945824623,
        0.019310714676976204,
        0.027577098459005356,
        -0.05566639080643654,
        0.02966160885989666,
        -0.06130581349134445,
        -0.05935285612940788,
        0.004323218483477831,
        -0.06487354636192322,
        0.044159140437841415,
        -0.041462771594524384,
        0.026778053492307663,
        0.10490303486585617,
        0.020465228706598282,
        -0.002766597317531705,
        0.10281580686569214,
        -0.008503611199557781,
        -0.02434745989739895,
        -0.03960162773728371,
        0.0061891768127679825,
        0.06011996418237686,
        0.10335532575845718,
        -0.08316287398338318,
        -0.02209199033677578,
        0.05064168944954872,
        0.06203734502196312,
        -0.03786744549870491,
        -0.0008294573053717613,
        -0.010432200506329536,
        -0.030689522624015808,
        0.04663678631186485,
        0.0363847091794014,
        -0.037905462086200714,
        0.04383319988846779,
        0.011425080709159374,
        0.08775437623262405,
        0.017936231568455696,
        -0.03955473750829697,
        0.03617687523365021,
        -0.0908263549208641,
        -0.11626846343278885,
        -0.018303219228982925,
        -0.039349887520074844,
        -0.0013263353612273932,
        -0.004938261117786169,
        -0.009926331229507923,
        0.03582017123699188,
        -0.013447386212646961,
        -0.1276252269744873,
        0.004933886229991913,
        -0.06306540220975876,
        0.0038929330185055733,
        -0.03211173415184021,
        -0.05038706213235855,
        -0.1105797290802002,
        -0.045265082269907,
        -9.105961111173096e-33,
        0.1345623880624771,
        0.06191159039735794,
        0.011371114291250706,
        0.021979402750730515,
        -0.014889327809214592,
        -0.0027291730511933565,
        0.04198811948299408,
        -0.007700678426772356,
        0.048517365008592606,
        0.06810641288757324,
        -0.0038498127833008766,
        0.01619168557226658,
        0.00483496580272913,
        -0.022008772939443588,
        0.03745676204562187,
        0.0004354998527560383,
        0.024546733126044273,
        -0.0466037355363369,
        -0.013481124304234982,
        -0.005902736447751522,
        0.021322302520275116,
        0.006520838942378759,
        0.07624401897192001,
        0.06557680666446686,
        -0.019626852124929428,
        0.008980765007436275,
        -0.01143374852836132,
        0.006926249247044325,
        -0.07942511141300201,
        -0.05295031517744064,
        -0.05770865082740784,
        0.013283928856253624,
        -0.07265698909759521,
        -0.027482300996780396,
        -0.03562881425023079,
        -0.09097076952457428,
        0.029182737693190575,
        0.11895086616277695,
        -0.02030601166188717,
        0.020812196657061577,
        0.019591277465224266,
        0.013263747096061707,
        -0.07227583229541779,
        -0.055360645055770874,
        -0.0047373236157000065,
        -0.056908346712589264,
        0.06240927428007126,
        0.045593343675136566,
        -0.019467614591121674,
        -0.09325943142175674,
        0.09851598739624023,
        -0.03769495710730553,
        0.0005896268994547427,
        -0.024961164221167564,
        0.05499488487839699,
        0.02683577686548233,
        -0.04104526713490486,
        -0.09066648036241531,
        -0.016074787825345993,
        0.01824028231203556,
        0.038208648562431335,
        -0.04526445269584656,
        0.004834991414099932,
        -0.10747852176427841,
        -0.040052711963653564,
        -0.013152064755558968,
        -0.02832491137087345,
        -0.005455932579934597,
        0.06559097766876221,
        0.07706887274980545,
        -0.02285035513341427,
        0.012936334125697613,
        -0.030436718836426735,
        0.03224674612283707,
        -0.015643037855625153,
        -0.018645422533154488,
        0.011228765361011028,
        -0.07852636277675629,
        0.07871174067258835,
        0.11294156312942505,
        -0.048321690410375595,
        0.05825573205947876,
        -0.01796598732471466,
        0.014632339589297771,
        0.05029398202896118,
        0.06373278796672821,
        -0.053742311894893646,
        0.06184894219040871,
        0.092448890209198,
        0.007828392088413239,
        -0.005405365023761988,
        0.05269203707575798,
        0.03023509494960308,
        0.030022336170077324,
        0.003072655526921153,
        -6.231666560552185e-8,
        -0.07119069248437881,
        -0.07205355167388916,
        -0.09110616892576218,
        -0.02074303664267063,
        -0.01340247131884098,
        0.009727183729410172,
        0.006611653137952089,
        -0.05774756520986557,
        -0.0022370791994035244,
        -0.009812583215534687,
        0.025247322395443916,
        -0.006864885799586773,
        -0.01649615727365017,
        0.009615288116037846,
        -0.03924001753330231,
        -0.02461606077849865,
        0.03664817288517952,
        0.018711324781179428,
        -0.05437113344669342,
        0.007110311649739742,
        -0.007283274084329605,
        0.08344288170337677,
        -0.011452523991465569,
        0.03371773660182953,
        0.04175213724374771,
        -0.01640302687883377,
        0.028212420642375946,
        -0.0020150882191956043,
        -0.008712884038686752,
        0.0324731208384037,
        0.011595779098570347,
        -0.030576245859265327,
        -0.00861794501543045,
        -0.1087699681520462,
        -0.03771277144551277,
        0.010083861649036407,
        0.08829563856124878,
        0.021502407267689705,
        0.042418237775564194,
        0.05838173255324364,
        0.0908600464463234,
        0.01773066259920597,
        0.06778270751237869,
        0.05407154560089111,
        0.005943030584603548,
        -0.10871932655572891,
        -0.007543306797742844,
        -0.00474537443369627,
        0.033793333917856216,
        -0.048009831458330154,
        0.09038981795310974,
        -0.07527829706668854,
        -0.12470739334821701,
        0.10475239902734756,
        0.002223327523097396,
        -0.081959068775177,
        0.005252896808087826,
        0.012716993689537048,
        -0.05015826225280762,
        0.035348501056432724,
        0.04743142053484917,
        -0.01844308152794838,
        0.03513553738594055,
        -0.02196921408176422
      ]
    },
    {
      "id": "774efd40",
      "filePath": "05-rag-codebase/src/index.ts",
      "content": "// index.ts - CLI 入口\n// 提供两个命令：\n// - build: 构建向量索引\n// - query: 查询代码库\n\nimport 'dotenv/config';\nimport { resolve } from 'path';\nimport { loadFiles } from './loader.js';\nimport { splitFiles } from './splitter.js';\nimport { embedChunks, embedQuery } from './embedder.js';\nimport { saveStore, loadStore } from './store.js';\nimport { retrieve } from './retriever.js';\nimport { rerank } from './reranker.js';\nimport { generate } from './generator.js';\n\n// 默认配置\nconst DEFAULT_ROOT = resolve(process.cwd(), '..');  // packages 目录\nconst STORE_PATH = resolve(process.cwd(), 'data/vectors.json');\nconst RETRIEVAL_TOP_N = Number(process.env.RETRIEVAL_TOP_N) || 20;\nconst RERANK_TOP_K = Number(process.env.RERANK_TOP_K) || 5;\n\n/**\n * 构建向量索引\n */",
      "startLine": 1,
      "endLine": 24,
      "type": "other",
      "embedding": [
        -0.1583832949399948,
        0.02076186239719391,
        0.021112535148859024,
        0.006373779382556677,
        0.022397775202989578,
        0.004873286932706833,
        0.008721192367374897,
        0.084213487803936,
        -0.025180930271744728,
        0.03814985975623131,
        -0.01773357018828392,
        -0.0018417717656120658,
        0.008253300562500954,
        -0.06707976758480072,
        -0.03530573472380638,
        0.049115147441625595,
        -0.10177052021026611,
        0.07845785468816757,
        -0.06382259726524353,
        -0.11982686817646027,
        0.028318749740719795,
        -0.0009176175226457417,
        0.05397485941648483,
        -0.06322236359119415,
        0.07872268557548523,
        0.009415844455361366,
        -0.06557977199554443,
        0.023979483172297478,
        0.01804637350142002,
        -0.042108628898859024,
        0.07185948640108109,
        0.001435164245776832,
        -0.07549157738685608,
        0.02044963464140892,
        0.042548928409814835,
        0.09680059552192688,
        -0.044464677572250366,
        -0.10295753180980682,
        0.010034564882516861,
        0.02301434986293316,
        0.04869852215051651,
        0.11902791261672974,
        -0.06289801001548767,
        -0.0778852179646492,
        0.05588187277317047,
        -0.03298782557249069,
        -0.12133115530014038,
        -0.03146433085203171,
        -0.03988715633749962,
        0.008993197232484818,
        -0.08735391497612,
        -0.0038302361499518156,
        -0.07796403020620346,
        -0.02459263801574707,
        0.016731102019548416,
        -0.014142765663564205,
        0.007658788003027439,
        -0.04509617015719414,
        0.018008802086114883,
        0.005974210798740387,
        0.032266005873680115,
        -0.03686998784542084,
        0.08438152819871902,
        -0.09680945426225662,
        0.004832173231989145,
        -0.07827476412057877,
        -0.006864175666123629,
        0.12111540138721466,
        -0.006577317137271166,
        0.018435344099998474,
        -0.063702292740345,
        0.07224830985069275,
        -0.0703665092587471,
        0.009312106296420097,
        -0.07186476141214371,
        -0.04393009468913078,
        -0.03187471255660057,
        0.005171654280275106,
        -0.005196867510676384,
        -0.05374450609087944,
        -0.02803380973637104,
        -0.04907035082578659,
        0.016734259203076363,
        0.002866248367354274,
        0.0028982965741306543,
        0.014478365890681744,
        0.041325971484184265,
        -0.055527426302433014,
        0.04302551597356796,
        -0.049604251980781555,
        -0.044586602598428726,
        0.002754303626716137,
        0.03000199794769287,
        0.07328573614358902,
        0.04604335501790047,
        0.06590908765792847,
        -0.010929202660918236,
        0.10612424463033676,
        -0.011956487782299519,
        0.06903016567230225,
        -0.02531457133591175,
        0.011626830324530602,
        0.08186119794845581,
        0.017161760479211807,
        -0.09531193971633911,
        -0.038312286138534546,
        0.011907794512808323,
        0.07666254788637161,
        -0.04564494639635086,
        -0.08465787768363953,
        -0.030110038816928864,
        0.08226006478071213,
        0.010248910635709763,
        -0.04036064073443413,
        -0.030697273090481758,
        -0.037844352424144745,
        0.03185505419969559,
        -0.05108396336436272,
        0.07708609104156494,
        0.08921422809362411,
        0.12476346641778946,
        0.04193487390875816,
        -0.039058249443769455,
        0.06568555533885956,
        0.056641995906829834,
        -0.01970106177031994,
        0.1120949238538742,
        5.855117157636659e-33,
        -0.010089383460581303,
        -0.05845380574464798,
        0.022035129368305206,
        0.05618557333946228,
        0.03060026466846466,
        -0.04095756635069847,
        0.008756691589951515,
        -0.0173420999199152,
        -0.1547546237707138,
        0.06472361087799072,
        -0.10636163502931595,
        0.0613737590610981,
        -0.08814877271652222,
        -0.05613593012094498,
        -0.015346626751124859,
        -0.08132527768611908,
        0.052844561636447906,
        0.007314925082027912,
        0.002346557565033436,
        0.00046673446195200086,
        0.03150928020477295,
        0.0010871910490095615,
        -0.048048123717308044,
        0.04387417808175087,
        -0.030240243300795555,
        -0.01529186312109232,
        0.013062932528555393,
        -0.0470128208398819,
        -0.04016972333192825,
        -0.022221511229872704,
        0.09946440160274506,
        -0.011745976284146309,
        0.0075510842725634575,
        0.00898646842688322,
        0.016260670498013496,
        -0.014651454985141754,
        0.02028004266321659,
        0.038010384887456894,
        -0.12812292575836182,
        -0.05620485544204712,
        0.05567891523241997,
        0.01772225648164749,
        -0.04366738349199295,
        -0.005837402772158384,
        -0.03168729692697525,
        -0.00859255250543356,
        -0.02182270586490631,
        -0.008398041129112244,
        0.023221664130687714,
        -0.03340901434421539,
        -0.044217318296432495,
        0.06611835211515427,
        0.03355390205979347,
        0.010301589034497738,
        0.05416027456521988,
        0.0034458318259567022,
        -0.023372340947389603,
        0.02596202865242958,
        0.056055840104818344,
        -0.018238814547657967,
        -0.0003854699607472867,
        0.011098163202404976,
        -0.02107040025293827,
        -0.0032382539939135313,
        0.067299023270607,
        -0.046613410115242004,
        0.06589962542057037,
        -0.004832892678678036,
        0.06125441938638687,
        0.06857641786336899,
        -0.014476988464593887,
        0.018964577466249466,
        0.07250578701496124,
        -0.014053065329790115,
        0.09324295073747635,
        -0.04146061837673187,
        -0.03477131947875023,
        0.0019990582950413227,
        -0.05174820125102997,
        -0.08870210498571396,
        0.008522221818566322,
        -0.10806137323379517,
        -0.048820387572050095,
        -0.06616121530532837,
        0.09172499179840088,
        -0.021114332601428032,
        -0.019562402740120888,
        -0.06743881106376648,
        0.042373914271593094,
        -0.005637290887534618,
        0.004706607200205326,
        -0.03810851275920868,
        0.007460688706487417,
        -0.09143684804439545,
        -0.0778975784778595,
        -5.398696945783351e-33,
        0.09334993362426758,
        0.0044052512384951115,
        -0.006078658625483513,
        0.023089662194252014,
        -0.0028555444441735744,
        0.010227932594716549,
        -0.003381329355761409,
        0.047302886843681335,
        -0.047732822597026825,
        0.05427363142371178,
        -0.04437248781323433,
        -0.008497770875692368,
        0.09403679519891739,
        0.016732098534703255,
        0.03105650655925274,
        0.06586070358753204,
        0.0005600357544608414,
        -0.030631020665168762,
        -0.011898675002157688,
        -0.007071101106703281,
        -0.03657098487019539,
        0.07465100288391113,
        0.035905253142118454,
        0.12047149986028671,
        -0.026886677369475365,
        0.06145352125167847,
        0.028156228363513947,
        0.00336060905829072,
        -0.08947580307722092,
        -0.05601866915822029,
        -0.02229836955666542,
        -0.04854723438620567,
        -0.06313908845186234,
        0.07982254773378372,
        -0.06629526615142822,
        -0.0824490413069725,
        0.04046186804771423,
        0.03875764459371567,
        -0.05634342133998871,
        0.04565860331058502,
        -0.02978351339697838,
        -0.002033099764958024,
        -0.07210460305213928,
        -0.005043599288910627,
        -0.002768464619293809,
        -0.022531727328896523,
        0.03081781044602394,
        0.09553594142198563,
        -0.011781586334109306,
        -0.08730760961771011,
        0.009504874236881733,
        -0.025579461827874184,
        -0.017309555783867836,
        -0.07812824845314026,
        0.03953774645924568,
        -0.00899327453225851,
        0.019521662965416908,
        -0.06553864479064941,
        -0.06052874028682709,
        -0.010892965830862522,
        0.04975774139165878,
        -0.0469651073217392,
        -0.01845707930624485,
        -0.08085920661687851,
        0.05897991359233856,
        0.01053853239864111,
        -0.0840296819806099,
        0.01299935020506382,
        0.0007282145088538527,
        -0.02649199590086937,
        -0.07248329371213913,
        0.030539587140083313,
        0.10867473483085632,
        -0.02361590974032879,
        0.0577593594789505,
        0.022084930911660194,
        0.0040130517445504665,
        -0.005680285394191742,
        0.06271086633205414,
        -0.011356043629348278,
        -0.08714127540588379,
        -0.0009494406403973699,
        0.04675130173563957,
        -0.02644578367471695,
        -0.060157593339681625,
        -0.0322178490459919,
        -0.0025733064394444227,
        0.0477893128991127,
        0.05598240718245506,
        -0.06435717642307281,
        -0.006409802008420229,
        -0.021799536421895027,
        0.018231907859444618,
        0.02175271324813366,
        0.08319733291864395,
        -5.950487036443519e-8,
        -0.05667567253112793,
        -0.010307826101779938,
        -0.09004639089107513,
        0.030360836535692215,
        0.02898077480494976,
        -0.008755339309573174,
        0.03737663850188255,
        0.10051829367876053,
        0.015027818270027637,
        -0.0013908186228945851,
        0.01952715963125229,
        0.031312245875597,
        -0.05001145973801613,
        0.038444116711616516,
        0.005873304326087236,
        -0.045463286340236664,
        -0.00650210352614522,
        0.08511002361774445,
        -0.026962650939822197,
        -0.05061323940753937,
        -0.000018671831639949232,
        0.06599094718694687,
        0.09894707053899765,
        0.036008939146995544,
        0.027177905663847923,
        -0.06751217693090439,
        0.02611279860138893,
        0.00005141992005519569,
        0.06152063608169556,
        -0.010886434465646744,
        -0.03396129980683327,
        -0.007186240050941706,
        0.041760265827178955,
        -0.04768788814544678,
        -0.022438116371631622,
        0.010459326207637787,
        0.03401106223464012,
        0.02836267091333866,
        0.012475423514842987,
        0.013399036601185799,
        0.04046871140599251,
        0.07366617769002914,
        0.024972764775156975,
        0.01864214800298214,
        -0.021288983523845673,
        -0.0348573736846447,
        -0.030764956027269363,
        0.029479388147592545,
        0.10303113609552383,
        -0.03869084268808365,
        -0.0015660639619454741,
        -0.07242589443922043,
        -0.054695021361112595,
        0.02617536298930645,
        -0.042858775705099106,
        -0.027458900585770607,
        -0.007862581871449947,
        0.017629539594054222,
        -0.003377340966835618,
        -0.03338916599750519,
        0.05336971953511238,
        0.01941228099167347,
        0.024834852665662766,
        0.017518695443868637
      ]
    },
    {
      "id": "8e75253e",
      "filePath": "05-rag-codebase/src/index.ts",
      "content": "async function buildIndex(rootDir: string): Promise<void> {\n\tconsole.log(`\\n=== 构建向量索引 ===`);\n\tconsole.log(`根目录: ${rootDir}`);\n\n\t// 1. 加载文件\n\tconst files = await loadFiles(rootDir);\n\tif (files.length === 0) {\n\t\tconsole.log('未找到任何文件，请检查目录路径');\n\t\treturn;\n\t}\n\n\t// 2. 切分代码\n\tconst chunks = splitFiles(files);\n\tif (chunks.length === 0) {\n\t\tconsole.log('未切分出任何代码块');\n\t\treturn;\n\t}\n\n\t// 3. 生成 embeddings\n\tconst indexedChunks = await embedChunks(chunks);\n\n\t// 4. 保存索引\n\tsaveStore(indexedChunks, STORE_PATH);\n\n\tconsole.log(`\\n=== 索引构建完成 ===`);\n}\n\n/**\n * 查询代码库\n */",
      "startLine": 25,
      "endLine": 54,
      "type": "function",
      "name": "buildIndex",
      "embedding": [
        -0.09505145996809006,
        0.045117154717445374,
        0.030496113002300262,
        0.04297316446900368,
        0.031138669699430466,
        -0.028065668419003487,
        -0.016372784972190857,
        0.04562053084373474,
        0.06139883026480675,
        0.01593039184808731,
        0.026424426585435867,
        -0.008920173160731792,
        -0.0005443999543786049,
        -0.06943739950656891,
        -0.03329380974173546,
        0.005365197546780109,
        -0.154307559132576,
        0.06836292147636414,
        -0.07509026676416397,
        -0.07202327996492386,
        0.08003521710634232,
        -0.06941444426774979,
        0.022132910788059235,
        -0.05860603600740433,
        0.08700485527515411,
        0.015842927619814873,
        -0.06973584741353989,
        -0.053031373769044876,
        0.08251956105232239,
        0.003374328138306737,
        0.0509367398917675,
        0.01922343671321869,
        -0.02195090800523758,
        0.009535851888358593,
        0.011274299584329128,
        0.1134219616651535,
        -0.04707563668489456,
        -0.07695836573839188,
        -0.0345165953040123,
        0.0021152584813535213,
        0.0319175086915493,
        0.1463475078344345,
        -0.043562497943639755,
        -0.03858741745352745,
        0.033655691891908646,
        -0.04933112859725952,
        -0.04295409470796585,
        -0.0323181226849556,
        -0.09485761821269989,
        0.0009579972829669714,
        -0.0987415537238121,
        0.027139533311128616,
        -0.12980027496814728,
        -0.005521009676158428,
        0.053519394248723984,
        -0.01305693294852972,
        -0.017499098554253578,
        -0.019794661551713943,
        0.01221825834363699,
        0.056791625916957855,
        0.046835362911224365,
        -0.024976663291454315,
        0.04436587542295456,
        -0.09804819524288177,
        0.07090387493371964,
        0.01311391033232212,
        0.04528249800205231,
        0.07005587220191956,
        0.014349476434290409,
        0.03642120957374573,
        -0.06616945564746857,
        0.07084966450929642,
        -0.06956791877746582,
        0.04172990843653679,
        -0.06144702434539795,
        -0.004713695961982012,
        0.028682703152298927,
        0.008961058221757412,
        -0.03010515123605728,
        -0.07904982566833496,
        -0.03244880214333534,
        -0.029824910685420036,
        0.13746681809425354,
        -0.06524423509836197,
        -0.029510298743844032,
        0.061668261885643005,
        0.022877616807818413,
        -0.013500106520950794,
        -0.008853362873196602,
        -0.04522038996219635,
        0.01703985035419464,
        0.0012625223025679588,
        -0.023085130378603935,
        0.08653900027275085,
        0.07913602143526077,
        0.04562366008758545,
        0.006648427341133356,
        0.13776011765003204,
        -0.00729620736092329,
        0.016482282429933548,
        -0.04685629531741142,
        0.016967568546533585,
        0.0392005518078804,
        -0.05450689047574997,
        -0.09632129967212677,
        -0.04802306368947029,
        0.014472312293946743,
        -0.04198971763253212,
        -0.03787441924214363,
        -0.043019797652959824,
        -0.017101623117923737,
        0.027849968522787094,
        -0.024934738874435425,
        -0.011104781180620193,
        -0.008337527513504028,
        -0.02875964716076851,
        0.01991075649857521,
        -0.0803501307964325,
        0.05392461270093918,
        0.1255684643983841,
        0.11951275914907455,
        0.0604676678776741,
        0.0007667036261409521,
        0.029498150572180748,
        -0.005135818384587765,
        -0.050808414816856384,
        0.12805627286434174,
        5.183527847653116e-33,
        0.009462709538638592,
        -0.001653530984185636,
        0.010395469143986702,
        0.04258350655436516,
        0.035244204103946686,
        -0.0724492073059082,
        0.04889174923300743,
        0.01490334328263998,
        -0.1520567387342453,
        0.03689529001712799,
        -0.08852589130401611,
        0.01890559308230877,
        -0.06795841455459595,
        -0.012631339952349663,
        -0.021315420046448708,
        -0.07280352711677551,
        0.061607904732227325,
        -0.03384663164615631,
        0.03908083960413933,
        0.017609208822250366,
        -0.010134158656001091,
        -0.009093545377254486,
        0.013467307202517986,
        -0.025895938277244568,
        -0.04449569061398506,
        -0.048663053661584854,
        0.035775382071733475,
        -0.06094030663371086,
        -0.00895555131137371,
        -0.005188521463423967,
        0.06520206481218338,
        -0.0376368872821331,
        -0.011543515138328075,
        0.016791613772511482,
        0.042848456650972366,
        0.0127003388479352,
        -0.031927015632390976,
        0.042184192687273026,
        -0.12269466370344162,
        0.032348912209272385,
        0.05299333110451698,
        0.01651819981634617,
        -0.02086232230067253,
        0.014883780851960182,
        -0.029218755662441254,
        -0.004631057847291231,
        -0.07256409525871277,
        -0.02482130192220211,
        0.035534605383872986,
        -0.0020428041461855173,
        -0.03274375945329666,
        0.12533125281333923,
        0.011658593080937862,
        0.016365356743335724,
        0.12699635326862335,
        -0.009232292883098125,
        -0.015595280565321445,
        -0.046809401363134384,
        0.013981102965772152,
        0.013433537445962429,
        0.031930603086948395,
        -0.06614449620246887,
        -0.007963470183312893,
        0.086200051009655,
        -0.018060913309454918,
        -0.03130938485264778,
        0.014316719956696033,
        0.0038949258159846067,
        0.032623566687107086,
        -0.01309505756944418,
        -0.05226191505789757,
        -0.051116928458213806,
        0.05574263632297516,
        -0.027786878868937492,
        -0.0007025038939900696,
        0.003040222218260169,
        -0.11247934401035309,
        -0.00911012850701809,
        -0.048449039459228516,
        -0.11563719063997269,
        -0.034281618893146515,
        -0.04200204089283943,
        0.0036969154607504606,
        -0.03925824910402298,
        0.0394161194562912,
        -0.006771798245608807,
        -0.024961329996585846,
        -0.04692980647087097,
        0.03757679834961891,
        -0.06482440233230591,
        -0.03741399198770523,
        -0.038178130984306335,
        -0.010032900609076023,
        -0.1256655752658844,
        0.0026826246175915003,
        -6.351379648485135e-33,
        0.11992883682250977,
        0.004618783015757799,
        -0.03869268670678139,
        0.007525255437940359,
        -0.0382230207324028,
        0.012247440405189991,
        0.04328291118144989,
        0.02082047611474991,
        -0.012766238301992416,
        0.03417652100324631,
        -0.04899074137210846,
        0.027719642966985703,
        0.045091524720191956,
        0.005818677134811878,
        -0.012002341449260712,
        0.01760854758322239,
        0.050938066095113754,
        -0.019242430105805397,
        0.04477569833397865,
        0.012639853172004223,
        0.003958233166486025,
        -0.00429902458563447,
        0.012884501367807388,
        0.09479469060897827,
        -0.029632633551955223,
        0.08631470799446106,
        0.058529164642095566,
        -0.04217585548758507,
        -0.05757378414273262,
        -0.048167884349823,
        0.0014494959032163024,
        -0.054519884288311005,
        -0.07712404429912567,
        0.01433042623102665,
        -0.04972051829099655,
        -0.06777755171060562,
        0.01977645233273506,
        0.005197208374738693,
        -0.0648777112364769,
        -0.024119095876812935,
        0.012022888287901878,
        0.025592997670173645,
        -0.004401522222906351,
        -0.03145316615700722,
        0.02195708453655243,
        -0.08753687143325806,
        -0.012762091122567654,
        0.044832389801740646,
        -0.007225672248750925,
        -0.07879456877708435,
        0.04517555981874466,
        -0.052083373069763184,
        0.007681756280362606,
        -0.08395162969827652,
        0.006035605911165476,
        -0.05909642577171326,
        -0.05688842386007309,
        -0.08656400442123413,
        -0.03759658336639404,
        0.0035164696164429188,
        0.006507122423499823,
        -0.003658859059214592,
        -0.00012149136455263942,
        -0.09767983108758926,
        -0.004200578201562166,
        -0.030290475115180016,
        -0.03951886296272278,
        -0.00480360072106123,
        0.045189857482910156,
        -0.017959052696824074,
        -0.01258927397429943,
        0.007075066212564707,
        0.023801442235708237,
        0.02400040253996849,
        -0.015035047195851803,
        0.013532492332160473,
        -0.0016673862701281905,
        -0.029480095952749252,
        0.09102559834718704,
        0.058787524700164795,
        -0.025850394740700722,
        0.03562235087156296,
        0.0056216176599264145,
        -0.01358273345977068,
        0.013885250315070152,
        0.004738485440611839,
        -0.008898491971194744,
        0.08822783082723618,
        0.02245570719242096,
        -0.04849230870604515,
        -0.022400880232453346,
        0.037780024111270905,
        0.010433475486934185,
        0.05731861665844917,
        0.102375328540802,
        -5.496086075140738e-8,
        -0.06548750400543213,
        0.0009152758866548538,
        -0.10113521665334702,
        -0.012905030511319637,
        -0.036941904574632645,
        -0.0697973445057869,
        -0.020057417452335358,
        0.01188567839562893,
        0.009201457723975182,
        -0.044465571641922,
        0.07190146297216415,
        -0.02871829830110073,
        -0.03655695542693138,
        0.016042428091168404,
        -0.044872380793094635,
        -0.059243205934762955,
        0.03293171152472496,
        0.03563821688294411,
        -0.0009291144669987261,
        -0.014140893705189228,
        -0.03473224490880966,
        0.10871804505586624,
        0.06044375151395798,
        -0.032474350184202194,
        -0.006172566674649715,
        -0.036630455404520035,
        0.040158115327358246,
        0.013001671060919762,
        -0.0023501126561313868,
        0.03853961452841759,
        0.016469672322273254,
        0.024288911372423172,
        0.059011053293943405,
        -0.016698036342859268,
        -0.04208626598119736,
        0.020502140745520592,
        0.1183551624417305,
        -0.0065073915757238865,
        0.03942881152033806,
        0.02065115235745907,
        0.11348161101341248,
        0.009930376894772053,
        0.06838442385196686,
        -0.02159256674349308,
        0.015155468136072159,
        -0.08945063501596451,
        -0.011966196820139885,
        0.015248008072376251,
        0.07840070873498917,
        -0.007114935666322708,
        0.003764689899981022,
        -0.054365236312150955,
        -0.13320086896419525,
        0.08078688383102417,
        0.06079923361539841,
        -0.06812946498394012,
        -0.03826043754816055,
        0.02397744730114937,
        0.01984242908656597,
        0.018591701984405518,
        0.02740563079714775,
        -0.04874599725008011,
        0.0314054898917675,
        -0.005917659495025873
      ]
    },
    {
      "id": "69166c95",
      "filePath": "05-rag-codebase/src/index.ts",
      "content": "async function queryCodebase(question: string): Promise<void> {\n\tconsole.log(`\\n=== 查询代码库 ===`);\n\tconsole.log(`问题: ${question}`);\n\n\t// 1. 加载索引\n\tconst store = loadStore(STORE_PATH);\n\tif (!store) {\n\t\tconsole.log('请先运行 build 命令构建索引');\n\t\treturn;\n\t}\n\n\t// 2. 查询向量化\n\tconsole.log(`\\n[1/4] 生成查询向量...`);\n\tconst queryEmbedding = await embedQuery(question);\n\n\t// 3. 粗筛\n\tconsole.log(`\\n[2/4] 向量检索 Top-${RETRIEVAL_TOP_N}...`);\n\tconst candidates = retrieve(queryEmbedding, store.chunks, RETRIEVAL_TOP_N);\n\n\t// 4. 精排\n\tconsole.log(`\\n[3/4] LLM 精排 Top-${RERANK_TOP_K}...`);\n\tconst topResults = await rerank(question, candidates, RERANK_TOP_K);\n\n\t// 5. 生成回答\n\tconsole.log(`\\n[4/4] 生成回答...`);\n\tconst answer = await generate(question, topResults);\n\n\t// 输出结果\n\tconsole.log(`\\n${'='.repeat(50)}`);\n\tconsole.log(`回答:\\n`);\n\tconsole.log(answer);\n\tconsole.log(`\\n${'='.repeat(50)}`);\n\n\t// 输出引用的代码片段\n\tconsole.log(`\\n引用的代码片段:`);\n\tfor (const result of topResults) {\n\t\tconst { chunk, relevanceScore } = result;\n\t\tconsole.log(`  - ${chunk.filePath}:${chunk.startLine}-${chunk.endLine} (${chunk.name || chunk.type}) [${relevanceScore}/10]`);\n\t}\n}\n\n/**\n * 打印帮助信息\n */",
      "startLine": 55,
      "endLine": 98,
      "type": "function",
      "name": "queryCodebase",
      "embedding": [
        -0.06356821954250336,
        0.058488041162490845,
        0.03037497028708458,
        0.039844024926424026,
        -0.002768062986433506,
        0.033959195017814636,
        0.015856463462114334,
        0.09476684778928757,
        0.05721065402030945,
        0.006457982584834099,
        -0.02053339220583439,
        -0.02346372976899147,
        0.034286439418792725,
        -0.06776083260774612,
        -0.018694501370191574,
        0.03315632417798042,
        -0.14109429717063904,
        0.04395471140742302,
        -0.0904586911201477,
        -0.10062217712402344,
        0.07280237227678299,
        0.0011039561359211802,
        0.03835592791438103,
        -0.004290139302611351,
        0.041570402681827545,
        -0.00994549784809351,
        -0.04434823617339134,
        0.00951438583433628,
        -0.008379634469747543,
        0.020377863198518753,
        0.027809707447886467,
        -0.02982911467552185,
        -0.03508974239230156,
        0.05078856274485588,
        0.009326472878456116,
        0.04076612740755081,
        -0.06892728060483932,
        -0.07126031816005707,
        0.02077375166118145,
        0.001844759681262076,
        0.003995457664132118,
        0.11173512041568756,
        -0.047882080078125,
        -0.09172089397907257,
        0.12447328120470047,
        -0.08216911554336548,
        -0.09073864668607712,
        -0.030896568670868874,
        -0.046097636222839355,
        -0.012089204974472523,
        -0.07238848507404327,
        -0.024660319089889526,
        -0.08511295914649963,
        0.0034303823485970497,
        0.07362216711044312,
        -0.005506768822669983,
        -0.05800631269812584,
        -0.03390120342373848,
        -0.022092780098319054,
        -0.03669280186295509,
        0.015662817284464836,
        -0.1024550125002861,
        0.037047043442726135,
        -0.08740393072366714,
        0.06917296350002289,
        -0.07090301811695099,
        0.026965634897351265,
        0.08335831016302109,
        0.047700125724077225,
        -0.0013056019088253379,
        -0.07668814808130264,
        0.0634375810623169,
        -0.03102686256170273,
        -0.0019957427866756916,
        -0.06374581158161163,
        0.009222202934324741,
        -0.014851545915007591,
        -0.0124494144693017,
        -0.0218272116035223,
        0.001487801200710237,
        -0.038270123302936554,
        -0.06710335612297058,
        0.052571967244148254,
        -0.04742997884750366,
        0.015944601967930794,
        0.030665822327136993,
        0.014871342107653618,
        -0.010988915339112282,
        0.006104518659412861,
        -0.08084694296121597,
        -0.0969848707318306,
        -0.008284029550850391,
        -0.01194461528211832,
        0.05265101045370102,
        0.06450540572404861,
        0.09092765301465988,
        -0.007872985675930977,
        0.05877326801419258,
        0.05724993720650673,
        0.05425339564681053,
        0.011749928817152977,
        0.065774105489254,
        0.02481987699866295,
        -0.06248722970485687,
        -0.07988455891609192,
        0.02581123821437359,
        0.03232291340827942,
        0.014480307698249817,
        -0.022841576486825943,
        -0.0812591016292572,
        -0.024378256872296333,
        0.0377214290201664,
        -0.008456961251795292,
        0.022933943197131157,
        -0.021642711013555527,
        -0.00755636440590024,
        0.07451891899108887,
        -0.07663337141275406,
        0.001736798440106213,
        0.07254479825496674,
        0.13096874952316284,
        0.047026798129081726,
        -0.016956323757767677,
        0.007340388838201761,
        0.050632379949092865,
        -0.05651656910777092,
        0.13792626559734344,
        5.9793224621384346e-33,
        0.017086714506149292,
        -0.0429360568523407,
        0.029155045747756958,
        -0.01235316600650549,
        0.05193420872092247,
        0.009289023466408253,
        0.03241922706365585,
        0.08001711964607239,
        -0.12068215012550354,
        0.04344366490840912,
        -0.10254469513893127,
        0.03530282899737358,
        -0.038428593426942825,
        -0.06698524206876755,
        -0.012484768405556679,
        -0.04876008257269859,
        0.027931684628129005,
        -0.030556535348296165,
        -0.0115067632868886,
        0.06717400252819061,
        0.010066961869597435,
        0.0013601420214399695,
        -0.006345898844301701,
        0.02852158434689045,
        0.003822800936177373,
        -0.039623141288757324,
        0.04117252305150032,
        -0.009601744823157787,
        -0.05320083722472191,
        -0.04651392251253128,
        0.04594695568084717,
        -0.05461810156702995,
        -0.022097768262028694,
        -0.04119058698415756,
        0.06036213040351868,
        0.013745142146945,
        0.03873208165168762,
        0.042902953922748566,
        -0.14319077134132385,
        -0.02286011166870594,
        0.041735224425792694,
        0.01929263398051262,
        0.016320988535881042,
        -0.005231817252933979,
        -0.02873525209724903,
        -0.03166082501411438,
        -0.07999524474143982,
        -0.03821195289492607,
        0.027887044474482536,
        -0.04751661419868469,
        -0.051593441516160965,
        0.09298116713762283,
        -0.0007434870931319892,
        -0.01689167693257332,
        0.09569118916988373,
        0.009903364814817905,
        -0.005331587977707386,
        0.0014547085156664252,
        0.0019492211285978556,
        0.037252020090818405,
        -0.005803500302135944,
        -0.0694068893790245,
        0.0198693685233593,
        -0.0014484392013400793,
        0.05401017144322395,
        -0.0019726587925106287,
        0.02589363232254982,
        0.052367717027664185,
        0.08416599780321121,
        0.0681779757142067,
        0.0196792334318161,
        -0.031069831922650337,
        0.08020122349262238,
        -0.0254009161144495,
        0.05574885755777359,
        -0.020930832251906395,
        -0.11175847053527832,
        -0.024161463603377342,
        -0.02478012815117836,
        -0.07308876514434814,
        0.007803382817655802,
        -0.10530231893062592,
        -0.024105025455355644,
        0.006528415717184544,
        0.0413796529173851,
        0.05822055786848068,
        0.031216368079185486,
        -0.10538300126791,
        0.018176168203353882,
        -0.016039904206991196,
        -0.03619303181767464,
        0.03990636393427849,
        0.023561380803585052,
        -0.10509087890386581,
        0.02643696404993534,
        -5.306088194747709e-33,
        0.10192868113517761,
        0.011005842126905918,
        -0.04164113104343414,
        -0.0008857397479005158,
        0.020355243235826492,
        0.002364210784435272,
        0.016937151551246643,
        0.015648506581783295,
        -0.06606119871139526,
        0.016660505905747414,
        -0.04107246920466423,
        -0.045767489820718765,
        0.053950805217027664,
        0.0014162887819111347,
        0.05877998098731041,
        0.08425488322973251,
        -0.03772953897714615,
        -0.060922302305698395,
        0.0006705468404106796,
        0.008112677372992039,
        0.010160758160054684,
        0.06021354719996452,
        -0.015187127515673637,
        0.057833462953567505,
        -0.05595901980996132,
        0.058065447956323624,
        0.04258204251527786,
        0.023680418729782104,
        -0.054803330451250076,
        -0.04904218018054962,
        -0.02600623108446598,
        -0.07707372307777405,
        -0.0921398177742958,
        0.0435505285859108,
        -0.04534783959388733,
        -0.0659523531794548,
        0.06087144464254379,
        -0.00905818585306406,
        -0.057790301740169525,
        0.030534176155924797,
        -0.00031505097285844386,
        -0.001961725763976574,
        -0.02541942521929741,
        -0.022297723218798637,
        0.03477662056684494,
        -0.06255090236663818,
        0.0016174636548385024,
        0.0973721593618393,
        0.04168286174535751,
        -0.08416911214590073,
        0.026271289214491844,
        -0.06446917355060577,
        -0.08923231065273285,
        0.008213505148887634,
        0.031575459986925125,
        -0.01716531068086624,
        -0.047085002064704895,
        -0.07563126087188721,
        -0.04308295622467995,
        -0.012758415192365646,
        0.008215457201004028,
        0.006903681438416243,
        0.05364878475666046,
        -0.06662781536579132,
        0.05941123515367508,
        -0.06821593642234802,
        -0.019202575087547302,
        -0.020554319024086,
        -0.001289379084482789,
        0.01766711287200451,
        -0.08134935051202774,
        -0.00200603436678648,
        0.10542194545269012,
        0.015702012926340103,
        0.04899980500340462,
        0.05999162793159485,
        -0.032412830740213394,
        -0.00844794511795044,
        0.0852218046784401,
        0.024692188948392868,
        -0.06586311757564545,
        0.021827198565006256,
        0.017549557611346245,
        0.031154710799455643,
        -0.018364178016781807,
        -0.03645044565200806,
        0.03157671540975571,
        0.07294440269470215,
        -0.019185952842235565,
        -0.07519178092479706,
        0.016798190772533417,
        0.008123748004436493,
        -0.018155500292778015,
        -0.022465655580163002,
        0.06080308556556702,
        -5.2200597622231726e-8,
        -0.09813689440488815,
        -0.01877800188958645,
        -0.11814305931329727,
        0.02206241711974144,
        0.01153809204697609,
        0.01297799963504076,
        0.03411258012056351,
        0.046914756298065186,
        -0.02100791409611702,
        -0.0307653546333313,
        0.02729499340057373,
        -0.005709067452698946,
        -0.02536674216389656,
        0.020675411447882652,
        -0.0383828729391098,
        -0.04120245575904846,
        0.004182132892310619,
        0.0122568029910326,
        -0.01865699514746666,
        -0.01762433722615242,
        0.006387053523212671,
        0.053264129906892776,
        0.03109252266585827,
        -0.029905075207352638,
        0.002037273719906807,
        -0.005813141819089651,
        0.03162713348865509,
        0.08520422875881195,
        -0.009810869581997395,
        0.024429742246866226,
        0.019293446093797684,
        0.010672260075807571,
        0.07220522314310074,
        -0.04224693402647972,
        0.036702413111925125,
        -0.03288201987743378,
        0.09340096265077591,
        -0.022048309445381165,
        -0.04718311131000519,
        0.0505933053791523,
        0.165204256772995,
        0.011336621828377247,
        0.04840411618351936,
        0.004836817737668753,
        0.011862408369779587,
        -0.12612031400203705,
        0.03719339892268181,
        0.025428345426917076,
        0.1134893149137497,
        -0.007557090371847153,
        -0.006681348662823439,
        -0.09035032242536545,
        -0.058600783348083496,
        -0.015256348997354507,
        0.005271309521049261,
        -0.05674033612012863,
        0.0351436547935009,
        -0.004695850890129805,
        -0.01771528646349907,
        0.033115204423666,
        0.09247483313083649,
        -0.05832323431968689,
        0.02373410388827324,
        0.03531628102064133
      ]
    },
    {
      "id": "f3f5c0c9",
      "filePath": "05-rag-codebase/src/index.ts",
      "content": "function printHelp(): void {\n\tconsole.log(`\nRAG Codebase Q&A\n\n用法:\n  npm run build-index [rootDir]   构建向量索引\n  npm run query -- \"问题\"         查询代码库\n\n示例:\n  npm run build-index             对 packages 目录建立索引\n  npm run build-index /path/to    对指定目录建立索引\n  npm run query -- \"这个项目的架构是什么？\"\n`);\n}\n\n// 主入口",
      "startLine": 99,
      "endLine": 114,
      "type": "function",
      "name": "printHelp",
      "embedding": [
        -0.052302293479442596,
        0.07362183928489685,
        -0.03718949109315872,
        0.0675697848200798,
        0.04169392213225365,
        -0.008623150177299976,
        0.026198655366897583,
        0.03119453229010105,
        -0.03691687434911728,
        0.03890948370099068,
        0.06316565722227097,
        -0.013266821391880512,
        -0.004357301164418459,
        -0.09686208516359329,
        -0.01636408641934395,
        0.03979979828000069,
        -0.08238066732883453,
        0.015989011153578758,
        0.06689302623271942,
        -0.06478842347860336,
        -0.007814592681825161,
        0.04874994978308678,
        0.01904015801846981,
        -0.007295739836990833,
        0.012406455352902412,
        0.028208540752530098,
        0.01325337216258049,
        0.05737709999084473,
        0.04607531055808067,
        0.04663321375846863,
        -0.018315475434064865,
        0.06514143198728561,
        0.029169339686632156,
        0.03873218968510628,
        0.07321256399154663,
        0.10947374999523163,
        -0.014383711852133274,
        -0.09974797070026398,
        -0.004535339307039976,
        -0.020645340904593468,
        0.04304913431406021,
        0.09309612214565277,
        -0.056099388748407364,
        -0.09898659586906433,
        -0.0033750806469470263,
        -0.039087969809770584,
        -0.14439523220062256,
        -0.014617986045777798,
        -0.04347994551062584,
        -0.04842216148972511,
        -0.10714243352413177,
        0.026676611974835396,
        -0.07223769277334213,
        -0.13698957860469818,
        0.09967512637376785,
        -0.0006940545281395316,
        0.0004208275058772415,
        0.007030121516436338,
        0.008894070982933044,
        0.015147918835282326,
        0.021300220862030983,
        0.0287980567663908,
        -0.005852639675140381,
        -0.04716799035668373,
        0.09200912714004517,
        0.012556658126413822,
        0.026661332696676254,
        0.05375685170292854,
        -0.03970711678266525,
        0.003182779997587204,
        -0.050124600529670715,
        -0.01682969182729721,
        -0.057186953723430634,
        -0.0022371408995240927,
        -0.04662744700908661,
        -0.023314623162150383,
        -0.022485030815005302,
        -0.0024908604100346565,
        -0.0027897681575268507,
        -0.0172059778124094,
        -0.042907215654850006,
        -0.022705355659127235,
        0.06485167890787125,
        0.08644169569015503,
        -0.027818892151117325,
        0.07178457826375961,
        0.012644833885133266,
        -0.062141623347997665,
        0.0630655586719513,
        -0.022383688017725945,
        0.0054799034260213375,
        -0.05145663768053055,
        -0.0588301420211792,
        0.01659206487238407,
        -0.02858411893248558,
        0.05272238701581955,
        0.03832245245575905,
        0.07935496419668198,
        -0.021302204579114914,
        0.04452112689614296,
        -0.07241782546043396,
        -0.02190120331943035,
        0.039254020899534225,
        -0.012735528871417046,
        -0.08263784646987915,
        0.037742454558610916,
        -0.020505908876657486,
        -0.06748777627944946,
        0.045565277338027954,
        -0.023234430700540543,
        -0.03003871813416481,
        0.05068900063633919,
        -0.03185610845685005,
        -0.08621756732463837,
        -0.015443767420947552,
        -0.03555385768413544,
        0.047263916581869125,
        -0.08511215448379517,
        0.016849884763360023,
        0.10334842652082443,
        0.08091016858816147,
        0.05275752395391464,
        -0.06826832890510559,
        0.055505674332380295,
        -0.03366882726550102,
        -0.03305644541978836,
        0.11099269986152649,
        -2.2217629342388346e-33,
        0.03139905259013176,
        -0.03729511424899101,
        0.029172200709581375,
        0.0010834644781425595,
        0.062428832054138184,
        -0.031452544033527374,
        0.03825381398200989,
        -0.04796387627720833,
        -0.086310476064682,
        0.08418041467666626,
        -0.05631687864661217,
        -0.014500295743346214,
        -0.05135481059551239,
        -0.02770286798477173,
        0.005803044885396957,
        -0.03666374832391739,
        0.0011524136643856764,
        0.006851164158433676,
        0.004277478437870741,
        0.05512258782982826,
        -0.03102361597120762,
        -0.02688872441649437,
        0.02686428837478161,
        0.019376803189516068,
        0.019009657204151154,
        0.05101725831627846,
        0.02493169903755188,
        -0.03439595550298691,
        0.003044622950255871,
        0.01599304936826229,
        0.084672711789608,
        0.05384645611047745,
        -0.03622714430093765,
        -0.05593132600188255,
        -0.013620130717754364,
        -0.00882915873080492,
        -0.04841575399041176,
        0.03638443350791931,
        -0.14786602556705475,
        0.04177406430244446,
        -0.046327367424964905,
        0.009663807228207588,
        -0.027288148179650307,
        0.004190503619611263,
        0.028940657153725624,
        -0.004123996943235397,
        -0.07752709835767746,
        -0.014459963887929916,
        0.11714088916778564,
        0.0329049788415432,
        -0.06150069087743759,
        0.08667053282260895,
        0.02264466881752014,
        0.0826474279165268,
        0.10905971378087997,
        -0.02488134056329727,
        0.02891607955098152,
        -0.042294930666685104,
        -0.012755374424159527,
        0.011164132505655289,
        0.0630887895822525,
        -0.043000008910894394,
        -0.015670232474803925,
        0.05641524866223335,
        0.03378056734800339,
        0.007195568177849054,
        0.0036174755077809095,
        -0.024127040058374405,
        0.1111370250582695,
        0.008244439028203487,
        0.013533524237573147,
        -0.07784919440746307,
        0.02336856722831726,
        0.054994262754917145,
        0.008749437518417835,
        0.024739155545830727,
        -0.04524415358901024,
        0.025127913802862167,
        -0.02219715155661106,
        -0.10599419474601746,
        0.006302261259406805,
        -0.06361439824104309,
        -0.015031074173748493,
        -0.08820882439613342,
        0.09832204133272171,
        -0.04967747628688812,
        -0.06402435153722763,
        -0.0295210350304842,
        0.0043966383673250675,
        -0.029017990455031395,
        -0.05687098205089569,
        -0.0313769094645977,
        -0.04512845724821091,
        -0.07449663430452347,
        -0.0710642859339714,
        -3.0034729223493946e-33,
        0.07929620891809464,
        0.007446631323546171,
        -0.10433011502027512,
        -0.034382615238428116,
        -0.13019639253616333,
        -0.08052040636539459,
        0.05885776877403259,
        -0.04684009030461311,
        -0.003907757345587015,
        0.1508634090423584,
        -0.008165574632585049,
        0.026520846411585808,
        0.0641060471534729,
        0.04950637370347977,
        0.043030139058828354,
        0.09667669981718063,
        0.020910276100039482,
        -0.00010688543261494488,
        -0.00884209107607603,
        0.020414184778928757,
        -0.010126927867531776,
        0.033089425414800644,
        0.028222499415278435,
        0.0576096773147583,
        -0.05331680178642273,
        0.006503998767584562,
        0.08699814975261688,
        -0.01710474118590355,
        -0.01699848100543022,
        -0.06814310699701309,
        0.014068471267819405,
        0.001789212110452354,
        -0.05134653300046921,
        0.05400332808494568,
        -0.007148565258830786,
        -0.02744298428297043,
        -0.013791828416287899,
        -0.028524303808808327,
        -0.04648629203438759,
        0.01786593161523342,
        0.025772256776690483,
        0.029548734426498413,
        -0.03494834527373314,
        -0.004046977497637272,
        -0.018873361870646477,
        -0.06416726857423782,
        -0.019333336502313614,
        -0.03512248024344444,
        0.007230912800878286,
        -0.13234812021255493,
        0.039031125605106354,
        -0.0391620434820652,
        0.07952255755662918,
        -0.07427128404378891,
        -0.08472146093845367,
        -0.01813684217631817,
        -0.05881169065833092,
        0.01729392260313034,
        -0.04478026553988457,
        0.020233280956745148,
        0.10703543573617935,
        0.010935196653008461,
        -0.06576889008283615,
        -0.1072271540760994,
        -0.041435644030570984,
        -0.030020972713828087,
        -0.08486341685056686,
        -0.028982488438487053,
        -0.009940102696418762,
        -0.059620555490255356,
        -0.05942271277308464,
        -0.04154223948717117,
        0.05296366289258003,
        0.04113416001200676,
        -0.1069551482796669,
        0.05237946659326553,
        -0.024276336655020714,
        0.02706826850771904,
        0.04119265452027321,
        0.013461031951010227,
        0.03711565583944321,
        -0.021571101620793343,
        0.046727124601602554,
        0.030253957957029343,
        -0.0871945172548294,
        -0.00863255187869072,
        -0.03829694911837578,
        0.01980961672961712,
        0.013210782781243324,
        -0.04486888647079468,
        0.03172897547483444,
        0.0003208279958926141,
        -0.019926128908991814,
        0.01288399938493967,
        0.05598883330821991,
        -4.811739984234009e-8,
        -0.012178432196378708,
        -0.05818258970975876,
        -0.11127735674381256,
        -0.07111486047506332,
        0.05281141400337219,
        -0.042006734758615494,
        -0.0001968944416148588,
        -0.018062792718410492,
        0.006450621876865625,
        0.0457494743168354,
        0.000010493727131688502,
        0.005670339800417423,
        -0.051932815462350845,
        0.03612961620092392,
        0.015386448241770267,
        -0.019164424389600754,
        -0.06995538622140884,
        0.04879186674952507,
        -0.035955894738435745,
        -0.12586085498332977,
        -0.06969243288040161,
        0.06187872961163521,
        0.049902379512786865,
        -0.030714191496372223,
        -0.05333045497536659,
        -0.07403721660375595,
        0.025307457894086838,
        -0.0024128141812980175,
        0.024213654920458794,
        0.012005401775240898,
        0.014477342367172241,
        0.03461787477135658,
        -0.0027075367979705334,
        -0.05280148610472679,
        0.014493891969323158,
        0.017564313486218452,
        0.0646752119064331,
        -0.037946127355098724,
        0.05753084644675255,
        0.029380399733781815,
        -0.04116234928369522,
        0.03588015213608742,
        0.011814884841442108,
        0.012921539135277271,
        0.0023220444563776255,
        -0.030472982674837112,
        0.023873960599303246,
        0.029000146314501762,
        0.05475310608744621,
        -0.07795236259698868,
        0.018779894337058067,
        -0.009900620207190514,
        -0.10700754821300507,
        0.038596075028181076,
        -0.006341315805912018,
        0.011011088266968727,
        -0.06499572098255157,
        -0.0026220267172902822,
        -0.025772592052817345,
        -0.016488036140799522,
        0.04119044542312622,
        -0.019384194165468216,
        0.06423246115446091,
        -0.005544950719922781
      ]
    },
    {
      "id": "b657f0cb",
      "filePath": "05-rag-codebase/src/index.ts",
      "content": "async function main(): Promise<void> {\n\tconst args = process.argv.slice(2);\n\tconst command = args[0];\n\n\tif (!command || command === 'help' || command === '--help') {\n\t\tprintHelp();\n\t\treturn;\n\t}\n\n\tif (command === 'build') {\n\t\tconst rootDir = args[1] ? resolve(args[1]) : DEFAULT_ROOT;\n\t\tawait buildIndex(rootDir);\n\t\treturn;\n\t}\n\n\tif (command === 'query') {\n\t\tconst question = args[1];\n\t\tif (!question) {\n\t\t\tconsole.log('请提供查询问题');\n\t\t\tprintHelp();\n\t\t\treturn;\n\t\t}\n\t\tawait queryCodebase(question);\n\t\treturn;\n\t}\n\n\tconsole.log(`未知命令: ${command}`);\n\tprintHelp();\n}\n\nmain().catch(console.error);",
      "startLine": 115,
      "endLine": 146,
      "type": "function",
      "name": "main",
      "embedding": [
        -0.11583538353443146,
        0.06169619783759117,
        0.01855652779340744,
        0.0751948207616806,
        0.010502572171390057,
        -0.032899074256420135,
        0.02670218050479889,
        0.05176958441734314,
        -0.007472250144928694,
        0.008072426542639732,
        0.013567163608968258,
        -0.04208095744252205,
        -0.031379710882902145,
        -0.0385969839990139,
        0.006215285509824753,
        0.004821047652512789,
        -0.09125614166259766,
        -0.02995007112622261,
        -0.04161176458001137,
        -0.07811397314071655,
        0.033995721489191055,
        0.03506985306739807,
        0.028661159798502922,
        0.01805083639919758,
        -0.011819231323897839,
        -0.04244333133101463,
        0.006955685559660196,
        -0.04929180443286896,
        0.03726561367511749,
        0.0170294102281332,
        0.031205708160996437,
        0.01740127243101597,
        -0.053786784410476685,
        0.052386168390512466,
        0.0320330485701561,
        0.10914357006549835,
        -0.05806116387248039,
        -0.03831010311841965,
        -0.0005195243284106255,
        -0.03227013722062111,
        -0.006144646089524031,
        0.0776355043053627,
        -0.06421755254268646,
        -0.0654190331697464,
        0.07321155071258545,
        -0.10285250097513199,
        -0.07431963831186295,
        -0.04471667483448982,
        -0.06232718378305435,
        -0.019411271438002586,
        -0.08361133188009262,
        0.026041800156235695,
        -0.07286033034324646,
        -0.09029234945774078,
        0.08588364720344543,
        0.0020133417565375566,
        -0.021319419145584106,
        -0.0018555558053776622,
        0.03475848585367203,
        0.012189021334052086,
        -0.02024107798933983,
        -0.004884081892669201,
        0.017196616157889366,
        -0.04587346687912941,
        0.08685552328824997,
        -0.0029277908615767956,
        0.020811088383197784,
        0.07650120556354523,
        0.014572345651686192,
        0.009574171155691147,
        -0.0721355751156807,
        0.022571133449673653,
        -0.08091959357261658,
        0.011190869845449924,
        -0.04225557669997215,
        0.027338160201907158,
        -0.016234824433922768,
        -0.03389590233564377,
        -0.028157034888863564,
        0.02664000354707241,
        -0.02599765919148922,
        -0.0667453184723854,
        0.01629282720386982,
        0.03393814340233803,
        0.022259285673499107,
        0.12665992975234985,
        0.033455610275268555,
        -0.011192473582923412,
        0.0625423863530159,
        -0.07184109091758728,
        -0.009305605664849281,
        -0.06227784976363182,
        -0.08985309302806854,
        0.0527820885181427,
        0.05734159052371979,
        0.0935080498456955,
        -0.036532364785671234,
        0.024696875363588333,
        -0.03924073278903961,
        0.05238577350974083,
        -0.015547591261565685,
        0.00008535685628885403,
        0.0469694659113884,
        -0.07226856797933578,
        -0.03941347450017929,
        0.006961532402783632,
        0.021226489916443825,
        -0.06658069044351578,
        0.00341232237406075,
        -0.03663257509469986,
        -0.03245927765965462,
        0.042205560952425,
        -0.00830189511179924,
        -0.003879780415445566,
        -0.024430427700281143,
        -0.03961101546883583,
        0.10392982512712479,
        -0.05297737941145897,
        0.030143924057483673,
        0.05757785215973854,
        0.1453842669725418,
        0.10288082808256149,
        -0.010926640592515469,
        0.05637926980853081,
        0.017390992492437363,
        -0.03788735717535019,
        0.09872940182685852,
        9.302672009259544e-33,
        0.06412892788648605,
        -0.05151857063174248,
        0.052929382771253586,
        0.029912156984210014,
        0.029068293049931526,
        0.028772743418812752,
        0.07453227788209915,
        0.0021027126349508762,
        -0.08745002746582031,
        0.06841149926185608,
        0.0011637838324531913,
        -0.05640251561999321,
        -0.01081870123744011,
        -0.12448412925004959,
        -0.02046726457774639,
        -0.008446053601801395,
        0.03554759547114372,
        -0.036905720829963684,
        -0.012032152153551579,
        0.054787762463092804,
        0.012664156034588814,
        -0.012049826793372631,
        -0.018944526091217995,
        0.02074742689728737,
        0.018657879903912544,
        -0.046645186841487885,
        -0.013865123502910137,
        0.02736208401620388,
        0.00038709869841113687,
        -0.014807808212935925,
        0.03081689588725567,
        -0.010606706142425537,
        -0.0932101309299469,
        0.02542971819639206,
        -0.0019234903156757355,
        0.005989322904497385,
        -0.023179244250059128,
        0.024813229218125343,
        -0.15293410420417786,
        -0.024331901222467422,
        -0.0009305859566666186,
        0.001120606204494834,
        -0.030555162578821182,
        0.0269757229834795,
        -0.007582572754472494,
        -0.12048479169607162,
        -0.07835087925195694,
        -0.0607035867869854,
        0.10170955210924149,
        0.005053019616752863,
        -0.03780397027730942,
        0.08303794264793396,
        0.047347892075777054,
        0.000011559880476852413,
        0.15285703539848328,
        -0.02395160123705864,
        0.011811337433755398,
        -0.005752152297645807,
        0.029801832512021065,
        0.03899412602186203,
        0.003451297525316477,
        -0.11670511215925217,
        -0.014255261048674583,
        0.04139254242181778,
        0.056239575147628784,
        -0.03577931970357895,
        -0.018611367791891098,
        -0.034675225615501404,
        0.08193439245223999,
        0.0037091136910021305,
        -0.004036117345094681,
        -0.09718330204486847,
        0.06294489651918411,
        0.0045296791940927505,
        0.004736244212836027,
        0.04755868762731552,
        -0.13930465281009674,
        0.017615877091884613,
        -0.014348524622619152,
        -0.09815287590026855,
        -0.018092676997184753,
        -0.053998466581106186,
        -0.0526055283844471,
        0.07152920216321945,
        0.10936222225427628,
        0.029171939939260483,
        -0.02706288732588291,
        -0.0315706841647625,
        0.01772782765328884,
        0.023827634751796722,
        -0.03592510148882866,
        0.004806489683687687,
        -0.023873712867498398,
        -0.07270483672618866,
        0.012544185854494572,
        -1.0582445198627246e-32,
        0.13845117390155792,
        0.014209302142262459,
        -0.08704955130815506,
        -0.00829748809337616,
        -0.06461813300848007,
        -0.05120106413960457,
        0.09546313434839249,
        -0.07469193637371063,
        -0.023536529392004013,
        0.02818918228149414,
        -0.05968400463461876,
        0.04291103407740593,
        0.05242656543850899,
        0.08857150375843048,
        0.04706461355090141,
        0.08306993544101715,
        0.014064871706068516,
        -0.05191079527139664,
        0.05963489040732384,
        0.06531030684709549,
        -0.010996215045452118,
        0.07892598956823349,
        0.00736926170065999,
        0.05913226678967476,
        -0.08374147117137909,
        0.021226339042186737,
        0.06892066448926926,
        0.01400799211114645,
        -0.018526028841733932,
        -0.052084386348724365,
        -0.015591299161314964,
        -0.03900456428527832,
        -0.054755955934524536,
        0.07525616884231567,
        -0.004477227572351694,
        -0.018853090703487396,
        0.03598396107554436,
        0.0273736659437418,
        -0.06568581610918045,
        0.03491061553359032,
        0.049645185470581055,
        0.01674226112663746,
        -0.03991295397281647,
        -0.02558889053761959,
        -0.0036413881462067366,
        -0.03695383667945862,
        0.0654512345790863,
        -0.012426172383129597,
        -0.030607689172029495,
        -0.07970336824655533,
        0.01568683236837387,
        -0.0608944371342659,
        0.022823981940746307,
        -0.04540808126330376,
        -0.02075960300862789,
        -0.03456950932741165,
        -0.016318993642926216,
        -0.060383815318346024,
        0.005817348603159189,
        0.04311436787247658,
        0.07281902432441711,
        -0.020293716341257095,
        0.06618110835552216,
        -0.10693572461605072,
        -0.046456143260002136,
        -0.04243842512369156,
        -0.08004702627658844,
        0.01313705649226904,
        0.04494442790746689,
        0.0034842113964259624,
        -0.03932230919599533,
        0.02299502119421959,
        0.039317142218351364,
        0.0007843697676435113,
        0.02662384696304798,
        0.006794038228690624,
        -0.012499755248427391,
        -0.12337163835763931,
        0.09784319996833801,
        0.036051709204912186,
        0.008318447507917881,
        -0.005740700755268335,
        -0.02671831101179123,
        0.019841786473989487,
        -0.06387370079755783,
        -0.02527788281440735,
        -0.015406457707285881,
        0.1326245814561844,
        0.013549905270338058,
        -0.04499400034546852,
        0.01343348529189825,
        -0.01675073802471161,
        0.0017705530626699328,
        0.03598619997501373,
        0.03761591389775276,
        -6.706817146096e-8,
        -0.02976815216243267,
        -0.015475328080356121,
        -0.08410373330116272,
        0.011832891963422298,
        -0.0018259978387504816,
        -0.04557526111602783,
        -0.05050502344965935,
        -0.07496360689401627,
        0.00995416846126318,
        -0.0008011028985492885,
        0.005098030902445316,
        -0.015729229897260666,
        0.037428099662065506,
        0.03307058662176132,
        0.002257196931168437,
        -0.06028846651315689,
        -0.040123313665390015,
        0.011848671361804008,
        -0.02683039754629135,
        -0.07241277396678925,
        -0.028998510912060738,
        0.043020378798246384,
        -0.015487268567085266,
        0.020443174988031387,
        0.010537254624068737,
        -0.0010411558905616403,
        0.05364165082573891,
        0.047923021018505096,
        -0.02689364366233349,
        0.009434499777853489,
        0.03198646381497383,
        0.021947763860225677,
        0.03863378241658211,
        0.028023067861795425,
        0.02403642050921917,
        -0.0040993341244757175,
        0.07817836850881577,
        -0.020235354080796242,
        0.0791822299361229,
        0.010529243387281895,
        0.05902200564742088,
        0.06678561121225357,
        0.0013075388269498944,
        0.01836542598903179,
        -0.06060722470283508,
        -0.048614438623189926,
        0.0007774942205287516,
        -0.041324812918901443,
        0.06835168600082397,
        -0.10598517209291458,
        -0.034083738923072815,
        -0.040257859975099564,
        -0.08534181863069534,
        0.08047224581241608,
        0.018324939534068108,
        -0.004504583775997162,
        0.012943513691425323,
        -0.04303954914212227,
        -0.05081503093242645,
        0.0430070161819458,
        0.09311212599277496,
        -0.029902424663305283,
        -0.002222438808530569,
        -0.016929108649492264
      ]
    },
    {
      "id": "77eb1827",
      "filePath": "05-rag-codebase/src/generator.ts",
      "content": "// generator.ts - 答案生成\n// 职责：基于检索到的代码片段，生成对用户问题的回答\n\nimport OpenAI from 'openai';\nimport type { RerankResult } from './types.js';\n\n/**\n * 创建 OpenAI 客户端\n */",
      "startLine": 1,
      "endLine": 9,
      "type": "other",
      "embedding": [
        -0.12595129013061523,
        0.018384456634521484,
        -0.01191672869026661,
        0.05304636061191559,
        0.021950576454401016,
        0.013533134944736958,
        0.013407775200903416,
        0.0032528520096093416,
        0.019652752205729485,
        -0.04518125206232071,
        0.049368150532245636,
        0.021646706387400627,
        0.008821596391499043,
        -0.07528672367334366,
        0.045031990855932236,
        0.05256076902151108,
        -0.1164645105600357,
        0.08622733503580093,
        -0.02063615247607231,
        -0.10418326407670975,
        0.027188194915652275,
        0.019202392548322678,
        0.040317244827747345,
        -0.02299167402088642,
        0.042415738105773926,
        -0.03108653426170349,
        -0.03251035138964653,
        0.050476156175136566,
        0.05700457841157913,
        -0.03251500055193901,
        0.036859218031167984,
        0.05982570722699165,
        0.0016620237147435546,
        0.0023302824702113867,
        0.041889067739248276,
        0.1465999037027359,
        -0.08355642855167389,
        -0.02786080725491047,
        0.017256347462534904,
        0.018473675474524498,
        0.0682954341173172,
        0.08806970715522766,
        0.058485954999923706,
        -0.08075831830501556,
        0.042772214859724045,
        -0.049740180373191833,
        -0.10760029405355453,
        -0.0439358651638031,
        -0.060575615614652634,
        -0.06124843657016754,
        -0.07621482759714127,
        0.008105945773422718,
        -0.07265229523181915,
        -0.031440068036317825,
        0.05508694797754288,
        -0.02482008934020996,
        0.005556556396186352,
        -0.04021552577614784,
        0.014187543652951717,
        -0.0001428112736903131,
        0.00562693364918232,
        0.0025369643699377775,
        0.04192108288407326,
        -0.10805528610944748,
        0.01052939798682928,
        -0.035370875149965286,
        -0.00778689282014966,
        0.07800456881523132,
        -0.01023794710636139,
        -0.08146002888679504,
        -0.028830911964178085,
        0.016597533598542213,
        0.013941227458417416,
        0.046619389206171036,
        -0.06670237332582474,
        -0.055872779339551926,
        -0.0414586067199707,
        -0.004049220588058233,
        0.030138665810227394,
        -0.04071303829550743,
        -0.026874279603362083,
        -0.07844795286655426,
        0.04110138118267059,
        0.061775896698236465,
        0.04147706553339958,
        0.11889353394508362,
        0.03107127919793129,
        -0.015832800418138504,
        0.08533331751823425,
        0.055712178349494934,
        -0.07905704528093338,
        0.015937501564621925,
        0.05102182552218437,
        0.0735769122838974,
        -0.028074441477656364,
        0.029435494914650917,
        0.002542828442528844,
        -0.0071176085621118546,
        -0.049696456640958786,
        0.08398744463920593,
        -0.028785496950149536,
        0.03152080997824669,
        0.08675312250852585,
        0.04492739588022232,
        -0.10315751284360886,
        -0.014134456403553486,
        0.04739910736680031,
        0.04192208871245384,
        -0.01027491595596075,
        -0.06456344574689865,
        0.06372606754302979,
        0.002469587605446577,
        0.03070152923464775,
        -0.09691894054412842,
        -0.07168124616146088,
        -0.009453266859054565,
        -0.062147703021764755,
        -0.07051162421703339,
        0.0301328357309103,
        0.05192497372627258,
        0.08334197849035263,
        0.020380839705467224,
        -0.03581231087446213,
        0.03292696550488472,
        -0.02178036980330944,
        0.014185983687639236,
        0.07915060967206955,
        5.160384567937333e-33,
        -0.0467442087829113,
        0.06580636650323868,
        0.025008494034409523,
        0.007906395941972733,
        0.030203426256775856,
        -0.057142697274684906,
        -0.02404695749282837,
        -0.057576827704906464,
        -0.13108964264392853,
        0.028375253081321716,
        -0.08143068850040436,
        0.0639941543340683,
        -0.13303998112678528,
        -0.004616311751306057,
        -0.0014549484476447105,
        -0.04381757229566574,
        0.030850904062390327,
        0.032940614968538284,
        0.011059206910431385,
        -0.025759171694517136,
        0.0064928545616567135,
        0.07105197757482529,
        -0.008350178599357605,
        0.013875736854970455,
        -0.058113303035497665,
        0.04306108504533768,
        0.013106375932693481,
        -0.0657346323132515,
        -0.01699790172278881,
        0.0010449477704241872,
        0.13327504694461823,
        -0.003987451549619436,
        -0.025155415758490562,
        0.038160692900419235,
        0.0054459176026284695,
        0.029514329507946968,
        -0.026054205372929573,
        -0.019580276682972908,
        -0.06104148179292679,
        -0.02759833261370659,
        0.020392192527651787,
        0.05062524229288101,
        -0.053298961371183395,
        0.010038098320364952,
        -0.002765777986496687,
        -0.006240990478545427,
        0.022482026368379593,
        0.04132591560482979,
        0.0387660413980484,
        0.014854632318019867,
        -0.08404527604579926,
        0.11085866391658783,
        0.011328971944749355,
        0.0509088896214962,
        0.04301464557647705,
        -0.04243767261505127,
        0.03233146667480469,
        0.038750749081373215,
        0.05456538498401642,
        0.0001683956797933206,
        0.04527575150132179,
        -0.020007872954010963,
        -0.054097723215818405,
        -0.03599467873573303,
        0.021156877279281616,
        -0.020139288157224655,
        0.02372557297348976,
        -0.0685073658823967,
        0.06342382729053497,
        0.0013250575866550207,
        0.026471929624676704,
        -0.03211976960301399,
        -0.015140884555876255,
        0.026492565870285034,
        0.020442642271518707,
        -0.004392408300191164,
        -0.04147522523999214,
        0.011987234465777874,
        -0.00007883292710175738,
        -0.1010243222117424,
        -0.01717093400657177,
        -0.046382397413253784,
        -0.04485177621245384,
        -0.004211981315165758,
        0.03293943405151367,
        0.02257869392633438,
        -0.02286001294851303,
        -0.02580396458506584,
        0.0727362185716629,
        0.02436555176973343,
        -0.06403688341379166,
        -0.07365021854639053,
        -0.034354548901319504,
        -0.03779387101531029,
        -0.06683555990457535,
        -6.069204433622153e-33,
        0.021897805854678154,
        0.04711822420358658,
        -0.07692164927721024,
        -0.037970177829265594,
        -0.009895676746964455,
        -0.052492231130599976,
        -0.01525946706533432,
        0.04990455135703087,
        -0.04677321016788483,
        0.07457681745290756,
        0.022821804508566856,
        -0.015248039737343788,
        0.0966314896941185,
        -0.0056352075189352036,
        0.07353194802999496,
        0.010064845904707909,
        0.02106284350156784,
        0.04021671786904335,
        -0.067544125020504,
        -0.0007004291983321309,
        -0.01842113584280014,
        0.03318188339471817,
        0.0023757521994411945,
        0.09001745283603668,
        0.0176105760037899,
        0.12011932581663132,
        0.05848544090986252,
        0.014092653058469296,
        -0.043590955436229706,
        -0.052292291074991226,
        -0.014754686504602432,
        -0.002607268514111638,
        -0.06384947150945663,
        0.09562956541776657,
        -0.04114529862999916,
        -0.025565216317772865,
        0.0650467798113823,
        -0.019300788640975952,
        -0.012452618218958378,
        0.03519487380981445,
        -0.04132041335105896,
        -0.0039860401302576065,
        -0.047599706798791885,
        0.029250625520944595,
        -0.02429228089749813,
        0.007412677630782127,
        -0.037815455347299576,
        0.06733061373233795,
        0.000729986117221415,
        -0.1330651342868805,
        0.02266695536673069,
        -0.008412235416471958,
        -0.016797607764601707,
        -0.1504126787185669,
        -0.021206466481089592,
        0.0033729770220816135,
        0.03380877152085304,
        -0.06015357747673988,
        -0.07535470277070999,
        -0.03605923056602478,
        -0.012623634189367294,
        -0.11351728439331055,
        -0.012938324362039566,
        -0.03931684419512749,
        -0.020375791937112808,
        -0.05684804916381836,
        -0.0010965557303279638,
        0.01717403531074524,
        -0.0046079521998763084,
        -0.11074721813201904,
        -0.064930260181427,
        0.003404526272788644,
        0.09036102145910263,
        -0.03714549168944359,
        -0.08305362612009048,
        -0.010736471973359585,
        0.006718306802213192,
        0.0574704110622406,
        0.12006969004869461,
        -0.041804417967796326,
        -0.022162621840834618,
        -0.03210313990712166,
        0.09543480724096298,
        0.0018279881915077567,
        -0.03137210011482239,
        -0.04062093421816826,
        0.07026205211877823,
        0.02403174713253975,
        0.08887533098459244,
        0.025889208540320396,
        -0.044415079057216644,
        0.02251688577234745,
        0.026240933686494827,
        0.04298854619264603,
        0.05094078928232193,
        -4.429000455274945e-8,
        -0.11665431410074234,
        -0.09172920137643814,
        -0.08510548621416092,
        -0.009328499436378479,
        -0.028005294501781464,
        0.021969584748148918,
        -0.04100952669978142,
        0.026289016008377075,
        0.035685423761606216,
        -0.011889872141182423,
        -0.010055125690996647,
        0.04229852184653282,
        -0.04132840037345886,
        0.017675412818789482,
        -0.01098106149584055,
        0.0217928197234869,
        -0.04048797860741615,
        0.1173049733042717,
        -0.036969371140003204,
        -0.08966360241174698,
        -0.02654409036040306,
        0.01551695354282856,
        0.08020033687353134,
        -0.011626982130110264,
        -0.06502030789852142,
        -0.07218887656927109,
        -0.07953424751758575,
        -0.03962990641593933,
        0.011694737710058689,
        0.008433988317847252,
        -0.0033103220630437136,
        -0.023247409611940384,
        0.054576411843299866,
        -0.08417712152004242,
        -0.013828176073729992,
        0.09921395778656006,
        0.04915193095803261,
        -0.040598127990961075,
        0.008220850490033627,
        0.002620122628286481,
        0.04344635084271431,
        -0.010754822753369808,
        -0.02460281178355217,
        0.018783483654260635,
        -0.011489392258226871,
        -0.056292690336704254,
        -0.021697890013456345,
        -0.01769912801682949,
        0.02568736858665943,
        0.0002298787876497954,
        0.028846273198723793,
        -0.06979797780513763,
        -0.0685272142291069,
        -0.021822527050971985,
        -0.04924437403678894,
        0.011254151351749897,
        -0.015333933755755424,
        0.00036576439742930233,
        -0.04782256484031677,
        -0.022371018305420876,
        0.027235135436058044,
        0.04389488697052002,
        0.07280188798904419,
        -0.020350998267531395
      ]
    },
    {
      "id": "7ea9dcc7",
      "filePath": "05-rag-codebase/src/generator.ts",
      "content": "function createClient(): OpenAI {\n\treturn new OpenAI({\n\t\tapiKey: process.env.OPENAI_API_KEY,\n\t\tbaseURL: process.env.OPENAI_BASE_URL,\n\t});\n}\n\n/**\n * 获取 Chat 模型名称\n */",
      "startLine": 10,
      "endLine": 19,
      "type": "function",
      "name": "createClient",
      "embedding": [
        -0.10551346093416214,
        0.01687118038535118,
        -0.058006346225738525,
        0.03662044554948807,
        0.027715664356946945,
        -0.07867253571748734,
        -0.0005066400044597685,
        -0.002996129682287574,
        0.05011563003063202,
        0.006561381742358208,
        0.00601213751360774,
        -0.05747951194643974,
        -0.01996493712067604,
        -0.027304643765091896,
        0.13673901557922363,
        0.10900583118200302,
        -0.006404432468116283,
        0.010114269331097603,
        -0.007532428950071335,
        -0.04597809165716171,
        0.040603891015052795,
        0.06172501668334007,
        0.0451483428478241,
        -0.036361802369356155,
        0.02772083692252636,
        -0.06688869744539261,
        0.051312923431396484,
        0.0069357892498373985,
        0.08988165855407715,
        0.035449910908937454,
        0.09631624072790146,
        0.0322742685675621,
        0.013318557292222977,
        -0.002648938912898302,
        0.019100019708275795,
        0.12146010249853134,
        -0.0581442192196846,
        -0.015951428562402725,
        0.0059723444283008575,
        -0.014305045828223228,
        0.11076735705137253,
        0.040631767362356186,
        -0.01857391931116581,
        -0.05504576116800308,
        0.05672288313508034,
        -0.03977521136403084,
        -0.042970210313797,
        -0.03824028745293617,
        0.0026264796033501625,
        0.0026731276884675026,
        -0.08802561461925507,
        -0.007079202216118574,
        -0.0305620189756155,
        -0.05095839127898216,
        0.010768448002636433,
        -0.03587016835808754,
        -0.048699360340833664,
        -0.005408679600805044,
        -0.011953165754675865,
        0.0010658006649464369,
        0.05014346167445183,
        -0.06988129019737244,
        0.03310341760516167,
        -0.06395700573921204,
        -0.0026040312368422747,
        0.01515964325517416,
        -0.06743110716342926,
        0.010838327929377556,
        0.013114667497575283,
        -0.09884563088417053,
        -0.013783627189695835,
        0.002445214195176959,
        -0.007068960927426815,
        0.011860550381243229,
        -0.06957916915416718,
        0.02013200707733631,
        -0.008073512464761734,
        0.028797294944524765,
        -0.01648867130279541,
        -0.023852519690990448,
        0.04233410581946373,
        -0.010471600107848644,
        0.01357656717300415,
        0.0446988008916378,
        0.003495553508400917,
        0.15364739298820496,
        0.06757752597332001,
        -0.01913442648947239,
        0.05540010333061218,
        0.0033053946681320667,
        -0.018228311091661453,
        0.04132680222392082,
        0.00896527897566557,
        -0.0349818579852581,
        0.03211849555373192,
        -0.014839542098343372,
        -0.05608438700437546,
        -0.02108972892165184,
        -0.08626686781644821,
        0.062271419912576675,
        -0.04561309888958931,
        0.00920828152447939,
        0.008173772133886814,
        0.05532536655664444,
        -0.06053681671619415,
        -0.006234259810298681,
        0.04365050792694092,
        0.06875073909759521,
        -0.01857980526983738,
        0.033959824591875076,
        0.019017674028873444,
        -0.004581868182867765,
        0.07949796319007874,
        -0.027902496978640556,
        -0.03152697905898094,
        0.052176378667354584,
        -0.07885605096817017,
        -0.03204448148608208,
        0.03761829435825348,
        0.08410528302192688,
        0.060995541512966156,
        -0.05502983555197716,
        -0.0800718292593956,
        0.02700081281363964,
        -0.04246852546930313,
        -0.025858858600258827,
        0.13410598039627075,
        4.907872585675366e-33,
        0.032576728612184525,
        0.0457879938185215,
        0.026862898841500282,
        0.01417127251625061,
        0.10151311755180359,
        -0.03897351399064064,
        0.03355644270777702,
        -0.07287357747554779,
        -0.03634911775588989,
        -0.05326949432492256,
        -0.05276180058717728,
        0.004954698029905558,
        -0.04824817553162575,
        -0.028309959918260574,
        0.0012170558329671621,
        -0.029368219897150993,
        -0.04975295439362526,
        0.02971065603196621,
        0.1197279840707779,
        0.0037899252492934465,
        -0.05574825778603554,
        0.024379152804613113,
        -0.0011340618366375566,
        0.031344372779130936,
        -0.04904166981577873,
        0.06519903242588043,
        0.026869654655456543,
        -0.0989290326833725,
        0.010027244687080383,
        -0.0014754103031009436,
        0.12420309334993362,
        0.030907385051250458,
        -0.05597953125834465,
        0.06334559619426727,
        -0.009819038212299347,
        -0.013137356378138065,
        -0.06416496634483337,
        0.02641350030899048,
        -0.105091892182827,
        0.029106272384524345,
        0.0058860983699560165,
        0.042205989360809326,
        -0.11646043509244919,
        0.02071332186460495,
        -0.060240618884563446,
        -0.04909446835517883,
        -0.010311223566532135,
        0.00844667386263609,
        0.0816238671541214,
        0.03689669072628021,
        -0.0601523295044899,
        0.0661914274096489,
        0.007224561180919409,
        0.01525024138391018,
        0.0920548364520073,
        -0.11747877299785614,
        -0.012517021037638187,
        -0.06592553853988647,
        0.059870798140764236,
        -0.01930808648467064,
        -0.037623222917318344,
        -0.007533397525548935,
        -0.019331851974129677,
        0.0021819944959133863,
        0.02916259877383709,
        -0.00513352919369936,
        0.006235440727323294,
        -0.032566435635089874,
        0.07396821677684784,
        -0.02866962179541588,
        0.07017732411623001,
        -0.048542920500040054,
        -0.06749605387449265,
        0.04162604361772537,
        -0.05898347496986389,
        0.008248555473983288,
        0.0100556043908,
        0.026751622557640076,
        0.003930258098989725,
        -0.050095342099666595,
        0.01601072959601879,
        -0.020599471405148506,
        -0.041652657091617584,
        0.04736314341425896,
        0.013410900719463825,
        0.020014265552163124,
        -0.05138754844665527,
        -0.01860504038631916,
        0.03552420064806938,
        0.04294954985380173,
        -0.030487779527902603,
        -0.035016875714063644,
        -0.02459964156150818,
        0.025011885911226273,
        -0.08870860189199448,
        -3.2929736710699075e-33,
        0.051056426018476486,
        -0.008689142763614655,
        -0.07636987417936325,
        0.015942903235554695,
        -0.06581062078475952,
        -0.04132823273539543,
        0.03868384286761284,
        0.023912180215120316,
        -0.027692478150129318,
        0.11055570095777512,
        0.05762650817632675,
        -0.0020823783706873655,
        0.10459115356206894,
        0.03886588662862778,
        0.0439508892595768,
        -0.04655565321445465,
        0.04700646921992302,
        0.04131579026579857,
        -0.05153317376971245,
        0.04291060194373131,
        -0.01556086353957653,
        0.04507983475923538,
        -0.0021997035946696997,
        0.009232468903064728,
        0.0351361446082592,
        0.09046025574207306,
        0.07812852412462234,
        0.004927000496536493,
        -0.06547477096319199,
        -0.09313178062438965,
        -0.029262229800224304,
        0.0686248317360878,
        -0.06299780309200287,
        0.049860477447509766,
        -0.019325869157910347,
        0.01903260126709938,
        0.10360877215862274,
        0.08096242696046829,
        -0.024511439725756645,
        -0.03344506025314331,
        0.006052060518413782,
        -0.055341705679893494,
        -0.06913968175649643,
        0.026584088802337646,
        -0.04521086812019348,
        -0.04822218790650368,
        -0.01569937728345394,
        0.016160396859049797,
        -0.07398809492588043,
        -0.07170772552490234,
        0.09430184215307236,
        0.015505156479775906,
        -0.005516599398106337,
        -0.1333608776330948,
        -0.015145671553909779,
        0.021086426451802254,
        0.0991688147187233,
        -0.05351044237613678,
        -0.002412942470982671,
        -0.045232098549604416,
        0.03471475467085838,
        -0.11082063615322113,
        -0.01988777332007885,
        -0.006657614838331938,
        -0.014730229042470455,
        -0.01539761945605278,
        0.020425526425242424,
        0.10919097810983658,
        -0.01915191486477852,
        -0.0447760634124279,
        -0.08472181111574173,
        -0.04628072306513786,
        0.04308129474520683,
        0.01866741292178631,
        0.012803388759493828,
        0.02236458845436573,
        0.04468323662877083,
        -0.0335964635014534,
        0.10990862548351288,
        0.0011656086426228285,
        -0.0571613684296608,
        -0.04982338845729828,
        0.07165531069040298,
        0.0021065156906843185,
        -0.003026846330612898,
        -0.04274115711450577,
        0.0259456317871809,
        -0.010563738644123077,
        0.060757193714380264,
        0.06131722405552864,
        -0.08940373361110687,
        0.03851386904716492,
        -0.05480662360787392,
        0.08268332481384277,
        0.1034064069390297,
        -3.841492102196753e-8,
        -0.07817719876766205,
        -0.08479152619838715,
        -0.04458804801106453,
        0.06874853372573853,
        -0.0458599254488945,
        0.0008266211953014135,
        -0.02644863724708557,
        -0.002653338247910142,
        0.07320606708526611,
        -0.00013950542779639363,
        -0.05225779116153717,
        0.03323933109641075,
        -0.07340754568576813,
        0.0070153698325157166,
        -0.03975604102015495,
        0.012793168425559998,
        -0.015867818146944046,
        0.1060205027461052,
        0.012421362102031708,
        -0.13039204478263855,
        -0.013817008584737778,
        0.005575084593147039,
        0.0610167533159256,
        -0.09073644131422043,
        -0.018609536811709404,
        -0.07109751552343369,
        0.013671762309968472,
        0.02075164020061493,
        -0.04554010555148125,
        -0.07087042182683945,
        -0.0008330464479513466,
        -0.05301481485366821,
        0.033998601138591766,
        -0.08501974493265152,
        -0.030448781326413155,
        0.02586713805794716,
        -0.028121717274188995,
        -0.038963016122579575,
        0.03726472333073616,
        -0.02006915956735611,
        0.02002803049981594,
        0.07624391466379166,
        -0.0071062445640563965,
        -0.05678921565413475,
        -0.03632277995347977,
        0.04160014167428017,
        -0.019985666498541832,
        -0.013088811188936234,
        0.005677965935319662,
        -0.005509700160473585,
        -0.010407625697553158,
        -0.06312780827283859,
        0.01160428673028946,
        0.010093891061842442,
        -0.03474931791424751,
        0.006930763833224773,
        -0.012547681108117104,
        -0.03371962904930115,
        -0.044357795268297195,
        0.039540402591228485,
        0.03380320966243744,
        0.0772569477558136,
        0.030528031289577484,
        -0.014863161370158195
      ]
    },
    {
      "id": "e3f1907f",
      "filePath": "05-rag-codebase/src/generator.ts",
      "content": "function getModel(): string {\n\treturn process.env.OPENAI_MODEL || 'gpt-4o-mini';\n}\n\n/**\n * 构建上下文\n */",
      "startLine": 20,
      "endLine": 26,
      "type": "function",
      "name": "getModel",
      "embedding": [
        -0.06032845377922058,
        0.02251928672194481,
        -0.031348515301942825,
        0.07357633858919144,
        0.06301786750555038,
        -0.03218119591474533,
        0.015244519338011742,
        0.05854751914739609,
        0.03571091592311859,
        -0.01966230385005474,
        0.042424529790878296,
        -0.06333363801240921,
        -0.05708811804652214,
        -0.07266413420438766,
        0.04541248083114624,
        0.03512711077928543,
        -0.049644481390714645,
        0.023665906861424446,
        -0.03095138445496559,
        -0.07394734770059586,
        0.05624672770500183,
        0.04457536339759827,
        0.03982751816511154,
        0.014371819794178009,
        -0.021166324615478516,
        -0.04775019735097885,
        0.04464985430240631,
        0.05529290810227394,
        0.05034711956977844,
        0.0005876854411326349,
        0.006190840154886246,
        0.06284904479980469,
        -0.011007381603121758,
        0.008368315175175667,
        0.06620091944932938,
        0.09304174035787582,
        -0.014655095525085926,
        -0.10212961584329605,
        -0.009736621752381325,
        -0.02581101842224598,
        0.0702439472079277,
        0.04471804201602936,
        0.023115374147892,
        -0.030166473239660263,
        0.07757147401571274,
        -0.08153446018695831,
        -0.020347151905298233,
        -0.09947212785482407,
        -0.030231693759560585,
        -0.03587830066680908,
        -0.05665178224444389,
        -0.01471932977437973,
        -0.025950882583856583,
        -0.06074143201112747,
        0.07488922774791718,
        -0.028246017172932625,
        0.022459961473941803,
        -0.07435692846775055,
        0.05264703184366226,
        -0.032538630068302155,
        0.0025434428825974464,
        -0.005209506954997778,
        -0.11937843263149261,
        -0.03830818086862564,
        -0.005029220134019852,
        0.0450742207467556,
        -0.0009044217295013368,
        0.05468035116791725,
        0.012781800702214241,
        -0.11080802977085114,
        -0.0310251172631979,
        -0.012018810957670212,
        -0.03174661099910736,
        -0.00935288518667221,
        -0.04852931946516037,
        -0.005112670361995697,
        0.02088121324777603,
        0.03594428300857544,
        0.041209325194358826,
        -0.07455165684223175,
        0.020435849204659462,
        -0.011142999865114689,
        0.05354302003979683,
        -0.0037100277841091156,
        0.01605546846985817,
        0.07094700634479523,
        0.05936867371201515,
        0.04243876039981842,
        0.15181441605091095,
        0.027453579008579254,
        -0.06547986716032028,
        0.06944456696510315,
        -0.039154503494501114,
        0.03486629202961922,
        -0.07373052835464478,
        -0.015602489933371544,
        0.018124738708138466,
        -0.024268656969070435,
        -0.05616770312190056,
        0.08028149604797363,
        -0.026017185300588608,
        0.10025700181722641,
        0.08490749448537827,
        0.07816778868436813,
        -0.06965672969818115,
        -0.07155916839838028,
        0.035568416118621826,
        0.05295111611485481,
        -0.022338179871439934,
        -0.011657156981527805,
        0.028512513265013695,
        0.027430102229118347,
        0.04998689144849777,
        -0.042943693697452545,
        0.014568867161870003,
        -0.044413674622774124,
        -0.03786395490169525,
        -0.09123498946428299,
        -0.019930632784962654,
        0.10800494253635406,
        -0.0012339429231360555,
        0.007060624659061432,
        -0.07780004292726517,
        0.016555488109588623,
        -0.062428414821624756,
        0.021367182955145836,
        0.07186801731586456,
        4.339508210083328e-33,
        0.04904918000102043,
        0.011187729425728321,
        0.06679900735616684,
        0.0528070330619812,
        0.07706405222415924,
        0.028113223612308502,
        -0.013451797887682915,
        -0.11417911946773529,
        -0.025470945984125137,
        -0.02742176316678524,
        -0.07627984881401062,
        0.0024979745503515005,
        -0.12930132448673248,
        -0.04686586186289787,
        0.035440731793642044,
        -0.0027702338993549347,
        -0.03140363469719887,
        0.0262469369918108,
        0.046560708433389664,
        0.051806796342134476,
        0.023797865957021713,
        0.02721247263252735,
        -0.06883224844932556,
        -0.041412752121686935,
        -0.025855571031570435,
        0.11565525829792023,
        0.019428223371505737,
        -0.08050616085529327,
        -0.027788877487182617,
        0.049658723175525665,
        0.09264485538005829,
        0.0035987882874906063,
        -0.010513334535062313,
        0.0620744451880455,
        -0.05531487241387367,
        -0.007264483720064163,
        -0.006400736048817635,
        0.003368505509570241,
        -0.006208241917192936,
        -0.025203419849276543,
        -0.012807480990886688,
        0.005324279423803091,
        -0.053954076021909714,
        0.006699413992464542,
        -0.024638667702674866,
        -0.009521661326289177,
        0.0219811350107193,
        0.005331126507371664,
        0.08143561333417892,
        0.019820330664515495,
        -0.03598075732588768,
        0.08060033619403839,
        -0.010373097844421864,
        0.034629665315151215,
        0.017737476155161858,
        0.004491998348385096,
        0.01064327359199524,
        0.0076722451485693455,
        0.07140792906284332,
        0.0006664629909209907,
        0.016490012407302856,
        0.026522673666477203,
        0.022665640339255333,
        0.013259519822895527,
        0.08086153119802475,
        0.0002854058693628758,
        -0.020276421681046486,
        -0.08999744057655334,
        0.09950422495603561,
        0.018743708729743958,
        -0.04551440477371216,
        -0.07131099700927734,
        0.026214230805635452,
        0.018826957792043686,
        0.062431152909994125,
        -0.023552976548671722,
        0.02843734808266163,
        -0.03486645594239235,
        -0.0658266544342041,
        -0.02842649817466736,
        -0.06492546200752258,
        -0.0004088091372977942,
        -0.03622082248330116,
        -0.018896127119660378,
        0.03921318054199219,
        0.010665630921721458,
        0.019248438999056816,
        0.013240935280919075,
        -0.0238729789853096,
        0.0008593886159360409,
        -0.04843665659427643,
        -0.08987029641866684,
        -0.07262223213911057,
        -0.0003469185612630099,
        -0.055881157517433167,
        -4.036865801862607e-33,
        0.08390424400568008,
        -0.00817759521305561,
        0.021640216931700706,
        -0.011552251875400543,
        -0.043147895485162735,
        -0.0990016832947731,
        -0.002325210254639387,
        0.04426838457584381,
        -0.005919777322560549,
        0.06956686824560165,
        0.10627955198287964,
        -0.0243771281093359,
        0.06424898654222488,
        0.023968854919075966,
        0.12792372703552246,
        -0.003006427315995097,
        0.062366779893636703,
        -0.04247886687517166,
        -0.01045146118849516,
        0.061320122331380844,
        0.0027314515318721533,
        0.009447112679481506,
        -0.031953610479831696,
        0.03138398006558418,
        0.012589654885232449,
        0.05280039459466934,
        0.06660836935043335,
        -0.017410848289728165,
        -0.020134571939706802,
        -0.06263631582260132,
        -0.04324031621217728,
        0.07173022627830505,
        -0.03821028769016266,
        0.08433522284030914,
        -0.10274579375982285,
        -0.026962023228406906,
        0.11385629326105118,
        0.026850135996937752,
        -0.0039589679799973965,
        0.07293069362640381,
        -0.001820559031330049,
        0.0493970550596714,
        -0.07290122658014297,
        0.013425844721496105,
        -0.05413012579083443,
        0.040674880146980286,
        0.020059717819094658,
        -0.023348087444901466,
        -0.02002089098095894,
        -0.1422368437051773,
        0.06889897584915161,
        -0.037416666746139526,
        -0.01739172264933586,
        -0.06910322606563568,
        -0.0018351527396589518,
        -0.03574137017130852,
        0.0771958976984024,
        -0.0955827608704567,
        -0.09133193641901016,
        -0.03176802769303322,
        -0.007137198932468891,
        -0.0490611270070076,
        -0.01080373302102089,
        -0.08976567536592484,
        -0.038692228496074677,
        -0.012336068786680698,
        0.03556370362639427,
        0.0027871637139469385,
        0.02860267087817192,
        -0.05823564901947975,
        -0.06076900660991669,
        0.003517353907227516,
        0.029175257310271263,
        0.05756530910730362,
        -0.04627855494618416,
        0.0548742339015007,
        -0.01069775503128767,
        0.012112067081034184,
        0.11524078249931335,
        -0.00804457813501358,
        0.0008758790208958089,
        0.007787600159645081,
        0.07918964326381683,
        -0.06472829729318619,
        0.0038656387478113174,
        -0.0967475101351738,
        0.005631879437714815,
        0.06938455253839493,
        0.05892016738653183,
        0.0374542735517025,
        -0.10560151189565659,
        0.019946400076150894,
        0.024203531444072723,
        0.09819096326828003,
        0.017070027068257332,
        -4.205467973861232e-8,
        -0.1038188710808754,
        -0.07931222766637802,
        -0.01006340328603983,
        0.016429243609309196,
        -0.0689331665635109,
        0.038470085710287094,
        -0.033803511410951614,
        -0.015862099826335907,
        0.08404555171728134,
        -0.029810994863510132,
        0.003678456647321582,
        -0.004261027090251446,
        -0.07180000096559525,
        -0.005773609038442373,
        -0.01758532226085663,
        -0.0003947857767343521,
        -0.004928870126605034,
        0.11250442266464233,
        -0.030212989076972008,
        -0.08428448438644409,
        -0.029024628922343254,
        0.015662211924791336,
        0.07184895128011703,
        -0.05173998326063156,
        0.015049977228045464,
        -0.03026910312473774,
        -0.0893770083785057,
        -0.023768151178956032,
        0.00027689008857123554,
        -0.022328272461891174,
        0.04299496114253998,
        -0.012235712260007858,
        0.01238969899713993,
        0.013626590371131897,
        -0.03552046790719032,
        0.06232210993766785,
        0.04874727874994278,
        0.010551984421908855,
        0.06843731552362442,
        0.01572546735405922,
        0.08173147588968277,
        -0.012017771601676941,
        -0.09291695803403854,
        -0.01677011139690876,
        -0.02609572373330593,
        0.020833833143115044,
        -0.035506438463926315,
        -0.08543289452791214,
        0.042639873921871185,
        0.016327062621712685,
        -0.004139967728406191,
        -0.066175177693367,
        -0.037376392632722855,
        0.0034550512209534645,
        -0.09251243621110916,
        0.009806200861930847,
        -0.008354447782039642,
        -0.034091707319021225,
        -0.07244586944580078,
        -0.022242015227675438,
        -0.008853042498230934,
        0.025522718206048012,
        -0.011724373325705528,
        0.0065030804835259914
      ]
    },
    {
      "id": "e5d1778f",
      "filePath": "05-rag-codebase/src/generator.ts",
      "content": "function buildContext(results: RerankResult[]): string {\n\treturn results\n\t\t.map((r, i) => {\n\t\t\tconst { chunk } = r;\n\t\t\treturn `### 代码片段 ${i + 1}\n文件: ${chunk.filePath}\n类型: ${chunk.type}${chunk.name ? ` (${chunk.name})` : ''}\n行号: ${chunk.startLine}-${chunk.endLine}\n相关性评分: ${r.relevanceScore}/10\n\n\\`\\`\\`typescript\n${chunk.content}\n\\`\\`\\``;\n\t\t})\n\t\t.join('\\n\\n');\n}\n\n/**\n * 构建系统提示词\n */",
      "startLine": 27,
      "endLine": 46,
      "type": "function",
      "name": "buildContext",
      "embedding": [
        -0.12955017387866974,
        0.07503713667392731,
        0.05839479714632034,
        0.06989600509405136,
        -0.012420617043972015,
        0.05379275232553482,
        0.06373928487300873,
        0.04555961862206459,
        0.007926628924906254,
        -0.018993554636836052,
        0.0005022591212764382,
        -0.014716709963977337,
        -0.013089661486446857,
        -0.046600185334682465,
        0.04335974529385567,
        0.050980668514966965,
        -0.07142115384340286,
        0.027421239763498306,
        -0.03194994479417801,
        -0.1581237018108368,
        0.047319069504737854,
        0.08338139951229095,
        0.0713391900062561,
        -0.022067980840802193,
        0.10125294327735901,
        0.03468151018023491,
        -0.03134739771485329,
        0.02280506119132042,
        0.08375304937362671,
        -0.0026500946842134,
        0.03857024013996124,
        0.03286643326282501,
        0.018038786947727203,
        0.005557584576308727,
        0.045812856405973434,
        0.10575796663761139,
        -0.05641414225101471,
        -0.022841056808829308,
        0.06977445632219315,
        0.02324722707271576,
        0.0417548343539238,
        0.08235687017440796,
        0.03644122928380966,
        -0.08005102723836899,
        0.06859304755926132,
        -0.02782491408288479,
        -0.056731775403022766,
        -0.02835351973772049,
        -0.05203308165073395,
        -0.030452778562903404,
        -0.11015282571315765,
        0.04340840503573418,
        -0.06914648413658142,
        -0.0331096313893795,
        0.08553482592105865,
        0.009104572236537933,
        -0.02185504138469696,
        -0.045737821608781815,
        -0.024320604279637337,
        -0.018878037109971046,
        -0.004454426467418671,
        -0.06048540398478508,
        0.038415420800447464,
        -0.10872357338666916,
        0.08679009974002838,
        0.01814095489680767,
        -0.03341994807124138,
        0.11045131087303162,
        0.037529345601797104,
        0.016632119193673134,
        -0.04489126428961754,
        0.02161007933318615,
        -0.010667762719094753,
        0.034126970916986465,
        -0.04228881746530533,
        0.011620436795055866,
        -0.013962287455797195,
        -0.0002719172043725848,
        0.013011356815695763,
        -0.044699281454086304,
        -0.053549304604530334,
        -0.0455976277589798,
        0.06349401921033859,
        0.004489640239626169,
        -0.019193757325410843,
        0.06676778197288513,
        0.051814913749694824,
        -0.028314342722296715,
        0.025981351733207703,
        0.007126721553504467,
        -0.04284849390387535,
        -0.04675408452749252,
        0.08832476288080215,
        0.07423914968967438,
        -0.020426809787750244,
        0.0656987875699997,
        -0.03364904224872589,
        0.0015000568237155676,
        -0.0026284302584826946,
        0.04109672084450722,
        -0.008441729471087456,
        0.08429230004549026,
        0.07071814686059952,
        -0.04357071965932846,
        -0.117490254342556,
        0.028129780665040016,
        -0.004257799591869116,
        0.06983242183923721,
        0.038069210946559906,
        -0.008706262335181236,
        0.020292410627007484,
        0.036655910313129425,
        -0.03357763960957527,
        -0.0645812526345253,
        -0.0919521301984787,
        -0.06461383402347565,
        0.017629124224185944,
        -0.10082031786441803,
        0.03357819467782974,
        0.09737102687358856,
        0.08174685388803482,
        0.013169522397220135,
        -0.11536654829978943,
        0.02534501999616623,
        -0.014294263906776905,
        -0.053292740136384964,
        0.09158153086900711,
        1.0109479169102144e-32,
        -0.022547317668795586,
        0.03284307196736336,
        0.03599639609456062,
        0.013237882405519485,
        0.010921966284513474,
        -0.050541725009679794,
        -0.03817159682512283,
        -0.041656482964754105,
        -0.13866576552391052,
        0.05146949738264084,
        -0.06042718514800072,
        -0.005517739802598953,
        -0.07175339013338089,
        -0.019177410751581192,
        -0.048300694674253464,
        -0.04409756138920784,
        0.03130579739809036,
        0.006279464811086655,
        -0.03085760958492756,
        0.06915131211280823,
        -0.046665746718645096,
        0.04531107470393181,
        0.007204770110547543,
        -0.0396086610853672,
        -0.02529696747660637,
        -0.02564009465277195,
        0.05403023958206177,
        -0.045128557831048965,
        -0.07728702574968338,
        -0.023945631459355354,
        0.06492403149604797,
        -0.03450777754187584,
        -0.0034276891965419054,
        0.03205152228474617,
        0.0066895270720124245,
        0.0005613620160147548,
        -0.006016070023179054,
        -0.012807091698050499,
        -0.09629339724779129,
        0.06149829924106598,
        0.0266314297914505,
        0.025177432224154472,
        -0.07799257338047028,
        0.013428879901766777,
        -0.03813285008072853,
        -0.028078794479370117,
        -0.034639015793800354,
        -0.006518695969134569,
        0.01254603173583746,
        -0.016605738550424576,
        -0.0023150292690843344,
        0.13159920275211334,
        0.043643634766340256,
        0.07810495048761368,
        0.0962749570608139,
        0.0005269822431728244,
        -0.020512964576482773,
        0.0010548584396019578,
        0.06473895907402039,
        0.002197492402046919,
        0.02974514104425907,
        -0.028320614248514175,
        -0.02019794099032879,
        0.09308525174856186,
        0.03970371559262276,
        -0.015931064262986183,
        0.08571814745664597,
        0.009994257241487503,
        0.026772087439894676,
        0.0023484835401177406,
        0.0016217752126976848,
        -0.043279532343149185,
        0.02528475783765316,
        0.020578524097800255,
        0.03000444732606411,
        -0.051013484597206116,
        -0.07133490592241287,
        -0.028851132839918137,
        0.02246089279651642,
        -0.05835141986608505,
        0.028679370880126953,
        -0.06553184986114502,
        0.024815060198307037,
        -0.046904027462005615,
        0.01642838679254055,
        0.06317431479692459,
        -0.050865933299064636,
        -0.12987740337848663,
        0.026885345578193665,
        -0.050256166607141495,
        -0.058463260531425476,
        -0.06623882055282593,
        -0.0409679152071476,
        -0.08718597143888474,
        -0.03425243869423866,
        -8.561257600153187e-33,
        0.12591318786144257,
        -0.003188350470736623,
        -0.04019225016236305,
        -0.0685058981180191,
        -0.026987267658114433,
        -0.06620362401008606,
        0.023042110726237297,
        0.0534256249666214,
        -0.005885245278477669,
        0.06355723738670349,
        -0.001857376890257001,
        -0.05388433486223221,
        0.0341227762401104,
        -0.05965035408735275,
        0.019009649753570557,
        0.027458591386675835,
        0.04291880875825882,
        -0.0149745624512434,
        -0.012604652903974056,
        -0.013374648056924343,
        0.02026740461587906,
        -0.030428431928157806,
        0.005883101839572191,
        0.08239638805389404,
        -0.02335839904844761,
        0.07920486479997635,
        0.07351172715425491,
        0.02831568941473961,
        -0.04095165431499481,
        -0.03202012553811073,
        -0.009423007257282734,
        -0.011501533910632133,
        -0.057977404445409775,
        0.002685931511223316,
        -0.05384347587823868,
        -0.046881962567567825,
        0.002335542580112815,
        0.02275070548057556,
        -0.029834657907485962,
        -0.008219622075557709,
        -0.033569056540727615,
        0.060055434703826904,
        -0.0542750358581543,
        -0.018894724547863007,
        0.020252330228686333,
        -0.04681820049881935,
        0.008736327290534973,
        0.06240851804614067,
        -0.02380920760333538,
        -0.06705433875322342,
        0.05079836770892143,
        -0.025066925212740898,
        -0.023676887154579163,
        -0.07058633118867874,
        -0.012876724824309349,
        -0.0534554123878479,
        -0.03927704319357872,
        -0.05346374958753586,
        -0.08270985633134842,
        -0.02343064732849598,
        0.002164152218028903,
        0.005204920656979084,
        0.01239344384521246,
        -0.059837132692337036,
        0.048085905611515045,
        -0.056295979768037796,
        0.0010280939750373363,
        -0.015918180346488953,
        0.021987827494740486,
        -0.030835704877972603,
        -0.029110455885529518,
        -0.017214491963386536,
        0.08588840067386627,
        0.03483273461461067,
        -0.008569811470806599,
        0.07268881797790527,
        -0.012570488266646862,
        0.04039842635393143,
        0.08313129842281342,
        0.03017246723175049,
        0.0008300655172206461,
        -0.02587394043803215,
        0.07494304329156876,
        0.023249080404639244,
        0.009197356179356575,
        -0.03627509996294975,
        -0.025543272495269775,
        0.08795654028654099,
        0.03505314886569977,
        -0.03631174564361572,
        0.011058160103857517,
        -0.027731556445360184,
        0.0199147779494524,
        0.059839148074388504,
        0.038309045135974884,
        -5.465431485163208e-8,
        -0.07257258892059326,
        -0.05270497873425484,
        -0.16496732831001282,
        -0.017386626452207565,
        -0.04735714942216873,
        0.05525708571076393,
        -0.02287965454161167,
        0.02358805388212204,
        -0.01616690307855606,
        -0.03317907452583313,
        0.016603983938694,
        -0.005700148642063141,
        -0.0948115661740303,
        0.044875722378492355,
        -0.04292502999305725,
        -0.009772272780537605,
        -0.0056305150501430035,
        0.1300021857023239,
        -0.05336373671889305,
        -0.07475786656141281,
        -0.0010507944971323013,
        0.05443082004785538,
        0.0414343886077404,
        -0.050094835460186005,
        -0.004343937151134014,
        -0.00011190665100002661,
        -0.00922404695302248,
        0.030018342658877373,
        -0.01002129539847374,
        -0.022146638482809067,
        0.011162644252181053,
        -0.023951245471835136,
        0.02082621119916439,
        -0.028936127200722694,
        0.007318622898310423,
        -0.02996687777340412,
        0.10732807964086533,
        -0.051766831427812576,
        0.00553648779168725,
        0.08466440439224243,
        0.11529175192117691,
        0.028803398832678795,
        0.037432387471199036,
        0.03844013437628746,
        -0.00214502215385437,
        -0.08477797359228134,
        -0.037818826735019684,
        0.03226056694984436,
        0.07873037457466125,
        -0.045597538352012634,
        0.061941538006067276,
        -0.05511367321014404,
        -0.12286269664764404,
        -0.03036203794181347,
        -0.016838746145367622,
        0.0053549399599432945,
        0.003679491812363267,
        0.07285993546247482,
        -0.054619207978248596,
        -0.0070710633881390095,
        0.044071994721889496,
        0.0054029603488743305,
        0.05643197521567345,
        -0.014532954432070255
      ]
    },
    {
      "id": "e4dbff0c",
      "filePath": "05-rag-codebase/src/generator.ts",
      "content": "function buildSystemPrompt(context: string): string {\n\treturn `你是一个代码库专家助手。用户会问关于代码库的问题，你需要基于提供的代码片段来回答。\n\n## 回答原则\n1. 只基于提供的代码片段回答，不要编造不存在的代码\n2. 如果代码片段不足以回答问题，明确说明\n3. 引用代码时说明文件路径和行号\n4. 回答要简洁、准确、有条理\n\n## 相关代码片段\n${context}`;\n}\n\n/**\n * 生成回答\n */",
      "startLine": 47,
      "endLine": 62,
      "type": "function",
      "name": "buildSystemPrompt",
      "embedding": [
        -0.10012026131153107,
        0.08315956592559814,
        -0.037712451070547104,
        -0.026092756539583206,
        -0.024161698296666145,
        -0.016674214974045753,
        0.0636654645204544,
        0.06774470210075378,
        -0.0247602891176939,
        0.02465706691145897,
        0.10060541331768036,
        -0.08519341796636581,
        0.050435420125722885,
        -0.08897604793310165,
        0.044504739344120026,
        0.08389420062303543,
        -0.12004493921995163,
        0.04296889528632164,
        -0.01672816090285778,
        -0.09045641124248505,
        0.03041915036737919,
        0.039900872856378555,
        0.015114047564566135,
        0.020595688372850418,
        0.10717923939228058,
        0.06198307126760483,
        -0.021406380459666252,
        0.08275767415761948,
        0.05664161220192909,
        0.05322561785578728,
        0.02588033117353916,
        0.0913664698600769,
        0.019888781011104584,
        -0.018041452392935753,
        0.09697865694761276,
        0.13527269661426544,
        -0.07618138194084167,
        -0.022434059530496597,
        -0.009562306106090546,
        0.041674938052892685,
        -0.008135521784424782,
        0.037726350128650665,
        0.014720004983246326,
        -0.06558410078287125,
        0.019738873466849327,
        0.008361144922673702,
        0.004165970254689455,
        0.007032856345176697,
        -0.09527036547660828,
        -0.09130480885505676,
        -0.040907494723796844,
        0.029449496418237686,
        -0.05255851522088051,
        -0.10380252450704575,
        0.05590998753905296,
        -0.03273786976933479,
        0.055882491171360016,
        -0.04354825243353844,
        0.024212798103690147,
        0.02127440832555294,
        0.0009503918699920177,
        -0.021570367738604546,
        0.011377590708434582,
        -0.09725875407457352,
        0.011777393519878387,
        0.01645725779235363,
        -0.00972102489322424,
        0.06534045189619064,
        0.0028243320994079113,
        0.017371315509080887,
        -0.09878391772508621,
        -0.02763315849006176,
        -0.050052545964717865,
        0.08497548848390579,
        -0.021615279838442802,
        0.06371810287237167,
        -0.02184487320482731,
        -0.053832169622182846,
        0.011003701016306877,
        -0.13342340290546417,
        -0.015827510505914688,
        -0.05257423222064972,
        0.08603998273611069,
        -0.0026289692614227533,
        -0.026725608855485916,
        0.11376930773258209,
        -0.0016189146554097533,
        -0.009634600952267647,
        0.05654976889491081,
        0.04666772857308388,
        -0.01505502313375473,
        -0.03644027188420296,
        0.038846615701913834,
        -0.00021253331215120852,
        0.005715139210224152,
        0.047178205102682114,
        -0.045620501041412354,
        0.013976291753351688,
        -0.027347039431333542,
        0.038664110004901886,
        -0.06721743941307068,
        0.02376711368560791,
        0.05940287560224533,
        0.003039892064407468,
        -0.10062839835882187,
        -0.005076152738183737,
        -0.014735722914338112,
        0.001216768752783537,
        0.0455702506005764,
        -0.04478459060192108,
        0.02036459371447563,
        -0.014167733490467072,
        -0.003141804365441203,
        -0.07824815064668655,
        -0.0135751161724329,
        -0.05026378855109215,
        0.03251749277114868,
        -0.08333829045295715,
        0.013379829935729504,
        0.10702668875455856,
        0.07580453902482986,
        -0.039597462862730026,
        -0.07445478439331055,
        0.06683241575956345,
        -0.1124957874417305,
        -0.0647350400686264,
        0.05521943420171738,
        -1.31575966322118e-33,
        -0.015919504687190056,
        0.03958217427134514,
        0.003555817063897848,
        0.005054527893662453,
        0.006637885235249996,
        -0.056690867990255356,
        -0.017792358994483948,
        -0.06549053639173508,
        -0.04620381444692612,
        0.05103962495923042,
        -0.024373166263103485,
        -0.030318574979901314,
        -0.09070508182048798,
        0.0017911829054355621,
        -0.023272624239325523,
        -0.07188726961612701,
        0.01689581386744976,
        -0.040610283613204956,
        -0.009421535767614841,
        -0.005585562903434038,
        -0.019025148823857307,
        0.053887832909822464,
        0.005193311255425215,
        -0.06723133474588394,
        -0.02129945531487465,
        -0.0024600999895483255,
        0.04574841260910034,
        -0.0947941467165947,
        -0.0017807356780394912,
        0.009136969223618507,
        0.01738652214407921,
        -0.044204287230968475,
        0.01574776880443096,
        0.01944146119058132,
        0.03716862201690674,
        -0.01835784502327442,
        0.0044230311177670956,
        -0.0173603855073452,
        -0.06236882880330086,
        0.03871980309486389,
        -0.04714798182249069,
        -0.01897359825670719,
        -0.007848991081118584,
        0.06636416912078857,
        0.05381617322564125,
        -0.01655602641403675,
        -0.06975288689136505,
        0.0559232272207737,
        0.027244867756962776,
        -0.013315229676663876,
        0.026755316182971,
        0.09112616628408432,
        0.04530611261725426,
        0.04971987009048462,
        0.021574221551418304,
        0.014261274598538876,
        -0.013517741113901138,
        -0.05694866552948952,
        0.010839438997209072,
        0.030651072040200233,
        0.006183022167533636,
        0.019076747819781303,
        -0.02297760732471943,
        0.04200659692287445,
        0.05182566121220589,
        -0.01777235046029091,
        0.09353160858154297,
        -0.08094050735235214,
        0.02101254276931286,
        -0.005417435429990292,
        -0.009407393634319305,
        -0.04704819247126579,
        -0.057059917598962784,
        0.015539870597422123,
        -0.044401608407497406,
        0.006832036189734936,
        -0.06371784955263138,
        0.05405561625957489,
        -0.06962692737579346,
        -0.07889154553413391,
        -0.018891790881752968,
        -0.014267176389694214,
        -0.027021203190088272,
        -0.07413896173238754,
        0.020657692104578018,
        -0.004407505039125681,
        -0.005518302321434021,
        -0.11903604120016098,
        -0.034151721745729446,
        -0.0892702266573906,
        -0.06890172511339188,
        -0.062403369694948196,
        -0.043809082359075546,
        -0.03152626380324364,
        -0.018654903396964073,
        -4.852461618687527e-33,
        0.08899056911468506,
        0.037037257105112076,
        -0.020357387140393257,
        -0.014359910041093826,
        -0.03086596354842186,
        -0.04998207464814186,
        0.05054263398051262,
        -0.029910847544670105,
        -0.041499439626932144,
        0.07222087681293488,
        -0.03102199174463749,
        -0.0015569055685773492,
        0.0069026099517941475,
        -0.041636887937784195,
        0.09829206019639969,
        -0.00020519534882623702,
        0.03104042075574398,
        0.05383826047182083,
        -0.0018462283769622445,
        0.04221310466527939,
        0.023853108286857605,
        0.06586211919784546,
        -0.05450134724378586,
        0.10094056278467178,
        -0.030246106907725334,
        0.01265745609998703,
        0.0033570663072168827,
        -0.030297834426164627,
        0.04228905588388443,
        -0.030398281291127205,
        -0.045419640839099884,
        0.031210988759994507,
        -0.004901787731796503,
        0.04049026966094971,
        -0.08249551057815552,
        -0.0472395159304142,
        0.011275331489741802,
        0.0003571939596440643,
        -0.02298377826809883,
        -0.049517348408699036,
        0.008407763205468655,
        0.07877283543348312,
        -0.03951995447278023,
        0.009941409341990948,
        0.003963659517467022,
        0.01728275790810585,
        0.01575493812561035,
        -0.014370552264153957,
        -0.011769973672926426,
        -0.11039342731237411,
        0.09748639911413193,
        -0.05538447946310043,
        -0.014542382210493088,
        -0.05881040170788765,
        -0.029763463884592056,
        -0.03537244722247124,
        -0.03266598656773567,
        -0.08802949637174606,
        -0.09358937293291092,
        -0.05659438669681549,
        -0.025074809789657593,
        -0.056892625987529755,
        0.04040050506591797,
        -0.08018120378255844,
        -0.01612255722284317,
        -0.038451164960861206,
        0.017512241378426552,
        -0.06429847329854965,
        0.03610558435320854,
        -0.07124379277229309,
        -0.008678642101585865,
        0.008400734513998032,
        -0.03854338079690933,
        -0.03006209246814251,
        -0.07960201054811478,
        0.05327820032835007,
        -0.050676532089710236,
        0.028623757883906364,
        0.04285375401377678,
        0.02720782533288002,
        -0.014263816177845001,
        -0.00553839560598135,
        0.03944958373904228,
        0.08448164165019989,
        -0.05306122079491615,
        -0.03749002143740654,
        -0.01835624687373638,
        0.09250164031982422,
        0.06271284073591232,
        -0.046635210514068604,
        -0.006777255330234766,
        -0.009472845122218132,
        -0.049023017287254333,
        0.08785291761159897,
        0.03834138065576553,
        -5.217510690158633e-8,
        -0.008179743774235249,
        -0.047558315098285675,
        -0.10786310583353043,
        -0.05784165486693382,
        -0.010388001799583435,
        -0.019091174006462097,
        -0.06972697377204895,
        -0.09842246025800705,
        0.06728152930736542,
        -0.03638079762458801,
        -0.02048094943165779,
        0.02644248493015766,
        -0.09593771398067474,
        -0.025601044297218323,
        -0.09072213619947433,
        -0.00008601989247836173,
        -0.03259991481900215,
        0.07734666764736176,
        -0.009984555654227734,
        -0.04468027874827385,
        -0.039307739585638046,
        0.06310564279556274,
        -0.006166269537061453,
        -0.043951671570539474,
        -0.05465758591890335,
        -0.05618937313556671,
        -0.04994611814618111,
        -0.02054535411298275,
        0.004956759046763182,
        0.03646761551499367,
        0.11613470315933228,
        -0.028066908940672874,
        -0.027986982837319374,
        -0.07889249920845032,
        -0.027362650260329247,
        0.029231805354356766,
        0.10479914397001266,
        -0.03345562145113945,
        0.05150444060564041,
        0.013160418719053268,
        0.056161876767873764,
        0.008304860442876816,
        -0.007550754118710756,
        0.04236790910363197,
        -0.004743583966046572,
        -0.08797715604305267,
        0.008311030454933643,
        -0.0009718366200104356,
        -0.014383301138877869,
        -0.06270310282707214,
        0.0818149745464325,
        -0.0015984013443812728,
        -0.08947959542274475,
        -0.0012288924772292376,
        -0.030994979664683342,
        -0.013459371402859688,
        0.0043721674010157585,
        0.05163564905524254,
        -0.07818876951932907,
        -0.008276066742837429,
        0.04904881864786148,
        0.01400465052574873,
        0.10435885936021805,
        -0.020765114575624466
      ]
    },
    {
      "id": "2afc4393",
      "filePath": "05-rag-codebase/src/generator.ts",
      "content": "export async function generate(\n\tquery: string,\n\tresults: RerankResult[]\n): Promise<string> {\n\tconst client = createClient();\n\tconst model = getModel();\n\n\tif (results.length === 0) {\n\t\treturn '未找到相关代码片段，无法回答该问题。';\n\t}\n\n\tconst context = buildContext(results);\n\tconst systemPrompt = buildSystemPrompt(context);\n\n\tconsole.log(`[generator] 基于 ${results.length} 个代码片段生成回答...`);\n\n\tconst response = await client.chat.completions.create({\n\t\tmodel,\n\t\tmessages: [\n\t\t\t{ role: 'system', content: systemPrompt },\n\t\t\t{ role: 'user', content: query },\n\t\t],\n\t\ttemperature: 0.3,\n\t});\n\n\tconst answer = response.choices[0]?.message?.content || '生成回答失败';\n\n\tconsole.log(`[generator] 回答生成完成`);\n\treturn answer;\n}",
      "startLine": 63,
      "endLine": 93,
      "type": "function",
      "name": "generate",
      "embedding": [
        -0.07610161602497101,
        0.06410911679267883,
        0.03510386496782303,
        0.1496777981519699,
        0.015039009042084217,
        0.00036820746026933193,
        0.03540782257914543,
        0.017884794622659683,
        0.07377792149782181,
        -0.009045938961207867,
        -0.01323779858648777,
        -0.07839208841323853,
        -0.0007913271547295153,
        -0.04388881474733353,
        0.053283173590898514,
        0.03251262009143829,
        -0.03160420060157776,
        -0.07185951620340347,
        -0.05215052515268326,
        -0.07661451399326324,
        0.04458912834525108,
        0.0312148779630661,
        0.05700230970978737,
        -0.0050658187828958035,
        0.07004760205745697,
        -0.06040535122156143,
        -0.021360745653510094,
        -0.0205459576100111,
        0.05574319139122963,
        0.05960296466946602,
        -0.002888305578380823,
        0.036290593445301056,
        -0.017553579062223434,
        0.028342444449663162,
        -0.05066380277276039,
        0.10470784455537796,
        -0.040292780846357346,
        -0.05433149263262749,
        0.05466374382376671,
        -0.019173849374055862,
        0.023317858576774597,
        0.09848674386739731,
        -0.002901473781093955,
        -0.07293970137834549,
        0.1122421994805336,
        -0.07171697169542313,
        -0.08788903057575226,
        -0.02499929629266262,
        -0.012592966668307781,
        0.01254968997091055,
        -0.04419027641415596,
        0.051284026354551315,
        -0.04966381564736366,
        -0.02961667813360691,
        0.08966200798749924,
        0.010112998075783253,
        -0.04270302504301071,
        0.0005269753164611757,
        -0.0477459579706192,
        -0.03918968886137009,
        -0.010829988867044449,
        -0.12008190155029297,
        -0.014877467416226864,
        -0.10063204914331436,
        0.03841814398765564,
        -0.03988330066204071,
        -0.015677768737077713,
        0.10702545940876007,
        0.00375032564625144,
        0.011874249204993248,
        -0.04782327264547348,
        -0.02099432423710823,
        -0.0014943387359380722,
        0.018181148916482925,
        -0.024163924157619476,
        0.020771270617842674,
        -0.006889479234814644,
        -0.003613886423408985,
        -0.003998436499387026,
        0.01157258078455925,
        -0.031066086143255234,
        -0.05508628487586975,
        0.01004971843212843,
        0.04441336914896965,
        -0.01657034084200859,
        0.09505508840084076,
        0.03758406266570091,
        -0.009115224704146385,
        0.012234183959662914,
        -0.031357843428850174,
        -0.0609903484582901,
        -0.01613669842481613,
        -0.022271957248449326,
        0.09058241546154022,
        -0.016181254759430885,
        0.07924068719148636,
        0.020313911139965057,
        0.027630914002656937,
        -0.030134553089737892,
        0.03922756388783455,
        0.014018269255757332,
        0.004994709976017475,
        0.050078365951776505,
        -0.058122120797634125,
        -0.061764735728502274,
        -0.014491705223917961,
        -0.019075358286499977,
        0.012004942633211613,
        -0.03747525438666344,
        -0.004728785715997219,
        -0.02987285517156124,
        0.09160783141851425,
        0.00937669537961483,
        0.03196489438414574,
        0.007435848470777273,
        -0.026849282905459404,
        -0.01734958030283451,
        -0.09215014427900314,
        -0.004906476940959692,
        0.06560087203979492,
        0.14307448267936707,
        0.06351001560688019,
        0.010878690518438816,
        0.05025637149810791,
        0.0065367030911147594,
        -0.020609207451343536,
        0.1201389729976654,
        6.41724112759377e-33,
        0.00969733390957117,
        0.030693724751472473,
        0.03347097709774971,
        0.06440598517656326,
        0.10134530812501907,
        0.054540280252695084,
        0.018935633823275566,
        -0.05089367553591728,
        -0.08098253607749939,
        -0.002946796827018261,
        -0.07164306193590164,
        -0.008539186790585518,
        -0.008344564586877823,
        -0.02654854580760002,
        -0.008836551569402218,
        -0.03037451021373272,
        0.012564568780362606,
        -0.011989566497504711,
        0.0749819204211235,
        0.08924921602010727,
        -0.035652004182338715,
        0.03097911737859249,
        0.00369131937623024,
        -0.020565642043948174,
        0.06354775279760361,
        -0.03441032022237778,
        0.018963640555739403,
        0.01510991994291544,
        -0.14243192970752716,
        -0.026366738602519035,
        0.038994722068309784,
        0.031782038509845734,
        -0.011959592811763287,
        0.01437277439981699,
        0.01892414689064026,
        -0.007874730043113232,
        -0.004397925920784473,
        0.0022144585382193327,
        -0.14022278785705566,
        0.008191300556063652,
        0.03769541531801224,
        -0.002683683531358838,
        -0.05284585803747177,
        0.028533028438687325,
        -0.07896661758422852,
        -0.06074804067611694,
        -0.032803963869810104,
        -0.029553428292274475,
        0.07394677400588989,
        0.0069784000515937805,
        -0.0526970699429512,
        0.10222973674535751,
        0.03326799347996712,
        -0.038632187992334366,
        0.09123006463050842,
        -0.010026965290307999,
        0.06049107015132904,
        -0.010895967483520508,
        0.016306962817907333,
        -0.016410531476140022,
        -0.023737864568829536,
        -0.06557345390319824,
        -0.0031266440637409687,
        -0.00902643520385027,
        0.06310898065567017,
        -0.007711680606007576,
        -0.007918528281152248,
        -0.04301375523209572,
        0.06648106873035431,
        -0.05664179101586342,
        0.034942273050546646,
        -0.0691382959485054,
        -0.034955743700265884,
        0.015578304417431355,
        -0.0068167452700436115,
        -0.0017923102714121342,
        -0.1030009537935257,
        0.053889039903879166,
        0.013725139200687408,
        -0.07198993116617203,
        0.009222738444805145,
        -0.06305809319019318,
        -0.12818209826946259,
        0.010197789408266544,
        0.045017629861831665,
        0.05022485554218292,
        -0.005181890446692705,
        -0.054323047399520874,
        -0.002874988131225109,
        0.010327406227588654,
        -0.0584496445953846,
        -0.03357288986444473,
        0.040713872760534286,
        -0.015605156309902668,
        -0.03982340171933174,
        -6.322117920673322e-33,
        0.06670047342777252,
        -0.006478672847151756,
        -0.06492254137992859,
        -0.0371137335896492,
        0.0017473128391429782,
        -0.011751420795917511,
        0.08956023305654526,
        -0.01664925366640091,
        -0.06773693114519119,
        0.015656502917408943,
        0.049107737839221954,
        -0.002285941271111369,
        0.037012357264757156,
        0.05640828236937523,
        0.031772006303071976,
        0.06685177981853485,
        0.03143715485930443,
        -0.036771371960639954,
        0.030578285455703735,
        -0.02371762879192829,
        0.039907701313495636,
        0.055739570409059525,
        -0.047525860369205475,
        0.07056958973407745,
        -0.07608265429735184,
        0.05046507716178894,
        0.018901152536273003,
        -0.009280908852815628,
        -0.02558000758290291,
        -0.08740349858999252,
        0.02327251248061657,
        -0.021904869005084038,
        -0.05977154150605202,
        0.004820845555514097,
        -0.0017855060286819935,
        -0.034106671810150146,
        0.064203180372715,
        0.007433650549501181,
        -0.06933926045894623,
        0.03424285724759102,
        0.022759076207876205,
        -0.026098836213350296,
        -0.08981744945049286,
        0.021890809759497643,
        0.0009712104219943285,
        -0.032836128026247025,
        0.011385220102965832,
        -0.037657398730516434,
        0.04275468736886978,
        -0.014912725426256657,
        0.10867305099964142,
        -0.04862413927912712,
        -0.01858246698975563,
        -0.03737761080265045,
        -0.019117897376418114,
        -0.10583212971687317,
        -0.032144151628017426,
        -0.11901519447565079,
        0.0774591788649559,
        -0.02685796283185482,
        -0.02140737883746624,
        -0.05443080514669418,
        0.08142981678247452,
        -0.0800287127494812,
        -0.019183030351996422,
        -0.046177417039871216,
        -0.020051851868629456,
        0.05616017058491707,
        0.10491054505109787,
        0.030307985842227936,
        -0.039040595293045044,
        -0.0010422351770102978,
        0.0525779202580452,
        0.012778045609593391,
        0.038949064910411835,
        0.005669977515935898,
        -0.060986995697021484,
        -0.06909611076116562,
        0.09502773731946945,
        0.012556375004351139,
        -0.07155274599790573,
        -0.01921323500573635,
        0.04983283579349518,
        0.0777476578950882,
        -0.005990519188344479,
        -0.10250652581453323,
        0.007372905965894461,
        0.07917362451553345,
        0.044674746692180634,
        -0.023655084893107414,
        0.010291391052305698,
        -0.05609225481748581,
        -0.093852199614048,
        0.07239053398370743,
        0.06179087609052658,
        -6.155263321261373e-8,
        -0.11492785066366196,
        -0.008587443269789219,
        -0.09104864299297333,
        0.0065931351855397224,
        0.01636376604437828,
        0.0014179664431139827,
        0.004126579966396093,
        -0.05442678928375244,
        0.028630007058382034,
        -0.02243584766983986,
        -0.06365016102790833,
        0.010412595234811306,
        0.02280629798769951,
        -0.00024719489738345146,
        0.03844385966658592,
        -0.08900760114192963,
        -0.01284715998917818,
        0.06934458017349243,
        -0.004693143535405397,
        -0.11050768941640854,
        0.0667601153254509,
        0.03421667590737343,
        -0.01883024349808693,
        -0.030515853315591812,
        0.06286642700433731,
        -0.03859090805053711,
        -0.02127368375658989,
        0.014454571530222893,
        -0.01022839080542326,
        0.05318978801369667,
        -0.04461174085736275,
        -0.02224697917699814,
        -0.00034665479324758053,
        -0.007797238416969776,
        0.045755915343761444,
        -0.03330413997173309,
        0.05903858318924904,
        -0.08146914094686508,
        0.06936115771532059,
        0.0424121655523777,
        0.10283074527978897,
        0.052131179720163345,
        -0.0057981559075415134,
        0.03795646131038666,
        -0.038183119148015976,
        -0.0844937264919281,
        0.035429615527391434,
        -0.05718153715133667,
        0.0848216786980629,
        -0.010800063610076904,
        0.044897716492414474,
        -0.09355299919843674,
        -0.09178822487592697,
        -0.015125295147299767,
        -0.04405243322253227,
        -0.05550176650285721,
        -0.0300451647490263,
        0.017199689522385597,
        0.008030465804040432,
        0.017906462773680687,
        0.06256749480962753,
        0.007921474054455757,
        -0.010964826680719852,
        -0.04466313123703003
      ]
    },
    {
      "id": "87296a2a",
      "filePath": "05-rag-codebase/src/embedder.ts",
      "content": "// embedder.ts - 向量化模块（本地模型版本）\n// 职责：使用本地 Transformer 模型将文本转换为向量\n// 模型：Xenova/all-MiniLM-L6-v2（首次运行会自动下载，约 80MB）\n\nimport type { CodeChunk, IndexedChunk } from './types.js';\n\n// 动态导入 transformers（ESM 模块）\nlet pipeline: any = null;\nlet extractor: any = null;\n\nconst MODEL_NAME = 'Xenova/all-MiniLM-L6-v2';\n\n/**\n * 初始化 embedding pipeline\n * 首次调用会下载模型，后续调用使用缓存\n */",
      "startLine": 1,
      "endLine": 16,
      "type": "other",
      "embedding": [
        -0.04150601848959923,
        0.02992817386984825,
        0.03331862390041351,
        -0.025049511343240738,
        0.027902306988835335,
        0.01719159260392189,
        -0.06253570318222046,
        0.06764883548021317,
        0.0052569261752069,
        -0.016845814883708954,
        0.06753124296665192,
        -0.036668308079242706,
        -0.04418119788169861,
        -0.041242096573114395,
        -0.03577527031302452,
        0.08048031479120255,
        -0.10822170227766037,
        0.0796646848320961,
        -0.039241790771484375,
        -0.07329723984003067,
        0.02681475505232811,
        0.028537075966596603,
        0.010108000598847866,
        -0.056218404322862625,
        0.08919043838977814,
        0.060610074549913406,
        -0.061401937156915665,
        0.014904600568115711,
        0.07445982843637466,
        -0.03990601375699043,
        0.03261762857437134,
        0.02916286140680313,
        -0.04736072197556496,
        0.06500270217657089,
        0.07481204718351364,
        0.14119817316532135,
        -0.020811492577195168,
        -0.0487600602209568,
        -0.011281104758381844,
        0.021102746948599815,
        0.033309753984212875,
        0.04678589478135109,
        -0.019658135250210762,
        -0.09907834231853485,
        0.014918847009539604,
        -0.08249563723802567,
        -0.044036731123924255,
        -0.08822629600763321,
        -0.0456835962831974,
        -0.02066909149289131,
        -0.04213410243391991,
        -0.013666545040905476,
        -0.04551602900028229,
        0.014720042236149311,
        -0.02281290479004383,
        -0.0347394123673439,
        -0.029049750417470932,
        -0.0441623255610466,
        0.10032977163791656,
        0.002792054321616888,
        -0.015934085473418236,
        0.015926064923405647,
        0.10480684041976929,
        -0.010076461359858513,
        0.01188001036643982,
        -0.06468011438846588,
        -0.010896359570324421,
        0.05879149213433266,
        -0.06336072087287903,
        0.026187684386968613,
        -0.06297934055328369,
        0.029391398653388023,
        -0.04968748986721039,
        0.014582500793039799,
        -0.018617259338498116,
        -0.02932680770754814,
        0.018507948145270348,
        0.007829047739505768,
        0.1050347313284874,
        -0.02166455239057541,
        -0.022433053702116013,
        -0.06989772617816925,
        -0.0011300663463771343,
        0.031630389392375946,
        -0.01993684656918049,
        0.05040709301829338,
        0.009827930480241776,
        -0.04688814654946327,
        0.008088426664471626,
        0.002438099356368184,
        -0.0780525654554367,
        -0.06233823299407959,
        -0.018460789695382118,
        0.09973029792308807,
        0.03931734710931778,
        -0.008798359893262386,
        -0.003639628877863288,
        0.059624236077070236,
        -0.02982126921415329,
        0.060080189257860184,
        -0.03134377673268318,
        -0.004509467165917158,
        0.06192030385136604,
        0.01991938427090645,
        -0.09863477945327759,
        -0.09800491482019424,
        0.019572053104639053,
        0.028184959664940834,
        -0.07175120711326599,
        -0.01466294750571251,
        0.002727484330534935,
        0.009763495996594429,
        -0.0036988575011491776,
        -0.06090385839343071,
        -0.009498067200183868,
        -0.012924586422741413,
        0.05339393764734268,
        -0.025873757898807526,
        -0.05105289816856384,
        0.034804731607437134,
        0.06169350445270538,
        0.0328826941549778,
        -0.05169825628399849,
        0.06513359397649765,
        -0.01825893670320511,
        -0.027322934940457344,
        0.07091975957155228,
        5.189478328626673e-34,
        -0.014368009753525257,
        -0.012645700946450233,
        -0.013061383739113808,
        0.03321126103401184,
        0.030962511897087097,
        -0.0055984980426728725,
        0.0105355279520154,
        0.050512127578258514,
        -0.12525421380996704,
        0.0833166241645813,
        -0.05799354240298271,
        0.002767526311799884,
        -0.09468607604503632,
        0.004940941464155912,
        -0.05413331836462021,
        -0.09641402959823608,
        -0.0038026683032512665,
        -0.022759657353162766,
        -0.03831033408641815,
        0.0114166010171175,
        0.05898793786764145,
        0.007107124663889408,
        -0.07164500653743744,
        -0.04261301830410957,
        -0.11851341277360916,
        -0.02248573675751686,
        0.042251184582710266,
        -0.07700953632593155,
        -0.13450272381305695,
        0.00833749771118164,
        0.0020812712609767914,
        -0.033276163041591644,
        0.05084827542304993,
        0.013373574241995811,
        0.03562052920460701,
        -0.038996580988168716,
        0.07816563546657562,
        0.013433035463094711,
        -0.14435353875160217,
        -0.005167629104107618,
        0.028247544541954994,
        0.036724504083395004,
        -0.08133381605148315,
        -0.04556485638022423,
        0.051756612956523895,
        -0.017689140513539314,
        0.05560511723160744,
        -0.02458621934056282,
        0.0426546111702919,
        -0.01513434574007988,
        -0.030562520027160645,
        0.09755420684814453,
        -0.06223265454173088,
        0.024004703387618065,
        0.13798369467258453,
        -0.009505156427621841,
        0.003312999615445733,
        0.006111765280365944,
        0.04100682958960533,
        -0.038131460547447205,
        -0.0251592006534338,
        0.06789606809616089,
        0.02242111600935459,
        0.01348050870001316,
        0.05605367198586464,
        -0.01715490035712719,
        0.05505510792136192,
        -0.04010934382677078,
        -0.027110649272799492,
        -0.007822010666131973,
        -0.0493045337498188,
        -0.02137615531682968,
        0.04015033319592476,
        -0.005935042165219784,
        0.06778620183467865,
        -0.034850288182497025,
        -0.06706523895263672,
        0.026748111471533775,
        0.008001429960131645,
        -0.11648095399141312,
        -0.02370600216090679,
        -0.04171941056847572,
        0.008591864258050919,
        -0.015651879832148552,
        0.008714641444385052,
        -0.00938784796744585,
        -0.031201738864183426,
        -0.0417570061981678,
        -0.01451915968209505,
        0.004374365787953138,
        -0.03770887851715088,
        -0.07531578093767166,
        -0.10030506551265717,
        -0.09501294791698456,
        0.003448587143793702,
        -4.1948070595490124e-33,
        0.08177170902490616,
        0.03404567763209343,
        -0.029118502512574196,
        0.04998929053544998,
        -0.009568262845277786,
        -0.04624864086508751,
        0.06189144402742386,
        0.05450393632054329,
        0.009692056104540825,
        0.047227732837200165,
        -0.03390398249030113,
        -0.004759063012897968,
        0.028766855597496033,
        -0.0256708525121212,
        0.10251393169164658,
        0.07651297003030777,
        -0.01638408564031124,
        -0.06711128354072571,
        0.025839030742645264,
        0.005294974893331528,
        0.01596946455538273,
        0.09360705316066742,
        -0.05645765736699104,
        0.12806393206119537,
        -0.04534544050693512,
        0.11700421571731567,
        0.037810757756233215,
        0.03118559531867504,
        -0.022082040086388588,
        -0.056148529052734375,
        -0.03899304196238518,
        -0.04064727574586868,
        -0.0560501292347908,
        0.0616157129406929,
        -0.10193948447704315,
        -0.07290001958608627,
        0.012226802296936512,
        0.07421360164880753,
        -0.0031034876592457294,
        -0.006960699334740639,
        -0.015597732737660408,
        0.014107444323599339,
        -0.08629314601421356,
        0.0022679311223328114,
        -0.027486072853207588,
        -0.0494442880153656,
        0.05982189625501633,
        -0.02122846059501171,
        0.04106314107775688,
        -0.050024379044771194,
        -0.010528655722737312,
        -0.041300803422927856,
        -0.05062953382730484,
        -0.014345563016831875,
        -0.03379807993769646,
        -0.025760790333151817,
        -0.0540153943002224,
        -0.08899546414613724,
        -0.036348164081573486,
        0.02005045674741268,
        0.046882499009370804,
        -0.061452943831682205,
        0.008417166769504547,
        -0.10819315165281296,
        0.0037081234622746706,
        -0.04644087329506874,
        -0.032523248344659805,
        0.04439619183540344,
        0.02267991006374359,
        -0.029572073370218277,
        0.030976297333836555,
        -0.012713461183011532,
        0.06801143288612366,
        -0.04316169023513794,
        0.0404028557240963,
        0.010379577055573463,
        -0.028751373291015625,
        -0.019390136003494263,
        0.11439334601163864,
        -0.044651906937360764,
        -0.05576806142926216,
        0.027031628414988518,
        0.05436323955655098,
        0.012882659211754799,
        0.07096419483423233,
        0.016108574345707893,
        -0.029007183387875557,
        0.062312934547662735,
        -0.004719479940831661,
        -0.01705855131149292,
        -0.00017165754979941994,
        0.03326304629445076,
        -0.00958200078457594,
        -0.00611188355833292,
        0.06190754473209381,
        -5.259545332592097e-8,
        -0.07433100044727325,
        -0.029359960928559303,
        -0.09848649799823761,
        -0.05604095757007599,
        -0.06314950436353683,
        -0.07771560549736023,
        0.010354356840252876,
        0.07556818425655365,
        0.021400975063443184,
        -0.05762448534369469,
        0.051876213401556015,
        0.013143644668161869,
        -0.049802180379629135,
        0.0419321209192276,
        0.041745495051145554,
        -0.005812202114611864,
        -0.03730068728327751,
        0.06872715801000595,
        -0.04811621829867363,
        -0.041205376386642456,
        -0.05539992079138756,
        0.04649186134338379,
        0.04835963621735573,
        -0.09648030251264572,
        -0.033019669353961945,
        -0.06634557992219925,
        0.011026686988770962,
        -0.0013510177377611399,
        0.06658328324556351,
        0.04126310721039772,
        -0.06064165383577347,
        0.05883294716477394,
        -0.0066541992127895355,
        -0.02947021648287773,
        -0.06114128604531288,
        0.0213911309838295,
        0.12725715339183807,
        -0.07830823957920074,
        -0.02943188138306141,
        -0.011017757467925549,
        0.05267056077718735,
        0.017673620954155922,
        -0.032519444823265076,
        -0.002524256007745862,
        0.04764709249138832,
        0.052379898726940155,
        0.027528589591383934,
        -0.028504500165581703,
        0.05253138765692711,
        0.05982428044080734,
        0.06595093756914139,
        -0.035273369401693344,
        -0.1107705682516098,
        0.03461815416812897,
        -0.01576053723692894,
        -0.07222563028335571,
        -0.001088788383640349,
        -0.000996745191514492,
        -0.0027420134283602238,
        -0.005652780178934336,
        -0.021077126264572144,
        0.00206159520894289,
        0.061638399958610535,
        -0.023134099319577217
      ]
    },
    {
      "id": "313a03e6",
      "filePath": "05-rag-codebase/src/embedder.ts",
      "content": "async function initPipeline(): Promise<void> {\n\tif (extractor) return;\n\n\tconsole.log(`[embedder] 加载本地模型: ${MODEL_NAME}（首次运行需下载）...`);\n\n\t// 动态导入\n\tconst { pipeline: pipelineFn } = await import('@xenova/transformers');\n\tpipeline = pipelineFn;\n\n\t// 创建 feature-extraction pipeline\n\textractor = await pipeline('feature-extraction', MODEL_NAME, {\n\t\tquantized: true,  // 使用量化版本，更小更快\n\t});\n\n\tconsole.log(`[embedder] 模型加载完成`);\n}\n\n/**\n * 获取单个文本的 embedding\n */",
      "startLine": 17,
      "endLine": 36,
      "type": "function",
      "name": "initPipeline",
      "embedding": [
        -0.10357747226953506,
        0.008759230375289917,
        0.030945224687457085,
        0.0030506609473377466,
        0.04700632393360138,
        0.012901872396469116,
        -0.019182905554771423,
        0.06011159345507622,
        0.037452518939971924,
        -0.039885103702545166,
        -0.009038204327225685,
        -0.06274742633104324,
        -0.050833892077207565,
        -0.0012406542664393783,
        -0.00340093532577157,
        0.06508718430995941,
        -0.04582919552922249,
        0.08252543956041336,
        -0.048793889582157135,
        -0.10596439242362976,
        0.03063989244401455,
        0.0004625667061191052,
        0.007213564123958349,
        -0.029110431671142578,
        0.10016730427742004,
        0.0011153955711051822,
        -0.06274183094501495,
        -0.04554639384150505,
        0.06539338827133179,
        -0.01075758133083582,
        0.009939881972968578,
        -0.004744494799524546,
        -0.0468788743019104,
        0.03604051098227501,
        0.0018301173113286495,
        0.105634905397892,
        -0.03157447651028633,
        -0.04325244203209877,
        -0.006763450801372528,
        -0.011597163043916225,
        0.09997036308050156,
        -0.009176207706332207,
        -0.07743977755308151,
        -0.09830528497695923,
        0.06467679142951965,
        -0.09341104328632355,
        -0.07492703944444656,
        -0.048648588359355927,
        -0.061203133314847946,
        0.08608376979827881,
        -0.05940336361527443,
        0.032026149332523346,
        -0.07041038572788239,
        0.04381132498383522,
        -0.028019530698657036,
        0.0061862352304160595,
        0.025626936927437782,
        -0.007679101545363665,
        0.04940009117126465,
        -0.04137137532234192,
        -0.06854797154664993,
        -0.04543144255876541,
        0.07493236660957336,
        0.0078364796936512,
        0.03504339978098869,
        -0.02292611449956894,
        -0.03867603838443756,
        0.09512502700090408,
        0.009713387116789818,
        0.014859843999147415,
        -0.05293501541018486,
        -0.0359947644174099,
        -0.08724178373813629,
        -0.03361528739333153,
        -0.01056324690580368,
        -0.011958954855799675,
        0.048689816147089005,
        0.039536550641059875,
        0.03787757083773613,
        -0.0031986846588552,
        0.01247812993824482,
        -0.02549823932349682,
        0.027877293527126312,
        -0.012791450135409832,
        -0.006525698583573103,
        0.16097189486026764,
        -0.008213477209210396,
        -0.042728450149297714,
        -0.016356496140360832,
        -0.011163006536662579,
        -0.052985433489084244,
        -0.03774813562631607,
        -0.0377977155148983,
        0.06659950315952301,
        0.03722468018531799,
        -0.007513323333114386,
        -0.010120891965925694,
        0.07436897605657578,
        -0.020386476069688797,
        0.04872514307498932,
        -0.07535646855831146,
        0.038939543068408966,
        0.06618228554725647,
        -0.0018482563318684697,
        -0.09327290207147598,
        -0.07568535208702087,
        0.0074242413975298405,
        -0.03994780033826828,
        -0.056265510618686676,
        -0.037795983254909515,
        0.002079817932099104,
        0.021196437999606133,
        -0.0028274913784116507,
        -0.01848018541932106,
        0.027916496619582176,
        0.008498402312397957,
        0.0333886444568634,
        -0.011520138941705227,
        -0.025264209136366844,
        0.07442118972539902,
        0.037146665155887604,
        0.033536165952682495,
        -0.023209810256958008,
        0.06423168629407883,
        0.016681503504514694,
        -0.025091640651226044,
        0.0953424796462059,
        3.509656585518811e-33,
        -0.016381898894906044,
        -0.03907708451151848,
        0.030826609581708908,
        0.001524582621641457,
        0.07487961649894714,
        0.006644402630627155,
        0.022847289219498634,
        0.027932750061154366,
        -0.11116402596235275,
        0.0794471874833107,
        -0.07211648672819138,
        0.005892174784094095,
        -0.06722619384527206,
        -0.03186066821217537,
        -0.07952697575092316,
        -0.04412476718425751,
        0.005154049955308437,
        -0.05797208473086357,
        0.0398765429854393,
        0.04912804067134857,
        0.025541406124830246,
        0.006903145927935839,
        -0.057479191571474075,
        -0.026542779058218002,
        -0.08898855000734329,
        -0.04777015000581741,
        0.008616992272436619,
        -0.010106218978762627,
        -0.10671769827604294,
        0.0278458409011364,
        0.016275983303785324,
        -0.028736043721437454,
        0.02433650568127632,
        0.01678118109703064,
        -0.02345830388367176,
        -0.05061683803796768,
        0.02233627811074257,
        -0.014575761742889881,
        -0.13244131207466125,
        0.010657317005097866,
        -0.008425559848546982,
        -0.0009719243971630931,
        -0.06250397115945816,
        0.003000599564984441,
        -0.0877971351146698,
        -0.07231051474809647,
        0.012597942724823952,
        -0.02068423293530941,
        0.06796997785568237,
        -0.005548566114157438,
        0.01984480395913124,
        0.11012107878923416,
        -0.010527093894779682,
        -0.03550078719854355,
        0.11421046406030655,
        -0.015027601271867752,
        -0.005226662382483482,
        0.02476780116558075,
        0.050433896481990814,
        0.000637396122328937,
        -0.01369173638522625,
        0.012341860681772232,
        0.029967093840241432,
        0.010817873291671276,
        0.043994687497615814,
        -0.009692159481346607,
        0.010401465930044651,
        -0.029021237045526505,
        0.028820447623729706,
        -0.010363982059061527,
        -0.08040659874677658,
        -0.031254131346940994,
        -0.014041377231478691,
        0.010950400494039059,
        0.08959610760211945,
        -0.009956903755664825,
        -0.07971146702766418,
        0.018899571150541306,
        0.04144188016653061,
        -0.08598653972148895,
        -0.019946688786149025,
        -0.050510019063949585,
        -0.018801134079694748,
        0.08097929507493973,
        0.04177524521946907,
        0.015621201135218143,
        -0.013219350948929787,
        -0.10210134088993073,
        0.008419922553002834,
        -0.002990524983033538,
        -0.05785439908504486,
        -0.024741115048527718,
        -0.05865997076034546,
        -0.03969734534621239,
        0.02191385067999363,
        -5.490136079939924e-33,
        0.1512989103794098,
        0.06598713248968124,
        -0.05287037417292595,
        0.03420984372496605,
        -0.036312252283096313,
        -0.02808804251253605,
        0.07126013189554214,
        0.07439363747835159,
        0.011339081451296806,
        0.03675186634063721,
        0.015792028978466988,
        0.0021401129197329283,
        0.0077696265652775764,
        0.014514202252030373,
        0.06303547322750092,
        0.057725079357624054,
        0.0003276988572906703,
        -0.03805755451321602,
        0.009912683628499508,
        0.026989862322807312,
        0.04761791601777077,
        -0.020184608176350594,
        -0.021188927814364433,
        0.11404040455818176,
        -0.0977221354842186,
        0.08398360759019852,
        0.08614969998598099,
        -0.014344376511871815,
        -0.03592058643698692,
        -0.050864946097135544,
        -0.05691050738096237,
        0.01746407337486744,
        -0.0881013348698616,
        0.018921950832009315,
        -0.08254951238632202,
        -0.08560749143362045,
        0.0723901093006134,
        0.08066700398921967,
        -0.03961383178830147,
        -0.04913033917546272,
        0.04615533724427223,
        0.03794827312231064,
        -0.12675167620182037,
        -0.014511285349726677,
        -0.014582374133169651,
        -0.05518318712711334,
        0.031266555190086365,
        -0.007375779561698437,
        0.05345350503921509,
        -0.039949070662260056,
        0.04075849428772926,
        0.01041235588490963,
        -0.02989836409687996,
        0.008640431798994541,
        -0.01916668377816677,
        -0.004792710766196251,
        0.010104149580001831,
        -0.11644629389047623,
        -0.010163807310163975,
        0.037615690380334854,
        0.0007881091441959143,
        -0.017603959888219833,
        0.010403705760836601,
        -0.153135746717453,
        0.015248962678015232,
        -0.06182022765278816,
        -0.006299659609794617,
        0.02280811406672001,
        0.03768368810415268,
        -0.030833952128887177,
        0.0364510677754879,
        -0.01507498323917389,
        0.03009616583585739,
        0.03966363146901131,
        -0.007476732134819031,
        -0.029178781434893608,
        -0.013257560320198536,
        -0.10376952588558197,
        0.10242251306772232,
        0.018270788714289665,
        -0.06417988985776901,
        -0.009551565162837505,
        0.03635001555085182,
        0.007119267247617245,
        0.08263234049081802,
        0.021625885739922523,
        -0.009581094607710838,
        0.054811153560876846,
        0.04422212392091751,
        -0.045439161360263824,
        0.016231758520007133,
        0.059267282485961914,
        -0.10874387621879578,
        0.06731216609477997,
        0.07401764392852783,
        -5.030490157764689e-8,
        -0.09318777173757553,
        -0.020954679697752,
        -0.0549686923623085,
        -0.016238080337643623,
        -0.056324198842048645,
        -0.005157733801752329,
        0.018299512565135956,
        -0.01211271807551384,
        0.008230576291680336,
        -0.07731132209300995,
        -0.0075983526185154915,
        0.03247672691941261,
        -0.021626563742756844,
        0.030110932886600494,
        0.05999193713068962,
        0.012511995621025562,
        -0.00220204284414649,
        0.06489129364490509,
        -0.01166459172964096,
        -0.05708109587430954,
        -0.011350524611771107,
        0.04851585254073143,
        0.08335160464048386,
        -0.09763713926076889,
        -0.04976242780685425,
        -0.061058856546878815,
        0.008268226869404316,
        0.05835898593068123,
        0.017452191561460495,
        0.02390969544649124,
        -0.04362853243947029,
        0.038077212870121,
        0.014037900604307652,
        -0.026261545717716217,
        -0.03167150169610977,
        0.041689682751894,
        0.12292587757110596,
        -0.08102504909038544,
        0.013178078457713127,
        0.047434139996767044,
        0.07871995121240616,
        0.03758757561445236,
        -0.0013315899996086955,
        -0.03390178829431534,
        0.016678817570209503,
        0.017122624441981316,
        0.06192057952284813,
        0.0067603569477796555,
        0.041490912437438965,
        0.05211887136101723,
        0.07614411413669586,
        -0.058748189359903336,
        -0.10940104722976685,
        0.03932332247495651,
        -0.02150239795446396,
        -0.04226453974843025,
        0.013882236555218697,
        -0.06198444217443466,
        -0.026555705815553665,
        0.008097304031252861,
        0.004573194310069084,
        -0.03960046544671059,
        0.07811102271080017,
        -0.0919252336025238
      ]
    },
    {
      "id": "d5a8a0f0",
      "filePath": "05-rag-codebase/src/embedder.ts",
      "content": "async function getEmbedding(text: string): Promise<number[]> {\n\tawait initPipeline();\n\n\t// 截断过长的文本（模型最大支持 512 tokens）\n\tconst truncatedText = text.slice(0, 2000);\n\n\tconst output = await extractor(truncatedText, {\n\t\tpooling: 'mean',      // 使用 mean pooling\n\t\tnormalize: true,      // 归一化向量\n\t});\n\n\t// 转换为普通数组\n\treturn Array.from(output.data as Float32Array);\n}\n\n/**\n * 批量获取 embeddings\n */",
      "startLine": 37,
      "endLine": 54,
      "type": "function",
      "name": "getEmbedding",
      "embedding": [
        -0.04265635088086128,
        0.04133163392543793,
        -0.01583968847990036,
        0.02859441749751568,
        0.010561761446297169,
        0.031690407544374466,
        0.008214995265007019,
        0.0411536768078804,
        0.04775295779109001,
        -0.05187584459781647,
        -0.03601117059588432,
        0.0008103134459815919,
        -0.046066708862781525,
        0.004623241722583771,
        -0.042343683540821075,
        0.03954191133379936,
        -0.09034343808889389,
        0.06023989990353584,
        -0.05233791470527649,
        -0.07803460955619812,
        0.019116820767521858,
        -0.006824124604463577,
        0.03580435365438461,
        -0.02479013055562973,
        0.08025805652141571,
        0.03927721083164215,
        -0.07336821407079697,
        -0.044389836490154266,
        0.055545732378959656,
        0.05718548223376274,
        0.03760417178273201,
        -0.016306620091199875,
        0.006981805432587862,
        0.030348092317581177,
        -0.0035054159816354513,
        0.030606912449002266,
        -0.058646634221076965,
        -0.03462756797671318,
        -0.003703161608427763,
        0.026264939457178116,
        0.1164088249206543,
        0.06718901544809341,
        -0.07228772342205048,
        -0.01466253213584423,
        0.04989946633577347,
        -0.07506850361824036,
        -0.05105627328157425,
        -0.06601416319608688,
        -0.029656630009412766,
        0.09953427314758301,
        -0.07010806351900101,
        0.0764753520488739,
        -0.0896323174238205,
        0.05005905404686928,
        -0.011502042412757874,
        -0.08451922237873077,
        -0.0013609430752694607,
        -0.026620620861649513,
        0.04699424281716347,
        0.013869489543139935,
        -0.003937992732971907,
        -0.07635986804962158,
        0.1270075887441635,
        -0.011008068919181824,
        0.06962268054485321,
        -0.021167630329728127,
        0.0014535257359966636,
        0.1202320009469986,
        0.014070862904191017,
        0.0396573431789875,
        -0.058106422424316406,
        0.008783501572906971,
        -0.051486823707818985,
        0.04249576851725578,
        -0.0443691648542881,
        -0.024728944525122643,
        -0.03025050275027752,
        -0.03737063705921173,
        0.050652049481868744,
        -0.02215397171676159,
        0.014288271777331829,
        -0.037766244262456894,
        0.0826634094119072,
        0.012332561425864697,
        0.01572258770465851,
        0.11163095384836197,
        -0.003604611149057746,
        0.01607559435069561,
        -0.0476769283413887,
        -0.028068339452147484,
        -0.04098360240459442,
        -0.018182676285505295,
        -0.06272950023412704,
        0.12413516640663147,
        0.009642481803894043,
        -0.0012612327700480819,
        -0.017610574141144753,
        0.03220468387007713,
        -0.017139146104454994,
        -0.0005529585178010166,
        -0.038803428411483765,
        0.016349058598279953,
        0.0531315803527832,
        -0.010019540786743164,
        -0.12358400970697403,
        -0.08270222693681717,
        0.08571261912584305,
        -0.010826816782355309,
        -0.07093505561351776,
        -0.020135723054409027,
        -0.02471260540187359,
        0.002374624367803335,
        -0.004549847450107336,
        -0.02503710798919201,
        -0.0277085043489933,
        -0.06998114287853241,
        -0.00929817371070385,
        -0.05712224915623665,
        0.04495783895254135,
        0.0745197981595993,
        0.013688897714018822,
        0.06168684735894203,
        -0.015138348564505577,
        0.06411337107419968,
        0.02029906027019024,
        0.004780909977853298,
        0.08488593250513077,
        6.89367192671792e-33,
        -0.04701976850628853,
        -0.035116489976644516,
        0.05117424950003624,
        0.021136438474059105,
        0.029478905722498894,
        -0.011162351816892624,
        -0.03712032362818718,
        -0.014596695080399513,
        -0.06751096248626709,
        0.015801172703504562,
        -0.050207167863845825,
        -0.009823910892009735,
        -0.002923693275079131,
        -0.003195198718458414,
        -0.01637345179915428,
        -0.0940680056810379,
        0.05039127171039581,
        -0.026929842308163643,
        0.019333135336637497,
        0.02809499204158783,
        -0.025854967534542084,
        0.028393805027008057,
        0.0071834078989923,
        -0.05198265612125397,
        -0.048323068767786026,
        -0.062148481607437134,
        -0.004424619488418102,
        0.004018822219222784,
        -0.03211425617337227,
        -0.0005097002140246332,
        0.022814705967903137,
        -0.029520675539970398,
        0.034507326781749725,
        -0.05918389931321144,
        0.017627209424972534,
        -0.04408144950866699,
        0.03345450758934021,
        0.039385754615068436,
        -0.13862060010433197,
        0.021854907274246216,
        0.008450028486549854,
        0.023833448067307472,
        -0.03746897354722023,
        -0.008747018873691559,
        -0.09775739163160324,
        -0.03828032687306404,
        0.0316832959651947,
        0.027884412556886673,
        0.04170489311218262,
        -0.018731379881501198,
        -0.0179463978856802,
        0.12267028540372849,
        -0.04112168401479721,
        -0.041062548756599426,
        0.13209810853004456,
        -0.0757872462272644,
        0.035496730357408524,
        0.0000640089056105353,
        0.020970633253455162,
        -0.013321910053491592,
        -0.015772473067045212,
        -0.048235878348350525,
        0.02362164855003357,
        -0.013590913265943527,
        0.020728573203086853,
        0.006774498149752617,
        0.0016890722326934338,
        -0.020237553864717484,
        -0.027028720825910568,
        -0.009706944227218628,
        -0.05431903898715973,
        0.009783630259335041,
        -0.02825300768017769,
        0.024010740220546722,
        -0.04456717148423195,
        0.047911420464515686,
        -0.0810471624135971,
        -0.035053204745054245,
        -0.008766994811594486,
        -0.06470745801925659,
        0.018136659637093544,
        -0.09530501812696457,
        -0.001683832029812038,
        0.001096909400075674,
        -0.019729992374777794,
        0.01865997165441513,
        -0.042518191039562225,
        -0.145738422870636,
        0.06884988397359848,
        -0.009332290850579739,
        -0.07234852015972137,
        -0.08948176354169846,
        -0.052615050226449966,
        -0.06534933298826218,
        -0.007489056326448917,
        -8.792533909625565e-33,
        0.10231997072696686,
        0.07812877744436264,
        -0.07814513146877289,
        0.025752287358045578,
        -0.0009265955886803567,
        0.060928892344236374,
        0.059895798563957214,
        0.102840855717659,
        -0.025754891335964203,
        0.06631132960319519,
        0.0028637396171689034,
        0.007106820587068796,
        -0.0263380017131567,
        -0.001627486664801836,
        0.03992242366075516,
        0.01709616184234619,
        0.04721218720078468,
        0.025358963757753372,
        0.06480394303798676,
        -0.05642349272966385,
        0.04753824323415756,
        -0.008534042164683342,
        0.037816569209098816,
        0.13053490221500397,
        -0.046521350741386414,
        0.13123585283756256,
        0.09853395819664001,
        0.017468130216002464,
        -0.06612637639045715,
        -0.08037039637565613,
        -0.02636353299021721,
        -0.06270095705986023,
        -0.035965364426374435,
        0.0051552243530750275,
        -0.07697176188230515,
        -0.08023787289857864,
        0.10071785748004913,
        0.05425308644771576,
        -0.08024603128433228,
        -0.06897717714309692,
        0.04890874773263931,
        -0.01425811555236578,
        -0.09616993367671967,
        -0.031374044716358185,
        0.004263289738446474,
        -0.0510665625333786,
        -0.03426380455493927,
        0.007819258607923985,
        0.04472498223185539,
        -0.06799980998039246,
        0.012985297478735447,
        -0.03536737710237503,
        -0.020314790308475494,
        -0.016765445470809937,
        0.0012270333245396614,
        -0.0724555253982544,
        -0.019551098346710205,
        -0.06998563557863235,
        0.028249027207493782,
        -0.03592916950583458,
        -0.041722372174263,
        -0.03518473729491234,
        0.0498788058757782,
        -0.12135693430900574,
        0.028753984719514847,
        -0.029891567304730415,
        -0.01871030405163765,
        -0.003846382489427924,
        -0.026803361251950264,
        0.036917224526405334,
        0.00562520744279027,
        -0.003747530048713088,
        0.0032935235649347305,
        0.08691971004009247,
        -0.03527916222810745,
        -0.022965896874666214,
        -0.004591550678014755,
        -0.04113949090242386,
        0.08625912666320801,
        0.029865367338061333,
        0.028022117912769318,
        0.012304623611271381,
        0.07180777192115784,
        0.022043853998184204,
        0.08744961768388748,
        0.022214477881789207,
        -0.0025125055108219385,
        -0.007133129518479109,
        0.02754935994744301,
        0.012697131372988224,
        -0.026389451697468758,
        0.02383395843207836,
        -0.09018968045711517,
        0.04179554805159569,
        0.06935347616672516,
        -5.259569846316481e-8,
        -0.08465007692575455,
        -0.050363361835479736,
        -0.06941152364015579,
        -0.020951183512806892,
        -0.09343717992305756,
        -0.021995723247528076,
        -0.027251312509179115,
        -0.01528068259358406,
        0.03089822269976139,
        -0.10531387478113174,
        0.04264070466160774,
        -0.06368709355592728,
        -0.0058227600529789925,
        0.009038442745804787,
        0.031930845230817795,
        0.0001750981609802693,
        -0.0045356969349086285,
        -0.01499731931835413,
        0.029716424643993378,
        -0.036806292831897736,
        -0.04410218074917793,
        0.08015866577625275,
        0.05117376521229744,
        -0.05335124582052231,
        -0.0046413252130150795,
        -0.0030218795873224735,
        -0.0235177893191576,
        0.06710688769817352,
        0.036493800580501556,
        -0.021788107231259346,
        -0.013363250531256199,
        0.010030703619122505,
        0.039965592324733734,
        -0.019757743924856186,
        -0.029160548001527786,
        0.017318664118647575,
        0.08960212022066116,
        -0.07899018377065659,
        -0.005260133650153875,
        0.042918168008327484,
        0.05560990422964096,
        0.03398622199892998,
        0.03613638877868652,
        -0.032479289919137955,
        0.08271585404872894,
        -0.01660839468240738,
        -0.004510217346251011,
        0.03640814870595932,
        0.044728778302669525,
        -0.008401582017540932,
        0.0784093514084816,
        -0.06904895603656769,
        -0.12599419057369232,
        0.0783243477344513,
        -0.03823557496070862,
        -0.12508508563041687,
        -0.03573578596115112,
        -0.005884747952222824,
        -0.048139624297618866,
        0.057853639125823975,
        0.03672797605395317,
        -0.08278315514326096,
        0.042551200836896896,
        -0.02559511363506317
      ]
    },
    {
      "id": "ff07c367",
      "filePath": "05-rag-codebase/src/embedder.ts",
      "content": "async function getEmbeddings(texts: string[]): Promise<number[][]> {\n\tconst results: number[][] = [];\n\n\tfor (const text of texts) {\n\t\tconst embedding = await getEmbedding(text);\n\t\tresults.push(embedding);\n\t}\n\n\treturn results;\n}\n\n/**\n * 为代码块生成 embedding\n * 使用文件路径 + 名称 + 内容作为输入，增加语义信息\n */",
      "startLine": 55,
      "endLine": 69,
      "type": "function",
      "name": "getEmbeddings",
      "embedding": [
        -0.07525958865880966,
        0.010727634653449059,
        0.015672987326979637,
        0.010550123639404774,
        0.03335678204894066,
        0.08459828048944473,
        0.010052476078271866,
        0.03392602503299713,
        0.07387521117925644,
        -0.039504025131464005,
        -0.002781935967504978,
        0.04458732157945633,
        0.004961666185408831,
        -0.022153537720441818,
        -0.04066764563322067,
        0.03392816334962845,
        -0.0732879713177681,
        0.04188613221049309,
        0.0016577373025938869,
        -0.11739560216665268,
        0.017122307792305946,
        0.014206218533217907,
        0.04547678306698799,
        -0.051091451197862625,
        0.07648488879203796,
        -0.014921212568879128,
        -0.0977766364812851,
        -0.026790635660290718,
        0.08706677705049515,
        0.048801593482494354,
        0.06430228054523468,
        0.01601400040090084,
        0.0010069584241136909,
        0.035859983414411545,
        -0.043959841132164,
        0.03968687728047371,
        -0.08802508562803268,
        -0.03685110807418823,
        -0.03123648464679718,
        0.06123291701078415,
        0.08498635143041611,
        0.07452024519443512,
        -0.04566245898604393,
        -0.039740126579999924,
        0.07406865060329437,
        -0.06864871084690094,
        -0.05852413922548294,
        -0.042423319071531296,
        -0.07759831100702286,
        0.036410845816135406,
        -0.072639100253582,
        0.057682763785123825,
        -0.09048154950141907,
        -0.021128272637724876,
        0.006010063458234072,
        -0.11187475919723511,
        -0.016371028497815132,
        -0.05056118220090866,
        0.042799364775419235,
        0.024056483060121536,
        0.01781708002090454,
        -0.08887071907520294,
        0.10119813680648804,
        -0.039541095495224,
        0.04644828289747238,
        -0.016634318977594376,
        0.0028558322228491306,
        0.13971783220767975,
        0.004127355758100748,
        0.05459935590624809,
        -0.03514816239476204,
        0.022171126678586006,
        -0.019378433004021645,
        0.04796673357486725,
        -0.05710665509104729,
        -0.006814579013735056,
        -0.0611053965985775,
        -0.06167847290635109,
        0.04929836466908455,
        -0.07744739949703217,
        0.02655523456633091,
        -0.05812523141503334,
        0.08503885567188263,
        0.007298420183360577,
        0.0019918472971767187,
        0.11927568167448044,
        0.04707014188170433,
        -0.035083021968603134,
        -0.020990421995520592,
        -0.03700757026672363,
        -0.007654161192476749,
        -0.0064154863357543945,
        -0.011403455398976803,
        0.1312365084886551,
        -0.028875550255179405,
        -0.02009907364845276,
        -0.005339131224900484,
        0.04122716560959816,
        -0.029311329126358032,
        0.013195623643696308,
        -0.04346146807074547,
        0.04370509460568428,
        0.08361306041479111,
        -0.04892857000231743,
        -0.12775520980358124,
        -0.06744398921728134,
        0.0337713360786438,
        -0.016691481694579124,
        -0.05499279126524925,
        -0.047237664461135864,
        -0.015944555401802063,
        0.029779871925711632,
        -0.004962708801031113,
        -0.025252822786569595,
        -0.030080365017056465,
        -0.10863190144300461,
        0.03373896703124046,
        -0.08509738743305206,
        0.06967851519584656,
        0.05616886913776398,
        0.056471072137355804,
        0.08696914464235306,
        -0.010594495572149754,
        0.01978420652449131,
        -0.04779110103845596,
        -0.03644726425409317,
        0.07682348042726517,
        7.594511944253737e-33,
        -0.0030747230630367994,
        -0.02687847800552845,
        0.019167084246873856,
        0.0624772310256958,
        0.029407234862446785,
        -0.05605950951576233,
        -0.029927855357527733,
        -0.0009587242384441197,
        -0.0997868999838829,
        -0.01057825330644846,
        -0.04424847289919853,
        -0.006608637049794197,
        -0.02585705742239952,
        0.0094223627820611,
        -0.05340199172496796,
        -0.042778100818395615,
        0.048184603452682495,
        -0.054578643292188644,
        0.05196457356214523,
        0.030347028747200966,
        -0.03490820899605751,
        0.04220186918973923,
        0.0077454405836761,
        -0.02983500063419342,
        -0.03701901063323021,
        0.029920537024736404,
        0.030605318024754524,
        -0.046424224972724915,
        -0.04112691059708595,
        -0.019683780148625374,
        0.02782047726213932,
        0.004421612713485956,
        0.013813561759889126,
        -0.002997795818373561,
        0.06956139206886292,
        -0.009155018255114555,
        -0.0010511765722185373,
        0.01383496355265379,
        -0.12653031945228577,
        0.006253600586205721,
        0.00927142333239317,
        -0.021485501900315285,
        -0.060237422585487366,
        -0.01938384585082531,
        -0.038336239755153656,
        -0.01987815648317337,
        -0.0009494689293205738,
        0.041866105049848557,
        0.07760313898324966,
        0.00625509163364768,
        -0.042074039578437805,
        0.12457702308893204,
        -0.02067442797124386,
        -0.04029873386025429,
        0.12164581567049026,
        -0.03662462159991264,
        0.02611651085317135,
        0.020992107689380646,
        0.04801816865801811,
        -0.010901129804551601,
        -0.017744189128279686,
        -0.09091554582118988,
        0.010067334398627281,
        -0.034782472997903824,
        0.0071086520329117775,
        -0.0066959611140191555,
        -0.012161235325038433,
        -0.06799674034118652,
        0.008893333375453949,
        0.025930527597665787,
        -0.018696121871471405,
        0.0009686073171906173,
        -0.033187780529260635,
        0.016428709030151367,
        -0.026610571891069412,
        0.02646818943321705,
        -0.11019189655780792,
        -0.027549579739570618,
        -0.016789069399237633,
        0.011671818792819977,
        0.0038173345383256674,
        -0.12728795409202576,
        -0.018804199993610382,
        0.0055834525264799595,
        0.013752428814768791,
        -0.01641005277633667,
        -0.033765438944101334,
        -0.14311793446540833,
        0.10046334564685822,
        0.029265204444527626,
        -0.004120890516787767,
        -0.05879538133740425,
        -0.015745870769023895,
        -0.06122836843132973,
        0.014048654586076736,
        -8.438927576482958e-33,
        0.07768254727125168,
        0.06799545139074326,
        -0.0712563693523407,
        0.03782968968153,
        -0.020305123180150986,
        0.04230612888932228,
        0.04088696464896202,
        0.06831967085599899,
        -0.03975018113851547,
        0.07737895101308823,
        0.03118155524134636,
        -0.007155395578593016,
        0.04348389804363251,
        -0.0003304390702396631,
        0.08279790729284286,
        0.023749370127916336,
        0.03561084344983101,
        0.025261282920837402,
        0.020502924919128418,
        -0.009736220352351665,
        0.0395655483007431,
        0.020036116242408752,
        0.007629971019923687,
        0.10107024013996124,
        -0.0030595615971833467,
        0.13752387464046478,
        0.11645118147134781,
        -0.02851605787873268,
        -0.02201264537870884,
        -0.11442618072032928,
        0.013067006133496761,
        -0.04982360452413559,
        -0.07668036222457886,
        0.02652694657444954,
        -0.06563062965869904,
        -0.04469859227538109,
        0.11042510718107224,
        0.05128081515431404,
        -0.061770498752593994,
        -0.06651141494512558,
        0.04716045781970024,
        0.007317167706787586,
        -0.059082500636577606,
        -0.044152647256851196,
        0.012875446118414402,
        -0.06869727373123169,
        -0.019896412268280983,
        -0.013342808932065964,
        0.04976123571395874,
        -0.07628768682479858,
        0.022429045289754868,
        -0.07065436244010925,
        -0.02812143787741661,
        -0.08725111931562424,
        0.017407596111297607,
        -0.040526196360588074,
        0.005396583117544651,
        -0.04980050027370453,
        0.07655826956033707,
        -0.0028465676587074995,
        -0.004635095130652189,
        -0.05186150595545769,
        0.021477803587913513,
        -0.10061664134263992,
        -0.01113166194409132,
        -0.029798878356814384,
        -0.023248475044965744,
        0.006921779830008745,
        -0.014436549507081509,
        0.00006240994844119996,
        0.004830187652260065,
        -0.000020677369320765138,
        0.011426446959376335,
        0.04767903685569763,
        -0.05442409962415695,
        -0.01045470405369997,
        0.0005791388102807105,
        0.006360558792948723,
        0.06673265993595123,
        -0.012627807445824146,
        0.0428859107196331,
        0.0019700510893017054,
        0.058517713099718094,
        0.022277692332863808,
        0.012539650313556194,
        0.021890604868531227,
        0.007323585916310549,
        0.024792363867163658,
        0.025802453979849815,
        -0.008437559008598328,
        -0.013860542327165604,
        0.020032308995723724,
        -0.06871887296438217,
        0.06884895265102386,
        0.0927523747086525,
        -4.692592625588077e-8,
        -0.1063508614897728,
        -0.09414738416671753,
        -0.0970938578248024,
        -0.06029193475842476,
        -0.07908172160387039,
        -0.018079128116369247,
        -0.02260328270494938,
        -0.030197255313396454,
        -0.019541695713996887,
        -0.026151275262236595,
        0.04710798338055611,
        -0.030538439750671387,
        0.01012575626373291,
        -0.0007645952864550054,
        0.03176359087228775,
        -0.009768557734787464,
        -0.0015847807517275214,
        -0.001921814284287393,
        0.020557118579745293,
        -0.04589017108082771,
        -0.03672458231449127,
        0.09404677152633667,
        0.0818508192896843,
        -0.06995590031147003,
        -0.024036256596446037,
        0.0034505482763051987,
        -0.025726454332470894,
        0.08601822704076767,
        0.011724673211574554,
        -0.02441609464585781,
        -0.00869158934801817,
        0.017717113718390465,
        0.011600540019571781,
        -0.08546889573335648,
        -0.04144344851374626,
        0.024099966511130333,
        0.057265933603048325,
        -0.0556318424642086,
        0.02388003095984459,
        0.022443849593400955,
        0.09181772172451019,
        -0.013900939375162125,
        0.0327606163918972,
        0.009824995882809162,
        0.05247868224978447,
        -0.02387147955596447,
        -0.0024288417771458626,
        -0.011187879368662834,
        0.06321745365858078,
        -0.029708033427596092,
        0.04032927751541138,
        -0.0793549120426178,
        -0.11085580289363861,
        0.03336960822343826,
        -0.05990150570869446,
        -0.0803493782877922,
        -0.026723871007561684,
        0.006199648138135672,
        -0.022339899092912674,
        0.017634276300668716,
        0.02164330519735813,
        -0.041932377964258194,
        0.05509854853153229,
        -0.034002915024757385
      ]
    },
    {
      "id": "6a5a9ab1",
      "filePath": "05-rag-codebase/src/embedder.ts",
      "content": "function prepareText(chunk: CodeChunk): string {\n\tconst parts: string[] = [];\n\n\t// 添加文件路径信息\n\tparts.push(`File: ${chunk.filePath}`);\n\n\t// 添加类型和名称\n\tif (chunk.name) {\n\t\tparts.push(`${chunk.type}: ${chunk.name}`);\n\t}\n\n\t// 添加代码内容\n\tparts.push(chunk.content);\n\n\treturn parts.join('\\n');\n}\n\n/**\n * 为所有 chunks 生成 embeddings\n */",
      "startLine": 70,
      "endLine": 89,
      "type": "function",
      "name": "prepareText",
      "embedding": [
        -0.07091284543275833,
        0.06684164702892303,
        0.043574653565883636,
        0.03542913496494293,
        0.022450126707553864,
        0.010468728840351105,
        0.02662479504942894,
        0.03429039940237999,
        0.03752997890114784,
        -0.021774709224700928,
        0.011853037402033806,
        -0.00883563607931137,
        -0.0013990540755912662,
        -0.0668339878320694,
        0.03702104464173317,
        0.03384682536125183,
        -0.05077009275555611,
        0.01161853689700365,
        -0.03244027495384216,
        -0.07143131643533707,
        -0.014402487315237522,
        0.004135842900723219,
        0.053419820964336395,
        -0.016791151836514473,
        0.1249084547162056,
        0.03117452561855316,
        -0.0248565673828125,
        0.05035146698355675,
        0.09437213838100433,
        0.004349749535322189,
        0.0714225247502327,
        -0.015155483968555927,
        0.06522625684738159,
        0.04202554002404213,
        -0.007989155128598213,
        0.09163815528154373,
        -0.07340984791517258,
        -0.02422880195081234,
        -0.005333620589226484,
        0.04514085128903389,
        0.04053133353590965,
        0.06671732664108276,
        -0.053332019597291946,
        -0.023907970637083054,
        0.05800098925828934,
        -0.008514947257936,
        -0.07338155806064606,
        -0.012871106155216694,
        -0.03670617565512657,
        -0.010943797416985035,
        -0.09833899885416031,
        -0.007191699929535389,
        -0.07432419806718826,
        -0.036125581711530685,
        0.030290313065052032,
        -0.06233083829283714,
        0.030237071216106415,
        -0.06226148456335068,
        0.01769917458295822,
        0.02737007848918438,
        -0.027117135003209114,
        -0.01099102757871151,
        0.07222350686788559,
        -0.06727724522352219,
        0.09783101081848145,
        -0.01604665257036686,
        -0.016820156946778297,
        0.14357948303222656,
        -0.03458068147301674,
        0.03282243758440018,
        -0.03430958837270737,
        0.04423673823475838,
        -0.018211795017123222,
        0.07007405906915665,
        -0.08564794063568115,
        -0.025539172813296318,
        -0.02049006149172783,
        0.010618272237479687,
        0.01135343499481678,
        -0.03375106304883957,
        0.002803484909236431,
        -0.02040824294090271,
        0.08299893140792847,
        -0.052691664546728134,
        -0.012323032133281231,
        0.11962424218654633,
        0.03595989942550659,
        -0.01188135240226984,
        -0.038133591413497925,
        0.017730658873915672,
        -0.026690751314163208,
        -0.042335394769907,
        0.0915500670671463,
        0.08004115521907806,
        -0.024525735527276993,
        0.01971108466386795,
        -0.026313085108995438,
        0.034068308770656586,
        0.005984944757074118,
        0.013326331041753292,
        -0.03130932152271271,
        0.040272604674100876,
        0.04787615314126015,
        -0.06789939850568771,
        -0.12556089460849762,
        -0.07519292831420898,
        0.05012219399213791,
        0.012766549363732338,
        0.03779426962137222,
        -0.006626143120229244,
        -0.01043790578842163,
        0.04013222083449364,
        -0.028578173369169235,
        -0.07204940170049667,
        -0.07750671356916428,
        -0.09741948544979095,
        0.08119776844978333,
        -0.10210069268941879,
        0.05112755298614502,
        0.03727467730641365,
        0.04382886365056038,
        0.033770471811294556,
        -0.09246622771024704,
        0.0003567267849575728,
        -0.03173555061221123,
        -0.0909200981259346,
        0.13924896717071533,
        4.986180345907301e-33,
        -0.025427183136343956,
        -0.008746029809117317,
        -0.0001503175008110702,
        0.0840759128332138,
        0.023551667109131813,
        -0.04704881086945534,
        -0.0733078345656395,
        -0.03589596226811409,
        -0.14280900359153748,
        0.033368926495313644,
        -0.04046787694096565,
        -0.04635201394557953,
        -0.025203857570886612,
        0.05466904863715172,
        -0.0674959197640419,
        -0.060165200382471085,
        -0.0203587394207716,
        -0.05989083647727966,
        0.019034048542380333,
        0.03632691130042076,
        -0.0683075413107872,
        -0.00380490580573678,
        -0.00823167059570551,
        -0.003728690091520548,
        -0.09211865812540054,
        0.009968362748622894,
        0.06529245525598526,
        -0.055183809250593185,
        -0.01313503086566925,
        -0.030679335817694664,
        0.012309190817177296,
        -0.0672076940536499,
        0.011480269022285938,
        0.04458772763609886,
        0.024990571662783623,
        0.02342471107840538,
        -0.03607988357543945,
        0.001866015256382525,
        -0.14198556542396545,
        0.07107129693031311,
        0.06316448003053665,
        -0.023685459047555923,
        -0.023639874532818794,
        0.023912180215120316,
        -0.02008150704205036,
        0.04431745782494545,
        -0.01439494639635086,
        0.0040459828451275826,
        -0.0018006099853664637,
        -0.019009338691830635,
        -0.007962671108543873,
        0.1562967449426651,
        0.032824400812387466,
        0.030616329982876778,
        0.06401514261960983,
        0.0006557527231052518,
        -0.0007050228305160999,
        -0.07062875479459763,
        -0.004285067785531282,
        -0.027789685875177383,
        0.03165030479431152,
        -0.017620282247662544,
        0.00026223709573969245,
        0.043125513941049576,
        0.014807677827775478,
        0.016608990728855133,
        0.057951461523771286,
        -0.0484345480799675,
        0.023005621507763863,
        -0.044858891516923904,
        -0.05217243731021881,
        -0.07716771960258484,
        -0.013960431329905987,
        0.03401417285203934,
        -0.05480328947305679,
        -0.028898822143673897,
        -0.07570813596248627,
        -0.003104469971731305,
        0.03318953514099121,
        -0.060465969145298004,
        0.003836048999801278,
        -0.12581878900527954,
        0.05822402238845825,
        -0.017715295776724815,
        0.0001751383242662996,
        -0.03278440237045288,
        -0.03811490908265114,
        -0.11230725795030594,
        0.06770868599414825,
        -0.006227250676602125,
        -0.04679827764630318,
        -0.05770670250058174,
        -0.0019344096072018147,
        -0.06884828209877014,
        0.05043443664908409,
        -5.4252921381287204e-33,
        0.14521007239818573,
        0.01640566624701023,
        -0.04958073049783707,
        0.01593124493956566,
        -0.030922649428248405,
        0.01726267859339714,
        0.033740147948265076,
        0.1111801266670227,
        0.013875153847038746,
        0.04815128445625305,
        -0.017364826053380966,
        -0.03852903097867966,
        0.04614868015050888,
        -0.06331854313611984,
        0.015391655266284943,
        0.036376290023326874,
        0.00011133674706798047,
        0.03657057508826256,
        0.02933531440794468,
        -0.009446685202419758,
        -0.005482371896505356,
        -0.044321466237306595,
        0.045560967177152634,
        0.0808737650513649,
        -0.010468329302966595,
        0.13490834832191467,
        0.09992415457963943,
        -0.012827498838305473,
        -0.04355499520897865,
        -0.06981082260608673,
        -0.011781594716012478,
        -0.05622829124331474,
        -0.03321905806660652,
        -0.010171075351536274,
        -0.08058195561170578,
        -0.07641430199146271,
        0.06858939677476883,
        0.050980016589164734,
        -0.01734168455004692,
        -0.04574865102767944,
        0.01493978500366211,
        0.0830945074558258,
        -0.05357817932963371,
        0.018804429098963737,
        -0.023728495463728905,
        -0.04275576397776604,
        -0.0006039818399585783,
        0.03364406153559685,
        0.0029929771553725004,
        -0.02167588286101818,
        0.0064824167639017105,
        -0.07084312289953232,
        0.00620373897254467,
        -0.07532153278589249,
        0.0492032952606678,
        -0.04587452486157417,
        -0.04778904467821121,
        -0.06168798357248306,
        -0.03236861526966095,
        -0.009947296231985092,
        -0.029088595882058144,
        0.0374431274831295,
        0.016772443428635597,
        -0.07596119493246078,
        0.05186762660741806,
        -0.03531748056411743,
        0.023065689951181412,
        0.033571477979421616,
        0.013075022026896477,
        -0.05290660262107849,
        0.026246780529618263,
        -0.000925938191358,
        0.05116724967956543,
        0.008614088408648968,
        -0.003192462492734194,
        0.040388599038124084,
        -0.0011771864956244826,
        0.020058590918779373,
        0.05321678891777992,
        0.022261716425418854,
        0.04958692565560341,
        -0.025867022573947906,
        0.027742544189095497,
        0.028829270973801613,
        0.00686200987547636,
        0.01244262047111988,
        -0.05060860142111778,
        0.03837112709879875,
        0.002980911871418357,
        -0.0490187406539917,
        -0.033328767865896225,
        0.053314629942178726,
        0.010705690830945969,
        0.0715048611164093,
        0.040355976670980453,
        -4.575801426653925e-8,
        -0.05309201404452324,
        -0.07414142042398453,
        -0.15942364931106567,
        -0.09011491388082504,
        -0.08862749487161636,
        -0.012157510966062546,
        -0.04097302258014679,
        -0.028590261936187744,
        -0.022852888330817223,
        0.009132903069257736,
        0.048250455409288406,
        0.013875169679522514,
        -0.07942291349172592,
        -0.009741084650158882,
        -0.030437583103775978,
        0.00338292820379138,
        -0.01633630320429802,
        0.09095517545938492,
        -0.018679343163967133,
        -0.0115559883415699,
        -0.017489386722445488,
        0.0737975537776947,
        0.06217183545231819,
        -0.05010107904672623,
        0.049424026161432266,
        0.043142419308423996,
        -0.06024647131562233,
        0.03469894453883171,
        -0.003019002266228199,
        -0.0044167861342430115,
        0.020985791459679604,
        0.011784955859184265,
        0.003631965722888708,
        -0.055137209594249725,
        -0.0208235252648592,
        0.013020480051636696,
        0.07585150748491287,
        -0.0778307169675827,
        0.0366118885576725,
        0.035102248191833496,
        0.13244646787643433,
        -0.013416366651654243,
        0.041033320128917694,
        -0.032759297639131546,
        0.02150360494852066,
        -0.04379962757229805,
        -0.021251879632472992,
        0.016759824007749557,
        0.053768008947372437,
        -0.016198264434933662,
        0.035124409943819046,
        -0.019502123817801476,
        -0.09306490421295166,
        0.015471707098186016,
        -0.033575817942619324,
        -0.0519399493932724,
        0.002703131176531315,
        0.07949131727218628,
        0.016320060938596725,
        -0.01225651241838932,
        0.011098401620984077,
        0.01105549931526184,
        0.10306208580732346,
        -0.010327535681426525
      ]
    },
    {
      "id": "97060f71",
      "filePath": "05-rag-codebase/src/embedder.ts",
      "content": "export async function embedChunks(chunks: CodeChunk[]): Promise<IndexedChunk[]> {\n\tconst indexedChunks: IndexedChunk[] = [];\n\tconst total = chunks.length;\n\n\tconsole.log(`[embedder] 开始处理 ${total} 个 chunks（本地模型）...`);\n\n\t// 初始化模型\n\tawait initPipeline();\n\n\tfor (let i = 0; i < total; i++) {\n\t\tconst chunk = chunks[i];\n\t\tconst text = prepareText(chunk);\n\t\tconst embedding = await getEmbedding(text);\n\n\t\tindexedChunks.push({\n\t\t\t...chunk,\n\t\t\tembedding,\n\t\t});\n\n\t\t// 每 10 个打印一次进度\n\t\tif ((i + 1) % 10 === 0 || i === total - 1) {\n\t\t\tconsole.log(`[embedder] 进度: ${i + 1}/${total}`);\n\t\t}\n\t}\n\n\tconsole.log(`[embedder] 完成，生成了 ${indexedChunks.length} 个带向量的 chunks`);\n\treturn indexedChunks;\n}\n\n/**\n * 为单个查询生成 embedding\n */",
      "startLine": 90,
      "endLine": 121,
      "type": "function",
      "name": "embedChunks",
      "embedding": [
        -0.06499139964580536,
        0.03577614203095436,
        0.0541948527097702,
        0.0421111173927784,
        0.040689025074243546,
        0.001041143899783492,
        0.02300344780087471,
        0.02309224009513855,
        0.07423515617847443,
        -0.023646455258131027,
        -0.014683213084936142,
        -0.0399157851934433,
        0.005197814665734768,
        -0.03923880308866501,
        -0.04043259844183922,
        0.015258438885211945,
        -0.08200515806674957,
        0.06210469827055931,
        -0.07233801484107971,
        -0.12118645012378693,
        0.026663482189178467,
        -0.03000725992023945,
        0.021176418289542198,
        -0.0378837063908577,
        0.10734222084283829,
        0.020559752359986305,
        -0.08233673870563507,
        -0.02415533922612667,
        0.0839698389172554,
        0.022139573469758034,
        0.06897623091936111,
        -0.028716254979372025,
        0.018043318763375282,
        0.04361598566174507,
        -0.031183095648884773,
        0.09897453337907791,
        -0.07567133754491806,
        -0.013382378034293652,
        -0.0261687021702528,
        0.030404439195990562,
        0.038811467587947845,
        0.10702623426914215,
        -0.054888609796762466,
        -0.04950885847210884,
        0.08436509221792221,
        -0.02446604147553444,
        -0.09115040302276611,
        -0.049897342920303345,
        -0.04981401190161705,
        0.03305129334330559,
        -0.0761239156126976,
        0.0232053492218256,
        -0.10408829897642136,
        0.00030652081477455795,
        0.05867920443415642,
        -0.07167208194732666,
        0.00563702080398798,
        -0.04567812383174896,
        0.0031871111132204533,
        -0.0014113724464550614,
        0.01211617048829794,
        -0.05034792050719261,
        0.10716064274311066,
        -0.10459104925394058,
        0.08774210512638092,
        -0.04458130896091461,
        0.011624470353126526,
        0.15441280603408813,
        -0.011391312815248966,
        0.11071019619703293,
        -0.03679044917225838,
        0.09271476417779922,
        -0.051940251141786575,
        0.02165432833135128,
        -0.08085119724273682,
        -0.004324158187955618,
        0.002825814299285412,
        -0.00017508283781353384,
        0.026691552251577377,
        -0.04373408108949661,
        -0.06076515465974808,
        -0.02534766122698784,
        0.09477198868989944,
        -0.055421601980924606,
        -0.05304442346096039,
        0.06781243532896042,
        0.0481233149766922,
        -0.01795799471437931,
        -0.007919950410723686,
        -0.013405506499111652,
        -0.02938922494649887,
        -0.006348489783704281,
        -0.004738675430417061,
        0.08866191655397415,
        0.08079585433006287,
        0.016500910744071007,
        -0.02017025090754032,
        0.09052629768848419,
        -0.01821514591574669,
        0.027177195996046066,
        -0.020894303917884827,
        0.02331363968551159,
        0.04395117610692978,
        -0.05753316730260849,
        -0.08580287545919418,
        -0.09152258187532425,
        0.028849277645349503,
        -0.003434270853176713,
        -0.03951508179306984,
        -0.00438936660066247,
        -0.001988697797060013,
        0.03562717139720917,
        -0.007285521365702152,
        0.017807135358452797,
        -0.02075309492647648,
        -0.05484507977962494,
        0.07500119507312775,
        -0.07375995069742203,
        0.07407090067863464,
        0.06163228675723076,
        0.07733823359012604,
        0.08719857037067413,
        0.002621283521875739,
        0.029138728976249695,
        -0.0011886977590620518,
        -0.049717016518116,
        0.14774677157402039,
        6.957905346150665e-33,
        -0.015191019512712955,
        -0.05631384998559952,
        -0.0028133948799222708,
        0.042288005352020264,
        0.05300804600119591,
        0.005670870654284954,
        -0.017113516107201576,
        0.013986666686832905,
        -0.08559279888868332,
        0.03951064497232437,
        -0.10156219452619553,
        0.024226587265729904,
        -0.05906449258327484,
        0.031031135469675064,
        -0.01225364487618208,
        -0.09621194005012512,
        0.01647283136844635,
        -0.030567903071641922,
        0.018657511100172997,
        0.049983199685811996,
        0.0008783014491200447,
        -0.02885415405035019,
        0.006608367897570133,
        -0.010128851048648357,
        -0.07040921598672867,
        -0.04685872420668602,
        0.031116945669054985,
        -0.023862456902861595,
        -0.10652850568294525,
        -0.009460622444748878,
        0.05439265817403793,
        -0.010301986709237099,
        -0.005678392481058836,
        -0.04866296425461769,
        0.05826345831155777,
        -0.0299987830221653,
        0.029586859047412872,
        0.05010795220732689,
        -0.12701375782489777,
        -0.0005300253396853805,
        0.01254668552428484,
        -0.007472492288798094,
        -0.029011012986302376,
        -0.025453129783272743,
        -0.037661731243133545,
        -0.01624114252626896,
        0.005909142550081015,
        0.013003814034163952,
        0.03908119723200798,
        -0.0005864088889211416,
        -0.04977820813655853,
        0.09441184997558594,
        0.023411858826875687,
        -0.03639289364218712,
        0.07987076044082642,
        -0.017711888998746872,
        0.04410084709525108,
        -0.017312942072749138,
        0.01636752486228943,
        0.023706069216132164,
        -0.05303894355893135,
        -0.04160751402378082,
        0.04938922077417374,
        0.06431176513433456,
        0.003124669659882784,
        0.053621359169483185,
        0.01224326528608799,
        0.0038401694037020206,
        0.038627199828624725,
        -0.004311822354793549,
        -0.029138728976249695,
        -0.020700104534626007,
        0.014250295236706734,
        -0.022948650643229485,
        -0.03828365355730057,
        -0.03371473029255867,
        -0.08729752153158188,
        -0.025247620418667793,
        -0.03579729422926903,
        -0.0935501977801323,
        -0.006071845535188913,
        -0.06755581498146057,
        0.005667968187481165,
        -0.014257061295211315,
        0.02819020301103592,
        0.003435732563957572,
        -0.02478162758052349,
        -0.0893118679523468,
        0.01820998266339302,
        -0.01831640675663948,
        -0.060545969754457474,
        -0.03459653630852699,
        0.016251303255558014,
        -0.1149095967411995,
        0.01896882802248001,
        -7.822161118969859e-33,
        0.08242307603359222,
        0.04895584657788277,
        -0.03997127339243889,
        0.04080810770392418,
        0.0037553608417510986,
        0.02453451044857502,
        0.06401166319847107,
        0.09287262707948685,
        0.00044542382238432765,
        0.049786295741796494,
        -0.07783079147338867,
        -0.030290039256215096,
        0.00032631936483085155,
        0.030200282111763954,
        0.006212564185261726,
        0.04146890342235565,
        -0.01066164206713438,
        0.004574088845402002,
        0.06285937130451202,
        -0.01019599661231041,
        -0.015942363068461418,
        0.008850659243762493,
        0.013442007824778557,
        0.1197548359632492,
        -0.047821078449487686,
        0.1427638977766037,
        0.08448030799627304,
        -0.007162892259657383,
        -0.03168517351150513,
        -0.08806551992893219,
        0.008487861603498459,
        -0.08664464950561523,
        -0.06950505822896957,
        0.016532251611351967,
        -0.08532263338565826,
        -0.08676940947771072,
        0.0827188789844513,
        0.04084793105721474,
        -0.05779191106557846,
        -0.034102484583854675,
        0.05522945150732994,
        -0.012403219938278198,
        -0.049501094967126846,
        -0.013839595951139927,
        0.02250370942056179,
        -0.06631320714950562,
        -0.03262150287628174,
        0.043795328587293625,
        0.017442237585783005,
        -0.08252692222595215,
        0.01399187371134758,
        -0.049766216427087784,
        -0.05967085435986519,
        -0.009210504591464996,
        -0.010270403698086739,
        -0.07569991797208786,
        -0.09871254116296768,
        -0.08023049682378769,
        -0.0015248105628415942,
        -0.01702994853258133,
        -0.06100088730454445,
        -0.03002103604376316,
        0.03326897695660591,
        -0.050357695668935776,
        0.016063222661614418,
        -0.056162551045417786,
        -0.014688896015286446,
        -0.017035208642482758,
        0.0041063083335757256,
        0.016637830063700676,
        0.0409466028213501,
        0.020866015926003456,
        0.04730522632598877,
        -0.011672417633235455,
        0.00326274405233562,
        0.028718996793031693,
        -0.01122822891920805,
        -0.005247635301202536,
        0.08460649847984314,
        0.05568651482462883,
        -0.04890196770429611,
        0.027028964832425117,
        0.03999485820531845,
        -0.02292395383119583,
        -0.007872999645769596,
        0.01972375623881817,
        -0.0025277596432715654,
        0.08698122203350067,
        0.003316338174045086,
        -0.025607014074921608,
        -0.031082985922694206,
        0.01978115923702717,
        -0.06021229550242424,
        0.046900469809770584,
        0.07188080996274948,
        -5.148802273424735e-8,
        -0.04527315869927406,
        -0.03924771398305893,
        -0.0880429819226265,
        0.00030023613362573087,
        -0.056674350053071976,
        -0.10090339183807373,
        0.000016148414943017997,
        0.012389234267175198,
        -0.03306133300065994,
        -0.05894148722290993,
        0.05007851868867874,
        0.002446788130328059,
        -0.055101100355386734,
        0.022000648081302643,
        -0.016125742346048355,
        -0.035845592617988586,
        -0.015032066032290459,
        0.00476466491818428,
        -0.0009117528097704053,
        -0.006982935126870871,
        -0.03448198363184929,
        0.07442690432071686,
        0.05375887453556061,
        -0.08167589455842972,
        0.010632669553160667,
        -0.051892057061195374,
        -0.015884827822446823,
        0.07144466787576675,
        0.0272951852530241,
        0.006407516077160835,
        0.0368158221244812,
        0.04342013597488403,
        0.04042711481451988,
        -0.021412251517176628,
        -0.03773222863674164,
        -0.04513847827911377,
        0.06732916831970215,
        -0.04763534292578697,
        0.004343888256698847,
        0.037604913115501404,
        0.08319618552923203,
        -0.012445541098713875,
        0.07134203612804413,
        -0.038558632135391235,
        0.05198555439710617,
        -0.02614533342421055,
        -0.04413611441850662,
        0.00799579918384552,
        0.08829893171787262,
        0.0040543898940086365,
        0.01998651586472988,
        -0.029574790969491005,
        -0.11075747013092041,
        0.045593246817588806,
        0.03972182050347328,
        -0.09712063521146774,
        -0.027008509263396263,
        -0.03435429185628891,
        0.05476009100675583,
        0.05422694981098175,
        0.013514762744307518,
        -0.06532524526119232,
        0.039419230073690414,
        -0.05022206902503967
      ]
    },
    {
      "id": "0deff23b",
      "filePath": "05-rag-codebase/src/embedder.ts",
      "content": "export async function embedQuery(query: string): Promise<number[]> {\n\tawait initPipeline();\n\treturn getEmbedding(query);\n}",
      "startLine": 122,
      "endLine": 126,
      "type": "function",
      "name": "embedQuery",
      "embedding": [
        -0.08512432873249054,
        -0.006538080051541328,
        -0.03140922635793686,
        0.02540476620197296,
        0.0006982504273764789,
        0.07569359987974167,
        -0.051668696105480194,
        0.07067360728979111,
        0.038326311856508255,
        0.0029960942920297384,
        -0.07759936153888702,
        0.008905809372663498,
        -0.053733423352241516,
        -0.059001993387937546,
        -0.05209900811314583,
        0.032313358038663864,
        -0.029485635459423065,
        0.025685355067253113,
        -0.0022486508823931217,
        -0.08080431818962097,
        -0.03387303277850151,
        0.026556864380836487,
        0.024549752473831177,
        -0.051182083785533905,
        0.06437277048826218,
        -0.06066277250647545,
        -0.0638192668557167,
        -0.028070127591490746,
        0.05950881168246269,
        -0.004108869936317205,
        0.03230709955096245,
        -0.001828522770665586,
        -0.08542488515377045,
        0.028917865827679634,
        -0.001110452227294445,
        0.0314863882958889,
        -0.006635900121182203,
        -0.019007690250873566,
        -0.014408033341169357,
        0.002580020809546113,
        0.13012288510799408,
        0.06317693740129471,
        -0.06367510557174683,
        -0.06448298692703247,
        0.023012438789010048,
        -0.10816679894924164,
        -0.05248386412858963,
        -0.04937571659684181,
        -0.038317132741212845,
        0.0926915854215622,
        -0.09039319306612015,
        0.05249178782105446,
        -0.08929967135190964,
        -0.02456451952457428,
        -0.007164929062128067,
        -0.09234346449375153,
        -0.016582708805799484,
        -0.020036112517118454,
        0.03830202296376228,
        0.0218187402933836,
        -0.012106425128877163,
        -0.10171192139387131,
        0.10346966236829758,
        -0.005737712141126394,
        0.048967793583869934,
        -0.013796878978610039,
        -0.018812809139490128,
        0.09109334647655487,
        0.03797472268342972,
        -0.0031019796151667833,
        -0.05754978209733963,
        -0.038351185619831085,
        -0.08363267034292221,
        -0.0019078169716522098,
        -0.016916463151574135,
        0.0015249955467879772,
        -0.04124554991722107,
        0.0017054473282769322,
        0.06349462270736694,
        -0.027817340567708015,
        0.029929975047707558,
        -0.032239045947790146,
        0.010394865646958351,
        0.01318307127803564,
        0.039201684296131134,
        0.0958574041724205,
        0.06603556126356125,
        -0.054255273193120956,
        -0.009969471953809261,
        -0.053208932280540466,
        -0.042809903621673584,
        -0.007001322694122791,
        -0.059059981256723404,
        0.09243138879537582,
        -0.026578795164823532,
        -0.017979884520173073,
        -0.016648069024086,
        0.0800391286611557,
        0.0054474021308124065,
        0.0006608131225220859,
        -0.06577032804489136,
        0.027326902374625206,
        0.06702685356140137,
        0.002064645988866687,
        -0.11738423258066177,
        -0.07088880985975266,
        0.07328629493713379,
        0.011124949902296066,
        -0.03979139402508736,
        -0.034278012812137604,
        -0.03456692025065422,
        0.06335730105638504,
        0.013388785533607006,
        -0.033601921051740646,
        -0.001003465848043561,
        -0.06114702671766281,
        0.030407171696424484,
        -0.04560713842511177,
        0.048719100654125214,
        0.05497443303465843,
        0.06673548370599747,
        0.08400624990463257,
        0.0020995507948100567,
        0.021181296557188034,
        -0.0164633896201849,
        -0.01852790266275406,
        0.12827149033546448,
        3.885503271778975e-33,
        -0.0022988447453826666,
        -0.07688304036855698,
        0.04407340660691261,
        0.013230476528406143,
        0.07166551798582077,
        0.022508298978209496,
        0.011606002226471901,
        0.03258487954735756,
        -0.07235979288816452,
        0.0684824213385582,
        -0.03597116097807884,
        -0.04214901477098465,
        -0.006781760137528181,
        -0.004487579222768545,
        -0.06286057829856873,
        -0.019990434870123863,
        -0.012289945036172867,
        -0.08508796989917755,
        0.016722753643989563,
        0.07763150334358215,
        -0.03151799738407135,
        -0.0011674140114337206,
        -0.022211791947484016,
        -0.00920642726123333,
        -0.006533623673021793,
        0.004509735852479935,
        0.024475237354636192,
        0.02391352504491806,
        -0.06687740236520767,
        0.008671442978084087,
        0.02942657843232155,
        -0.037767790257930756,
        -0.016473127529025078,
        -0.024954108521342278,
        0.012231147848069668,
        -0.037486132234334946,
        -0.015428096055984497,
        0.026384152472019196,
        -0.14702929556369781,
        0.01604504883289337,
        0.029501017183065414,
        -0.03605649992823601,
        -0.08993197232484818,
        0.0044753290712833405,
        -0.07718707621097565,
        -0.07661549001932144,
        0.0029764114879071712,
        0.029435595497488976,
        0.0940713882446289,
        -0.003998822532594204,
        -0.018984751775860786,
        0.13197572529315948,
        0.016376880928874016,
        -0.10326702892780304,
        0.12544362246990204,
        -0.04714726656675339,
        0.008618215098977089,
        0.046879444271326065,
        0.08560581505298615,
        0.004244942683726549,
        -0.04329635947942734,
        -0.04825180396437645,
        -0.004817478824406862,
        -0.06407139450311661,
        0.0006013652309775352,
        0.00989163015037775,
        -0.00883101113140583,
        -0.04092999920248985,
        0.03060399740934372,
        0.0017848977586254478,
        0.022972913458943367,
        -0.027729546651244164,
        0.0007498670602217317,
        0.023440461605787277,
        0.05678984895348549,
        0.03218366205692291,
        -0.10366172343492508,
        0.018150504678487778,
        0.047474201768636703,
        0.0017864399123936892,
        -0.017994187772274017,
        -0.09912918508052826,
        -0.03777952119708061,
        0.07586508244276047,
        0.04780581220984459,
        -0.05011372268199921,
        -0.0372752845287323,
        -0.10163743793964386,
        0.06465679407119751,
        0.03804990276694298,
        -0.0074375388212502,
        -0.054000601172447205,
        -0.030316408723592758,
        -0.017479976639151573,
        0.018341708928346634,
        -5.1024661245623956e-33,
        0.1329771727323532,
        0.019910970702767372,
        -0.07631727308034897,
        0.030831633135676384,
        -0.05426120385527611,
        0.01720033772289753,
        0.056736767292022705,
        0.08683506399393082,
        -0.01786903105676174,
        0.11566052585840225,
        0.045473262667655945,
        0.004000253044068813,
        0.028593117371201515,
        0.021231990307569504,
        0.06956834346055984,
        0.059740353375673294,
        0.005948113743215799,
        -0.03738783672451973,
        0.04727887362241745,
        -0.001818360178731382,
        0.043417274951934814,
        -0.002073875395581126,
        0.04793515428900719,
        0.09004475921392441,
        -0.05211890488862991,
        0.11136900633573532,
        0.13389252126216888,
        -0.00003201878644176759,
        -0.055691588670015335,
        -0.06240997090935707,
        0.0021698956843465567,
        -0.032922420650720596,
        -0.047102659940719604,
        -0.028134074062108994,
        -0.08995728939771652,
        -0.03576023876667023,
        0.11172928661108017,
        0.06187285855412483,
        -0.07285644114017487,
        -0.04989982396364212,
        0.04095655679702759,
        0.018384620547294617,
        -0.06737236678600311,
        0.003307305509224534,
        0.0058172838762402534,
        -0.07279527932405472,
        0.006861051078885794,
        -0.00571306049823761,
        0.043533917516469955,
        -0.019938651472330093,
        0.043687716126441956,
        0.008984414860606194,
        0.005861125886440277,
        -0.03354743495583534,
        0.024115275591611862,
        -0.009468438103795052,
        -0.007360120303928852,
        -0.054460640996694565,
        0.054760318249464035,
        0.029139645397663116,
        0.015322358347475529,
        -0.032864708453416824,
        0.025596318766474724,
        -0.16121938824653625,
        0.03637490049004555,
        -0.019738297909498215,
        -0.03343140706419945,
        -0.0033748464193195105,
        -0.024203330278396606,
        0.027281763032078743,
        -0.02135886251926422,
        -0.03988977521657944,
        0.04835191369056702,
        0.04875940829515457,
        0.011506796814501286,
        0.0010049138218164444,
        0.028869565576314926,
        -0.022045360878109932,
        0.1196737140417099,
        -0.009192904457449913,
        0.0021507747005671263,
        -0.033219531178474426,
        0.040703773498535156,
        -0.019073884934186935,
        0.042968615889549255,
        -0.00014240748714655638,
        -0.025375640019774437,
        0.027193225920200348,
        0.0336683988571167,
        -0.0006824542069807649,
        0.02489244006574154,
        -0.019799387082457542,
        -0.12704822421073914,
        0.021466901525855064,
        0.09310414642095566,
        -3.308882767782961e-8,
        -0.07872013002634048,
        0.01226256787776947,
        0.0008603079477325082,
        -0.0402047261595726,
        -0.014953041449189186,
        -0.012796505354344845,
        0.009583009406924248,
        0.019053583964705467,
        -0.023188645020127296,
        -0.007514639291912317,
        0.046476978808641434,
        0.01600520871579647,
        0.04448219761252403,
        0.020064232870936394,
        0.06590176373720169,
        -0.006692001596093178,
        -0.0010560821974650025,
        -0.012592562474310398,
        -0.019762227311730385,
        -0.07145886868238449,
        -0.09186530113220215,
        0.06190111115574837,
        0.08082851022481918,
        -0.0690649077296257,
        -0.01487615704536438,
        -0.012780573219060898,
        0.038146279752254486,
        0.05829489976167679,
        0.06071489676833153,
        -0.034598611295223236,
        -0.0731114000082016,
        0.037862423807382584,
        0.01984598860144615,
        -0.09145396202802658,
        -0.09592548757791519,
        -0.006019080523401499,
        0.0607575923204422,
        -0.05457912012934685,
        0.0019965097308158875,
        -0.01014759112149477,
        0.04642151668667793,
        0.010227663442492485,
        0.05769115686416626,
        -0.02891102246940136,
        0.012551614083349705,
        0.032871682196855545,
        -0.0073456005193293095,
        0.04705626890063286,
        0.022980090230703354,
        0.006077534984797239,
        0.009138626977801323,
        -0.10208889096975327,
        -0.0943884551525116,
        0.04785347729921341,
        -0.058981966227293015,
        -0.04530627653002739,
        -0.013248004950582981,
        -0.05001787468791008,
        -0.012372107245028019,
        0.012427627108991146,
        0.002559489803388715,
        -0.043557897210121155,
        0.05312582477927208,
        -0.030241139233112335
      ]
    },
    {
      "id": "c382ab3a",
      "filePath": "llm-service/examples/basic.ts",
      "content": "/**\n * @ai-agent/llm-service 使用示例\n *\n * 运行方式:\n * 1. pnpm install\n * 2. pnpm build\n * 3. OPENAI_API_KEY=sk-xxx node --experimental-specifier-resolution=node examples/basic.js\n */\n\nimport { UnifiedLLMClient, OpenAIProvider, CostTracker, RateLimiter, Logger } from '../src/index.js'",
      "startLine": 1,
      "endLine": 11,
      "type": "other",
      "embedding": [
        -0.029330728575587273,
        -0.040223151445388794,
        -0.07619968801736832,
        0.012034352868795395,
        0.1105104610323906,
        -0.045663852244615555,
        -0.03908763825893402,
        0.03461061790585518,
        0.003630964085459709,
        0.06254217028617859,
        0.029869014397263527,
        -0.03435926139354706,
        -0.021863924339413643,
        0.0016349413199350238,
        0.08499449491500854,
        0.06968293339014053,
        0.03192797675728798,
        0.025049963966012,
        0.04337289184331894,
        -0.0405157133936882,
        0.006194570101797581,
        -0.006306384224444628,
        0.04992368444800377,
        0.00525951012969017,
        -0.02186940796673298,
        0.007685694377869368,
        0.023199550807476044,
        0.05195808410644531,
        0.016616355627775192,
        -0.017502842471003532,
        0.02145518735051155,
        0.013330711051821709,
        -0.0019708143081516027,
        0.031042594462633133,
        0.041248220950365067,
        0.08898676931858063,
        -0.08633721619844437,
        -0.08455704152584076,
        -0.06135706603527069,
        -0.03724126145243645,
        0.12985827028751373,
        0.011411133222281933,
        -0.013952607288956642,
        -0.07094419002532959,
        0.11081910133361816,
        0.01733963005244732,
        -0.08833307772874832,
        -0.03316502645611763,
        -0.031183864921331406,
        0.02173936739563942,
        -0.0746607854962349,
        -0.036788128316402435,
        -0.02855747751891613,
        -0.0956001728773117,
        -0.013929354958236217,
        -0.0004182937555015087,
        -0.01654704101383686,
        0.024744851514697075,
        -0.025991888716816902,
        -0.062107887119054794,
        0.014771276153624058,
        -0.07694102823734283,
        0.013343562372028828,
        -0.040818531066179276,
        0.06374312192201614,
        0.04082567244768143,
        -0.036791086196899414,
        0.06872908771038055,
        0.02820122241973877,
        -0.055619288235902786,
        0.04068553075194359,
        -0.05771762132644653,
        -0.02089211344718933,
        -0.02961023896932602,
        -0.10376237332820892,
        -0.03608448803424835,
        -0.052495650947093964,
        0.09471175819635391,
        0.08636125177145004,
        -0.03961799666285515,
        0.000047725563490530476,
        -0.061531201004981995,
        0.0068299113772809505,
        0.07949239760637283,
        -0.015200373716652393,
        0.08306199312210083,
        0.02564528025686741,
        -0.0331689827144146,
        0.05047993361949921,
        -0.03398890420794487,
        0.04388376697897911,
        0.007810893002897501,
        -0.10061748325824738,
        0.011508937925100327,
        0.011383255012333393,
        0.011645033955574036,
        -0.07458759844303131,
        0.001133065321482718,
        -0.04877110943198204,
        0.04792787507176399,
        -0.04219427704811096,
        -0.007325255777686834,
        -0.010176684707403183,
        0.08359155803918839,
        -0.06434635818004608,
        -0.02964327670633793,
        0.038346730172634125,
        0.02775600738823414,
        0.047047145664691925,
        0.07684876769781113,
        0.06613808870315552,
        0.03160654753446579,
        0.037803441286087036,
        -0.005442009773105383,
        0.08393430709838867,
        -0.03760919347405434,
        0.04642242565751076,
        -0.03326064348220825,
        0.06549292802810669,
        0.08506986498832703,
        -0.03066650964319706,
        -0.030418748036026955,
        -0.07296940684318542,
        0.01608133502304554,
        0.023546867072582245,
        0.027667345479130745,
        0.06699768453836441,
        4.208125410543829e-33,
        0.03302383050322533,
        -0.0013370992382988334,
        0.002805743832141161,
        0.010541139170527458,
        0.09530878812074661,
        0.037044405937194824,
        0.06956665962934494,
        0.02076890505850315,
        -0.08080685138702393,
        0.0261528380215168,
        -0.12203779816627502,
        0.05890217050909996,
        -0.0499112606048584,
        -0.0019204944837838411,
        -0.052470773458480835,
        -0.12588568031787872,
        -0.011895153671503067,
        0.017435798421502113,
        0.10523993521928787,
        -0.0400790311396122,
        0.019037315621972084,
        0.013339783996343613,
        0.019274478778243065,
        -0.016787590458989143,
        -0.014229126274585724,
        0.07596784085035324,
        0.03572842478752136,
        -0.052229300141334534,
        0.08882059156894684,
        0.021300993859767914,
        0.0979217141866684,
        0.045256562530994415,
        -0.03619570657610893,
        0.03594633936882019,
        -0.043657153844833374,
        -0.01846253126859665,
        -0.12223517894744873,
        0.030767854303121567,
        -0.10661131143569946,
        -0.03494966775178909,
        -0.06768705695867538,
        0.044622257351875305,
        -0.05142888426780701,
        -0.08714389055967331,
        -0.1420566588640213,
        -0.02945021539926529,
        0.004057347308844328,
        0.003196124453097582,
        0.12140102684497833,
        -0.02591068297624588,
        -0.036073438823223114,
        -0.00028906544321216643,
        -0.0791626051068306,
        -0.03493986651301384,
        0.0580296516418457,
        -0.05632647126913071,
        -0.0037924195639789104,
        -0.009374266490340233,
        -0.02046784944832325,
        -0.054735518991947174,
        0.019100002944469452,
        -0.04376373067498207,
        -0.006372405681759119,
        -0.006281592883169651,
        0.0872763842344284,
        0.03569751977920532,
        -0.07020150125026703,
        0.020592067390680313,
        0.04942764714360237,
        0.0006827796460129321,
        0.06779681146144867,
        -0.03450999781489372,
        0.027289526537060738,
        0.05050158500671387,
        0.006584188435226679,
        -0.03521762415766716,
        0.011461617425084114,
        0.028712160885334015,
        -0.02347598224878311,
        -0.03191395848989487,
        -0.03996685519814491,
        -0.008017338812351227,
        0.000042224917706334963,
        0.003931633196771145,
        0.0666813850402832,
        -0.050321489572525024,
        -0.027130885049700737,
        0.011914203874766827,
        0.044697679579257965,
        0.029221830889582634,
        -0.029362013563513756,
        -0.033627159893512726,
        -0.03798873350024223,
        0.06729963421821594,
        -0.09762994945049286,
        -3.3255142934365455e-33,
        -0.06312496960163116,
        0.01147961150854826,
        -0.058492936193943024,
        0.09488227218389511,
        -0.024514108896255493,
        -0.06164100766181946,
        -0.06345926225185394,
        0.03992073982954025,
        0.05318420007824898,
        0.14932255446910858,
        0.04510452598333359,
        -0.021254757419228554,
        0.031292133033275604,
        -0.012871978804469109,
        0.017090125009417534,
        -0.0129432687535882,
        -0.030299151316285133,
        0.014025540091097355,
        0.016357190907001495,
        0.0017521997215226293,
        -0.07935439795255661,
        0.05324535444378853,
        -0.017322750762104988,
        -0.013078726828098297,
        0.015638699755072594,
        0.07923794537782669,
        0.0981057807803154,
        0.05236391723155975,
        -0.05458633974194527,
        -0.08715108036994934,
        0.005030091851949692,
        0.005336396396160126,
        -0.11846817284822464,
        0.05945374816656113,
        -0.08412286639213562,
        0.0421566441655159,
        0.04640373960137367,
        0.08286326378583908,
        0.01894921250641346,
        -0.031127745285630226,
        0.019467828795313835,
        -0.042969636619091034,
        -0.09250736981630325,
        -0.027512546628713608,
        -0.012524395249783993,
        -0.09137628972530365,
        -0.006935715675354004,
        -0.0092232720926404,
        0.022281814366579056,
        -0.1148642897605896,
        -0.0059311967343091965,
        -0.05346439778804779,
        0.06175363436341286,
        -0.027313223108649254,
        -0.08312669396400452,
        0.02084972895681858,
        0.09671041369438171,
        0.015260170213878155,
        -0.049090974032878876,
        -0.04432879760861397,
        0.04201371595263481,
        -0.0781935527920723,
        -0.06014780327677727,
        0.0015103548066690564,
        -0.012600066140294075,
        0.03891885280609131,
        0.024235233664512634,
        0.06653070449829102,
        0.021662501618266106,
        -0.06645507365465164,
        -0.04200882092118263,
        -0.008693679235875607,
        0.039827656000852585,
        0.05596332997083664,
        -0.009531006217002869,
        0.015106377191841602,
        -0.03987798094749451,
        0.03381137549877167,
        0.10070597380399704,
        -0.06956790387630463,
        -0.008336528204381466,
        -0.0017166549805551767,
        -0.025469785556197166,
        0.05211290717124939,
        -0.020863255485892296,
        -0.033836349844932556,
        0.11617549508810043,
        0.02762179635465145,
        0.01844978705048561,
        0.04246780276298523,
        -0.029061302542686462,
        0.05317340046167374,
        0.005846700165420771,
        0.06047492474317551,
        0.03694203495979309,
        -4.6496438699250575e-8,
        -0.08765436708927155,
        -0.09923955053091049,
        -0.046568937599658966,
        0.050617869943380356,
        0.03213991969823837,
        -0.024269290268421173,
        0.00732904439792037,
        0.05743497237563133,
        0.02723218873143196,
        0.02407626248896122,
        0.04213480278849602,
        -0.008387433364987373,
        -0.10066378116607666,
        0.0028821295127272606,
        0.05041421204805374,
        -0.03379853069782257,
        -0.011745204217731953,
        0.0963001698255539,
        -0.03206150606274605,
        -0.05058054253458977,
        -0.016819220036268234,
        0.02612394094467163,
        0.06472910195589066,
        -0.09067249298095703,
        0.06961619853973389,
        -0.03701644390821457,
        -0.005231146700680256,
        0.05730237066745758,
        -0.009149088524281979,
        0.009143979288637638,
        -0.06810961663722992,
        -0.019095858559012413,
        0.02850756049156189,
        -0.030281195417046547,
        -0.0230471920222044,
        0.05443622171878815,
        0.009005844593048096,
        -0.030552109703421593,
        0.033981144428253174,
        -0.03249528631567955,
        -0.04248450696468353,
        0.021446337923407555,
        -0.029704459011554718,
        -0.005823618732392788,
        0.018263107165694237,
        0.017152849584817886,
        -0.08522620052099228,
        -0.030524926260113716,
        0.009893112815916538,
        -0.005525414831936359,
        0.02478446438908577,
        0.00045972285442985594,
        0.014312611892819405,
        0.017468305304646492,
        -0.010347983799874783,
        -0.005821702536195517,
        0.03165796026587486,
        -0.0657845139503479,
        -0.03851767256855965,
        0.026261968538165092,
        0.06014171987771988,
        -0.015332476235926151,
        -0.012436620891094208,
        -0.0443655326962471
      ]
    },
    {
      "id": "3e9dcba5",
      "filePath": "llm-service/examples/basic.ts",
      "content": "async function main() {\n\tconst apiKey = process.env.OPENAI_API_KEY\n\tif (!apiKey) {\n\t\tconsole.error('Error: OPENAI_API_KEY environment variable is required')\n\t\tprocess.exit(1)\n\t}\n\n\t// 创建拦截器\n\tconst costTracker = new CostTracker()\n\tconst rateLimiter = new RateLimiter({ maxRequestsPerMinute: 10 })\n\tconst logger = new Logger()\n\n\t// 创建客户端\n\tconst client = new UnifiedLLMClient(\n\t\tnew OpenAIProvider({ apiKey }),\n\t\t[rateLimiter, costTracker, logger]\n\t)\n\n\t// 发送请求\n\tconst response = await client.chat({\n\t\tmodel: 'mimo-v2-flash',\n\t\tmessages: [\n\t\t\t{ role: 'user', content: 'Say hello in Chinese' }\n\t\t],\n\t\ttemperature: 0.7,\n\t\tstream: false,\n\t})\n\n\tconsole.log('\\n--- Response ---')\n\tconsole.log('Content:', response.content)\n\tconsole.log('Tokens:', response.usage.totalTokens)\n\tconsole.log('Cost: $' + response.cost.totalCost.toFixed(6))\n\tconsole.log('Latency:', response.meta.latencyMs + 'ms')\n\tconsole.log('TraceId:', response.meta.traceId)\n\n\tconsole.log('\\n--- Cost Tracker Summary ---')\n\tconsole.log(costTracker.getSummary())\n}\n\nmain().catch(console.error)",
      "startLine": 12,
      "endLine": 52,
      "type": "function",
      "name": "main",
      "embedding": [
        -0.025721494108438492,
        0.006368202157318592,
        -0.037289928644895554,
        0.07210743427276611,
        0.07869739085435867,
        -0.06909947842359543,
        0.01081055123358965,
        0.08296597003936768,
        0.054596006870269775,
        0.026367394253611565,
        0.02732558734714985,
        -0.10123128443956375,
        -0.005074534565210342,
        0.027220433577895164,
        0.10022980719804764,
        0.0021628334652632475,
        -0.0011527579044923186,
        -0.08210282027721405,
        -0.062215980142354965,
        -0.08064085245132446,
        0.05049174651503563,
        0.008291546255350113,
        0.033789973706007004,
        0.007806879002600908,
        -0.0010944907553493977,
        -0.08470068871974945,
        -0.014746356755495071,
        0.021902941167354584,
        0.026978570967912674,
        0.020669560879468918,
        -0.0005145821487531066,
        -0.006632968783378601,
        -0.056838177144527435,
        0.0026875887997448444,
        0.03931993618607521,
        0.07860434800386429,
        -0.03795862942934036,
        -0.07472424954175949,
        -0.06112571805715561,
        0.025393856689333916,
        0.048374325037002563,
        0.06022343039512634,
        -0.0753268375992775,
        -0.054142553359270096,
        0.11183429509401321,
        -0.08099392801523209,
        -0.09126092493534088,
        -0.027371665462851524,
        -0.0028847570065408945,
        0.05032186210155487,
        -0.08018776029348373,
        0.056004587560892105,
        -0.06260756403207779,
        -0.02084009349346161,
        0.00604123855009675,
        0.0006549531826749444,
        -0.03598402813076973,
        0.0391177237033844,
        0.004129016771912575,
        -0.0992356613278389,
        -0.009945069439709187,
        -0.09519688040018082,
        0.028471501544117928,
        -0.06430209428071976,
        0.023806791752576828,
        -0.004892397206276655,
        -0.07026837766170502,
        0.009464760310947895,
        0.027609726414084435,
        0.012991219758987427,
        -0.019203217700123787,
        -0.0015083857579156756,
        -0.007135695777833462,
        -0.0708765760064125,
        -0.08109761774539948,
        -0.042547281831502914,
        0.03388800099492073,
        0.06076144427061081,
        0.0379924513399601,
        0.04205049201846123,
        0.0008073748322203755,
        -0.07849835604429245,
        -0.07515223324298859,
        0.014944166876375675,
        0.03826005011796951,
        0.03026784211397171,
        0.022352563217282295,
        -0.025193756446242332,
        0.028814075514674187,
        -0.06708836555480957,
        -0.001555281924083829,
        0.012380975298583508,
        -0.04649016633629799,
        0.04719426482915878,
        0.0627003014087677,
        0.06984220445156097,
        -0.05046689882874489,
        0.014065847732126713,
        -0.043846048414707184,
        0.0651114210486412,
        -0.04164489731192589,
        -0.0710679292678833,
        -0.025904817506670952,
        0.09086763858795166,
        0.0024948660284280777,
        -0.04957127943634987,
        0.06946681439876556,
        0.016287775710225105,
        -0.030335217714309692,
        0.0013019856996834278,
        0.015593972988426685,
        0.0602409765124321,
        0.04886830970644951,
        0.050184816122055054,
        0.03831440955400467,
        0.05201312527060509,
        0.0012749843299388885,
        -0.04238845407962799,
        0.05917878821492195,
        0.10122272372245789,
        0.08498093485832214,
        -0.006755589507520199,
        -0.04038581997156143,
        0.05577033385634422,
        0.05079882591962814,
        -0.02574494481086731,
        0.13498590886592865,
        9.861655572590036e-33,
        0.019156599417328835,
        -0.05830064415931702,
        0.01926281303167343,
        -0.03634427487850189,
        0.08555877208709717,
        0.09675775468349457,
        0.06775219738483429,
        0.014081787317991257,
        -0.062080878764390945,
        -0.021020561456680298,
        -0.09778251498937607,
        0.06416960805654526,
        -0.07509641349315643,
        -0.09561436623334885,
        -0.008037755265831947,
        -0.06703193485736847,
        0.012210316024720669,
        0.05067825689911842,
        0.09684470295906067,
        0.005382699891924858,
        0.05578521266579628,
        -0.04368682578206062,
        -0.01983814872801304,
        0.008888283744454384,
        -0.00328604644164443,
        0.01560052391141653,
        -0.003348213853314519,
        -0.05748957768082619,
        -0.0319531075656414,
        0.008298628032207489,
        0.05697520449757576,
        0.022206004709005356,
        -0.017467424273490906,
        0.06258329749107361,
        -0.012194119393825531,
        -0.08666352927684784,
        -0.05307818949222565,
        0.04662458226084709,
        -0.1175035610795021,
        -0.06550563871860504,
        -0.06909647583961487,
        0.051229484379291534,
        -0.07947363704442978,
        -0.03541306406259537,
        -0.1128922700881958,
        -0.0798143744468689,
        0.02463134005665779,
        0.02895660139620304,
        0.055602677166461945,
        -0.0004197763919364661,
        -0.07007195800542831,
        0.018625440075993538,
        -0.029848940670490265,
        -0.0503329336643219,
        0.06413435935974121,
        -0.06766463071107864,
        0.053612519055604935,
        0.009949799627065659,
        -0.020048068836331367,
        -0.025444766506552696,
        -0.06649963557720184,
        -0.06431885808706284,
        0.03188689053058624,
        -0.0319141149520874,
        0.0776028111577034,
        0.012565050274133682,
        -0.055051375180482864,
        0.04770046845078468,
        0.03115185908973217,
        -0.030916986986994743,
        0.009004765190184116,
        -0.016243698075413704,
        0.0400296114385128,
        0.01803864724934101,
        0.020414642989635468,
        -0.026778127998113632,
        0.003559412667527795,
        0.0046605076640844345,
        -0.04379543662071228,
        -0.11666381359100342,
        0.007374228443950415,
        0.03933092951774597,
        -0.0472421869635582,
        0.06893706321716309,
        0.022454392164945602,
        0.007073362823575735,
        -0.02083580195903778,
        -0.02047032304108143,
        0.00476084416732192,
        0.052787259221076965,
        -0.07705070823431015,
        -0.011157331056892872,
        -0.015464497730135918,
        0.02012166939675808,
        -0.08656365424394608,
        -8.60837582183796e-33,
        -0.014152378775179386,
        0.00244174525141716,
        -0.021807610988616943,
        0.020554395392537117,
        0.016300607472658157,
        -0.02641855925321579,
        0.0380965955555439,
        0.006321493070572615,
        0.05780177563428879,
        0.04754284396767616,
        -0.000961907091550529,
        -0.024487590417265892,
        0.007062706630676985,
        0.043011222034692764,
        0.006762755569070578,
        0.03926810622215271,
        -0.0162187609821558,
        0.007710203994065523,
        0.03938975930213928,
        -0.01856367103755474,
        -0.10923295468091965,
        0.04520074278116226,
        -0.042796459048986435,
        -0.007688687648624182,
        -0.06305250525474548,
        0.09155912697315216,
        0.0696294754743576,
        0.02877231314778328,
        -0.06923428177833557,
        -0.09318339079618454,
        -0.020060721784830093,
        0.024604639038443565,
        -0.1229943260550499,
        0.09083510935306549,
        -0.030002698302268982,
        -0.017346305772662163,
        0.1030588448047638,
        0.04021141305565834,
        -0.03532114252448082,
        0.04407361149787903,
        0.09804069995880127,
        -0.02717840112745762,
        -0.06039773300290108,
        -0.05654905363917351,
        0.0023476388305425644,
        -0.03105655498802662,
        0.04420436546206474,
        -0.04196522757411003,
        -0.03773971274495125,
        -0.05972917377948761,
        0.05592413991689682,
        -0.08171921223402023,
        -0.007477904669940472,
        0.05820707231760025,
        -0.07656794786453247,
        0.002549184951931238,
        0.07492572069168091,
        -0.05915583297610283,
        0.00599737698212266,
        -0.05232968181371689,
        0.0804297924041748,
        -0.06786675751209259,
        0.005906964186578989,
        0.019512195140123367,
        0.02384369447827339,
        -0.026201248168945312,
        0.010339569300413132,
        0.047344889491796494,
        0.09130056947469711,
        0.0033634791616350412,
        -0.006280679255723953,
        0.0040487260557711124,
        0.04615610092878342,
        0.03693418204784393,
        0.037506915628910065,
        0.04979594424366951,
        -0.04552534222602844,
        -0.06582780927419662,
        0.11487964540719986,
        0.04320588335394859,
        -0.08971653878688812,
        -0.011176721192896366,
        0.03098279796540737,
        -0.002350791357457638,
        -0.05624845623970032,
        -0.038502197712659836,
        0.05710811913013458,
        0.12610650062561035,
        0.00984935462474823,
        0.05352411046624184,
        -0.04362763836979866,
        -0.03533390909433365,
        -0.026632143184542656,
        0.06593126803636551,
        0.0749019905924797,
        -6.500754778926421e-8,
        -0.11206847429275513,
        -0.027496322989463806,
        -0.058709610253572464,
        0.083790622651577,
        -0.024631112813949585,
        -0.056864526122808456,
        0.036668311804533005,
        -0.011117198504507542,
        0.04638025164604187,
        0.03327949345111847,
        0.02238592691719532,
        -0.0012787164887413383,
        -0.003464117646217346,
        -0.008056576363742352,
        -0.023509904742240906,
        -0.01014513336122036,
        0.008724942803382874,
        0.07111967355012894,
        -0.0015013073571026325,
        -0.03743211552500725,
        0.031144995242357254,
        0.015302778221666813,
        0.003317419672384858,
        -0.05074464902281761,
        0.04178168997168541,
        -0.049089230597019196,
        0.007381349336355925,
        0.11926563829183578,
        0.006477826740592718,
        -0.034697242081165314,
        -0.07055879384279251,
        -0.02480853721499443,
        0.06825464963912964,
        -0.028693197295069695,
        -0.07337657362222672,
        0.01469493005424738,
        0.050498366355895996,
        -0.011318741366267204,
        0.050201185047626495,
        0.09955748915672302,
        0.0004208663303870708,
        0.0780767872929573,
        -0.0685417428612709,
        -0.03625302016735077,
        0.04802234098315239,
        0.013262870721518993,
        -0.035682760179042816,
        -0.011214111000299454,
        0.06969407945871353,
        0.008315068669617176,
        -0.037522248923778534,
        -0.06042435020208359,
        -0.027085833251476288,
        0.012270771898329258,
        -0.013826764188706875,
        -0.03340508043766022,
        0.02832135371863842,
        -0.04718416556715965,
        -0.03888855129480362,
        0.021808339282870293,
        0.03452271223068237,
        0.0025843207258731127,
        -0.05184890329837799,
        -0.040455106645822525
      ]
    },
    {
      "id": "0a7f0ab9",
      "filePath": "04-code-janitor/src/types.ts",
      "content": "// ============================================\n// Code Janitor 类型定义\n// ============================================\n\n/**\n * Agent 状态\n */\nexport type JanitorState = {\n\ttask: string;\n\titeration: number;\n\tmax_iterations: number;\n\tfiles_read: string[];\n\tfiles_written: string[];\n\tcommand_history: CommandResult[];\n\tlast_error: string | null;\n\tcompleted: boolean;\n};\n\n/**\n * 命令执行结果\n */\nexport type CommandResult = {\n\tcmd: string;\n\toutput: string;\n\tsuccess: boolean;\n};\n\n/**\n * 初始状态\n */\nexport const INITIAL_STATE: JanitorState = {\n\ttask: \"\",\n\titeration: 0,\n\tmax_iterations: 10,\n\tfiles_read: [],\n\tfiles_written: [],\n\tcommand_history: [],\n\tlast_error: null,\n\tcompleted: false\n};",
      "startLine": 1,
      "endLine": 41,
      "type": "other",
      "embedding": [
        -0.046970434486866,
        0.05423501133918762,
        -0.026933109387755394,
        0.07268582284450531,
        0.03339262679219246,
        0.03309456259012222,
        0.02528153359889984,
        0.06157555803656578,
        -0.027299711480736732,
        0.039887502789497375,
        -0.01217676792293787,
        -0.04597039893269539,
        -0.030163779854774475,
        -0.036666058003902435,
        -0.057512085884809494,
        0.011571451090276241,
        -0.15145547688007355,
        -0.01814684458076954,
        -0.083576500415802,
        -0.049280401319265366,
        0.04935480281710625,
        0.035992976278066635,
        -0.01964598521590233,
        0.0033189516980201006,
        0.01778104342520237,
        0.0668332576751709,
        -0.01991262659430504,
        -0.05057285353541374,
        -0.0424998477101326,
        0.03593679890036583,
        0.0005817034398205578,
        -0.00523860938847065,
        0.01389162614941597,
        0.03685680031776428,
        0.15155503153800964,
        0.11515358835458755,
        -0.03858055919408798,
        -0.03339318558573723,
        0.01358045730739832,
        -0.02756858617067337,
        0.01533209066838026,
        0.06293056905269623,
        0.02086273953318596,
        -0.07969298213720322,
        0.03065086528658867,
        -0.06438109278678894,
        -0.06397351622581482,
        -0.10706882178783417,
        -0.029688071459531784,
        0.002007664181292057,
        -0.08814074844121933,
        0.08388839662075043,
        -0.02080371417105198,
        -0.07333537191152573,
        0.06987407803535461,
        0.0215902216732502,
        -0.01793653331696987,
        -0.05114336684346199,
        0.0010856501758098602,
        -0.04814407229423523,
        -0.0011466472642496228,
        -0.06376749277114868,
        0.014771970920264721,
        -0.11068762093782425,
        0.022127989679574966,
        0.012769662775099277,
        -0.10192544758319855,
        0.06279917806386948,
        0.05266299098730087,
        -0.01174622680991888,
        -0.12559014558792114,
        0.05833403393626213,
        -0.06017790734767914,
        0.025571957230567932,
        -0.010187276639044285,
        -0.05875905230641365,
        -0.05914924293756485,
        0.04223642125725746,
        0.007120792288333178,
        -0.09909144788980484,
        -0.0401451401412487,
        -0.10259527713060379,
        -0.007631627842783928,
        0.028317883610725403,
        0.01899268850684166,
        0.06731711328029633,
        -0.007306112442165613,
        -0.023618722334504128,
        0.02682681940495968,
        -0.0037566644605249166,
        -0.057729873806238174,
        0.006523741874843836,
        0.02491798624396324,
        0.04985959827899933,
        0.01910487748682499,
        0.045633167028427124,
        -0.04037473723292351,
        0.08635693043470383,
        0.018934130668640137,
        0.05984772741794586,
        -0.02592315524816513,
        0.0033946787007153034,
        0.05179423466324806,
        -0.006894141435623169,
        0.0007619497482664883,
        -0.03229006379842758,
        0.07395178079605103,
        -0.004642483312636614,
        -0.06638453155755997,
        -0.06675988435745239,
        -0.013715500012040138,
        0.08615373820066452,
        -0.020952822640538216,
        -0.03575944900512695,
        0.04952358081936836,
        -0.054984960705041885,
        -0.002408164320513606,
        0.007542423903942108,
        -0.024453820660710335,
        0.11059581488370895,
        0.15342684090137482,
        -0.05972173437476158,
        -0.025295650586485863,
        0.07279437780380249,
        -0.010888136923313141,
        -0.04264996573328972,
        0.15934637188911438,
        1.442071931144209e-32,
        -0.002190463710576296,
        -0.058661505579948425,
        -0.008476288057863712,
        0.052330706268548965,
        0.040169958025217056,
        0.016250386834144592,
        0.024282380938529968,
        -0.019652219489216805,
        -0.02470722422003746,
        0.0034060447942465544,
        -0.036498043686151505,
        0.002249389886856079,
        -0.07301464676856995,
        -0.009131710976362228,
        -0.06968829780817032,
        -0.07135121524333954,
        0.03614278882741928,
        -0.01531483419239521,
        0.014758932404220104,
        0.00947501976042986,
        0.05701090395450592,
        0.028642786666750908,
        -0.002178243361413479,
        0.05127565935254097,
        0.05917597562074661,
        -0.06709955632686615,
        -0.005360099021345377,
        0.005427343770861626,
        0.001391429454088211,
        -0.025162896141409874,
        0.11341944336891174,
        0.004548968747258186,
        0.05964795500040054,
        0.012926329858601093,
        -0.024277567863464355,
        0.05608902499079704,
        0.02028902992606163,
        -0.04125058650970459,
        -0.05566954240202904,
        -0.009103166870772839,
        -0.029170533642172813,
        0.00540133286267519,
        -0.028768932446837425,
        0.008711298927664757,
        -0.042807552963495255,
        -0.07967443019151688,
        -0.022150767967104912,
        0.02649550512433052,
        0.06781856715679169,
        -0.020144404843449593,
        -0.012948879972100258,
        0.08482668548822403,
        -0.010147358290851116,
        -0.04212185740470886,
        0.05001301318407059,
        -0.04158894345164299,
        0.015349897556006908,
        0.01847865618765354,
        0.033969324082136154,
        -0.002096116077154875,
        0.03071814589202404,
        0.06967556476593018,
        -0.017264673486351967,
        -0.012127998284995556,
        0.05922090634703636,
        -0.016040991991758347,
        0.07588912546634674,
        0.015601915307343006,
        0.048901911824941635,
        -0.04977520555257797,
        -0.026293044909834862,
        -0.05087534338235855,
        0.02969922125339508,
        0.00424293614923954,
        0.033695682883262634,
        0.004447598475962877,
        -0.043225813657045364,
        -0.009125284850597382,
        -0.030228352174162865,
        -0.09376802295446396,
        -0.04159380495548248,
        -0.07086145877838135,
        -0.0891091525554657,
        -0.009127682074904442,
        0.053200699388980865,
        -0.0035162209533154964,
        -0.02208799682557583,
        -0.03770808130502701,
        0.016402240842580795,
        0.027981135994195938,
        -0.024905981495976448,
        -0.03719453513622284,
        0.009035716764628887,
        -0.03930316120386124,
        -0.05762162059545517,
        -1.4440968671002941e-32,
        0.12858876585960388,
        0.029401740059256554,
        -0.04422033205628395,
        -0.03542925789952278,
        -0.012268101796507835,
        -0.019371146336197853,
        0.023482978343963623,
        -0.009609974920749664,
        -0.037690117955207825,
        0.017107227817177773,
        -0.004204357508569956,
        -0.019884785637259483,
        0.007168974727392197,
        -0.004266695119440556,
        -0.012035924941301346,
        0.003133899997919798,
        0.003574166214093566,
        -0.042675282806158066,
        -0.017690183594822884,
        -0.03615811839699745,
        0.02261674590408802,
        0.08600275218486786,
        0.02088848687708378,
        0.131777822971344,
        -0.04938395693898201,
        0.04238410294055939,
        0.03278915956616402,
        0.08328039199113846,
        -0.0395030677318573,
        -0.07569742202758789,
        0.00485152006149292,
        0.019918950274586678,
        -0.0724581629037857,
        0.051606353372335434,
        -0.003913144115358591,
        -0.0751551166176796,
        0.039583317935466766,
        0.07008763402700424,
        0.017099717631936073,
        0.09662800282239914,
        0.056475281715393066,
        -0.01571023091673851,
        -0.050691425800323486,
        -0.02416103519499302,
        0.011188284493982792,
        -0.026432856917381287,
        0.06280335783958435,
        0.08616936206817627,
        -0.026144418865442276,
        -0.02433650940656662,
        0.031470153480768204,
        -0.07227368652820587,
        -0.08242134004831314,
        -0.04298248142004013,
        -0.000020344734366517514,
        -0.022855566814541817,
        0.02780960686504841,
        -0.14538362622261047,
        -0.04290999099612236,
        -0.014836600981652737,
        -0.032929353415966034,
        -0.05948950722813606,
        0.09001363813877106,
        -0.013933313079178333,
        -0.0017848971765488386,
        -0.06597695499658585,
        -0.06659761816263199,
        0.01160780806094408,
        0.014342637732625008,
        0.034141574054956436,
        0.015912091359496117,
        -0.0038147177547216415,
        0.010790003463625908,
        0.015600007027387619,
        -0.0011439993977546692,
        -0.02712785080075264,
        -0.03624619171023369,
        -0.026194429025053978,
        0.11192349344491959,
        0.04968754202127457,
        -0.05727405846118927,
        0.05132225900888443,
        0.04565766826272011,
        0.05139272287487984,
        -0.03726105019450188,
        0.000686835206579417,
        -0.03296750411391258,
        0.09343790262937546,
        0.04214862734079361,
        0.011927291750907898,
        -0.0377887561917305,
        -0.09202860295772552,
        -0.005914790090173483,
        -0.03288960084319115,
        -0.014682705514132977,
        -6.544878772274387e-8,
        -0.13298200070858002,
        -0.09116188436746597,
        -0.0727568194270134,
        -0.0203128382563591,
        0.01165020652115345,
        -0.035920459777116776,
        -0.01965075172483921,
        -0.07507099211215973,
        0.013281932100653648,
        -0.11044558137655258,
        0.06238816678524017,
        0.005646754056215286,
        -0.052342839539051056,
        -0.05978735536336899,
        -0.02123531699180603,
        -0.03360273689031601,
        0.021846581250429153,
        -0.007805683184415102,
        -0.025022268295288086,
        -0.06377644836902618,
        0.046831388026475906,
        -0.010576828382909298,
        0.0017875194316729903,
        0.028607111424207687,
        0.0561966709792614,
        -0.00858098454773426,
        -0.02906806766986847,
        0.08333061635494232,
        0.006321880500763655,
        0.02744959481060505,
        0.054829273372888565,
        -0.012492197565734386,
        0.08803925663232803,
        -0.04035024717450142,
        -0.03425184264779091,
        0.0025793600361794233,
        0.14075544476509094,
        -0.02871059812605381,
        0.009761557914316654,
        -0.05480722337961197,
        0.05174048990011215,
        0.06686714291572571,
        -0.03738758713006973,
        0.04477189853787422,
        -0.008168436586856842,
        -0.08768826723098755,
        0.020932486280798912,
        0.02183852158486843,
        0.0640994980931282,
        -0.06580419838428497,
        -0.041765619069337845,
        -0.04444941505789757,
        -0.04884485900402069,
        0.12034713476896286,
        -0.07929614931344986,
        -0.08367589861154556,
        0.03525075688958168,
        0.028791101649403572,
        0.012286195531487465,
        0.05349809676408768,
        0.015773994848132133,
        -0.013407900929450989,
        -0.029706032946705818,
        0.024386988952755928
      ]
    },
    {
      "id": "87296db8",
      "filePath": "04-code-janitor/src/tools.ts",
      "content": "import * as fs from 'fs';\nimport * as path from 'path';\nimport { execSync } from 'child_process';\nimport { CommandResult } from './types';\n\n// ============================================\n// Sandbox 配置\n// ============================================\n\n// Agent 只能操作这个目录下的文件\nconst SANDBOX_ROOT = path.join(__dirname, '../sandbox');\n\n// 允许执行的命令白名单（前缀匹配）\nconst ALLOWED_COMMANDS = [\n\t'npm test',\n\t'npm run',\n\t'npx tsc',\n\t'cat ',\n\t'ls ',\n\t'echo ',\n];\n\n/**\n * 验证路径是否在 Sandbox 内\n */",
      "startLine": 1,
      "endLine": 25,
      "type": "other",
      "embedding": [
        -0.0323997363448143,
        0.02853199653327465,
        -0.03803062438964844,
        0.04188590496778488,
        0.04493692144751549,
        -0.06470493227243423,
        0.025611767545342445,
        0.02150873653590679,
        -0.06476462632417679,
        0.08289286494255066,
        -0.016115063801407814,
        -0.036395229399204254,
        -0.010307236574590206,
        -0.00603133998811245,
        -0.004550775047391653,
        0.05966634303331375,
        -0.04581296071410179,
        0.04184713214635849,
        -0.000900286715477705,
        -0.01602412387728691,
        -0.018745170906186104,
        -0.010826904326677322,
        0.039978571236133575,
        -0.017072293907403946,
        -0.006120573729276657,
        -0.008341449312865734,
        0.0005215947749093175,
        -0.04081018641591072,
        -0.05552607402205467,
        0.011927252635359764,
        0.04925055056810379,
        0.010308783501386642,
        -0.00196394557133317,
        0.02438936196267605,
        0.1407586634159088,
        0.1722029596567154,
        -0.0006985249929130077,
        -0.029600661247968674,
        -0.021711252629756927,
        0.022611703723669052,
        -0.0061195665039122105,
        0.04166364297270775,
        -0.017298825085163116,
        -0.10149325430393219,
        0.00381891499273479,
        -0.049012716859579086,
        -0.06020456552505493,
        -0.098444864153862,
        -0.039146728813648224,
        -0.027171775698661804,
        -0.07435812056064606,
        0.01396745815873146,
        -0.04749593511223793,
        -0.07420089095830917,
        -0.0005957480752840638,
        -0.004981448873877525,
        0.01237019244581461,
        -0.056541722267866135,
        0.07315986603498459,
        -0.059531550854444504,
        0.018600622192025185,
        0.03944029659032822,
        0.018273966386914253,
        -0.08474399894475937,
        0.024754373356699944,
        -0.0020061952527612448,
        -0.06606622785329819,
        0.05675642192363739,
        -0.0008539805421605706,
        -0.02736273780465126,
        -0.07613790780305862,
        0.04265540838241577,
        -0.06842605769634247,
        0.11191156506538391,
        -0.0341809056699276,
        -0.056131791323423386,
        -0.0491572730243206,
        0.04235950857400894,
        0.007596930488944054,
        -0.13114097714424133,
        -0.056985002011060715,
        -0.04489251971244812,
        0.008917509578168392,
        -0.01604616828262806,
        -0.023273633792996407,
        0.12894439697265625,
        -0.0034964208025485277,
        0.0032438584603369236,
        0.10900914669036865,
        0.03982158377766609,
        0.00414148299023509,
        -0.022516608238220215,
        -0.016667688265442848,
        0.007474303245544434,
        0.09888961911201477,
        -0.05390333756804466,
        -0.06777867674827576,
        0.10766135901212692,
        -0.06398150324821472,
        0.03536706417798996,
        -0.0008382681990042329,
        -0.016459787264466286,
        0.006848553195595741,
        -0.019935179501771927,
        0.010020740330219269,
        0.021820886060595512,
        0.02785334177315235,
        -0.07561082392930984,
        -0.044702038168907166,
        -0.04248427599668503,
        -0.06878487765789032,
        0.0038483855314552784,
        -0.008077818900346756,
        -0.05881822109222412,
        0.05357402190566063,
        -0.038787972182035446,
        0.012441602535545826,
        -0.0479876734316349,
        -0.026051562279462814,
        0.111537866294384,
        0.14670121669769287,
        -0.0246267169713974,
        -0.05668339133262634,
        0.148352712392807,
        -0.021237272769212723,
        -0.05044092610478401,
        0.09700427204370499,
        1.1198083916247525e-32,
        -0.04296747222542763,
        -0.051479484885931015,
        -0.0031255462672561407,
        0.09458029270172119,
        0.13152261078357697,
        0.04714856669306755,
        0.047200821340084076,
        -0.01572020910680294,
        -0.10840760171413422,
        0.08974524587392807,
        -0.06871160864830017,
        -0.0425981804728508,
        -0.052535057067871094,
        -0.04427466541528702,
        -0.05957784503698349,
        -0.01616428978741169,
        0.013318579643964767,
        -0.04623314365744591,
        0.013924370519816875,
        0.016260551288723946,
        -0.0051687974482774734,
        0.06428047269582748,
        -0.06807296723127365,
        0.0769166648387909,
        -0.010799884796142578,
        -0.0678146705031395,
        -0.04939890652894974,
        0.014407055452466011,
        0.1007235050201416,
        -0.0028163576498627663,
        0.1326119303703308,
        -0.004397386219352484,
        0.006060188636183739,
        0.08798578381538391,
        -0.06110203638672829,
        0.005268704611808062,
        0.019943630322813988,
        -0.06055271998047829,
        -0.06529156118631363,
        -0.012050116434693336,
        -0.033555611968040466,
        0.0012140715261921287,
        0.004713776521384716,
        0.026943879202008247,
        -0.02180326357483864,
        -0.059228695929050446,
        -0.05661635845899582,
        0.08746345341205597,
        0.07702077925205231,
        0.003182105952873826,
        -0.014992757700383663,
        0.08657415956258774,
        0.019025582820177078,
        0.025693003088235855,
        0.02494725212454796,
        0.0010781281162053347,
        -0.04335172846913338,
        -0.010636977851390839,
        -0.0021068488713353872,
        0.04982713609933853,
        0.04367496445775032,
        0.05557350441813469,
        -0.04428686946630478,
        0.0026919834781438112,
        0.07114735245704651,
        -0.05842812359333038,
        0.0658678188920021,
        0.01711215451359749,
        0.07821641117334366,
        -0.011135300621390343,
        -0.05793535336852074,
        -0.031326085329055786,
        0.0006907742936164141,
        0.049241647124290466,
        -0.0586995929479599,
        -0.02679060399532318,
        0.023194478824734688,
        -0.018686145544052124,
        -0.07449354976415634,
        -0.12019988894462585,
        -0.06107111647725105,
        -0.0019266684539616108,
        -0.03059760481119156,
        -0.04040514677762985,
        0.061390221118927,
        -0.002317120088264346,
        -0.04757731780409813,
        0.003776183817535639,
        0.01684322953224182,
        -0.022421574220061302,
        0.020530831068754196,
        -0.08610279113054276,
        -0.06429803371429443,
        0.021436981856822968,
        -0.07678050547838211,
        -1.4145643347774104e-32,
        0.06183469295501709,
        0.02709435671567917,
        -0.059552282094955444,
        0.020578909665346146,
        -0.032795291393995285,
        -0.011168253608047962,
        -0.02150559425354004,
        -0.15765219926834106,
        0.011011880822479725,
        0.054314371198415756,
        -0.0569942370057106,
        0.002957254881039262,
        0.06183385103940964,
        0.018132861703634262,
        0.089896559715271,
        -0.023839570581912994,
        -0.03970387205481529,
        -0.0499991774559021,
        -0.029448485001921654,
        -0.02251061052083969,
        -0.028156083077192307,
        0.13084237277507782,
        -0.010680700652301311,
        0.08472992479801178,
        -0.08748738467693329,
        -0.015046302229166031,
        -0.025188880041241646,
        0.07849319279193878,
        -0.03622361645102501,
        0.003437894396483898,
        -0.06579418480396271,
        0.055205605924129486,
        -0.10711026191711426,
        0.0939251184463501,
        -0.023955171927809715,
        -0.1002717912197113,
        0.022941477596759796,
        0.03439665213227272,
        0.003767001908272505,
        0.0484333336353302,
        0.0543757826089859,
        0.012855039909482002,
        -0.03085482120513916,
        -0.02541634440422058,
        -0.010276861488819122,
        0.044024642556905746,
        -0.0008054630598053336,
        0.06452061980962753,
        0.0005682650953531265,
        -0.03605804964900017,
        -0.023919738829135895,
        -0.029248230159282684,
        0.01720583252608776,
        -0.06568063050508499,
        -0.004990859888494015,
        0.02147265151143074,
        -0.00427486514672637,
        -0.07132690399885178,
        -0.00039404231938533485,
        0.011360632255673409,
        0.06349822133779526,
        -0.05282534658908844,
        0.016929615288972855,
        -0.016275430098176003,
        -0.03329300135374069,
        -0.059946902096271515,
        -0.09897716343402863,
        0.08605509996414185,
        0.03261395916342735,
        -0.07209300994873047,
        0.021162524819374084,
        0.03782520070672035,
        -0.003894880646839738,
        -0.007743810769170523,
        -0.04693273827433586,
        -0.006096291821449995,
        -0.011169920675456524,
        -0.03649280220270157,
        0.04094696044921875,
        0.0745563954114914,
        -0.044745881110429764,
        0.04939454793930054,
        0.033770814538002014,
        0.01673472672700882,
        -0.08014997094869614,
        -0.04927745833992958,
        -0.010007228702306747,
        0.06313779205083847,
        0.024116910994052887,
        -0.052410293370485306,
        0.03858296200633049,
        -0.06260430067777634,
        0.00931009091436863,
        -0.04569333791732788,
        -0.021795013919472694,
        -7.186886818999483e-8,
        -0.03129034861922264,
        -0.065736785531044,
        -0.08808770030736923,
        -0.02637411281466484,
        0.02566687949001789,
        -0.019964933395385742,
        -0.011929893866181374,
        -0.012345959432423115,
        -0.0187070369720459,
        -0.00097673072014004,
        -0.022935856133699417,
        0.00113779550883919,
        -0.04811546951532364,
        -0.016388291493058205,
        -0.02778019569814205,
        -0.02233031950891018,
        -0.03405427560210228,
        0.05182021111249924,
        -0.011319305747747421,
        -0.05540303885936737,
        0.06460744887590408,
        0.010241585783660412,
        -0.019673770293593407,
        0.0827246829867363,
        -0.027093438431620598,
        -0.020797591656446457,
        0.004524134565144777,
        0.021466296166181564,
        -0.05981515720486641,
        0.07885798066854477,
        0.016966907307505608,
        -0.05862949788570404,
        0.04919770732522011,
        -0.04542603716254234,
        -0.03668154776096344,
        0.01576916314661503,
        0.03143227845430374,
        0.015738647431135178,
        0.025447266176342964,
        0.0050436956807971,
        0.008331245742738247,
        0.03618580102920532,
        0.0017004591645672917,
        0.002515882020816207,
        -0.05105205997824669,
        -0.05659300088882446,
        0.014814824797213078,
        -0.004250156693160534,
        0.05949115380644798,
        -0.0463920533657074,
        0.020988577976822853,
        0.024796854704618454,
        -0.059479404240846634,
        0.03830419108271599,
        0.013640621677041054,
        -0.04443761333823204,
        -0.03410273790359497,
        -0.015481640584766865,
        -0.011209649965167046,
        0.058961085975170135,
        -0.028637226670980453,
        0.038074128329753876,
        0.05868798866868019,
        -0.029459282755851746
      ]
    },
    {
      "id": "64cf2d4d",
      "filePath": "04-code-janitor/src/tools.ts",
      "content": "function validatePath(targetPath: string): string {\n\tconst resolved = path.resolve(SANDBOX_ROOT, targetPath);\n\tif (!resolved.startsWith(SANDBOX_ROOT)) {\n\t\tthrow new Error(`Security Error: Path \"${targetPath}\" is outside sandbox`);\n\t}\n\treturn resolved;\n}\n\n/**\n * 验证命令是否在白名单内\n */",
      "startLine": 26,
      "endLine": 36,
      "type": "function",
      "name": "validatePath",
      "embedding": [
        0.006423350889235735,
        0.014720048755407333,
        0.012167241424322128,
        0.02532416395843029,
        0.09504754841327667,
        -0.03017541952431202,
        -0.04164563864469528,
        -0.009635895490646362,
        -0.009698842652142048,
        -0.001406569266691804,
        -0.021428285166621208,
        0.0022232485935091972,
        0.010066200979053974,
        0.06015593558549881,
        0.00833938829600811,
        0.04949990659952164,
        -0.011419213376939297,
        0.05368372052907944,
        0.05262334644794464,
        -0.005907684564590454,
        -0.01665034517645836,
        -0.049877189099788666,
        0.014507764019072056,
        -0.06566985696554184,
        -0.012253318913280964,
        -0.046424929052591324,
        -0.001240904675796628,
        -0.006437378469854593,
        -0.03340877220034599,
        0.004190307576209307,
        0.03231659159064293,
        -0.00303047732450068,
        -0.08064482361078262,
        -0.00007346718484768644,
        0.1577470600605011,
        0.11758232861757278,
        -0.0095867570489645,
        0.002570581855252385,
        -0.010396505706012249,
        -0.009598308242857456,
        0.06464343518018723,
        0.011488971300423145,
        0.0735335573554039,
        -0.08971613645553589,
        0.003652036190032959,
        -0.11048638820648193,
        -0.01116903591901064,
        -0.0942065417766571,
        -0.019135119393467903,
        -0.03354747220873833,
        -0.04096680507063866,
        -0.047267936170101166,
        -0.06063779070973396,
        -0.0235449206084013,
        -0.002844378584995866,
        0.0716577097773552,
        -0.02112552337348461,
        0.005199125036597252,
        0.034878525882959366,
        0.004819690715521574,
        0.07052020728588104,
        0.0043871584348380566,
        0.015907814726233482,
        -0.11410973221063614,
        0.058586783707141876,
        0.019742818549275398,
        -0.05888994410634041,
        0.021236035972833633,
        -0.010281427763402462,
        0.016084033995866776,
        -0.03999713435769081,
        0.027622239664196968,
        -0.04242458567023277,
        0.10588962584733963,
        -0.012815763242542744,
        -0.04070034995675087,
        -0.04844929650425911,
        0.08282915502786636,
        0.08644848316907883,
        -0.09941534698009491,
        0.014217490330338478,
        -0.04303963482379913,
        0.03412500023841858,
        0.02783716470003128,
        0.019226938486099243,
        0.15401309728622437,
        0.010559378191828728,
        0.013553100638091564,
        0.12088552117347717,
        0.05613322928547859,
        0.03729059174656868,
        -0.04116663709282875,
        0.02416311204433441,
        0.01184780616313219,
        0.0028472135309129953,
        -0.12371912598609924,
        -0.07369785755872726,
        0.08900555223226547,
        -0.019060557708144188,
        0.054044172167778015,
        0.0008920711698010564,
        -0.02813969925045967,
        -0.003977532032877207,
        -0.06475559622049332,
        0.05233089253306389,
        0.0694071352481842,
        -0.0050538391806185246,
        -0.03320710361003876,
        -0.03230597823858261,
        0.010626369155943394,
        -0.029567580670118332,
        -0.012652170844376087,
        0.041599091142416,
        -0.06677926331758499,
        0.0631820559501648,
        -0.07247145473957062,
        -0.010793503373861313,
        0.012213582172989845,
        -0.05376429483294487,
        0.062361687421798706,
        0.025874074548482895,
        -0.04468917101621628,
        0.02645568735897541,
        0.03292001038789749,
        0.03403294086456299,
        -0.08096666634082794,
        0.08846711367368698,
        6.196499451556668e-33,
        -0.014315159991383553,
        0.038663916289806366,
        -0.006498369853943586,
        0.03550729900598526,
        0.05445753410458565,
        -0.0562627837061882,
        -0.0324818454682827,
        -0.012040807865560055,
        -0.1081191897392273,
        0.0728209987282753,
        -0.0016702095745131373,
        -0.0409829281270504,
        -0.05161505937576294,
        -0.08441685885190964,
        0.0037713495548814535,
        0.027833223342895508,
        -0.015526624396443367,
        -0.06623688340187073,
        -0.008589506149291992,
        0.016580378636717796,
        -0.026765933260321617,
        -0.05113619565963745,
        -0.02842547371983528,
        -0.009108210913836956,
        -0.021592849865555763,
        -0.0324823297560215,
        -0.0163976289331913,
        0.022382494062185287,
        0.10340986400842667,
        0.012196916155517101,
        0.1252480149269104,
        -0.016215136274695396,
        0.07013290375471115,
        0.08913885056972504,
        -0.029268350452184677,
        0.03184303641319275,
        0.010642790235579014,
        -0.03375016897916794,
        -0.08758822083473206,
        0.04106079041957855,
        0.05974121391773224,
        -0.010684079490602016,
        0.007942259311676025,
        0.04887794703245163,
        0.038771647959947586,
        -0.033869557082653046,
        -0.021475018933415413,
        0.0681135430932045,
        0.12840008735656738,
        -0.023469964042305946,
        -0.06741029024124146,
        0.04987135902047157,
        -0.013657590374350548,
        0.004250682424753904,
        -0.01336586568504572,
        -0.030529357492923737,
        -0.06232353299856186,
        -0.02439149282872677,
        -0.0032224718015640974,
        0.030248573049902916,
        0.08397383242845535,
        -0.036633607000112534,
        -0.10999960452318192,
        -0.02758297696709633,
        0.023704299703240395,
        -0.05196262523531914,
        -0.018588680773973465,
        -0.03843490779399872,
        0.04485391452908516,
        -0.0278087817132473,
        -0.031100574880838394,
        -0.073067307472229,
        0.04135343059897423,
        0.09006007015705109,
        -0.06528470665216446,
        -0.06141439825296402,
        -0.03735695406794548,
        0.08663957566022873,
        -0.010403601452708244,
        -0.0762835144996643,
        -0.10331104695796967,
        -0.032528966665267944,
        -0.025222424417734146,
        0.0704098492860794,
        0.07336578518152237,
        -0.004790883976966143,
        -0.0865435004234314,
        -0.008343824185431004,
        0.0013401644537225366,
        0.010770686902105808,
        0.05478441342711449,
        -0.013618898577988148,
        -0.07186468690633774,
        0.06920412182807922,
        -0.07112045586109161,
        -6.222536651427382e-33,
        0.05043759569525719,
        0.002019838197156787,
        -0.064455047249794,
        0.07815872877836227,
        -0.059159208089113235,
        0.017026297748088837,
        0.022071577608585358,
        -0.06287413090467453,
        0.03023427538573742,
        0.06680075824260712,
        -0.03950779139995575,
        0.033555470407009125,
        0.09248832613229752,
        0.0013950880384072661,
        0.046176012605428696,
        -0.018102537840604782,
        -0.02102377638220787,
        -0.04652339220046997,
        -0.004898957908153534,
        0.012080809101462364,
        -0.006845242343842983,
        0.057854074984788895,
        -0.038855891674757004,
        0.07087668776512146,
        -0.06477951258420944,
        0.06336699426174164,
        0.032824885100126266,
        0.030601227656006813,
        -0.052133720368146896,
        0.03877757489681244,
        0.01277932245284319,
        0.08893261104822159,
        -0.09438914805650711,
        -0.03803260251879692,
        -0.05710539594292641,
        -0.05998966470360756,
        0.0029558397363871336,
        -0.03948785364627838,
        0.004823053255677223,
        0.01695718616247177,
        0.029984867200255394,
        0.0367252342402935,
        -0.08168325573205948,
        -0.019680211320519447,
        -0.03563077375292778,
        -0.009840944781899452,
        0.0234273262321949,
        0.03292759135365486,
        -0.003647048259153962,
        -0.05592701956629753,
        0.014442125335335732,
        -0.0646306723356247,
        0.09065912663936615,
        -0.09627538174390793,
        0.020628778263926506,
        0.10435699671506882,
        -0.011348159052431583,
        -0.02834070660173893,
        0.04870050400495529,
        0.04728226736187935,
        0.013874785974621773,
        -0.02822195738554001,
        0.025330495089292526,
        -0.022468913346529007,
        -0.05092114210128784,
        0.02395697869360447,
        -0.05993938818573952,
        0.15820249915122986,
        0.009908181615173817,
        -0.06544236093759537,
        -0.009884302504360676,
        0.05670833960175514,
        0.0027257069014012814,
        0.000835901708342135,
        -0.029636144638061523,
        -0.04855404049158096,
        0.004502519033849239,
        0.015468308702111244,
        0.0389944426715374,
        0.07421108335256577,
        -0.021548302844166756,
        0.021982206031680107,
        -0.055475763976573944,
        -0.05207991972565651,
        -0.03617008030414581,
        -0.025802969932556152,
        -0.019072439521551132,
        0.028920091688632965,
        0.02659710682928562,
        -0.012046726420521736,
        0.04354070872068405,
        -0.011408748105168343,
        -0.024282976984977722,
        -0.05141429603099823,
        -0.08450234681367874,
        -4.830236832731316e-8,
        -0.07196356356143951,
        -0.0211147740483284,
        -0.09874884784221649,
        -0.07449691742658615,
        0.00928882509469986,
        0.004270748235285282,
        0.07723398506641388,
        -0.008623093366622925,
        -0.009384616278111935,
        0.03632714971899986,
        -0.016937896609306335,
        0.006391739472746849,
        -0.06375991553068161,
        0.017904024571180344,
        -0.07240109890699387,
        0.01681203581392765,
        -0.02913644351065159,
        0.1554587483406067,
        -0.06134035438299179,
        -0.00503214355558157,
        0.026003247126936913,
        0.009816031903028488,
        -0.007813808508217335,
        0.04037069156765938,
        0.0075623937882483006,
        -0.00918995589017868,
        0.001159538864158094,
        0.03540034219622612,
        -0.00882556289434433,
        0.04618270322680473,
        -0.061126746237277985,
        0.015501155517995358,
        -0.005027585197240114,
        -0.047383423894643784,
        -0.09975442290306091,
        0.09373880922794342,
        0.05394308641552925,
        0.021367548033595085,
        0.049661509692668915,
        0.044891636818647385,
        0.0680326446890831,
        0.03701259568333626,
        0.0056355614215135574,
        -0.028732437640428543,
        -0.07645319402217865,
        -0.03963392227888107,
        0.022773878648877144,
        0.008261262439191341,
        -0.010026364587247372,
        -0.0691852942109108,
        0.025117242708802223,
        -0.005553167778998613,
        -0.11514371633529663,
        0.038365744054317474,
        -0.0049988399259746075,
        -0.03774629905819893,
        -0.05915926769375801,
        -0.052907004952430725,
        -0.028234202414751053,
        0.01095933560281992,
        -0.026183318346738815,
        0.026275761425495148,
        0.09303678572177887,
        -0.050675999373197556
      ]
    },
    {
      "id": "d68bc09e",
      "filePath": "04-code-janitor/src/tools.ts",
      "content": "function validateCommand(cmd: string): void {\n\tconst isAllowed = ALLOWED_COMMANDS.some(prefix => cmd.startsWith(prefix));\n\tif (!isAllowed) {\n\t\tthrow new Error(`Security Error: Command \"${cmd}\" is not in whitelist`);\n\t}\n}\n\n// ============================================\n// Tool 1: 读取文件\n// ============================================",
      "startLine": 37,
      "endLine": 47,
      "type": "function",
      "name": "validateCommand",
      "embedding": [
        -0.061065178364515305,
        0.0812927782535553,
        0.010354571044445038,
        0.005620353855192661,
        0.021783925592899323,
        -0.010506526567041874,
        0.060714684426784515,
        0.021355798467993736,
        -0.06502717733383179,
        0.00967284757643938,
        -0.01174535509198904,
        -0.06173994019627571,
        0.02064746804535389,
        0.004588006064295769,
        -0.009601239114999771,
        0.02646602876484394,
        -0.0583987683057785,
        0.007095571141690016,
        -0.06688445061445236,
        -0.055214669555425644,
        0.016008639708161354,
        0.04870171844959259,
        -0.016557006165385246,
        -0.0028094719164073467,
        -0.015589706599712372,
        -0.009621637873351574,
        -0.018766671419143677,
        -0.03411407396197319,
        0.0350361131131649,
        0.046744078397750854,
        0.053255870938301086,
        -0.02979574166238308,
        0.03259333595633507,
        0.019606512039899826,
        0.13724875450134277,
        0.09957832098007202,
        0.017681105062365532,
        -0.02461591549217701,
        -0.01674116589128971,
        0.03496238589286804,
        -0.020565567538142204,
        0.013818771578371525,
        -0.027059281244874,
        -0.05046040192246437,
        -0.011776559054851532,
        -0.042370568960905075,
        -0.04102810472249985,
        -0.1038043200969696,
        -0.040776949375867844,
        -0.005538147874176502,
        -0.017345160245895386,
        0.03677843511104584,
        -0.028270235285162926,
        -0.09318665415048599,
        0.016247497871518135,
        0.01974577270448208,
        -0.025105664506554604,
        -0.029235584661364555,
        0.08165684342384338,
        -0.08243460953235626,
        -0.004896914586424828,
        0.0019808427896350622,
        -0.026148999109864235,
        -0.0274643674492836,
        0.025844525545835495,
        0.033848028630018234,
        -0.1299193799495697,
        0.03331936150789261,
        -0.01412452757358551,
        -0.004266402684152126,
        -0.012674924917519093,
        -0.015961119905114174,
        0.028920870274305344,
        0.11559433490037918,
        0.004305805545300245,
        0.007604988757520914,
        -0.0411597304046154,
        -0.0011443404946476221,
        -0.007735387422144413,
        -0.16636186838150024,
        0.0056887161917984486,
        -0.03238404542207718,
        0.0291866734623909,
        -0.013547814451158047,
        0.018656248226761818,
        0.15274786949157715,
        -0.01001477986574173,
        -0.04905185103416443,
        0.11137450486421585,
        0.06718811392784119,
        -0.0056824227795004845,
        -0.015628483146429062,
        0.00419769249856472,
        0.01797688938677311,
        0.003050822066143155,
        -0.04830307886004448,
        -0.05025402083992958,
        0.034332189708948135,
        -0.06814374774694443,
        0.08179254829883575,
        -0.08409775048494339,
        -0.015447266399860382,
        -0.042202990502119064,
        -0.02786938287317753,
        0.028020430356264114,
        -0.0013754687970504165,
        0.020753486081957817,
        -0.05488334223628044,
        -0.03890762850642204,
        -0.016298245638608932,
        0.03862496092915535,
        0.08098775893449783,
        -0.00906547624617815,
        -0.08844050765037537,
        0.052034780383110046,
        -0.05286768451333046,
        0.06973347067832947,
        -0.016697971150279045,
        -0.00441746274009347,
        0.07943550497293472,
        0.03674296662211418,
        -0.03989783301949501,
        -0.014186028391122818,
        0.03445497900247574,
        -0.021965252235531807,
        -0.08995722979307175,
        0.09579835087060928,
        1.4477624992965396e-32,
        0.016740286722779274,
        -0.06841222941875458,
        -0.08362293243408203,
        0.06231513246893883,
        0.011736501939594746,
        0.030476415529847145,
        0.00538152689114213,
        -0.03906502202153206,
        -0.12674064934253693,
        -0.0054799229837954044,
        0.02659042924642563,
        -0.02692451700568199,
        -0.07382409274578094,
        -0.007517142686992884,
        0.014504315331578255,
        0.022219747304916382,
        0.10150904208421707,
        -0.030718281865119934,
        0.022237442433834076,
        -0.06352893263101578,
        -0.03397505730390549,
        -0.025050252676010132,
        0.0043727620504796505,
        0.05567510798573494,
        -0.005294552072882652,
        -0.028975721448659897,
        -0.025147173553705215,
        0.013877186924219131,
        0.13378149271011353,
        0.032280322164297104,
        0.04400495067238808,
        -0.00021158359595574439,
        0.08941932022571564,
        0.08775576204061508,
        -0.0512763187289238,
        0.10191507637500763,
        -0.05241173133254051,
        -0.04929647594690323,
        -0.0034086289815604687,
        -0.00747164199128747,
        -0.027940116822719574,
        0.005081447307020426,
        -0.04355015978217125,
        0.023886585608124733,
        0.05071551725268364,
        -0.06517411023378372,
        -0.07032737880945206,
        0.059048689901828766,
        0.06976743787527084,
        0.028403108939528465,
        -0.06405270099639893,
        0.08809344470500946,
        0.011056751012802124,
        0.007977445609867573,
        -0.006180658005177975,
        -0.0709707960486412,
        -0.06411522626876831,
        0.04142572358250618,
        0.030543722212314606,
        0.007550877518951893,
        0.05403449386358261,
        0.10479362308979034,
        -0.05112561956048012,
        0.0578618198633194,
        0.09169640392065048,
        -0.08069264888763428,
        -0.0030933294910937548,
        -0.005448085255920887,
        -0.007955042645335197,
        -0.0516839362680912,
        -0.05445239692926407,
        -0.05866602808237076,
        0.0025501728523522615,
        0.06056395545601845,
        -0.0290974248200655,
        -0.07270734012126923,
        0.016193220391869545,
        0.007349805906414986,
        -0.053029466420412064,
        -0.08734184503555298,
        0.010810500010848045,
        -0.0235239639878273,
        -0.06160880997776985,
        0.044410645961761475,
        0.03692387416958809,
        -0.007957635447382927,
        -0.015863114967942238,
        -0.015501138754189014,
        0.01967087760567665,
        0.057297755032777786,
        -0.02948959730565548,
        -0.05276675149798393,
        -0.041815441101789474,
        0.03356509655714035,
        -0.1202910915017128,
        -1.63744012080843e-32,
        0.08162400871515274,
        0.07394259423017502,
        0.007039226591587067,
        0.09160638600587845,
        -0.08527529984712601,
        -0.03160960227251053,
        -0.026991628110408783,
        -0.026705285534262657,
        -0.04166412353515625,
        0.003717647399753332,
        0.04544880986213684,
        0.001489258254878223,
        0.03135150298476219,
        -0.00886530987918377,
        0.01940639317035675,
        -0.029046475887298584,
        -0.06819150596857071,
        -0.005292024463415146,
        -0.023099595680832863,
        0.04908405989408493,
        0.03986481949687004,
        0.09330087155103683,
        -0.012157655321061611,
        0.09810925275087357,
        -0.0757453665137291,
        -0.009873627685010433,
        -0.0007655082154087722,
        0.015196505934000015,
        -0.05916069820523262,
        0.015813468024134636,
        -0.009138801135122776,
        0.11862664669752121,
        -0.10053618252277374,
        0.043045781552791595,
        -0.07938341796398163,
        -0.13297078013420105,
        0.07622607797384262,
        0.030811835080385208,
        0.05228830873966217,
        0.04065486416220665,
        0.02671528421342373,
        0.06433933228254318,
        -0.036724306643009186,
        -0.06796354800462723,
        -0.058020953088998795,
        -0.03461796045303345,
        0.0158472191542387,
        0.022129006683826447,
        -0.020855562761425972,
        -0.08543437719345093,
        -0.0028948509134352207,
        -0.09337630122900009,
        0.03143494948744774,
        -0.07344572991132736,
        -0.010751320980489254,
        0.004781858529895544,
        0.040194664150476456,
        -0.07324164360761642,
        0.006581199821084738,
        0.038941364735364914,
        0.019980525597929955,
        0.009589079767465591,
        0.05735845863819122,
        0.011993758380413055,
        0.0020977610256522894,
        0.001869954401627183,
        -0.05020589753985405,
        0.10254456847906113,
        0.029697583988308907,
        -0.06786786764860153,
        0.04507112503051758,
        -0.013128601014614105,
        0.012320131063461304,
        -0.01707841269671917,
        -0.08299658447504044,
        -0.024944763630628586,
        -0.026550885289907455,
        -0.0533309131860733,
        0.044327512383461,
        0.09867054224014282,
        0.03622286766767502,
        0.0040102326311171055,
        0.03692547604441643,
        -0.009450169280171394,
        -0.05974175035953522,
        0.02437411993741989,
        -0.03020789846777916,
        0.03396999090909958,
        -0.06243518739938736,
        -0.004051818046718836,
        0.006761495023965836,
        -0.06932104378938675,
        0.04528117924928665,
        0.003176887519657612,
        0.008267220109701157,
        -7.206137553339431e-8,
        -0.10035001486539841,
        -0.08632275462150574,
        -0.052727073431015015,
        -0.07772385329008102,
        0.006173464935272932,
        0.022902486845850945,
        -0.040044110268354416,
        -0.18482425808906555,
        0.03639936074614525,
        -0.04841800779104233,
        0.030568096786737442,
        -0.006578346714377403,
        -0.11884277313947678,
        -0.04684755951166153,
        -0.07752631604671478,
        -0.0037209277506917715,
        -0.040764566510915756,
        0.016353074461221695,
        -0.024827295914292336,
        0.014054900966584682,
        0.004539911635220051,
        -0.021717656403779984,
        0.03901863098144531,
        0.013282869011163712,
        0.010500428266823292,
        0.013794146478176117,
        -0.0656692311167717,
        0.0510343462228775,
        -0.04298635199666023,
        0.0669247955083847,
        0.032897453755140305,
        -0.015773683786392212,
        0.08772088587284088,
        -0.013136940076947212,
        -0.005993462633341551,
        0.07800737768411636,
        0.03283235430717468,
        -0.034258078783750534,
        0.013780969195067883,
        -0.02701764740049839,
        0.061656609177589417,
        0.021383970975875854,
        -0.014555956237018108,
        0.023162303492426872,
        -0.07069357484579086,
        -0.043974619358778,
        0.03554009646177292,
        0.002027788432314992,
        -0.015603343956172466,
        -0.07420556247234344,
        0.019277552142739296,
        0.010097324848175049,
        -0.03897105157375336,
        0.04871125519275665,
        -0.05518684163689613,
        -0.03459543362259865,
        -0.01237583253532648,
        -0.02030857279896736,
        -0.03500388562679291,
        0.026420868933200836,
        -0.010335714556276798,
        -0.020999662578105927,
        0.021773945540189743,
        0.0008043351699598134
      ]
    },
    {
      "id": "07d05b8b",
      "filePath": "04-code-janitor/src/tools.ts",
      "content": "export function readFile(relativePath: string): string {\n\tconst fullPath = validatePath(relativePath);\n\n\tif (!fs.existsSync(fullPath)) {\n\t\tthrow new Error(`File not found: ${relativePath}`);\n\t}\n\n\tconst content = fs.readFileSync(fullPath, 'utf-8');\n\tconsole.log(`📖 [read_file] ${relativePath} (${content.length} chars)`);\n\n\t// 如果文件太大，截断以节省 Token\n\tif (content.length > 5000) {\n\t\tconsole.log(`   ⚠️  Truncated to 5000 chars`);\n\t\treturn content.slice(0, 5000) + '\\n... (truncated)';\n\t}\n\n\treturn content;\n}\n\n// ============================================\n// Tool 2: 写入文件\n// ============================================",
      "startLine": 48,
      "endLine": 70,
      "type": "function",
      "name": "readFile",
      "embedding": [
        -0.0615030974149704,
        0.05798042193055153,
        0.01271220576018095,
        0.012730269692838192,
        0.04907951131463051,
        -0.0190937127918005,
        0.0028452780097723007,
        0.07178089767694473,
        0.06606108695268631,
        0.061528343707323074,
        0.0327947624027729,
        0.023085622116923332,
        -0.005946414545178413,
        -0.02510467730462551,
        -0.020791005343198776,
        0.00038492566091008484,
        -0.1528034657239914,
        0.04694507271051407,
        -0.10632065683603287,
        -0.05960589647293091,
        0.05159948393702507,
        -0.0027857681270688772,
        0.031278494745492935,
        -0.016228044405579567,
        0.06445252150297165,
        0.05809528008103371,
        -0.03630587086081505,
        -0.043130841106176376,
        -0.04671158641576767,
        0.0262245312333107,
        0.022982943803071976,
        0.012027149088680744,
        -0.001556413248181343,
        0.010630487464368343,
        0.10710763931274414,
        0.10159649699926376,
        -0.004468967206776142,
        -0.057502564042806625,
        0.03832847625017166,
        0.006791042163968086,
        -0.02853311598300934,
        0.03273589164018631,
        0.02241945080459118,
        -0.04117470979690552,
        0.10473590344190598,
        -0.009755711071193218,
        -0.03218158707022667,
        -0.03274061530828476,
        -0.01934024505317211,
        0.01748357154428959,
        -0.09133888781070709,
        0.024013282731175423,
        -0.06353204697370529,
        -0.02489784173667431,
        0.01991335116326809,
        -0.0344531312584877,
        -0.021734656766057014,
        -0.000933776784222573,
        0.023212729021906853,
        0.005936556961387396,
        -0.005876423325389624,
        -0.021626321598887444,
        0.026870274916291237,
        -0.08229829370975494,
        0.08570956438779831,
        0.0037989686243236065,
        -0.0980718582868576,
        0.0777456983923912,
        0.0003616141912061721,
        0.009623744525015354,
        -0.05683907866477966,
        0.051341552287340164,
        -0.058638110756874084,
        0.12666165828704834,
        -0.01133724581450224,
        -0.05551218241453171,
        -0.05344674363732338,
        0.0742596760392189,
        0.04202933982014656,
        -0.10975237935781479,
        -0.021169420331716537,
        -0.07886987179517746,
        0.07866950333118439,
        0.009243923239409924,
        -0.0056312973611056805,
        0.1037783995270729,
        0.002004185924306512,
        -0.012427130714058876,
        0.040690843015909195,
        0.005459478124976158,
        -0.03341967985033989,
        0.0012227559927850962,
        0.024140402674674988,
        0.049388062208890915,
        -0.029575135558843613,
        0.021402662619948387,
        -0.06293140351772308,
        0.12947675585746765,
        -0.02879449911415577,
        0.05443945154547691,
        -0.024263400584459305,
        0.00882295798510313,
        -0.006767861545085907,
        -0.019862588495016098,
        -0.009668917395174503,
        -0.016130497679114342,
        0.03693416342139244,
        0.017785510048270226,
        0.01945609599351883,
        -0.05802900716662407,
        0.05143740028142929,
        0.012303047813475132,
        -0.019268415868282318,
        -0.062375713139772415,
        0.03723007068037987,
        -0.07921314984560013,
        0.041989609599113464,
        -0.07416719198226929,
        -0.02129647321999073,
        0.11741913855075836,
        0.03826716169714928,
        -0.021685801446437836,
        -0.08100853860378265,
        0.09004198759794235,
        -0.015733877196907997,
        -0.07387173920869827,
        0.19643262028694153,
        1.4785792591976967e-32,
        -0.11331117898225784,
        0.02452133409678936,
        0.018989942967891693,
        0.05376872420310974,
        -0.02357061766088009,
        -0.08002886176109314,
        -0.024881502613425255,
        -0.024867361411452293,
        -0.13661536574363708,
        -0.00281861936673522,
        -0.06309833377599716,
        -0.010404004715383053,
        -0.038508638739585876,
        -0.04264456406235695,
        -0.03172774612903595,
        -0.03499864414334297,
        0.08472850918769836,
        -0.04140739515423775,
        0.02161513641476631,
        -0.043357476592063904,
        -0.005225000437349081,
        -0.0548032745718956,
        0.04486668482422829,
        0.011584896594285965,
        -0.02117602713406086,
        -0.032454442232847214,
        0.030544428154826164,
        -0.0513332262635231,
        0.0314289852976799,
        -0.0016166832065209746,
        0.07662052661180496,
        -0.05260768160223961,
        0.04792065918445587,
        0.01997736468911171,
        -0.03585877642035484,
        -0.0028457900043576956,
        0.05465218424797058,
        -0.008868144825100899,
        -0.0893867164850235,
        0.06612912565469742,
        -0.006875922437757254,
        0.015629708766937256,
        0.0010720737045630813,
        0.042842622846364975,
        -0.024475308135151863,
        0.017472388222813606,
        -0.012378910556435585,
        -0.0008673292468301952,
        0.00873063039034605,
        0.023257814347743988,
        -0.03586702048778534,
        0.12715129554271698,
        0.0303155817091465,
        0.05055883899331093,
        0.06807851046323776,
        -0.024385729804635048,
        0.020966429263353348,
        -0.02406025305390358,
        -0.004866514354944229,
        -0.020317163318395615,
        0.12962457537651062,
        0.03850830718874931,
        -0.010816050693392754,
        0.031954195350408554,
        0.09618612378835678,
        -0.05876661092042923,
        0.06128619611263275,
        0.02459675632417202,
        0.018714558333158493,
        -0.021886272355914116,
        -0.053572673350572586,
        -0.10935831815004349,
        0.0858059749007225,
        0.02871948666870594,
        -0.022101541981101036,
        -0.04212565720081329,
        -0.07353197038173676,
        -0.02002965472638607,
        -0.015286542475223541,
        -0.09107884019613266,
        -0.04298587888479233,
        -0.04376700893044472,
        0.035359885543584824,
        -0.027140425518155098,
        0.020771538838744164,
        -0.0226774699985981,
        0.024020018056035042,
        -0.10508087277412415,
        0.02860368601977825,
        -0.012907971628010273,
        -0.010939531959593296,
        -0.030286112800240517,
        -0.03739485517144203,
        -0.022955654188990593,
        -0.04197869077324867,
        -1.281003785016219e-32,
        0.08675169199705124,
        0.0319867879152298,
        -0.018881013616919518,
        0.05370977148413658,
        -0.05013766884803772,
        -0.011656402610242367,
        0.0016583144897595048,
        0.053876012563705444,
        0.03639187291264534,
        0.06290208548307419,
        0.0024038960691541433,
        -0.012868179939687252,
        0.036121077835559845,
        0.0018458787817507982,
        0.03176810219883919,
        -0.017031559720635414,
        0.007956485264003277,
        -0.029083851724863052,
        -0.0047119478695094585,
        0.00756001565605402,
        0.013792110607028008,
        0.013472083024680614,
        0.029303831979632378,
        0.09152372926473618,
        -0.02845841646194458,
        0.07285270094871521,
        0.051817942410707474,
        0.006244267802685499,
        -0.09311968088150024,
        -0.04888961464166641,
        -0.07474622875452042,
        0.03708282485604286,
        -0.0780571773648262,
        -0.02037418633699417,
        -0.02926856465637684,
        -0.10598789900541306,
        0.052904289215803146,
        0.06388352066278458,
        0.0069849127903580666,
        0.03435593098402023,
        -0.019709935411810875,
        0.05131315812468529,
        -0.05023271217942238,
        -0.09502286463975906,
        -0.006562198977917433,
        -0.020266981795430183,
        0.0034852074459195137,
        0.1302647739648819,
        -0.022733129560947418,
        -0.08829615265130997,
        0.08683046698570251,
        -0.02794867567718029,
        0.0259530209004879,
        -0.036651577800512314,
        0.018947783857584,
        -0.0026012584567070007,
        -0.020975511521100998,
        -0.052584268152713776,
        -0.061480581760406494,
        -0.03328837454319,
        -0.0556594580411911,
        -0.03231233358383179,
        0.004278046078979969,
        -0.05434424430131912,
        0.020070916041731834,
        0.007297286298125982,
        0.0012870689388364553,
        0.0705539658665657,
        0.022247474640607834,
        -0.06413298100233078,
        0.019968852400779724,
        0.0025851100217550993,
        0.0011681048199534416,
        -0.0017459556693211198,
        -0.044372670352458954,
        0.041481371968984604,
        -0.025793585926294327,
        -0.039839621633291245,
        0.05722823739051819,
        0.10352322459220886,
        -0.026347707957029343,
        0.028660202398896217,
        0.011712784878909588,
        0.040726758539676666,
        0.028102528303861618,
        0.00169784901663661,
        -0.09170754998922348,
        0.03847331926226616,
        0.004647024441510439,
        -0.00810258649289608,
        0.011622876860201359,
        -0.02487405762076378,
        0.025163864716887474,
        -0.005775779485702515,
        -0.004037700593471527,
        -6.943162134120939e-8,
        -0.08900683373212814,
        -0.06000025197863579,
        -0.1185055747628212,
        -0.052756957709789276,
        -0.007581612560898066,
        0.014127413742244244,
        -0.02948976866900921,
        -0.09034603834152222,
        0.013910014182329178,
        -0.01993452198803425,
        0.04858511686325073,
        -0.03885429725050926,
        -0.08147713541984558,
        0.005099503323435783,
        -0.10488177835941315,
        -0.05482393875718117,
        0.05235852301120758,
        0.047301266342401505,
        -0.033151090145111084,
        0.025542739778757095,
        0.08070240914821625,
        0.05006469413638115,
        0.02578926272690296,
        -0.01838291622698307,
        0.04865998029708862,
        -0.023125911131501198,
        -0.042321860790252686,
        0.02033173479139805,
        -0.031102823093533516,
        -0.05485201254487038,
        -0.02068958804011345,
        -0.00885232537984848,
        0.05589140206575394,
        -0.030390465632081032,
        -0.032932113856077194,
        0.045947495847940445,
        0.07029904425144196,
        0.002978371921926737,
        -0.037182338535785675,
        0.07665988802909851,
        0.09407898038625717,
        -0.03000190295279026,
        -0.017417792230844498,
        0.016965940594673157,
        -0.03314391151070595,
        -0.12066719681024551,
        0.09373466670513153,
        -0.001380136702209711,
        0.021003423258662224,
        -0.05892109498381615,
        0.06381331384181976,
        -0.021900037303566933,
        -0.06225913390517235,
        0.029161063954234123,
        -0.06491782516241074,
        -0.06457710266113281,
        0.0063606989569962025,
        0.05240311473608017,
        -0.058791738003492355,
        0.03232294321060181,
        0.04225185513496399,
        0.0033315857872366905,
        0.015585457906126976,
        -0.027764813974499702
      ]
    },
    {
      "id": "37bd967b",
      "filePath": "04-code-janitor/src/tools.ts",
      "content": "export function writeFile(relativePath: string, content: string): void {\n\tconst fullPath = validatePath(relativePath);\n\n\t// 确保目录存在\n\tconst dir = path.dirname(fullPath);\n\tif (!fs.existsSync(dir)) {\n\t\tfs.mkdirSync(dir, { recursive: true });\n\t}\n\n\tfs.writeFileSync(fullPath, content, 'utf-8');\n\tconsole.log(`✏️  [write_file] ${relativePath} (${content.length} chars)`);\n}\n\n// ============================================\n// Tool 3: 列出目录\n// ============================================",
      "startLine": 71,
      "endLine": 87,
      "type": "function",
      "name": "writeFile",
      "embedding": [
        -0.051369138062000275,
        0.0227101631462574,
        -0.005299694836139679,
        0.023251596838235855,
        0.03908160701394081,
        -0.016693919897079468,
        -0.017255758866667747,
        0.043861858546733856,
        0.08278000354766846,
        0.0687909871339798,
        0.007222470361739397,
        0.04679512232542038,
        -0.03774256259202957,
        -0.04520529508590698,
        -0.04158484935760498,
        0.00354208261705935,
        -0.12476082891225815,
        0.03581592068076134,
        -0.05175776407122612,
        -0.035242848098278046,
        0.049413133412599564,
        -0.005139975342899561,
        0.07031455636024475,
        -0.014339499175548553,
        0.0974511057138443,
        0.06489169597625732,
        0.007614046800881624,
        -0.009597299620509148,
        -0.016741663217544556,
        -0.0017872604075819254,
        0.028662126511335373,
        -0.015769390389323235,
        -0.016087409108877182,
        -0.036374904215335846,
        0.1290265917778015,
        0.12759064137935638,
        0.0013709483901038766,
        -0.06446103751659393,
        -0.011717685498297215,
        0.027584580704569817,
        -0.0049057998694479465,
        0.051050812005996704,
        0.021640321239829063,
        -0.06560925394296646,
        0.06079202890396118,
        -0.042469218373298645,
        -0.06698377430438995,
        -0.050547800958156586,
        -0.043325137346982956,
        0.023725152015686035,
        -0.04835205525159836,
        0.02647913061082363,
        -0.07380164414644241,
        -0.09088174998760223,
        0.0316503532230854,
        0.016056345775723457,
        -0.025593247264623642,
        -0.021619193255901337,
        0.017762113362550735,
        0.02226969599723816,
        0.05006404593586922,
        0.016967806965112686,
        0.020825602114200592,
        -0.0983056128025055,
        0.052327755838632584,
        0.03892340883612633,
        -0.09642098844051361,
        0.0809834748506546,
        -0.029077889397740364,
        -0.01854119822382927,
        -0.04197291284799576,
        0.0497092567384243,
        -0.04334379732608795,
        0.09742119908332825,
        0.0015511567471548915,
        -0.07428842037916183,
        -0.050847720354795456,
        0.10026637464761734,
        0.004828738979995251,
        -0.12044733017683029,
        0.0315081961452961,
        -0.06044542416930199,
        0.029743358492851257,
        0.030387170612812042,
        0.033361565321683884,
        0.11024323850870132,
        0.0028239511884748936,
        -0.021460721269249916,
        0.034914594143629074,
        0.03210490942001343,
        -0.05467675253748894,
        -0.022395960986614227,
        0.021816691383719444,
        0.014857410453259945,
        -0.030379367992281914,
        0.0028165318071842194,
        -0.043944213539361954,
        0.14783383905887604,
        -0.0008151255897246301,
        0.020547296851873398,
        -0.04647299274802208,
        -0.0035965696442872286,
        -0.018757523968815804,
        -0.004256854765117168,
        -0.00015583868662361056,
        0.050378188490867615,
        0.012153937481343746,
        -0.01512898225337267,
        -0.04136262089014053,
        -0.04744287580251694,
        0.03361133858561516,
        0.07977600395679474,
        -0.03161050006747246,
        -0.06503931432962418,
        0.0311298631131649,
        -0.0778408944606781,
        0.00095574144506827,
        -0.06451107561588287,
        0.0015603507636114955,
        0.12691019475460052,
        0.08369983732700348,
        -0.026445681229233742,
        -0.0425957515835762,
        0.09224360436201096,
        -0.007965302094817162,
        -0.09143450856208801,
        0.17548149824142456,
        1.7614756398449085e-32,
        -0.04472031816840172,
        0.031423188745975494,
        -0.0005572292138822377,
        0.07133742421865463,
        0.0059889848344028,
        -0.0369311198592186,
        -0.022890642285346985,
        -0.04032430797815323,
        -0.12212304025888443,
        0.02309134416282177,
        -0.049382615834474564,
        -0.03132302686572075,
        -0.05879810452461243,
        -0.05962863564491272,
        -0.04131382703781128,
        -0.03808024153113365,
        0.06920706480741501,
        -0.04373858496546745,
        -0.020688412711024284,
        -0.009607557207345963,
        0.004140390548855066,
        0.00823972001671791,
        0.006500352174043655,
        0.013038250617682934,
        -0.04330689087510109,
        -0.022010937333106995,
        -0.004908962175250053,
        -0.02748294174671173,
        0.01757683977484703,
        -0.009322116151452065,
        0.1269361823797226,
        -0.019842352718114853,
        0.07760003209114075,
        0.05598123371601105,
        -0.073880136013031,
        0.009981119073927402,
        -0.017216181382536888,
        -0.057287707924842834,
        -0.06867025792598724,
        0.08960424363613129,
        -0.01850363053381443,
        0.010105526074767113,
        -0.0361773706972599,
        0.007973496802151203,
        -0.033420462161302567,
        0.03409787267446518,
        -0.016852492466568947,
        0.02389678917825222,
        0.06497268378734589,
        -0.0110192084684968,
        -0.049485910683870316,
        0.139072984457016,
        0.023295912891626358,
        0.05221233516931534,
        0.051881562918424606,
        -0.000051907565648434684,
        -0.0158685315400362,
        -0.043874144554138184,
        0.03380483016371727,
        0.014123226515948772,
        0.11744019389152527,
        0.10709322988986969,
        -0.06396687030792236,
        -0.01195918582379818,
        0.038630664348602295,
        -0.10517469048500061,
        0.07677220553159714,
        -0.022297771647572517,
        0.042786605656147,
        -0.022667551413178444,
        -0.0597386471927166,
        -0.0979083925485611,
        0.01906968280673027,
        0.0284586101770401,
        0.02712808921933174,
        -0.02984529361128807,
        -0.06760597974061966,
        0.018879085779190063,
        -0.002394650364294648,
        -0.09393768012523651,
        -0.09238777309656143,
        -0.026420893147587776,
        -0.0050811441615223885,
        -0.002839763183146715,
        0.07305043935775757,
        -0.06692829728126526,
        -0.03976552188396454,
        -0.05569450184702873,
        0.027871377766132355,
        0.007489121984690428,
        0.020918812602758408,
        -0.06997782737016678,
        -0.03904995694756508,
        -0.02723119407892227,
        -0.055236123502254486,
        -1.6543281542731062e-32,
        0.10154622793197632,
        0.014472921378910542,
        -0.018265588209033012,
        0.048292044550180435,
        -0.07870810478925705,
        -0.025620898231863976,
        -0.046230804175138474,
        -0.004329276271164417,
        0.02143581211566925,
        0.07330630719661713,
        -0.019543763250112534,
        0.023764807730913162,
        0.030273735523223877,
        -0.008621214888989925,
        0.05536862462759018,
        -0.01841793954372406,
        -0.008030589669942856,
        -0.029223395511507988,
        -0.012232568114995956,
        -0.036535244435071945,
        0.04934222623705864,
        0.04292426258325577,
        0.07571675628423691,
        0.08739924430847168,
        -0.028843093663454056,
        0.024887220934033394,
        0.020884191617369652,
        0.03446992486715317,
        -0.0688352957367897,
        -0.03846893459558487,
        -0.024747157469391823,
        0.06243499368429184,
        -0.06654510647058487,
        -0.04032211750745773,
        -0.04353649541735649,
        -0.11772899329662323,
        0.03883151337504387,
        0.045875612646341324,
        0.028362993150949478,
        0.02967424876987934,
        0.016358545050024986,
        0.023879600688815117,
        -0.031168008223176003,
        -0.049609456211328506,
        -0.03173917531967163,
        -0.001194008276797831,
        0.006886834744364023,
        0.07872719317674637,
        0.016335224732756615,
        -0.069752536714077,
        0.07790825515985489,
        -0.06757374852895737,
        0.013589883223176003,
        -0.050770439207553864,
        0.04624258354306221,
        0.007020053919404745,
        -0.018185939639806747,
        -0.11383608728647232,
        -0.0005710624973289669,
        0.03703991696238518,
        0.013769465498626232,
        -0.04723205044865608,
        0.037705447524785995,
        -0.06466008722782135,
        0.013394605368375778,
        -0.014930079691112041,
        -0.010381560772657394,
        0.08092107623815536,
        0.019034015014767647,
        -0.05249932408332825,
        -0.009180551394820213,
        -0.01675773784518242,
        -0.00533163221552968,
        0.01606750302016735,
        -0.04131801798939705,
        -0.002200465649366379,
        -0.044081855565309525,
        -0.017440762370824814,
        0.08922708034515381,
        0.07100945711135864,
        0.006377202458679676,
        0.019241785630583763,
        -0.021276187151670456,
        0.049945585429668427,
        -0.0010713476222008467,
        -0.03348342701792717,
        -0.03931717574596405,
        0.01691265031695366,
        0.019873617216944695,
        -0.030515337362885475,
        0.0021639380138367414,
        0.022225799039006233,
        0.01232252735644579,
        -0.030235346406698227,
        -0.0201979149132967,
        -7.345535379954526e-8,
        -0.11838287115097046,
        -0.08746394515037537,
        -0.12652595341205597,
        -0.05621180310845375,
        -0.013716338202357292,
        -0.02699270285665989,
        0.01798940636217594,
        -0.06354380398988724,
        0.01622152328491211,
        -0.003918680362403393,
        0.04915766417980194,
        -0.03422877565026283,
        -0.05987870693206787,
        -0.07078863680362701,
        -0.08499685674905777,
        -0.007974537089467049,
        0.03485380485653877,
        0.09435535967350006,
        -0.04259267449378967,
        -0.0012147851521149278,
        0.07533565163612366,
        0.04318865016102791,
        0.006081791594624519,
        -0.005028672982007265,
        0.014215203002095222,
        -0.04457060992717743,
        0.002417832612991333,
        -0.013728039339184761,
        0.00188460573554039,
        -0.011957406997680664,
        0.0029012213926762342,
        -0.024987099692225456,
        0.07259438186883926,
        -0.025252142921090126,
        -0.0915469080209732,
        0.007590045686811209,
        0.08779370039701462,
        0.003956097178161144,
        0.01770026981830597,
        0.03896677866578102,
        0.05706731975078583,
        0.031153928488492966,
        -0.03420853987336159,
        0.026539795100688934,
        -0.040172167122364044,
        -0.11959608644247055,
        0.046246860176324844,
        0.0033626144286245108,
        -0.01986835151910782,
        -0.0797361433506012,
        0.010864244773983955,
        -0.027969175949692726,
        -0.06589630246162415,
        0.051610130816698074,
        -0.04444296658039093,
        -0.07072284817695618,
        -0.02352714166045189,
        0.044119756668806076,
        0.00030373461777344346,
        0.0037105130031704903,
        -0.010576501488685608,
        0.022817425429821014,
        0.055460356175899506,
        -0.007871964946389198
      ]
    },
    {
      "id": "fe1fddc5",
      "filePath": "04-code-janitor/src/tools.ts",
      "content": "export function listDir(relativePath: string = '.'): string[] {\n\tconst fullPath = validatePath(relativePath);\n\n\tif (!fs.existsSync(fullPath)) {\n\t\tthrow new Error(`Directory not found: ${relativePath}`);\n\t}\n\n\tconst entries = fs.readdirSync(fullPath, { withFileTypes: true });\n\tconst result = entries.map(e => {\n\t\tconst prefix = e.isDirectory() ? '[DIR]' : '[FILE]';\n\t\treturn `${prefix} ${e.name}`;\n\t});\n\n\tconsole.log(`📂 [list_dir] ${relativePath} (${result.length} items)`);\n\treturn result;\n}\n\n// ============================================\n// Tool 4: 执行命令\n// ============================================",
      "startLine": 88,
      "endLine": 108,
      "type": "function",
      "name": "listDir",
      "embedding": [
        -0.06278488785028458,
        0.05765923857688904,
        0.01845022849738598,
        0.030902303755283356,
        0.0843995064496994,
        -0.010977580212056637,
        0.02207557111978531,
        0.08858837932348251,
        0.0513368584215641,
        0.04546535015106201,
        0.0032150140032172203,
        0.03847530856728554,
        -0.028953831642866135,
        0.014521954581141472,
        -0.011512625962495804,
        0.046774961054325104,
        -0.09924392402172089,
        0.037561994045972824,
        -0.03826967254281044,
        -0.08047302067279816,
        0.022678151726722717,
        0.06994673609733582,
        0.039078302681446075,
        -0.014154094271361828,
        0.06992064416408539,
        0.0420006588101387,
        0.010685146786272526,
        -0.07141432911157608,
        -0.028434665873646736,
        0.014947643503546715,
        0.07213699072599411,
        0.01139541994780302,
        -0.041843779385089874,
        0.023009832948446274,
        0.11432313174009323,
        0.10570655018091202,
        -0.0011081937700510025,
        -0.013070418499410152,
        0.014329520054161549,
        0.02050740085542202,
        0.019664382562041283,
        0.06141607463359833,
        0.025968044996261597,
        -0.10418897122144699,
        0.03334036096930504,
        -0.0812927857041359,
        -0.04802035912871361,
        -0.03708166256546974,
        -0.039397500455379486,
        0.05171596631407738,
        -0.04689959064126015,
        -0.026813950389623642,
        -0.07793005555868149,
        -0.10448910295963287,
        0.040450889617204666,
        0.05481446161866188,
        -0.04169495403766632,
        -0.025875741615891457,
        -0.004434250760823488,
        0.004578922875225544,
        0.09104187786579132,
        -0.07146070897579193,
        0.04547808691859245,
        -0.10861669480800629,
        0.025521473959088326,
        0.005485944915562868,
        -0.06756005436182022,
        0.10715444386005402,
        0.004394409712404013,
        -0.004654332995414734,
        0.028126750141382217,
        0.07579942047595978,
        -0.06228502467274666,
        0.05683539807796478,
        0.004532224964350462,
        -0.08141409605741501,
        -0.04174429923295975,
        0.07137053459882736,
        0.025293024256825447,
        -0.07153739035129547,
        0.02051742933690548,
        -0.04975171759724617,
        0.03713002800941467,
        -0.00271028745919466,
        0.009902028366923332,
        0.09035023301839828,
        0.009396959096193314,
        -0.02858792059123516,
        0.02464902028441429,
        -0.06884992867708206,
        -0.03508696332573891,
        -0.0683792307972908,
        -0.005414310842752457,
        0.012271170504391193,
        0.02393876016139984,
        0.02202223613858223,
        -0.05279425159096718,
        0.1049962267279625,
        -0.013630971312522888,
        0.00985074695199728,
        -0.03585028275847435,
        0.020621761679649353,
        -0.041430968791246414,
        -0.027347922325134277,
        -0.03138493373990059,
        0.05061320587992668,
        -0.0002521659480407834,
        -0.05975418537855148,
        -0.051743973046541214,
        -0.016264626756310463,
        0.006103587802499533,
        0.08674609661102295,
        -0.03251445293426514,
        -0.008574972860515118,
        0.0022475614678114653,
        -0.1588081270456314,
        0.007738401647657156,
        -0.03088727407157421,
        0.025464747101068497,
        0.1368269920349121,
        0.07504725456237793,
        -0.05451706051826477,
        0.0027704390231519938,
        0.0654304176568985,
        0.03884309157729149,
        -0.08297326415777206,
        0.09567335247993469,
        1.6387121526328136e-32,
        -0.09102465212345123,
        0.026654088869690895,
        0.051499832421541214,
        0.006057292222976685,
        -0.0054291049018502235,
        -0.06727007776498795,
        -0.010706976056098938,
        -0.01348910853266716,
        -0.06581245362758636,
        0.056766580790281296,
        -0.049625709652900696,
        0.02485855109989643,
        -0.0403289720416069,
        -0.07781078666448593,
        -0.0622854009270668,
        -0.020539231598377228,
        0.07058756798505783,
        -0.035764485597610474,
        -0.032678306102752686,
        -0.03331445902585983,
        -0.026965821161866188,
        0.020120110362768173,
        -0.009612534195184708,
        0.006147277541458607,
        -0.023341987282037735,
        -0.08830801397562027,
        0.005295631941407919,
        0.00918323453515768,
        0.06147101894021034,
        -0.0066659776493906975,
        0.10912321507930756,
        0.002792015206068754,
        0.060327209532260895,
        0.09116867184638977,
        -0.043611932545900345,
        0.08264365047216415,
        0.0035076700150966644,
        -0.07042965292930603,
        -0.07529031485319138,
        0.05117393657565117,
        0.014191296882927418,
        0.023981697857379913,
        -0.05584191158413887,
        0.0603969506919384,
        -0.028290245682001114,
        -0.0027009707409888506,
        -0.0034172439482063055,
        -0.010937047190964222,
        0.03451589494943619,
        -0.0022843920160084963,
        -0.1064232662320137,
        0.08181948959827423,
        -0.011797328479588032,
        0.030664151534438133,
        0.02699749730527401,
        -0.020503750070929527,
        -0.029808616265654564,
        -0.029327938333153725,
        0.027648577466607094,
        0.03471224755048752,
        0.021932467818260193,
        0.0823923870921135,
        -0.0670122355222702,
        -0.012011081911623478,
        0.048110947012901306,
        -0.10801629722118378,
        0.09387081861495972,
        -0.023209644481539726,
        0.006293009500950575,
        0.027456818148493767,
        -0.025665638968348503,
        -0.0396278090775013,
        0.018997833132743835,
        0.03938385099172592,
        0.044364333152770996,
        -0.02604331634938717,
        -0.09612367302179337,
        0.004668192472308874,
        -0.03577793762087822,
        -0.10313522070646286,
        -0.08470039069652557,
        -0.06042291596531868,
        -0.050789304077625275,
        0.0482797734439373,
        0.10432422906160355,
        -0.029803108423948288,
        -0.019771860912442207,
        -0.06350840628147125,
        0.01409360021352768,
        -0.004779005888849497,
        0.019583208486437798,
        -0.02680816873908043,
        -0.07347855716943741,
        0.0010629540774971247,
        -0.032837048172950745,
        -1.625138278553487e-32,
        0.13374780118465424,
        0.04724724590778351,
        0.04465993493795395,
        0.010019665583968163,
        -0.044518936425447464,
        -0.06655637919902802,
        0.009364032186567783,
        -0.030589336529374123,
        0.025607731193304062,
        0.03933233022689819,
        -0.024402696639299393,
        0.024178072810173035,
        0.03300574794411659,
        -0.00705723324790597,
        0.06876232475042343,
        0.029942547902464867,
        -0.04609348997473717,
        -0.058666229248046875,
        -0.019854428246617317,
        -0.04163433611392975,
        0.05265023186802864,
        0.08033543825149536,
        0.05488617718219757,
        0.05749046802520752,
        -0.10966717451810837,
        0.0041080135852098465,
        0.027353856712579727,
        -0.009780669584870338,
        -0.03744042292237282,
        -0.04883928969502449,
        -0.027130065485835075,
        0.04236404970288277,
        -0.04699229449033737,
        0.02121688239276409,
        -0.06653443723917007,
        -0.08104513585567474,
        0.04899563640356064,
        0.08172933757305145,
        0.025226762518286705,
        -0.0031392239034175873,
        -0.05412301793694496,
        0.04322517663240433,
        -0.04724295064806938,
        -0.06588933616876602,
        -0.005263723433017731,
        -0.10399622470140457,
        0.021678458899259567,
        0.08925993740558624,
        0.0051892283372581005,
        -0.05374911427497864,
        0.0661492571234703,
        -0.049998532980680466,
        -0.042042847722768784,
        -0.035740725696086884,
        0.05044638365507126,
        0.019711950793862343,
        -0.09650858491659164,
        -0.10359443724155426,
        0.007317694369703531,
        0.041284628212451935,
        -0.0005775792524218559,
        -0.02340926043689251,
        0.05212923884391785,
        -0.048902466893196106,
        0.017805643379688263,
        -0.05707138031721115,
        -0.09386036545038223,
        0.0345168374478817,
        0.04103045165538788,
        -0.011593312956392765,
        -0.032673150300979614,
        -0.001616514753550291,
        -0.01033141277730465,
        0.0005464742425829172,
        -0.009387005120515823,
        0.000783124181907624,
        -0.038315292447805405,
        -0.024015553295612335,
        0.10941287130117416,
        0.0688089057803154,
        -0.011791623197495937,
        0.053584977984428406,
        -0.006792442407459021,
        0.00025078386534005404,
        -0.038617003709077835,
        -0.027074841782450676,
        0.015008372254669666,
        0.0255595576018095,
        0.07152300328016281,
        -0.043571099638938904,
        0.041489191353321075,
        -0.04132961481809616,
        0.030823415145277977,
        0.0043748547323048115,
        -0.015437711961567402,
        -7.217806796688819e-8,
        -0.14943432807922363,
        -0.03617529943585396,
        -0.08208819478750229,
        -0.060320090502500534,
        -0.014323672279715538,
        -0.04303916171193123,
        0.015260525047779083,
        -0.007403196766972542,
        -0.00587364612147212,
        0.04825593903660774,
        0.060827501118183136,
        0.0047452934086322784,
        -0.07461771368980408,
        -0.02624625712633133,
        -0.02460094727575779,
        0.00038357445737347007,
        0.0406932458281517,
        0.05302700027823448,
        -0.033185601234436035,
        0.08086219429969788,
        0.0517023466527462,
        0.008580218069255352,
        0.03014558181166649,
        0.011044884100556374,
        0.03838907182216644,
        -0.049410130828619,
        -0.018585020676255226,
        -0.05362977087497711,
        -0.0042654359713196754,
        0.025192851200699806,
        -0.026059426367282867,
        -0.01937050186097622,
        0.06364260613918304,
        -0.044715721160173416,
        -0.042367178946733475,
        -0.041561275720596313,
        0.05416766181588173,
        -0.018987352028489113,
        0.03349843993782997,
        0.06363736838102341,
        0.03570690006017685,
        -0.010681236162781715,
        -0.008398940786719322,
        0.0694175586104393,
        -0.011559253558516502,
        -0.09675838053226471,
        0.03869010880589485,
        0.01007543969899416,
        0.0052703809924423695,
        -0.11240021139383316,
        0.0029527582228183746,
        -0.05845946446061134,
        -0.0933474600315094,
        0.020904291421175003,
        -0.032519079744815826,
        -0.04708376154303551,
        -0.02644369937479496,
        0.0544046014547348,
        -0.014185085892677307,
        -0.010820443741977215,
        -0.007197373080998659,
        0.008904174901545048,
        0.03159690648317337,
        -0.00087467156117782
      ]
    },
    {
      "id": "303cdd26",
      "filePath": "04-code-janitor/src/tools.ts",
      "content": "export function runCommand(cmd: string): CommandResult {\n\tvalidateCommand(cmd);\n\n\tconsole.log(`🔧 [run_command] ${cmd}`);\n\n\ttry {\n\t\tconst output = execSync(cmd, {\n\t\t\tcwd: SANDBOX_ROOT,\n\t\t\tencoding: 'utf-8',\n\t\t\ttimeout: 30000, // 30 秒超时\n\t\t\tstdio: ['pipe', 'pipe', 'pipe']\n\t\t});\n\n\t\tconsole.log(`   ✅ Success`);\n\t\treturn { cmd, output: output.slice(0, 2000), success: true };\n\t} catch (e: any) {\n\t\tconst errorOutput = e.stderr || e.stdout || e.message;\n\t\tconsole.log(`   ❌ Failed`);\n\t\treturn { cmd, output: errorOutput.slice(0, 2000), success: false };\n\t}\n}\n\n// ============================================\n// 辅助函数：确保 Sandbox 存在\n// ============================================",
      "startLine": 109,
      "endLine": 134,
      "type": "function",
      "name": "runCommand",
      "embedding": [
        0.008014429360628128,
        0.055873919278383255,
        0.027767805382609367,
        0.031334854662418365,
        0.04442523047327995,
        -0.042943622916936874,
        -0.029994381591677666,
        0.06392789632081985,
        0.0011109908809885383,
        0.011467485688626766,
        -0.01898595504462719,
        -0.10836218297481537,
        -0.024108335375785828,
        -0.035790540277957916,
        -0.032143689692020416,
        -0.042047999799251556,
        -0.06947813183069229,
        0.044168416410684586,
        -0.03741172328591347,
        -0.10294266045093536,
        0.03755555301904678,
        0.06120363250374794,
        0.013317625969648361,
        0.007178783416748047,
        -0.037051498889923096,
        0.02854645624756813,
        -0.02214191108942032,
        -0.06942810863256454,
        -0.044271569699048996,
        -0.0027192255947738886,
        0.07756416499614716,
        -0.052231837064027786,
        -0.025923049077391624,
        0.010041411966085434,
        0.10774978995323181,
        0.08740610629320145,
        -0.02172726020216942,
        -0.022078540176153183,
        -0.015478610061109066,
        -0.01924419030547142,
        -0.018661055713891983,
        -0.006429914850741625,
        0.012638041749596596,
        -0.06982912123203278,
        0.03156527504324913,
        -0.07322847843170166,
        -0.09016796946525574,
        -0.06548989564180374,
        -0.021791212260723114,
        0.02071552351117134,
        -0.008197463117539883,
        0.0531017929315567,
        -0.02345992811024189,
        -0.08172163367271423,
        0.051595211029052734,
        0.022365057840943336,
        -0.02867639996111393,
        -0.03200062736868858,
        0.06112144887447357,
        -0.0787244513630867,
        0.0048978314734995365,
        -0.018493862822651863,
        0.019131887704133987,
        -0.06875340640544891,
        0.08740473538637161,
        0.021487710997462273,
        -0.03933704271912575,
        0.023302201181650162,
        -0.00004801460454473272,
        0.062436796724796295,
        -0.06095244735479355,
        0.012895026244223118,
        -0.08945513516664505,
        0.0902811661362648,
        -0.04700571298599243,
        0.025020657107234,
        -0.0019842484034597874,
        0.0057447804138064384,
        -0.01272117905318737,
        -0.004749130457639694,
        -0.04133894667029381,
        -0.04137486591935158,
        -0.05435166135430336,
        -0.012694702483713627,
        0.000795984931755811,
        0.16833510994911194,
        -0.015870537608861923,
        0.03561607375741005,
        0.07136556506156921,
        0.007660120725631714,
        -0.050141382962465286,
        -0.00980329792946577,
        -0.015506990253925323,
        0.08800765872001648,
        0.05549158900976181,
        -0.009547857567667961,
        -0.0736754760146141,
        0.08519251644611359,
        -0.01693626120686531,
        0.03371456265449524,
        -0.05229945480823517,
        -0.005571320652961731,
        0.009426257573068142,
        -0.07474445551633835,
        0.05554390326142311,
        -0.03604823723435402,
        0.05942725017666817,
        -0.030114999040961266,
        -0.030312106013298035,
        -0.05983027070760727,
        0.01874108426272869,
        0.041589993983507156,
        0.023212948814034462,
        -0.03918597474694252,
        0.1088271364569664,
        -0.00419144332408905,
        0.02263995260000229,
        -0.05048853158950806,
        -0.0028029342647641897,
        0.0762070044875145,
        0.09570783376693726,
        0.01840982958674431,
        -0.0019108328269794583,
        0.11085440218448639,
        0.04767421633005142,
        -0.06646585464477539,
        0.14766639471054077,
        1.4796317674520642e-32,
        -0.01077389158308506,
        -0.08872056007385254,
        0.011808749288320541,
        0.061554279178380966,
        0.08304603397846222,
        0.09451866894960403,
        0.03396066650748253,
        -0.02930620312690735,
        -0.048174433410167694,
        0.032060958445072174,
        -0.06404485553503036,
        -0.04271027445793152,
        -0.02305557206273079,
        -0.05824507400393486,
        -0.018256714567542076,
        -0.017331795766949654,
        0.08882017433643341,
        -0.028487324714660645,
        -0.003667644690722227,
        -0.0037986314855515957,
        0.008162553422152996,
        -0.037929411977529526,
        -0.0025611333549022675,
        0.03637364134192467,
        0.05541801452636719,
        -0.06446874141693115,
        -0.04369525983929634,
        0.026678692549467087,
        0.06929554045200348,
        0.006145722698420286,
        0.06035977229475975,
        0.015066062100231647,
        0.013234374113380909,
        0.04688575491309166,
        -0.013953841291368008,
        -0.03733179718255997,
        0.0020060252863913774,
        0.016026269644498825,
        -0.024325614795088768,
        0.028191253542900085,
        -0.08645110577344894,
        -0.00861261785030365,
        -0.06184316426515579,
        0.08086793124675751,
        -0.03435626998543739,
        -0.11633121967315674,
        -0.05137810483574867,
        0.02538212761282921,
        0.08736448734998703,
        -0.034527797251939774,
        0.03241490572690964,
        0.12441065162420273,
        0.015424268320202827,
        0.023459358140826225,
        0.0481211356818676,
        -0.05677718669176102,
        0.018285859376192093,
        0.01057469192892313,
        0.02950567752122879,
        0.033684369176626205,
        0.026189610362052917,
        0.09489182382822037,
        -0.02829441800713539,
        0.016843082383275032,
        0.0745171308517456,
        -0.028634976595640182,
        0.05366244912147522,
        -0.01592244952917099,
        0.01173456571996212,
        -0.03887633606791496,
        -0.0441923551261425,
        -0.10984791070222855,
        0.04118865355849266,
        0.03149277716875076,
        0.0012277198256924748,
        -0.009693787433207035,
        -0.005420103669166565,
        0.00009222688095178455,
        -0.05027789995074272,
        -0.09994076937437057,
        0.004037432372570038,
        -0.02454204112291336,
        -0.08104824274778366,
        -0.014954956248402596,
        0.09485847502946854,
        0.06250518560409546,
        -0.036897774785757065,
        -0.04561937227845192,
        0.02065875194966793,
        0.0646270290017128,
        -0.044468335807323456,
        -0.06787998974323273,
        -0.014657873660326004,
        -0.01949215494096279,
        -0.04671464487910271,
        -1.5029406449345193e-32,
        0.06897763162851334,
        0.08816025406122208,
        -0.043393295258283615,
        0.08176230639219284,
        -0.04858706146478653,
        -0.034494444727897644,
        0.017626585438847542,
        -0.05657840147614479,
        -0.03362559527158737,
        -0.00008200922457035631,
        -0.028714710846543312,
        -0.010798590257763863,
        -0.02535000629723072,
        0.08664873987436295,
        0.00780223635956645,
        -0.008346600458025932,
        -0.050349585711956024,
        -0.04526612535119057,
        0.02433948591351509,
        -0.010717229917645454,
        0.09089048951864243,
        0.052429743111133575,
        0.007020577788352966,
        0.07484610378742218,
        -0.11462658643722534,
        0.03807201236486435,
        0.020262015983462334,
        -0.002281577093526721,
        -0.06950988620519638,
        -0.07199367880821228,
        -0.009526414796710014,
        0.061977729201316833,
        -0.07515183836221695,
        0.06296376883983612,
        -0.0058678374625742435,
        -0.08544334024190903,
        0.06627102196216583,
        0.07435168325901031,
        0.03154542297124863,
        0.0854940190911293,
        0.038565825670957565,
        0.026703741401433945,
        -0.07307673245668411,
        -0.033418118953704834,
        -0.04452848434448242,
        0.01539221778512001,
        0.029955752193927765,
        0.0014239975716918707,
        -0.03806675598025322,
        -0.031679607927799225,
        0.010640081949532032,
        -0.02602042257785797,
        -0.02409534342586994,
        0.0074608507566154,
        -0.013750899583101273,
        -0.02439105696976185,
        0.04424995929002762,
        -0.06703194975852966,
        -0.0716136246919632,
        0.0783938392996788,
        -0.022685859352350235,
        -0.0681525319814682,
        0.08214576542377472,
        -0.0514167919754982,
        0.009552943520247936,
        -0.019108958542346954,
        -0.04096658155322075,
        0.05063587799668312,
        0.08570448309183121,
        -0.024394772946834564,
        0.051117829978466034,
        -0.008370139636099339,
        -0.03207545354962349,
        0.023577077314257622,
        -0.0633205994963646,
        0.003996969200670719,
        -0.08488404750823975,
        -0.12195563316345215,
        0.10142187774181366,
        0.11867698282003403,
        -0.012851697392761707,
        0.04493638500571251,
        0.06722371280193329,
        0.05920880660414696,
        -0.03218308836221695,
        -0.0046074301935732365,
        -0.007739253807812929,
        0.05723729729652405,
        -0.0048914416693151,
        -0.0290863998234272,
        0.011247080750763416,
        -0.06694184243679047,
        -0.011560319922864437,
        -0.004524891264736652,
        0.013752237893640995,
        -7.244866395694771e-8,
        -0.0694957822561264,
        -0.07666408270597458,
        -0.05857878178358078,
        -0.03427697718143463,
        0.0177022535353899,
        -0.029348786920309067,
        -0.03324618935585022,
        -0.11821700632572174,
        0.004971013404428959,
        -0.09649863094091415,
        0.00970042310655117,
        -0.026319032534956932,
        -0.05541054159402847,
        -0.024626675993204117,
        0.03220820426940918,
        -0.035860687494277954,
        -0.02434581145644188,
        0.014587709680199623,
        -0.014890762977302074,
        -0.05205932632088661,
        0.071065254509449,
        0.042789895087480545,
        0.004138117656111717,
        0.02543705888092518,
        -0.033105794340372086,
        -0.04446345195174217,
        0.00845489464700222,
        0.08811493963003159,
        -0.09080880880355835,
        -0.009823651984333992,
        0.008041750639677048,
        -0.06748656928539276,
        0.06200696527957916,
        -0.014089777134358883,
        -0.006607900373637676,
        0.025919076055288315,
        0.05954494699835777,
        -0.052263181656599045,
        0.027409091591835022,
        -0.008025432005524635,
        0.04186263680458069,
        0.040011804550886154,
        -0.02253820188343525,
        0.0056135393679142,
        -0.08718419075012207,
        -0.029100602492690086,
        0.015086992643773556,
        -0.011611130088567734,
        -0.0028601433150470257,
        -0.03488720953464508,
        -0.01336715742945671,
        0.030887505039572716,
        -0.06299088895320892,
        0.07631108164787292,
        -0.03216530382633209,
        -0.10171883553266525,
        -0.048011161386966705,
        -0.05420904979109764,
        -0.04261741787195206,
        0.07631722092628479,
        0.0214312095195055,
        0.006762505508959293,
        0.017461702227592468,
        -0.04608911648392677
      ]
    },
    {
      "id": "95a24497",
      "filePath": "04-code-janitor/src/tools.ts",
      "content": "export function ensureSandbox(): void {\n\tif (!fs.existsSync(SANDBOX_ROOT)) {\n\t\tfs.mkdirSync(SANDBOX_ROOT, { recursive: true });\n\t\tconsole.log(`📦 Created sandbox at ${SANDBOX_ROOT}`);\n\t}\n}\n\nexport { SANDBOX_ROOT };",
      "startLine": 135,
      "endLine": 143,
      "type": "function",
      "name": "ensureSandbox",
      "embedding": [
        -0.010464726947247982,
        -0.008793068118393421,
        -0.02688560262322426,
        0.031067239120602608,
        0.1426321119070053,
        -0.03670269250869751,
        -0.07173285633325577,
        -0.009695871733129025,
        0.03624177351593971,
        0.045548126101493835,
        -0.003942638169974089,
        -0.022506557404994965,
        -0.02663535438477993,
        -0.013486809097230434,
        -0.05144958570599556,
        -0.002321236999705434,
        -0.05560477823019028,
        0.03367353975772858,
        0.018800191581249237,
        -0.01504907663911581,
        -0.004034698475152254,
        -0.037882737815380096,
        0.050982967019081116,
        -0.06243737041950226,
        0.04630839824676514,
        -0.023776749148964882,
        -0.011737516149878502,
        -0.024448445066809654,
        -0.005189766176044941,
        -0.02104441076517105,
        0.013340376317501068,
        0.001683711539953947,
        -0.011616354808211327,
        -0.027109434828162193,
        0.1159338653087616,
        0.15632660686969757,
        -0.028980884701013565,
        0.021432053297758102,
        0.026206308975815773,
        -0.050702501088380814,
        0.009796560741961002,
        0.046450234949588776,
        0.0871581956744194,
        -0.11587205529212952,
        -0.006863041315227747,
        -0.05110126733779907,
        0.005181398708373308,
        -0.04289207234978676,
        -0.0022292446810752153,
        0.01939857192337513,
        0.002587808994576335,
        -0.0026879936922341585,
        -0.07452338933944702,
        -0.061555180698633194,
        0.04828594997525215,
        0.11831111460924149,
        -0.017923472449183464,
        -0.03882185369729996,
        0.011567057110369205,
        0.03903396055102348,
        0.06053582951426506,
        0.05016036704182625,
        0.019313707947731018,
        -0.11475033313035965,
        0.08055897057056427,
        0.02511216513812542,
        -0.06000902131199837,
        0.08024914562702179,
        -0.0222768597304821,
        0.02716173231601715,
        -0.03616786375641823,
        0.03762281686067581,
        -0.041743237525224686,
        0.10483851283788681,
        0.027281995862722397,
        -0.11717802286148071,
        -0.018680064007639885,
        0.1203087717294693,
        0.040295764803886414,
        -0.020465649664402008,
        -0.024192586541175842,
        0.012180187739431858,
        0.019442375749349594,
        -0.014635961502790451,
        -0.02625091001391411,
        0.09201562404632568,
        0.05877768248319626,
        0.06651049852371216,
        0.0846845880150795,
        0.01513424701988697,
        -0.02170092612504959,
        -0.03690120950341225,
        0.027124790474772453,
        0.009732892736792564,
        -0.03331596776843071,
        -0.08779778331518173,
        -0.09314873069524765,
        0.11257562786340714,
        -0.050206199288368225,
        0.008065441623330116,
        -0.03657035157084465,
        -0.011450884863734245,
        0.026606013998389244,
        -0.07858023792505264,
        0.051141198724508286,
        0.00483294203877449,
        -0.030176982283592224,
        -0.03499053791165352,
        -0.045967403799295425,
        0.053382184356451035,
        -0.01671331748366356,
        0.07422297447919846,
        0.007235296536237001,
        -0.019257761538028717,
        0.049242258071899414,
        -0.09080880135297775,
        -0.05157136544585228,
        -0.03386051952838898,
        -0.014214309863746166,
        0.06484203785657883,
        0.13100993633270264,
        -0.008798249065876007,
        0.08137176930904388,
        0.0616205669939518,
        0.02715218998491764,
        -0.05033975467085838,
        0.07703864574432373,
        3.374321553566656e-33,
        0.02017349749803543,
        -0.02076764963567257,
        0.012148060835897923,
        0.07960690557956696,
        0.09933128952980042,
        -0.002977405209094286,
        0.03687436878681183,
        -0.007382623851299286,
        -0.06196095794439316,
        0.0482407845556736,
        -0.030509505420923233,
        -0.011931105516850948,
        -0.08039692044258118,
        -0.041934337466955185,
        -0.03831929713487625,
        -0.044242892414331436,
        0.01380589697510004,
        -0.10342824459075928,
        -0.01508072204887867,
        0.02794642187654972,
        -0.0269522313028574,
        0.023858409374952316,
        -0.06973006576299667,
        0.04318530857563019,
        0.03312646970152855,
        -0.039066918194293976,
        0.001890546758659184,
        0.00957717839628458,
        0.07627086341381073,
        0.006691512651741505,
        0.06642939895391464,
        0.0018688387935981154,
        0.05214649438858032,
        0.023394547402858734,
        -0.0342644564807415,
        0.03862454369664192,
        -0.01098241563886404,
        -0.043268464505672455,
        -0.06514423340559006,
        0.03952983394265175,
        0.051922861486673355,
        -0.05330516770482063,
        -0.03610173985362053,
        0.015009221620857716,
        0.023439567536115646,
        -0.05517266318202019,
        0.0019319715211167932,
        0.09068071842193604,
        0.13250169157981873,
        -0.00962417759001255,
        -0.016825862228870392,
        0.05440148711204529,
        0.021997900679707527,
        0.009426884353160858,
        0.0036558641586452723,
        -0.06259416043758392,
        -0.05768868699669838,
        -0.022234458476305008,
        0.023847389966249466,
        0.039235636591911316,
        0.0619521327316761,
        0.011644454672932625,
        -0.06073950231075287,
        0.030115637928247452,
        -0.017202137038111687,
        -0.009911669418215752,
        -0.031674377620220184,
        -0.012986347079277039,
        0.027814287692308426,
        -0.081666499376297,
        -0.011523767374455929,
        -0.07092835754156113,
        -0.05245240032672882,
        0.041171323508024216,
        -0.06121820583939552,
        -0.005795459263026714,
        -0.022292837500572205,
        0.058602653443813324,
        0.00014580803690478206,
        -0.13440555334091187,
        -0.09579247981309891,
        -0.000469213497126475,
        -0.019416624680161476,
        -0.0028636588249355555,
        0.09510495513677597,
        -0.04988352954387665,
        -0.06698349118232727,
        0.031945180147886276,
        0.04552469402551651,
        -0.006517691537737846,
        0.0037710184697061777,
        -0.06271820515394211,
        -0.02333645336329937,
        0.02419567108154297,
        -0.046883098781108856,
        -4.455818600651393e-33,
        0.05773972347378731,
        -0.021837128326296806,
        -0.06702414900064468,
        0.042380109429359436,
        -0.0812123566865921,
        0.0346621498465538,
        -0.004396216478198767,
        -0.07953184098005295,
        -0.021074682474136353,
        0.024375440552830696,
        -0.07881966978311539,
        0.0020909407176077366,
        0.07481617480516434,
        0.004305551294237375,
        0.021282289177179337,
        -0.006322785746306181,
        -0.009603677317500114,
        -0.08655794709920883,
        -0.011711259372532368,
        -0.03382106125354767,
        0.01684178039431572,
        0.04660573974251747,
        0.05384166166186333,
        0.09886961430311203,
        -0.08984559029340744,
        0.04564892128109932,
        0.003787041176110506,
        0.08034499734640121,
        -0.040042418986558914,
        -0.0038670075591653585,
        0.012445407919585705,
        0.052886493504047394,
        -0.03656800836324692,
        -0.05133667215704918,
        -0.03748742863535881,
        -0.090444415807724,
        -0.039120469242334366,
        -0.00014648518117610365,
        -0.001244975603185594,
        0.07245147228240967,
        0.03329405561089516,
        -0.00861192587763071,
        -0.09268296509981155,
        -0.025937234982848167,
        -0.03171828016638756,
        -0.04040151834487915,
        0.023292290046811104,
        0.009772931225597858,
        0.06222207844257355,
        -0.037809718400239944,
        0.025660505518317223,
        -0.052791379392147064,
        0.06690969318151474,
        -0.12088829278945923,
        -0.036577533930540085,
        0.06964944303035736,
        -0.026389697566628456,
        -0.02237606979906559,
        0.10458569973707199,
        0.04658051207661629,
        0.002528357319533825,
        -0.0855267196893692,
        0.026324382051825523,
        -0.05840965360403061,
        -0.06795916706323624,
        -0.025581637397408485,
        -0.0650615245103836,
        0.1445237398147583,
        0.01799764111638069,
        0.028138354420661926,
        -0.004614516627043486,
        0.06157457455992699,
        -0.011429715901613235,
        0.01785324513912201,
        -0.05366797372698784,
        -0.021838219836354256,
        0.01581030711531639,
        -0.04809894412755966,
        0.07980203628540039,
        0.01058354414999485,
        -0.06932544708251953,
        0.06076986715197563,
        0.015484235249459743,
        -0.03949781134724617,
        -0.0520615391433239,
        -0.08458453416824341,
        0.006286300718784332,
        -0.00666481489315629,
        0.06586118787527084,
        -0.020622465759515762,
        0.018836168572306633,
        -0.037804145365953445,
        -0.02407950349152088,
        -0.033347032964229584,
        -0.01666618324816227,
        -4.329140423919853e-8,
        -0.06171371415257454,
        0.04351383075118065,
        -0.04624895006418228,
        -0.022313209250569344,
        0.0424073226749897,
        -0.027381842955946922,
        0.08250893652439117,
        -0.021586745977401733,
        0.011160206981003284,
        -0.04760206863284111,
        -0.04931676760315895,
        0.01653142087161541,
        -0.04198860377073288,
        -0.030236156657338142,
        -0.006846556905657053,
        0.035056453198194504,
        0.05726563185453415,
        0.12270580977201462,
        -0.03200921788811684,
        -0.040804989635944366,
        0.034163329750299454,
        0.0018002103315666318,
        0.05612482875585556,
        0.059221211820840836,
        -0.03758101910352707,
        -0.0059372177347540855,
        0.06241818144917488,
        0.003810655092820525,
        -0.010255660861730576,
        0.0696994736790657,
        -0.06481609493494034,
        0.041398897767066956,
        0.016563044860959053,
        -0.060734640806913376,
        -0.07373544573783875,
        0.02965179830789566,
        0.04443596303462982,
        0.026864543557167053,
        0.040745172649621964,
        -0.00685882568359375,
        0.010748100467026234,
        0.0041222902946174145,
        -0.007632313761860132,
        -0.04715645685791969,
        -0.09371670335531235,
        -0.04702213034033775,
        -0.04542968049645424,
        0.01729578524827957,
        -0.0007182296249084175,
        -0.07051219046115875,
        0.03385806456208229,
        0.024147065356373787,
        -0.09339329600334167,
        0.0625961422920227,
        0.042367976158857346,
        -0.028377555310726166,
        -0.04787398874759674,
        0.030897052958607674,
        0.03455432504415512,
        -0.011276109144091606,
        -0.04699217155575752,
        0.028898227959871292,
        0.0974310040473938,
        -0.037640251219272614
      ]
    },
    {
      "id": "5812933b",
      "filePath": "04-code-janitor/src/index.ts",
      "content": "import { runJanitor } from './agent';\n\n// ============================================\n// 入口\n// ============================================",
      "startLine": 1,
      "endLine": 6,
      "type": "other",
      "embedding": [
        -0.08039868623018265,
        0.04402421787381172,
        -0.03177034482359886,
        0.03073989413678646,
        0.0031188649591058493,
        0.020413944497704506,
        0.024249108508229256,
        -0.025310704484581947,
        -0.03277735784649849,
        -0.0024508268106728792,
        0.0338016077876091,
        -0.030543755739927292,
        -0.027118733152747154,
        0.010978405363857746,
        0.015532517805695534,
        0.024827314540743828,
        -0.0479816272854805,
        0.03313120827078819,
        -0.0492091178894043,
        -0.023684024810791016,
        0.018959255889058113,
        -0.004416352603584528,
        0.022294782102108,
        -0.016011929139494896,
        0.008386444300413132,
        0.02494104392826557,
        0.07249507308006287,
        0.040545057505369186,
        0.010000250302255154,
        0.052590131759643555,
        0.028501367196440697,
        0.0008131660288199782,
        0.03264915198087692,
        0.021940769627690315,
        0.11368273943662643,
        0.0544653944671154,
        -0.03923827409744263,
        -0.01885692961513996,
        0.025944184511899948,
        0.056046757847070694,
        0.0730023980140686,
        -0.000023066353605827317,
        -0.00042523498996160924,
        -0.07331236451864243,
        -0.014793284237384796,
        -0.0355222262442112,
        -0.08506104350090027,
        -0.048131585121154785,
        -0.01357058621942997,
        -0.08684563636779785,
        -0.09493225067853928,
        0.012841101735830307,
        -0.021828487515449524,
        -0.04366150498390198,
        -0.012520940974354744,
        -0.03145093098282814,
        0.025136560201644897,
        -0.039343491196632385,
        0.0815364420413971,
        -0.0795806422829628,
        0.060427937656641006,
        0.028650952503085136,
        0.07748585194349289,
        -0.03236720338463783,
        0.02608773112297058,
        -0.01308938767760992,
        -0.1395130753517151,
        0.051771391183137894,
        0.0018385335570201278,
        -0.06659809499979019,
        -0.07630554586648941,
        -0.047583576291799545,
        0.0007315000984817743,
        0.03868735581636429,
        -0.03155666962265968,
        -0.10075202584266663,
        -0.07663796842098236,
        0.04648333415389061,
        0.04892152547836304,
        -0.1468355357646942,
        0.017469532787799835,
        -0.13671082258224487,
        0.0020439859945327044,
        0.07368290424346924,
        -0.008948693051934242,
        0.05536076799035072,
        0.03562911972403526,
        -0.04822765290737152,
        0.06500571966171265,
        0.019533593207597733,
        0.01797914318740368,
        0.05861905589699745,
        0.052566152065992355,
        -0.022545604035258293,
        0.01056616473942995,
        0.037263162434101105,
        -0.04961274564266205,
        0.10559218376874924,
        -0.06339330971240997,
        0.05950760468840599,
        -0.043496593832969666,
        -0.07184572517871857,
        -0.020611487329006195,
        0.06397679448127747,
        -0.03908425569534302,
        -0.04693673923611641,
        0.028378194198012352,
        -0.014144075103104115,
        -0.016071824356913567,
        -0.11168225109577179,
        -0.004116793163120747,
        0.04324640706181526,
        0.0015082861064001918,
        -0.0851476863026619,
        0.08117701858282089,
        -0.08161577582359314,
        0.0265739057213068,
        0.002910834504291415,
        -0.02100004442036152,
        0.09729783982038498,
        0.07302641868591309,
        -0.0334940031170845,
        -0.07403504848480225,
        0.035213928669691086,
        0.004114905372262001,
        -0.02612774260342121,
        0.108525849878788,
        9.809730313694369e-33,
        -0.008083751425147057,
        0.04829435795545578,
        -0.026160510256886482,
        0.052640076726675034,
        0.10279299318790436,
        -0.056649692356586456,
        -0.019200269132852554,
        -0.07457812875509262,
        -0.07906880974769592,
        0.05778513476252556,
        -0.035406410694122314,
        0.02429068833589554,
        -0.11743880063295364,
        -0.04741821810603142,
        -0.06999094039201736,
        0.010910546407103539,
        -0.029549073427915573,
        0.0032520953100174665,
        0.016730086877942085,
        -0.03324500843882561,
        0.04141208529472351,
        0.014521701261401176,
        0.01768130250275135,
        0.031685229390859604,
        -0.01188219990581274,
        0.02906767837703228,
        -0.026310589164495468,
        -0.07421459257602692,
        0.06301181018352509,
        0.02017548680305481,
        0.09712748974561691,
        0.049698516726493835,
        0.005722820293158293,
        0.07745038717985153,
        -0.10309953987598419,
        0.012034380808472633,
        -0.05258280411362648,
        -0.06189936771988869,
        -0.06404465436935425,
        -0.017356842756271362,
        -0.07421513646841049,
        0.022073544561862946,
        0.029784657061100006,
        -0.03904450684785843,
        -0.01597866788506508,
        -0.010759152472019196,
        -0.024857239797711372,
        0.09951986372470856,
        0.12243843078613281,
        0.07056980580091476,
        0.009490685537457466,
        0.024713842198252678,
        0.03409099206328392,
        0.07930128276348114,
        0.02372916229069233,
        0.00758484797552228,
        0.030589938163757324,
        0.047918837517499924,
        0.07037283480167389,
        0.004689112305641174,
        0.0809546411037445,
        0.03209003433585167,
        -0.06600817292928696,
        0.04672962799668312,
        0.08033788204193115,
        -0.08503347635269165,
        0.06125057861208916,
        -0.0035822950303554535,
        0.031403910368680954,
        -0.04298435524106026,
        -0.021658066660165787,
        -0.04649394005537033,
        0.0017900210805237293,
        0.03827126324176788,
        -0.031409475952386856,
        -0.04898802936077118,
        -0.06479068100452423,
        0.010389569215476513,
        -0.08674807846546173,
        -0.08796430379152298,
        -0.04409249126911163,
        0.01702813245356083,
        -0.011959293857216835,
        -0.09116484969854355,
        0.060485564172267914,
        -0.007412836421281099,
        0.016674553975462914,
        -0.03399280458688736,
        0.02490040473639965,
        0.05716117098927498,
        -0.03697183355689049,
        -0.0548609234392643,
        -0.052227240055799484,
        0.037317126989364624,
        -0.07840124517679214,
        -1.275961355061573e-32,
        0.09186037629842758,
        -0.018142400309443474,
        -0.044129300862550735,
        0.009821045212447643,
        -0.027142612263560295,
        -0.011764885857701302,
        -0.01854895055294037,
        -0.0419359914958477,
        0.06191783398389816,
        0.09580012410879135,
        0.05227408558130264,
        0.022582396864891052,
        0.06727959960699081,
        0.011314023286104202,
        0.029410377144813538,
        0.03137882798910141,
        0.06941519677639008,
        0.006353524513542652,
        -0.06262119114398956,
        -0.04355136677622795,
        -0.0307447612285614,
        0.045407116413116455,
        -0.03426973149180412,
        0.07837063819169998,
        -0.06764110177755356,
        0.03469989448785782,
        0.07830125838518143,
        0.075850710272789,
        -0.04244760423898697,
        -0.043816544115543365,
        -0.0765329971909523,
        0.028325693681836128,
        -0.09254828840494156,
        0.021586941555142403,
        -0.10358881950378418,
        -0.02162247896194458,
        0.04290105029940605,
        -0.030406367033720016,
        -0.028232332319021225,
        0.01753225363790989,
        0.021321894600987434,
        0.017463883385062218,
        -0.05502946674823761,
        0.045481350272893906,
        -0.018964048475027084,
        -0.06648612767457962,
        -0.021981345489621162,
        0.03404742851853371,
        -0.031183164566755295,
        -0.09516695141792297,
        0.023230405524373055,
        -0.010197070427238941,
        0.009407402947545052,
        -0.06304172426462173,
        -0.060035206377506256,
        0.05428639054298401,
        0.06661880761384964,
        -0.05485948175191879,
        -0.05401799455285072,
        -0.016079939901828766,
        0.01478511467576027,
        -0.0018495116382837296,
        -0.01193146500736475,
        0.014615529216825962,
        -0.05023109167814255,
        0.005719167646020651,
        -0.05931301414966583,
        0.02351444587111473,
        0.06702284514904022,
        -0.13632084429264069,
        0.03417966514825821,
        -0.036982227116823196,
        -0.0324527882039547,
        -0.00597899267449975,
        -0.09251796454191208,
        -0.008339954540133476,
        -0.028068436309695244,
        0.0430460199713707,
        0.0722917690873146,
        0.03388753905892372,
        -0.04848425090312958,
        -0.003948301542550325,
        0.021963337436318398,
        -0.06859980523586273,
        -0.06346356868743896,
        -0.04937434941530228,
        -0.030071407556533813,
        0.09239539504051208,
        0.05888761952519417,
        -0.048545271158218384,
        -0.03371070325374603,
        -0.012567447498440742,
        0.018526246771216393,
        -0.01030745729804039,
        0.06138155236840248,
        -5.79655861088213e-8,
        -0.10079699009656906,
        -0.00955149531364441,
        -0.02669830061495304,
        -0.04729653149843216,
        -0.014819305390119553,
        -0.028808191418647766,
        -0.001269959844648838,
        -0.048489756882190704,
        0.029002241790294647,
        0.006411523558199406,
        0.011286451481282711,
        -0.017885811626911163,
        -0.03716255724430084,
        0.036287594586610794,
        -0.04093295335769653,
        0.027456670999526978,
        -0.06755173951387405,
        0.05132777988910675,
        -0.039416685700416565,
        -0.07441908121109009,
        0.025995250791311264,
        -0.007304477971047163,
        0.04516522213816643,
        0.007827156223356724,
        -0.01929476484656334,
        0.02028835378587246,
        -0.06479198485612869,
        -0.0061641898937523365,
        -0.030823728069663048,
        0.0794898048043251,
        -0.00563154648989439,
        0.008195321075618267,
        0.054370056837797165,
        -0.05510998144745827,
        -0.06468290090560913,
        0.07085107266902924,
        0.05265670642256737,
        -0.03594950959086418,
        0.0029305347707122564,
        -0.055393919348716736,
        0.000929122616071254,
        -0.0705634355545044,
        -0.06488324701786041,
        -0.02047707885503769,
        0.003478077007457614,
        0.02739604562520981,
        -0.02901403047144413,
        0.007592369802296162,
        0.09201062470674515,
        -0.0730404406785965,
        0.020583825185894966,
        -0.04160189628601074,
        -0.12106546014547348,
        0.032394204288721085,
        -0.022867603227496147,
        -0.04774880036711693,
        0.0004226485616527498,
        0.024976268410682678,
        -0.02778586931526661,
        -0.04489592835307121,
        -0.03076641447842121,
        0.028360972180962563,
        0.032343678176403046,
        -0.07073263823986053
      ]
    },
    {
      "id": "09ba1772",
      "filePath": "04-code-janitor/src/index.ts",
      "content": "async function main() {\n\t// 从命令行参数获取任务，或使用默认任务\n\tconst task = process.argv.slice(2).join(' ') ||\n\t\t\"Add a slugify function to src/utils.ts that converts a string to a URL-friendly slug. Also add a test for it.\";\n\n\tawait runJanitor(task);\n}\n\nif (require.main === module) {\n\tmain();\n}",
      "startLine": 7,
      "endLine": 18,
      "type": "function",
      "name": "main",
      "embedding": [
        -0.0809805765748024,
        0.03067399002611637,
        -0.002495658816769719,
        0.06827401369810104,
        0.0033053227234631777,
        -0.04105376452207565,
        -0.06123857945203781,
        0.048067811876535416,
        -0.0042944918386638165,
        0.020891891792416573,
        -0.07632385194301605,
        0.02823193557560444,
        -0.054534025490283966,
        0.00030095153488218784,
        -0.0014070000033825636,
        -0.004141580313444138,
        -0.0029585123993456364,
        0.029794644564390182,
        0.009342286735773087,
        -0.04195387288928032,
        0.04996829107403755,
        0.0071108113043010235,
        0.044197164475917816,
        -0.0025754005182534456,
        0.04724660515785217,
        -0.06355223804712296,
        0.009720772504806519,
        -0.03375184163451195,
        0.010906778275966644,
        0.009719982743263245,
        0.06609360128641129,
        -0.06762416660785675,
        -0.047017741948366165,
        -0.04766836389899254,
        0.09822525084018707,
        0.13889265060424805,
        -0.05302190035581589,
        -0.0545487180352211,
        0.053406909108161926,
        -0.03534337878227234,
        0.08412698656320572,
        0.03389650210738182,
        -0.01989086903631687,
        -0.07971449196338654,
        -0.0026191521901637316,
        -0.09886252880096436,
        -0.08318953961133957,
        -0.06257488578557968,
        -0.04634641855955124,
        0.019141480326652527,
        -0.10082703083753586,
        -0.054078731685876846,
        -0.09517049789428711,
        -0.048333488404750824,
        0.01268037874251604,
        0.04229555279016495,
        -0.03313217684626579,
        -0.023392366245388985,
        0.030335549265146255,
        -0.008004168048501015,
        0.014099949039518833,
        -0.054289303719997406,
        0.05988464504480362,
        -0.10183105617761612,
        0.028985975310206413,
        -0.0301132220774889,
        -0.04464470595121384,
        0.03279930725693703,
        0.02643400803208351,
        -0.03348616883158684,
        -0.02920890972018242,
        -0.005544663406908512,
        -0.05102360248565674,
        0.09095816314220428,
        -0.0450943224132061,
        -0.09925100207328796,
        -0.08989868313074112,
        0.0382111482322216,
        0.03637305274605751,
        -0.06453316658735275,
        0.049809530377388,
        -0.11806879192590714,
        0.027960125356912613,
        0.013303916901350021,
        0.06794856488704681,
        0.1163226068019867,
        -0.028707996010780334,
        -0.02277703955769539,
        0.04403788968920708,
        -0.019443009048700333,
        -0.028182445093989372,
        0.004366442561149597,
        0.04390230402350426,
        -0.03961150720715523,
        -0.003719545900821686,
        -0.005083068273961544,
        -0.03785719722509384,
        0.13003380596637726,
        -0.039753541350364685,
        0.039716802537441254,
        -0.03503641486167908,
        -0.009232292883098125,
        0.07404139637947083,
        -0.012250959873199463,
        0.010362126864492893,
        0.004143132828176022,
        0.045549679547548294,
        -0.005520948208868504,
        -0.03490779548883438,
        -0.06291062384843826,
        -0.040502823889255524,
        0.03337506204843521,
        0.04775959253311157,
        -0.035027068108320236,
        -0.0010374628473073244,
        -0.12130869925022125,
        0.060095787048339844,
        -0.03768421709537506,
        0.011821807362139225,
        0.10380666702985764,
        0.07031874358654022,
        0.018878987058997154,
        -0.014171632006764412,
        0.045066963881254196,
        -0.016885260120034218,
        -0.045720424503088,
        0.1261187046766281,
        5.8500177162059984e-33,
        0.010044613853096962,
        0.038477540016174316,
        -0.017563773319125175,
        0.02640242502093315,
        0.019872047007083893,
        -0.02857367880642414,
        0.04993342235684395,
        0.023404259234666824,
        -0.04182326793670654,
        -0.027185173705220222,
        -0.050664253532886505,
        -0.024850262328982353,
        -0.013427390716969967,
        -0.06747379153966904,
        -0.07506248354911804,
        -0.06897095590829849,
        0.03495943546295166,
        0.004125999286770821,
        0.05823375657200813,
        -0.017694717273116112,
        0.007244305219501257,
        0.04325536638498306,
        0.004263751674443483,
        -0.02004344016313553,
        0.03628367930650711,
        -0.052736520767211914,
        -0.008392066694796085,
        -0.032991938292980194,
        -0.003454420017078519,
        0.005945526994764805,
        0.1413656622171402,
        0.06889896839857101,
        -0.01627788133919239,
        0.054999854415655136,
        -0.01539483480155468,
        0.020734623074531555,
        0.003538688877597451,
        0.016840772703289986,
        -0.12080217152833939,
        -0.031115736812353134,
        -0.04269944131374359,
        0.028454402461647987,
        -0.07164156436920166,
        0.00397720979526639,
        -0.09073762595653534,
        0.023076821118593216,
        -0.0264370609074831,
        0.06330198049545288,
        0.09756563603878021,
        -0.012071028351783752,
        0.019718196243047714,
        0.03246696665883064,
        0.06746798753738403,
        0.08290492743253708,
        0.02594463899731636,
        -0.007314471062272787,
        0.008347582072019577,
        -0.049958229064941406,
        0.08112058788537979,
        0.023470228537917137,
        0.022818589583039284,
        0.013040246441960335,
        -0.06035155802965164,
        0.05736638978123665,
        0.05755724012851715,
        -0.022823790088295937,
        0.05670672282576561,
        0.02224467322230339,
        0.08061883598566055,
        0.003038492752239108,
        0.01299399696290493,
        -0.09091521799564362,
        -0.049904707819223404,
        0.010143067687749863,
        -0.02250506728887558,
        0.03280322626233101,
        -0.11393161118030548,
        -0.023921538144350052,
        -0.08987811207771301,
        -0.10378237813711166,
        -0.019113220274448395,
        -0.0619145892560482,
        -0.0036909524351358414,
        -0.014372115023434162,
        0.1356242150068283,
        -0.02311568148434162,
        -0.05376962572336197,
        -0.05538230761885643,
        0.024030258879065514,
        -0.00545187434181571,
        0.06112300604581833,
        -0.05519784241914749,
        -0.07237344235181808,
        0.0701412484049797,
        -0.014010363258421421,
        -6.1370495594478e-33,
        0.11730746179819107,
        0.00005500632323673926,
        -0.07429323345422745,
        0.0984668880701065,
        -0.03209675848484039,
        0.0028859872836619616,
        0.09692740440368652,
        -0.09631487727165222,
        -0.022601351141929626,
        0.10065989196300507,
        -0.01976599730551243,
        0.024292467162013054,
        0.02408970706164837,
        0.04669303447008133,
        0.013416253961622715,
        0.017559055238962173,
        0.06153721362352371,
        -0.041679058223962784,
        0.006197095848619938,
        0.026075191795825958,
        -0.035592883825302124,
        0.055857330560684204,
        -0.006574014667421579,
        0.05077672377228737,
        -0.05413268879055977,
        0.07330936193466187,
        0.06696245074272156,
        -0.0016551343724131584,
        -0.06175047159194946,
        -0.04315152391791344,
        -0.040027499198913574,
        0.07092392444610596,
        -0.029448099434375763,
        -0.02172005921602249,
        -0.035376742482185364,
        -0.00953676737844944,
        -0.007183281239122152,
        0.02740412764251232,
        0.029277976602315903,
        -0.042859338223934174,
        0.06879925727844238,
        0.04396127164363861,
        -0.035458873957395554,
        0.0701543390750885,
        0.021750612184405327,
        -0.09811283648014069,
        0.0036739257629960775,
        0.03409625589847565,
        -0.07642024010419846,
        -0.04798474162817001,
        -0.014993906952440739,
        -0.03672422096133232,
        0.02337077632546425,
        -0.07152586430311203,
        0.004495458211749792,
        -0.024114541709423065,
        -0.006936404854059219,
        -0.03831307590007782,
        -0.05456820875406265,
        0.01787058264017105,
        0.018064986914396286,
        -0.04166731610894203,
        0.03888215869665146,
        -0.04492715746164322,
        -0.001464261906221509,
        -0.03529466688632965,
        -0.061755917966365814,
        0.018515458330512047,
        0.062255725264549255,
        -0.04302644357085228,
        -0.011540097184479237,
        0.017169304192066193,
        0.011006075888872147,
        0.0213429294526577,
        -0.04787333682179451,
        -0.0694672018289566,
        0.06530777364969254,
        0.0011862023966386914,
        0.10016956180334091,
        0.05454739183187485,
        -0.02751315012574196,
        -0.000448539387434721,
        0.04820072278380394,
        -0.10982401669025421,
        -0.05490201711654663,
        -0.013532327488064766,
        -0.03534912317991257,
        0.10243626683950424,
        -0.010257196612656116,
        -0.03184681385755539,
        0.03948754444718361,
        -0.009277410805225372,
        -0.009948845952749252,
        -0.004110200330615044,
        0.07502526789903641,
        -5.265521707542575e-8,
        -0.07409681379795074,
        0.05712504684925079,
        -0.055419884622097015,
        -0.002647445071488619,
        -0.013493046164512634,
        -0.057724304497241974,
        -0.04218157008290291,
        -0.02844143472611904,
        0.047846175730228424,
        0.01916065439581871,
        0.0011668483493849635,
        -0.02238004095852375,
        0.00028607211424969137,
        0.02255089022219181,
        -0.04103811830282211,
        0.003676920896396041,
        0.004434504546225071,
        0.15753085911273956,
        -0.024022111669182777,
        -0.05721788853406906,
        -0.020189426839351654,
        0.035357724875211716,
        -0.03103915974497795,
        0.0009074927656911314,
        0.05034130811691284,
        -0.05217985436320305,
        -0.07974757254123688,
        -0.031796976923942566,
        0.020620232447981834,
        0.03575393557548523,
        0.003388059791177511,
        0.02257291041314602,
        0.0337025411427021,
        -0.05737878382205963,
        -0.032479364424943924,
        0.054667066782712936,
        0.08957367390394211,
        -0.05104623734951019,
        0.04924985393881798,
        -0.018234480172395706,
        0.10230021178722382,
        0.023125676438212395,
        0.019147904589772224,
        -0.012981182895600796,
        -0.05712984874844551,
        0.016127118840813637,
        0.01701812446117401,
        -0.0006776460795663297,
        0.058032114058732986,
        0.003196803154423833,
        0.04743533208966255,
        -0.04611539468169212,
        -0.10306014120578766,
        -0.0000843461966724135,
        -0.0025488147512078285,
        -0.013708583079278469,
        0.009974760934710503,
        -0.015775166451931,
        -0.07674378156661987,
        0.022065501660108566,
        0.10463602095842361,
        -0.011657883413136005,
        0.03380375728011131,
        -0.021153103560209274
      ]
    },
    {
      "id": "d1e0c2d8",
      "filePath": "04-code-janitor/src/agent.ts",
      "content": "import 'dotenv/config';\nimport OpenAI from 'openai';\nimport { JanitorState, INITIAL_STATE } from './types';\nimport { readFile, writeFile, listDir, runCommand, ensureSandbox } from './tools';\nimport { ChatCompletionTool, ChatCompletionMessageParam } from 'openai/resources/chat/completions';\n\n// ============================================\n// 初始化\n// ============================================\n\nconst client = new OpenAI({\n\tapiKey: process.env.OPENAI_API_KEY,\n\tbaseURL: process.env.OPENAI_BASE_URL,\n});\n\n// ============================================\n// 工具定义（暴露给 LLM）\n// ============================================\n\nconst tools: ChatCompletionTool[] = [\n\t{\n\t\ttype: \"function\",\n\t\tfunction: {\n\t\t\tname: \"read_file\",\n\t\t\tdescription: \"Read the contents of a file in the sandbox project\",\n\t\t\tparameters: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tpath: { type: \"string\", description: \"Relative path from sandbox root, e.g. 'src/utils.ts'\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"path\"]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\ttype: \"function\",\n\t\tfunction: {\n\t\t\tname: \"write_file\",\n\t\t\tdescription: \"Write or overwrite a file in the sandbox project. Provide the COMPLETE file content.\",\n\t\t\tparameters: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tpath: { type: \"string\", description: \"Relative path from sandbox root\" },\n\t\t\t\t\tcontent: { type: \"string\", description: \"The COMPLETE file content to write (not just the new part)\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"path\", \"content\"]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\ttype: \"function\",\n\t\tfunction: {\n\t\t\tname: \"list_dir\",\n\t\t\tdescription: \"List files and directories in the sandbox project\",\n\t\t\tparameters: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tpath: { type: \"string\", description: \"Relative path from sandbox root, default is '.'\" }\n\t\t\t\t},\n\t\t\t\trequired: []\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\ttype: \"function\",\n\t\tfunction: {\n\t\t\tname: \"run_command\",\n\t\t\tdescription: \"Run a shell command in the sandbox project (e.g. 'npm test', 'npm run build')\",\n\t\t\tparameters: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tcmd: { type: \"string\", description: \"The command to run\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"cmd\"]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\ttype: \"function\",\n\t\tfunction: {\n\t\t\tname: \"task_complete\",\n\t\t\tdescription: \"Call this when the task is successfully completed and all tests pass\",\n\t\t\tparameters: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsummary: { type: \"string\", description: \"A brief summary of what was done\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"summary\"]\n\t\t\t}\n\t\t}\n\t}\n];\n\n// ============================================\n// 存储读取的文件内容\n// ============================================\n\ntype FileCache = Record<string, string>;\n\n// ============================================\n// Agent 核心循环\n// ============================================",
      "startLine": 1,
      "endLine": 103,
      "type": "other",
      "embedding": [
        -0.025346005335450172,
        0.028856288641691208,
        0.01354184839874506,
        0.037828732281923294,
        0.05204475298523903,
        -0.027584638446569443,
        0.030410543084144592,
        0.047758955508470535,
        0.03390251472592354,
        0.02591266855597496,
        -0.03162018209695816,
        -0.018470216542482376,
        -0.031652674078941345,
        0.003924632910639048,
        0.051797207444906235,
        0.04112376272678375,
        -0.07426033914089203,
        -0.02197420224547386,
        -0.04123273864388466,
        -0.025584926828742027,
        0.09372683614492416,
        0.041175708174705505,
        0.07900924980640411,
        -0.05566875636577606,
        -0.013606520369648933,
        0.0006719008670188487,
        0.0025374675169587135,
        -0.079818494617939,
        -0.1136956661939621,
        0.017479514703154564,
        0.08070891350507736,
        -0.021659305319190025,
        -0.05342794582247734,
        0.0030312812887132168,
        0.04901483282446861,
        0.11989934742450714,
        -0.02675533853471279,
        -0.08509001135826111,
        0.012574693188071251,
        -0.006412424147129059,
        0.05505044758319855,
        0.09210023283958435,
        -0.02282862365245819,
        -0.11424656212329865,
        0.052110038697719574,
        -0.10012958198785782,
        -0.044583212584257126,
        -0.10365153849124908,
        0.028669200837612152,
        0.026924636214971542,
        -0.10360684990882874,
        -0.008196650072932243,
        -0.05816956236958504,
        -0.01579832285642624,
        0.027931662276387215,
        0.03785373270511627,
        -0.04359081760048866,
        0.012342190369963646,
        0.019279103726148605,
        -0.05943850800395012,
        0.05976487323641777,
        -0.045889727771282196,
        0.058423373848199844,
        -0.07996571809053421,
        0.03595840558409691,
        0.0383370965719223,
        -0.10353751480579376,
        0.03218987584114075,
        0.013106901198625565,
        -0.050077296793460846,
        -0.06517872214317322,
        0.06922586262226105,
        -0.013114516623318195,
        -0.007133553735911846,
        0.012717226520180702,
        -0.0700099766254425,
        -0.03908379748463631,
        0.07183923572301865,
        0.011914472095668316,
        -0.09141501039266586,
        0.0149683877825737,
        -0.05229464918375015,
        0.024690458551049232,
        -0.00820926483720541,
        0.00500483950600028,
        0.08822071552276611,
        -0.0044511123560369015,
        -0.031037794426083565,
        0.07013513147830963,
        -0.04935702309012413,
        -0.07499141246080399,
        -0.059162579476833344,
        -0.07040724903345108,
        0.03532171994447708,
        0.06863339990377426,
        0.002401038771495223,
        -0.04597630351781845,
        0.08974816650152206,
        -0.0429060272872448,
        0.027569888159632683,
        -0.022701898589730263,
        -0.026847289875149727,
        0.005580823868513107,
        -0.012788788415491581,
        0.04918293654918671,
        0.004551512189209461,
        0.026179425418376923,
        -0.0177730992436409,
        -0.06649014353752136,
        0.005355468951165676,
        -0.013282659463584423,
        0.048919428139925,
        -0.00515908095985651,
        0.003238358534872532,
        0.03844411298632622,
        -0.004701567348092794,
        0.007181541994214058,
        -0.049378927797079086,
        0.02854093909263611,
        0.12224384397268295,
        0.18256203830242157,
        -0.08254022151231766,
        -0.06638253480195999,
        0.045302990823984146,
        0.006712446454912424,
        -0.07688938826322556,
        0.11553356051445007,
        1.3028150826957265e-32,
        0.039371948689222336,
        -0.07839961349964142,
        -0.018147682771086693,
        0.07416757196187973,
        0.08588280528783798,
        -0.02921953797340393,
        0.06476456671953201,
        -0.009463525377213955,
        -0.13421568274497986,
        -0.04397803172469139,
        -0.10566595196723938,
        0.022088991478085518,
        -0.07388725876808167,
        -0.03984687849879265,
        -0.0975530743598938,
        -0.06411822885274887,
        -0.036495812237262726,
        0.035667289048433304,
        0.06724276393651962,
        0.012856733053922653,
        -0.013416639529168606,
        0.05180012807250023,
        -0.034579452127218246,
        0.08495055884122849,
        -0.00729944184422493,
        -0.022348366677761078,
        -0.006255145650357008,
        -0.05615867301821709,
        -0.027039894834160805,
        -0.024289757013320923,
        0.12993167340755463,
        -0.00565078342333436,
        0.0224224254488945,
        0.046114157885313034,
        -0.03544078394770622,
        -0.0069793774746358395,
        -0.01607285439968109,
        -0.008516546338796616,
        -0.11062674224376678,
        -0.0034732799977064133,
        0.060395680367946625,
        -0.03361418843269348,
        -0.0018676408799365163,
        0.000012409032024152111,
        -0.06280791759490967,
        -0.07699214667081833,
        -0.06686042994260788,
        0.05819549039006233,
        0.06003742665052414,
        -0.03140141814947128,
        -0.0678754597902298,
        0.055027492344379425,
        -0.010756030678749084,
        -0.0191123615950346,
        0.04773738235235214,
        -0.06651771068572998,
        -0.031234662979841232,
        -0.020123153924942017,
        0.016917869448661804,
        -0.01552372146397829,
        -0.027775131165981293,
        0.060045525431632996,
        -0.006067291833460331,
        -0.028919043019413948,
        0.08135624974966049,
        -0.03891271352767944,
        0.04545869305729866,
        0.04026445746421814,
        0.021819457411766052,
        -0.04940882325172424,
        -0.024681739509105682,
        -0.033441003412008286,
        0.01969984918832779,
        0.04959831014275551,
        0.0033902546856552362,
        -0.006785917095839977,
        -0.04130972921848297,
        -0.03029959835112095,
        -0.023311059921979904,
        -0.06521914154291153,
        -0.03344312310218811,
        -0.014159790240228176,
        -0.03414181247353554,
        0.053244754672050476,
        -0.0007934612804092467,
        0.035538408905267715,
        -0.02334636077284813,
        -0.05615885555744171,
        0.029720749706029892,
        0.006284037139266729,
        -0.04791223630309105,
        -0.01693517342209816,
        -0.0415588840842247,
        -0.054019007831811905,
        -0.056018151342868805,
        -1.2956907053089803e-32,
        0.09241784363985062,
        -0.027411308139562607,
        -0.0134789003059268,
        0.06077465042471886,
        0.009858029894530773,
        0.008642648346722126,
        0.04342273995280266,
        -0.011423281393945217,
        0.048069413751363754,
        0.05370234698057175,
        -0.016234353184700012,
        -0.049609407782554626,
        0.05870848521590233,
        -0.027593811973929405,
        0.021392295137047768,
        0.06268234550952911,
        -0.06619462370872498,
        -0.08264695852994919,
        0.0012196319876238704,
        -0.02882377617061138,
        -0.014598670415580273,
        0.08308698236942291,
        0.051774151623249054,
        0.03621404990553856,
        -0.046700991690158844,
        0.01987256109714508,
        -0.02822750434279442,
        0.07058461010456085,
        -0.06597112119197845,
        -0.07986751943826675,
        -0.026857934892177582,
        0.060781583189964294,
        -0.13996052742004395,
        0.04187094047665596,
        -0.03970469534397125,
        -0.0485309436917305,
        0.07596368342638016,
        0.07096236944198608,
        -0.040226180106401443,
        0.073798269033432,
        0.0614156611263752,
        -0.017905693501234055,
        -0.0837266594171524,
        -0.04445192962884903,
        0.026920387521386147,
        -0.035684287548065186,
        0.0237641092389822,
        0.06504112482070923,
        -0.022663040086627007,
        -0.026718975976109505,
        0.05843097344040871,
        -0.05969305709004402,
        -0.04791954532265663,
        -0.022517507895827293,
        0.02077317424118519,
        0.04724268242716789,
        0.067288339138031,
        -0.08041246235370636,
        -0.018061943352222443,
        -0.03887704014778137,
        0.03269920125603676,
        -0.08124542981386185,
        0.07172983139753342,
        -0.04671991243958473,
        0.034687589854002,
        -0.054510366171598434,
        -0.02611442655324936,
        0.030606094747781754,
        0.042481545358896255,
        -0.05389925092458725,
        -0.04757264256477356,
        -0.01327182911336422,
        0.06752991676330566,
        0.006898720748722553,
        0.07073476165533066,
        0.001670137862674892,
        -0.003898869501426816,
        -0.05887829512357712,
        0.07978100329637527,
        0.07177186757326126,
        -0.03896398842334747,
        0.005666661076247692,
        0.008343233726918697,
        0.024355214089155197,
        0.007271358277648687,
        0.011348993517458439,
        -0.01650318317115307,
        0.08237046003341675,
        -0.03157835826277733,
        0.008426619693636894,
        -0.04791490361094475,
        -0.026050815358757973,
        0.0172153040766716,
        -0.05999857559800148,
        -0.03835752606391907,
        -6.404837193940693e-8,
        -0.1089400127530098,
        0.012631905265152454,
        -0.10794179886579514,
        -0.005229928996413946,
        -0.050060294568538666,
        0.007884135469794273,
        0.047695934772491455,
        0.006351275835186243,
        0.0010186824947595596,
        -0.056514859199523926,
        0.019829649478197098,
        0.006038529798388481,
        -0.012372837401926517,
        -0.013460746966302395,
        -0.08114662021398544,
        0.005699075758457184,
        0.03624468669295311,
        0.10964345186948776,
        -0.03433180972933769,
        -0.056788645684719086,
        0.10946061462163925,
        0.006117708515375853,
        0.014313952066004276,
        0.0615515410900116,
        0.06963808834552765,
        0.00007316513074329123,
        0.01321748923510313,
        0.021746978163719177,
        -0.04537586495280266,
        0.007931118831038475,
        -0.0673668384552002,
        -0.05415000393986702,
        0.08561892807483673,
        -0.06345397979021072,
        -0.030814237892627716,
        -0.0017419952200725675,
        0.10422971844673157,
        -0.001446896349079907,
        0.01477244682610035,
        0.06963367015123367,
        0.047868143767118454,
        0.03018973022699356,
        -0.03592730313539505,
        -0.032167818397283554,
        -0.012549239210784435,
        -0.052085038274526596,
        -0.007300175726413727,
        0.00822824239730835,
        0.04086315259337425,
        -0.0027590191457420588,
        -0.025085726752877235,
        -0.027762701734900475,
        -0.007697185035794973,
        0.02956298738718033,
        -0.02631182223558426,
        -0.04616745933890343,
        0.03792240098118782,
        -0.03386387974023819,
        -0.003070136997848749,
        0.0050495462492108345,
        0.013082151301205158,
        0.006065442226827145,
        0.06991374492645264,
        0.01570121943950653
      ]
    },
    {
      "id": "59aa0222",
      "filePath": "04-code-janitor/src/agent.ts",
      "content": "export async function runJanitor(task: string): Promise<string> {\n\tensureSandbox();\n\n\tlet state: JanitorState = { ...INITIAL_STATE, task };\n\tconst fileCache: FileCache = {};\n\tconst messages: ChatCompletionMessageParam[] = [];\n\n\t// 初始系统消息\n\tmessages.push({\n\t\trole: \"system\",\n\t\tcontent: `You are Code Janitor, an expert TypeScript developer.\nYou are working in a sandbox TypeScript project with Jest for testing.\n\nIMPORTANT RULES:\n1. You MUST write code, not just explore. After reading a file, write the updated version immediately.\n2. When using write_file, provide the COMPLETE file content, not just the new code.\n3. Always add tests for new functionality.\n4. Run 'npm test' to verify your changes work.\n5. If tests fail, fix the code and run tests again.\n6. Call task_complete only after tests pass.\n\nBe decisive and take action. Don't just explore - implement the solution.`\n\t});\n\n\t// 初始用户消息\n\tmessages.push({\n\t\trole: \"user\",\n\t\tcontent: `Task: ${task}\n\nThe project structure is:\n- src/utils.ts - utility functions\n- src/utils.test.ts - tests for utilities\n\nStart by reading the existing code, then implement the requested feature.`\n\t});\n\n\tconsole.log(`\\n🧹 Code Janitor Starting...`);\n\tconsole.log(`📋 Task: \"${task}\"`);\n\tconsole.log(\"-----------------------------------\");\n\n\twhile (state.iteration < state.max_iterations && !state.completed) {\n\t\tstate.iteration++;\n\t\tconsole.log(`\\n🔄 [Step ${state.iteration}/${state.max_iterations}]`);\n\n\t\t// 调用 LLM\n\t\tconst completion = await client.chat.completions.create({\n\t\t\tmodel: process.env.OPENAI_MODEL || 'gpt-4o',\n\t\t\tmessages: messages,\n\t\t\ttools: tools,\n\t\t\ttool_choice: \"required\", // 强制调用工具",
      "startLine": 104,
      "endLine": 153,
      "type": "function",
      "name": "runJanitor (part 1)",
      "embedding": [
        -0.03616682067513466,
        0.004806578624993563,
        0.04087631031870842,
        0.07785147428512573,
        0.053212642669677734,
        -0.025718538090586662,
        -0.004134987015277147,
        0.06875248998403549,
        0.017496377229690552,
        0.024065330624580383,
        -0.06278820335865021,
        0.018784089013934135,
        -0.07397287338972092,
        0.034613724797964096,
        0.05212724953889847,
        -0.026525132358074188,
        -0.02923377975821495,
        -0.03674199804663658,
        -0.05321567505598068,
        -0.05436733737587929,
        0.05796503648161888,
        -0.014039493165910244,
        0.13452933728694916,
        -0.0004222083371132612,
        -0.0045065488666296005,
        -0.03299647569656372,
        0.015444599092006683,
        -0.08983586728572845,
        -0.04435752332210541,
        0.00966493971645832,
        0.020332949236035347,
        -0.05126764625310898,
        -0.022079424932599068,
        -0.016144735738635063,
        0.016260236501693726,
        0.12420047074556351,
        -0.03577049449086189,
        -0.047361135482788086,
        0.010534465312957764,
        -0.0181722454726696,
        0.03019510768353939,
        0.09831812977790833,
        -0.06897076219320297,
        -0.09097490459680557,
        0.08623120188713074,
        -0.09690406918525696,
        -0.047460101544857025,
        -0.07946303486824036,
        0.013272569514811039,
        -0.0023578936234116554,
        -0.06950438022613525,
        -0.005444661248475313,
        -0.03278125077486038,
        -0.022760266438126564,
        0.027571901679039,
        0.033855509012937546,
        0.015391084365546703,
        -0.006035050377249718,
        0.02509341388940811,
        -0.035959336906671524,
        0.028417641296982765,
        -0.05345962196588516,
        0.02847171202301979,
        -0.11694904416799545,
        0.05245618149638176,
        0.03395325317978859,
        -0.06313186883926392,
        0.05973963066935539,
        0.007153139915317297,
        0.014598002657294273,
        -0.03327075019478798,
        0.06579383462667465,
        0.002837707521393895,
        -0.028414322063326836,
        -0.025006847456097603,
        -0.09400872141122818,
        -0.02550514042377472,
        0.045572590082883835,
        0.007533458061516285,
        -0.04377925768494606,
        -0.056709542870521545,
        -0.10594061762094498,
        -0.0018880603602156043,
        -0.003028392791748047,
        -0.02691804990172386,
        0.08368813246488571,
        0.022072484716773033,
        -0.0019125166581943631,
        0.0484851598739624,
        -0.061594679951667786,
        -0.039795804768800735,
        -0.007774025667458773,
        -0.02842707559466362,
        0.06666301935911179,
        0.03753284737467766,
        0.033242058008909225,
        -0.035604048520326614,
        0.10842209309339523,
        -0.013428119011223316,
        0.05116215720772743,
        0.013043448328971863,
        -0.03149716928601265,
        0.048906948417425156,
        0.003203148953616619,
        0.04494662210345268,
        0.026720203459262848,
        0.018149124458432198,
        -0.07940027862787247,
        -0.04196358099579811,
        -0.02697712369263172,
        0.010894935578107834,
        0.0327104814350605,
        0.04003298655152321,
        0.05274411290884018,
        0.026927562430500984,
        -0.01670285128057003,
        0.0016441292827948928,
        0.022859493270516396,
        -0.022223051637411118,
        0.18144750595092773,
        0.20549482107162476,
        -0.023625198751688004,
        0.019153473898768425,
        0.05106633901596069,
        0.06756773591041565,
        0.0024001311976462603,
        0.14164260029792786,
        4.327194906758465e-33,
        0.05123112350702286,
        -0.006626690737903118,
        -0.0028486554510891438,
        0.11564522236585617,
        0.08189874142408371,
        0.03212037682533264,
        0.03573576733469963,
        0.022190731018781662,
        -0.1184789314866066,
        -0.004330592695623636,
        -0.043967027217149734,
        0.03223371133208275,
        -0.04651637747883797,
        -0.03218294680118561,
        -0.04213274270296097,
        -0.0624864399433136,
        -0.018140055239200592,
        -0.019834378734230995,
        0.08109839260578156,
        0.05441133305430412,
        0.0753084197640419,
        -0.019679157063364983,
        -0.04418839514255524,
        0.03463577851653099,
        0.02541295997798443,
        -0.03775741159915924,
        0.017975792288780212,
        0.014224495738744736,
        -0.0691097229719162,
        -0.028831543400883675,
        0.07733052223920822,
        0.03467585891485214,
        0.008313082158565521,
        0.05174935236573219,
        -0.0325811393558979,
        -0.004075220786035061,
        0.0016021978808566928,
        0.007976043969392776,
        -0.10491941124200821,
        -0.0614812970161438,
        0.018310699611902237,
        -0.012191640213131905,
        -0.0453919880092144,
        0.009867954067885876,
        -0.0705995261669159,
        -0.08734918385744095,
        -0.051436107605695724,
        0.06047389656305313,
        0.12939324975013733,
        -0.0011580911232158542,
        -0.022562269121408463,
        0.04893405735492706,
        -0.006290783174335957,
        -0.044292788952589035,
        0.04557185620069504,
        -0.010242191143333912,
        0.03769684210419655,
        -0.05283036082983017,
        0.02958531491458416,
        -0.015743261203169823,
        0.02149314060807228,
        -0.033878959715366364,
        -0.04803027957677841,
        0.051122236996889114,
        0.037084225565195084,
        0.014106450602412224,
        -0.03119770623743534,
        0.025660689920186996,
        0.0797487422823906,
        -0.037949830293655396,
        -0.05630446970462799,
        -0.05544359236955643,
        0.00894172489643097,
        0.047357745468616486,
        0.0008067967719398439,
        -0.007931360974907875,
        -0.0755080059170723,
        0.018907245248556137,
        -0.0794200673699379,
        -0.07711153477430344,
        0.010533874854445457,
        -0.08589109778404236,
        -0.10604289174079895,
        0.044468797743320465,
        0.05653988569974899,
        0.02011900022625923,
        -0.03378070145845413,
        -0.035491157323122025,
        0.013709455728530884,
        0.032931577414274216,
        -0.004407809115946293,
        -0.018960068002343178,
        0.001026837038807571,
        -0.008203321136534214,
        -0.02993256039917469,
        -3.96157942945427e-33,
        0.0695459321141243,
        -0.0016872389242053032,
        -0.08432064205408096,
        0.07017146795988083,
        0.05744975805282593,
        -0.051057130098342896,
        0.0534566231071949,
        -0.03664802759885788,
        -0.05190745368599892,
        -0.01449731644243002,
        -0.04568612575531006,
        -0.05256275087594986,
        0.078156977891922,
        0.02806164138019085,
        -0.03721119090914726,
        0.04032539576292038,
        -0.03970513120293617,
        -0.06882480531930923,
        0.02354799583554268,
        -0.03725338727235794,
        0.025804469361901283,
        0.055681247264146805,
        0.05614692345261574,
        0.056263573467731476,
        -0.054323118180036545,
        0.05075516551733017,
        0.016868868842720985,
        0.06326059997081757,
        -0.020599687471985817,
        -0.07359439879655838,
        0.004439971409738064,
        0.024411965161561966,
        -0.09783481806516647,
        0.008498592302203178,
        0.01849514991044998,
        -0.06392501294612885,
        0.04229974001646042,
        0.03527098894119263,
        -0.006355586927384138,
        0.0727999359369278,
        0.10600735992193222,
        -0.01892055571079254,
        -0.03304257616400719,
        -0.013191038742661476,
        0.01744387298822403,
        0.009880485013127327,
        0.040334753692150116,
        0.03326725959777832,
        -0.03587963804602623,
        -0.030162116512656212,
        -0.006241439841687679,
        -0.07544388622045517,
        -0.036921557039022446,
        -0.00708912406116724,
        0.025987200438976288,
        -0.03485951945185661,
        0.03953496739268303,
        -0.11198067665100098,
        -0.016453133895993233,
        0.036501187831163406,
        -0.021393321454524994,
        -0.07919240742921829,
        0.1422802358865738,
        -0.041078899055719376,
        -0.016054797917604446,
        -0.07804644852876663,
        -0.04954759404063225,
        0.029886212199926376,
        0.14085537195205688,
        0.05440320447087288,
        -0.05948692932724953,
        -0.006197596900165081,
        0.01649780385196209,
        -0.020595068112015724,
        0.03613128513097763,
        -0.004241003189235926,
        -0.05095705762505531,
        -0.10246483981609344,
        0.08888497948646545,
        0.0086359903216362,
        -0.0670185461640358,
        -0.023673003539443016,
        -0.00018264209211338311,
        -0.017078947275877,
        -0.0006569117540493608,
        0.012652129866182804,
        -0.020441362634301186,
        0.09921619296073914,
        0.008021689020097256,
        0.010586186312139034,
        -0.031087111681699753,
        -0.007045673206448555,
        0.00013397073780652136,
        -0.07449152320623398,
        -0.0280599407851696,
        -6.003263308684836e-8,
        -0.07276342809200287,
        -0.018577808514237404,
        -0.08827032148838043,
        0.005647778976708651,
        -0.0077408985234797,
        -0.06315243244171143,
        -0.02216309681534767,
        -0.03835064172744751,
        0.021024668589234352,
        -0.04434282332658768,
        0.013371219858527184,
        0.019213680177927017,
        0.02845815382897854,
        -0.008331659249961376,
        -0.04152638092637062,
        -0.02922074869275093,
        0.028977908194065094,
        0.07004466652870178,
        -0.02219521999359131,
        -0.039296697825193405,
        0.062284085899591446,
        0.023325879126787186,
        0.002486658515408635,
        0.03685459494590759,
        0.03317679092288017,
        0.00029460768564604223,
        0.044370122253894806,
        0.05794674530625343,
        -0.02845480479300022,
        0.02247481793165207,
        -0.00794682651758194,
        -0.035808075219392776,
        0.056278545409440994,
        -0.014682680368423462,
        -0.02599232830107212,
        -0.015675190836191177,
        0.11315347999334335,
        -0.016764068976044655,
        0.06440477073192596,
        0.058861054480075836,
        0.10414297878742218,
        0.03164229542016983,
        -0.025275548920035362,
        -0.02145296521484852,
        -0.061407946050167084,
        -0.07721046358346939,
        -0.06048687547445297,
        -0.027535978704690933,
        0.06576204299926758,
        -0.017642917111516,
        -0.03844425827264786,
        -0.021243993192911148,
        -0.08488824963569641,
        0.047836076468229294,
        0.003636860055848956,
        -0.03821800276637077,
        0.05160514637827873,
        -0.02193182148039341,
        -0.005187676753848791,
        0.010929510928690434,
        0.058654557913541794,
        -0.032864172011613846,
        0.009151788428425789,
        -0.03292322903871536
      ]
    },
    {
      "id": "35ec81b5",
      "filePath": "04-code-janitor/src/agent.ts",
      "content": "const completion = await client.chat.completions.create({\n\t\t\tmodel: process.env.OPENAI_MODEL || 'gpt-4o',\n\t\t\tmessages: messages,\n\t\t\ttools: tools,\n\t\t\ttool_choice: \"required\", // 强制调用工具\n\t\t});\n\n\t\tconst message = completion.choices[0].message;\n\n\t\t// 把 assistant 消息加入历史\n\t\tmessages.push(message);\n\n\t\t// 处理工具调用\n\t\tif (message.tool_calls && message.tool_calls.length > 0) {\n\t\t\tfor (const toolCall of message.tool_calls) {\n\t\t\t\tconst funcName = toolCall.function.name;\n\n\t\t\t\t// 防御性检查：确保 arguments 存在\n\t\t\t\tlet args: any = {};\n\t\t\t\ttry {\n\t\t\t\t\targs = JSON.parse(toolCall.function.arguments || '{}');\n\t\t\t\t} catch (parseError) {\n\t\t\t\t\tconsole.log(`   ⚠️  Failed to parse arguments, using empty object`);\n\t\t\t\t}\n\n\t\t\t\tlet toolResult = \"\";\n\n\t\t\t\tconsole.log(`🛠️  ${funcName}(${JSON.stringify(args).slice(0, 80)}...)`);\n\n\t\t\t\ttry {\n\t\t\t\t\tif (funcName === 'read_file') {\n\t\t\t\t\t\tconst content = readFile(args.path);\n\t\t\t\t\t\tfileCache[args.path] = content;\n\t\t\t\t\t\tstate.files_read.push(args.path);\n\t\t\t\t\t\ttoolResult = content;\n\t\t\t\t\t} else if (funcName === 'write_file') {\n\t\t\t\t\t\twriteFile(args.path, args.content);\n\t\t\t\t\t\tstate.files_written.push(args.path);\n\t\t\t\t\t\tfileCache[args.path] = args.content;\n\t\t\t\t\t\ttoolResult = `Successfully wrote ${args.content.length} chars to ${args.path}`;\n\t\t\t\t\t} else if (funcName === 'list_dir') {\n\t\t\t\t\t\tconst entries = listDir(args.path || '.');\n\t\t\t\t\t\ttoolResult = entries.join('\\n');\n\t\t\t\t\t} else if (funcName === 'run_command') {\n\t\t\t\t\t\tconst result = runCommand(args.cmd);\n\t\t\t\t\t\tstate.command_history.push(result);\n\t\t\t\t\t\tif (!result.success) {\n\t\t\t\t\t\t\tstate.last_error = result.output;\n\t\t\t\t\t\t\ttoolResult = `FAILED:\\n${result.output}`;\n\t\t\t\t\t\t} else {",
      "startLine": 149,
      "endLine": 198,
      "type": "function",
      "name": "runJanitor (part 2)",
      "embedding": [
        -0.02551497146487236,
        0.014216462150216103,
        -0.03201352432370186,
        0.04372631013393402,
        -0.01834855228662491,
        -0.026266703382134438,
        0.06746065616607666,
        0.08952973037958145,
        -0.0018046617042273283,
        0.01243689563125372,
        -0.0020533576607704163,
        -0.012529775500297546,
        -0.04062909260392189,
        0.021643787622451782,
        0.02791253663599491,
        0.008565162308514118,
        -0.06476862728595734,
        -0.05060403421521187,
        -0.0417802594602108,
        -0.039237745106220245,
        0.057016000151634216,
        0.08854589611291885,
        0.052276141941547394,
        -0.02726123481988907,
        -0.04165620356798172,
        -0.006786409765481949,
        0.02602948062121868,
        -0.08659928292036057,
        -0.11626547574996948,
        -0.010183577425777912,
        0.03316762298345566,
        -0.042665138840675354,
        -0.039288148283958435,
        0.013950901105999947,
        0.06678467243909836,
        0.06529844552278519,
        -0.025324005633592606,
        -0.10898999124765396,
        0.012548224069178104,
        -0.02289930358529091,
        -0.0037085972726345062,
        0.0929933562874794,
        -0.05767587572336197,
        -0.10418221354484558,
        0.08520668745040894,
        -0.131267249584198,
        -0.07367993146181107,
        -0.0390736386179924,
        0.043009113520383835,
        0.008227001875638962,
        -0.08390513062477112,
        -0.00476494338363409,
        -0.057154685258865356,
        -0.010295690037310123,
        0.04941509664058685,
        -0.002455574693158269,
        -0.06770588457584381,
        -0.01671227067708969,
        -0.010625699535012245,
        -0.015912214294075966,
        0.020971138030290604,
        -0.05190625414252281,
        -0.025519363582134247,
        -0.05274570360779762,
        0.003604878904297948,
        -0.007968134246766567,
        -0.023825624957680702,
        0.07568065077066422,
        0.001048338832333684,
        0.00040514059946872294,
        -0.017537787556648254,
        0.09419350326061249,
        -0.05129913240671158,
        0.02847791463136673,
        -0.07162173092365265,
        -0.03656589612364769,
        0.02391682006418705,
        0.046040743589401245,
        0.00048235486610792577,
        -0.08640658855438232,
        -0.005737863481044769,
        -0.07649625837802887,
        0.00473611569032073,
        -0.01542593166232109,
        -0.006110839080065489,
        0.08424116671085358,
        -0.024052418768405914,
        0.002925076987594366,
        0.041280996054410934,
        -0.09185509383678436,
        -0.06160446256399155,
        0.016238626092672348,
        -0.0375155471265316,
        0.04762055724859238,
        0.06273188441991806,
        0.07781321555376053,
        0.0023672927636653185,
        0.0027971388772130013,
        -0.07749862968921661,
        0.09974546730518341,
        -0.047793198376894,
        -0.032341841608285904,
        0.03931978717446327,
        -0.0450909249484539,
        0.020312834531068802,
        0.023703474551439285,
        0.02285325713455677,
        -0.040766775608062744,
        -0.07286083698272705,
        -0.0351867638528347,
        -0.02239462360739708,
        0.0694458931684494,
        0.02349894493818283,
        0.019806820899248123,
        0.03706540912389755,
        -0.05618724972009659,
        0.042969197034835815,
        -0.033261410892009735,
        -0.023677056655287743,
        0.11241687834262848,
        0.12869678437709808,
        0.004031630698591471,
        -0.052698224782943726,
        0.036052405834198,
        0.05787254497408867,
        -0.06739329546689987,
        0.10909192264080048,
        6.63967110739224e-33,
        0.032442718744277954,
        -0.05386580899357796,
        0.02026917040348053,
        0.08578529208898544,
        0.03486772999167442,
        -0.005657516419887543,
        0.06324798613786697,
        -0.00045063087600283325,
        -0.10101788491010666,
        -0.015131219290196896,
        -0.05879421532154083,
        -0.011027853935956955,
        -0.010068004950881004,
        -0.016996271908283234,
        0.00523000443354249,
        -0.0407138392329216,
        -0.005920619238168001,
        0.034757018089294434,
        0.07394421845674515,
        -0.0026880220975726843,
        0.009721210226416588,
        -0.04121196269989014,
        -0.0359419547021389,
        0.04640907421708107,
        -0.029531460255384445,
        -0.015979841351509094,
        0.021275168284773827,
        -0.026794875040650368,
        -0.054470691829919815,
        -0.027841735631227493,
        0.11712833493947983,
        0.005199054721742868,
        0.02195930853486061,
        0.04554086923599243,
        0.01623542420566082,
        0.032362885773181915,
        -0.014256702736020088,
        -0.008506248705089092,
        -0.06701243668794632,
        -0.03634702414274216,
        0.04636422172188759,
        -0.020805837586522102,
        -0.015299441292881966,
        0.017903121188282967,
        -0.06401703506708145,
        -0.03471314534544945,
        -0.08811231702566147,
        0.006959876976907253,
        0.005377341061830521,
        0.01673906296491623,
        -0.00503385066986084,
        0.09689407795667648,
        0.01778092049062252,
        0.042171917855739594,
        0.021211734041571617,
        0.01117292232811451,
        -0.02401403710246086,
        -0.00261448766104877,
        0.04191522300243378,
        -0.0046848636120557785,
        -0.015785537660121918,
        0.015307161025702953,
        -0.04320778325200081,
        0.020705673843622208,
        0.039458002895116806,
        -0.019232485443353653,
        -0.0268417876213789,
        -0.015441627241671085,
        0.1041170135140419,
        -0.028692958876490593,
        -0.04589890316128731,
        -0.0752338245511055,
        0.08427801728248596,
        -0.012954222038388252,
        0.013940003700554371,
        0.003344296244904399,
        -0.0804668515920639,
        -0.071317657828331,
        -0.05350496619939804,
        -0.06730791926383972,
        -0.04858720675110817,
        -0.024189189076423645,
        -0.07798483222723007,
        0.03519274294376373,
        0.060868192464113235,
        0.03973875194787979,
        0.0074553536251187325,
        -0.04456767812371254,
        0.004128243308514357,
        0.049951668828725815,
        -0.05033661425113678,
        0.03894224017858505,
        -0.023945190012454987,
        -0.05637352541089058,
        0.04673336073756218,
        -5.970311195913428e-33,
        0.11643106490373611,
        0.019871391355991364,
        -0.02715274691581726,
        0.04409809038043022,
        0.05791711434721947,
        -0.05716291442513466,
        0.025837231427431107,
        -0.03662887215614319,
        0.01738070324063301,
        -0.015639515593647957,
        -0.05513327941298485,
        0.0027613851707428694,
        0.049959372729063034,
        -0.013721413910388947,
        0.04898186773061752,
        0.022350987419486046,
        -0.041157983243465424,
        -0.09987732768058777,
        0.03902077674865723,
        0.000326393055729568,
        0.011777712032198906,
        0.0510014146566391,
        0.07443427294492722,
        -0.008816463872790337,
        -0.033455707132816315,
        0.04038933292031288,
        0.00789214763790369,
        0.020195847377181053,
        -0.011771276593208313,
        -0.023574955761432648,
        0.013576146215200424,
        0.048206910490989685,
        -0.10647664964199066,
        0.014917097054421902,
        0.04325442761182785,
        -0.09445057064294815,
        0.10699797421693802,
        0.09336824715137482,
        -0.0005289304535835981,
        0.0617668516933918,
        0.08030252158641815,
        -0.014226919040083885,
        -0.03511814773082733,
        -0.04533599689602852,
        -0.008154873736202717,
        -0.03964301571249962,
        0.08026900142431259,
        0.047276820987463,
        -0.04265313968062401,
        -0.03665505722165108,
        0.019313907250761986,
        -0.10086619853973389,
        -0.08451128005981445,
        0.011376863345503807,
        0.04904200881719589,
        -0.02635377086699009,
        0.06581193953752518,
        -0.14298906922340393,
        -0.00019244996656198055,
        0.029460322111845016,
        -0.019268108531832695,
        -0.051227059215307236,
        0.07875626534223557,
        -0.08054966479539871,
        0.07695193588733673,
        -0.059145133942365646,
        -0.026993805542588234,
        -0.004950262606143951,
        0.0815887302160263,
        0.04045776277780533,
        -0.08742860704660416,
        0.017295535653829575,
        0.04711509868502617,
        0.001183759537525475,
        0.07875226438045502,
        0.04159625619649887,
        -0.06177911534905434,
        -0.0916009247303009,
        0.07089626044034958,
        0.06093249469995499,
        -0.005103593692183495,
        -0.010847321711480618,
        -0.014990102499723434,
        0.015312024392187595,
        0.005446690134704113,
        -0.02809770777821541,
        -0.02132458984851837,
        0.08865126222372055,
        -0.0278183501213789,
        -0.0011174783576279879,
        -0.002959588309749961,
        -0.0003877005656249821,
        0.136606827378273,
        -0.02367754839360714,
        -0.040568526834249496,
        -5.5952675381831796e-8,
        -0.10484163463115692,
        -0.05387032777070999,
        -0.08080433309078217,
        0.014720120467245579,
        -0.02102035842835903,
        -0.011026350781321526,
        -0.012405538000166416,
        -0.059214331209659576,
        0.04388991743326187,
        -0.07080374658107758,
        0.07226696610450745,
        0.013182218186557293,
        0.04035511612892151,
        0.025469781830906868,
        -0.028455305844545364,
        -0.0546431764960289,
        0.023593543097376823,
        0.04014699161052704,
        -0.04408407211303711,
        0.0167635977268219,
        0.07905592769384384,
        0.010693266056478024,
        -0.028235873207449913,
        0.010843006893992424,
        0.08399755507707596,
        -0.028277594596147537,
        0.002641749568283558,
        0.00814114511013031,
        -0.0546162910759449,
        0.0889519453048706,
        0.030092382803559303,
        -0.009373514913022518,
        0.08480910211801529,
        0.017117680981755257,
        0.019697796553373337,
        -0.046622663736343384,
        0.11716389656066895,
        -0.025740310549736023,
        0.048411775380373,
        0.059287089854478836,
        0.10461656749248505,
        0.0800347700715065,
        -0.03107956238090992,
        -0.02654458023607731,
        -0.004354475066065788,
        -0.10722572356462479,
        0.049427978694438934,
        -0.011064225807785988,
        0.08815337717533112,
        0.004411355592310429,
        -0.11389848589897156,
        -0.02500373311340809,
        -0.01622660644352436,
        -0.0033212860580533743,
        -0.014707958325743675,
        -0.06144099682569504,
        0.09338018298149109,
        -0.004339868202805519,
        -0.015049800276756287,
        0.03288502246141434,
        0.03174278885126114,
        -0.012218696996569633,
        -0.019839534536004066,
        0.015168040990829468
      ]
    },
    {
      "id": "5f8483d3",
      "filePath": "04-code-janitor/src/agent.ts",
      "content": "state.command_history.push(result);\n\t\t\t\t\t\tif (!result.success) {\n\t\t\t\t\t\t\tstate.last_error = result.output;\n\t\t\t\t\t\t\ttoolResult = `FAILED:\\n${result.output}`;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstate.last_error = null;\n\t\t\t\t\t\t\ttoolResult = `SUCCESS:\\n${result.output}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (funcName === 'task_complete') {\n\t\t\t\t\t\tstate.completed = true;\n\t\t\t\t\t\tconsole.log(`\\n✅ Task Complete!`);\n\t\t\t\t\t\tconsole.log(`📝 Summary: ${args.summary || 'No summary provided'}`);\n\t\t\t\t\t\treturn args.summary || 'Task completed';\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoolResult = `Unknown tool: ${funcName}`;\n\t\t\t\t\t}\n\t\t\t\t} catch (e: any) {\n\t\t\t\t\tconsole.log(`   ❌ Error: ${e.message}`);\n\t\t\t\t\tstate.last_error = e.message;\n\t\t\t\t\ttoolResult = `ERROR: ${e.message}`;\n\t\t\t\t}\n\n\t\t\t\t// 把工具结果加入消息历史\n\t\t\t\tmessages.push({\n\t\t\t\t\trole: \"tool\",\n\t\t\t\t\ttool_call_id: toolCall.id,\n\t\t\t\t\tcontent: toolResult || \"No result\"\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t// LLM 没有调用工具，添加一个提示消息\n\t\t\tconsole.log(`💭 ${message.content?.slice(0, 100) || '(no content)'}...`);\n\t\t\t// 强制下一轮调用工具\n\t\t\tmessages.push({\n\t\t\t\trole: \"user\",\n\t\t\t\tcontent: \"Please call a tool to make progress on the task. If you need to see the code, use read_file. If you're ready to add code, use write_file.\"\n\t\t\t});\n\t\t}\n\t}\n\n\tif (!state.completed) {\n\t\tconsole.warn(\"\\n🛑 Max iterations reached without completion.\");\n\t\treturn \"Task incomplete - max iterations reached\";\n\t}\n\n\treturn \"Task completed\";\n}\n\n// ============================================\n// 导出",
      "startLine": 194,
      "endLine": 243,
      "type": "function",
      "name": "runJanitor (part 3)",
      "embedding": [
        -0.0330437496304512,
        0.05704900249838829,
        0.0027335125487297773,
        0.04047229886054993,
        0.022707322612404823,
        -0.009332261979579926,
        0.010431919246912003,
        0.04878421127796173,
        0.06940656155347824,
        0.03462250530719757,
        0.0077710580080747604,
        -0.046375300735235214,
        -0.001906378660351038,
        -0.019466932862997055,
        -0.014441126957535744,
        -0.018554547801613808,
        -0.09723647683858871,
        -0.010291089303791523,
        -0.08107815682888031,
        -0.11034202575683594,
        0.10431497544050217,
        0.056663088500499725,
        0.052705779671669006,
        0.06129477173089981,
        -0.058352503925561905,
        0.05374505743384361,
        -0.03865960240364075,
        -0.05081666260957718,
        -0.061393894255161285,
        -0.019154276698827744,
        0.0019561410881578922,
        -0.07263754308223724,
        -0.0308210588991642,
        0.024156268686056137,
        0.022614294663071632,
        0.07144201546907425,
        -0.07648997008800507,
        -0.058987095952034,
        -0.015969883650541306,
        -0.04414176940917969,
        -0.02890882082283497,
        0.0694393739104271,
        -0.04535079374909401,
        -0.09889141470193863,
        0.05231389030814171,
        -0.1266418844461441,
        -0.13129889965057373,
        -0.05928393080830574,
        -0.0029685585759580135,
        0.025213629007339478,
        -0.05003102868795395,
        -0.016159316524863243,
        0.013839400373399258,
        0.0021868511103093624,
        0.0817842185497284,
        0.042630020529031754,
        -0.025690406560897827,
        -0.022905603051185608,
        -0.04774859920144081,
        -0.06525199115276337,
        0.01350063644349575,
        -0.02525588870048523,
        0.003016355447471142,
        -0.07796360552310944,
        0.05973103642463684,
        0.022700266912579536,
        -0.03235672041773796,
        0.040662821382284164,
        -0.013601371087133884,
        0.06918878853321075,
        -0.041478078812360764,
        0.002254224382340908,
        -0.05748302489519119,
        -0.026244794949889183,
        -0.021399369463324547,
        -0.06142225116491318,
        -0.012212663888931274,
        0.0349590964615345,
        -0.056279510259628296,
        -0.03308229520916939,
        -0.06151140481233597,
        -0.07309950143098831,
        0.025855688378214836,
        0.004068261943757534,
        0.024992626160383224,
        0.0856638252735138,
        -0.02886723168194294,
        0.03252643346786499,
        0.0621567964553833,
        -0.08457615971565247,
        -0.09317096322774887,
        0.013732546009123325,
        0.029437080025672913,
        0.07916557043790817,
        0.05489825829863548,
        0.093727707862854,
        -0.017418796196579933,
        0.04432025924324989,
        -0.021751761436462402,
        0.06352440267801285,
        0.022696603089571,
        -0.018117807805538177,
        -0.004522885195910931,
        -0.05761478468775749,
        0.07313250750303268,
        0.02910749241709709,
        0.017180945724248886,
        -0.02778092958033085,
        -0.0666453093290329,
        -0.02724529057741165,
        0.040639933198690414,
        0.03939397633075714,
        -0.006905704271048307,
        0.02697943150997162,
        0.0685843676328659,
        -0.023268405348062515,
        0.06863784790039062,
        0.019144359976053238,
        -0.04075781628489494,
        0.08469154685735703,
        0.2093714326620102,
        0.0015788001473993063,
        -0.040956299751996994,
        0.05211041867733002,
        0.06594834476709366,
        -0.08984161913394928,
        0.18071559071540833,
        5.613080299408458e-33,
        0.04810785874724388,
        -0.0693422332406044,
        -0.029434366151690483,
        0.026146234944462776,
        0.03455710783600807,
        0.06563645601272583,
        0.04132404550909996,
        0.03859992325305939,
        -0.0660773441195488,
        0.0006918468279764056,
        -0.049199458211660385,
        0.038426678627729416,
        -0.03714284673333168,
        -0.036052409559488297,
        -0.05946464091539383,
        -0.0470043309032917,
        0.07496382296085358,
        0.025028899312019348,
        0.04013461619615555,
        0.01444768812507391,
        0.022038176655769348,
        -0.04844414070248604,
        -0.019354073330760002,
        0.05670890584588051,
        0.06485594063997269,
        0.009608305059373379,
        0.008075477555394173,
        0.005088628735393286,
        -0.07851260155439377,
        -0.043209418654441833,
        0.09740611910820007,
        -0.009668506681919098,
        0.015099841170012951,
        0.023040294647216797,
        -0.018590586259961128,
        0.001805932610295713,
        -0.012325763702392578,
        -0.035933759063482285,
        -0.06137863174080849,
        -0.023420367389917374,
        -0.0035685980692505836,
        -0.03707427904009819,
        -0.04165332391858101,
        -0.02432156912982464,
        -0.042765140533447266,
        -0.07961184531450272,
        -0.06644275784492493,
        0.027262719348073006,
        0.051806844770908356,
        -0.01093886699527502,
        0.00852598249912262,
        0.10359462350606918,
        0.04236069321632385,
        -0.050484079867601395,
        0.041108790785074234,
        0.010472926311194897,
        -0.015475846827030182,
        0.022345425561070442,
        0.0032409741543233395,
        -0.01482140552252531,
        0.027632445096969604,
        -0.040971606969833374,
        -0.03268289193511009,
        0.029717210680246353,
        0.04105130210518837,
        0.030184734612703323,
        0.03493277356028557,
        0.05247686803340912,
        0.0801507979631424,
        -0.034970011562108994,
        -0.08317039906978607,
        -0.04221906140446663,
        0.06976881623268127,
        0.03751378506422043,
        0.041884612292051315,
        -0.05287175625562668,
        -0.04142744839191437,
        -0.06391718983650208,
        -0.010766271501779556,
        -0.04245410114526749,
        -0.01569049432873726,
        -0.07566455751657486,
        -0.0751052275300026,
        0.018189802765846252,
        0.07084594666957855,
        0.09953131526708603,
        0.010126951150596142,
        -0.008029223419725895,
        -0.047304585576057434,
        0.06658214330673218,
        -0.07630013674497604,
        0.01204202976077795,
        -0.029618456959724426,
        -0.0027297958731651306,
        0.008444221690297127,
        -6.155829918412109e-33,
        0.10210776329040527,
        0.01612197980284691,
        -0.04328600689768791,
        0.017445579171180725,
        0.02608148194849491,
        -0.03198035806417465,
        0.044036295264959335,
        -0.01654357649385929,
        -0.03912900760769844,
        -0.02961098961532116,
        -0.031577859073877335,
        -0.04150819405913353,
        0.009948447346687317,
        0.038698531687259674,
        0.007970056496560574,
        0.07507657259702682,
        -0.048945289105176926,
        -0.04443606734275818,
        0.03246445581316948,
        -0.013202105648815632,
        0.02983706071972847,
        0.043785225600004196,
        0.02438867837190628,
        0.042886167764663696,
        -0.07372677326202393,
        -0.0012860337737947702,
        0.012794243171811104,
        0.0036483141593635082,
        -0.03557863086462021,
        -0.06127793341875076,
        0.06688026338815689,
        -0.008491851389408112,
        -0.10456406325101852,
        -0.008408178575336933,
        0.014273370616137981,
        -0.09293925762176514,
        0.06518429517745972,
        0.044621579349040985,
        -0.009048731066286564,
        0.11046022921800613,
        0.07508749514818192,
        -0.035081010311841965,
        -0.012518390081822872,
        -0.02751602791249752,
        0.013728871941566467,
        -0.014219782315194607,
        0.03853895142674446,
        0.025843610987067223,
        -0.057800401002168655,
        -0.05013171583414078,
        0.03090306743979454,
        -0.07384084910154343,
        -0.05605557560920715,
        0.03696361556649208,
        0.02528545819222927,
        -0.051511332392692566,
        0.03307837247848511,
        -0.13729245960712433,
        -0.07455381751060486,
        -0.015487787313759327,
        -0.05490534007549286,
        -0.030758053064346313,
        0.07426328957080841,
        -0.006562490947544575,
        0.024052893742918968,
        -0.04879070818424225,
        -0.018769754096865654,
        0.004466059152036905,
        0.08181113004684448,
        0.029708970338106155,
        0.0032045135740190744,
        0.03035631589591503,
        0.05523522570729256,
        0.006811073515564203,
        0.06261875480413437,
        0.04443787783384323,
        -0.07554855197668076,
        -0.09599047154188156,
        0.056366510689258575,
        0.04608142748475075,
        -0.022615846246480942,
        0.010679458267986774,
        0.01081392914056778,
        -0.0056693339720368385,
        -0.06675814837217331,
        0.0020447031129151583,
        -0.008084041997790337,
        0.09291429072618484,
        -0.011451317928731441,
        -0.00779107678681612,
        0.001188409747555852,
        0.01626131497323513,
        0.0432940237224102,
        -0.05262819677591324,
        -0.02120126783847809,
        -5.7563440236663155e-8,
        -0.07325494289398193,
        -0.0031972818542271852,
        -0.06421288847923279,
        -0.04417195916175842,
        0.012369852513074875,
        0.025907164439558983,
        -0.004502222873270512,
        -0.0617857500910759,
        -0.002530145924538374,
        -0.09209790825843811,
        0.055711258202791214,
        -0.02005457505583763,
        -0.008445000275969505,
        0.022091781720519066,
        -0.07125673443078995,
        -0.048033200204372406,
        0.01966393180191517,
        0.020336557179689407,
        0.0012375357327982783,
        -0.028066132217645645,
        0.06242881342768669,
        0.028624404221773148,
        -0.01209728792309761,
        -0.022107727825641632,
        -0.00015938366414047778,
        -0.0007740341825410724,
        -0.0122592868283391,
        0.07267963141202927,
        -0.07373227924108505,
        0.0067809224128723145,
        0.022547122091054916,
        -0.040036749094724655,
        0.09045583009719849,
        0.016585368663072586,
        -0.005793149117380381,
        -0.012898714281618595,
        0.12707741558551788,
        -0.023640643805265427,
        -0.006323524750769138,
        0.052745070308446884,
        0.11777202785015106,
        0.04965290054678917,
        0.0043187798000872135,
        -0.012806955724954605,
        -0.008271357044577599,
        -0.09956889599561691,
        -0.004094976466149092,
        -0.04309462383389473,
        0.07418881356716156,
        -0.06760416179895401,
        -0.025735173374414444,
        -0.07379378378391266,
        -0.052902545779943466,
        0.0446649044752121,
        -0.014223381876945496,
        -0.053259581327438354,
        0.12326227128505707,
        -0.039832230657339096,
        -0.014364468865096569,
        0.05459468811750412,
        0.06161630153656006,
        -0.03863922879099846,
        -0.021490389481186867,
        0.033905550837516785
      ]
    },
    {
      "id": "5d808c83",
      "filePath": "04-code-janitor/src/agent.ts",
      "content": "return \"Task completed\";\n}\n\n// ============================================\n// 导出\n// ============================================\n\nexport { JanitorState };",
      "startLine": 239,
      "endLine": 246,
      "type": "function",
      "name": "runJanitor (part 4)",
      "embedding": [
        -0.08812496066093445,
        0.05358762666583061,
        -0.009530133567750454,
        0.006585519760847092,
        0.04035984352231026,
        0.035101085901260376,
        0.01661456562578678,
        -0.021484754979610443,
        -0.04185447469353676,
        0.05708155781030655,
        -0.009029367938637733,
        -0.020487554371356964,
        -0.06646377593278885,
        -0.015307432971894741,
        0.03776855021715164,
        -0.017627790570259094,
        -0.012934455648064613,
        0.006391836330294609,
        -0.06736927479505539,
        -0.056287266314029694,
        0.0069381133653223515,
        -0.0017896832432597876,
        0.006659497506916523,
        0.01928623393177986,
        0.03706591576337814,
        0.020652305334806442,
        0.034721262753009796,
        -0.0035175024531781673,
        -0.045275624841451645,
        0.04569611698389053,
        -0.0011110403575003147,
        -0.054930031299591064,
        0.04600995033979416,
        -0.01621132716536522,
        0.11869801580905914,
        0.14741747081279755,
        -0.048495225608348846,
        0.005498151760548353,
        0.027934236451983452,
        -0.0027593555860221386,
        0.006134694442152977,
        -0.004064416047185659,
        -0.039721645414829254,
        -0.07765644043684006,
        0.004999825265258551,
        -0.04810182377696037,
        -0.10771576315164566,
        -0.09858452528715134,
        0.0039037608075886965,
        -0.005302794743329287,
        -0.07356450706720352,
        0.05442260950803757,
        -0.02429654449224472,
        -0.07586223632097244,
        0.02780972607433796,
        0.038294967263936996,
        0.02361326292157173,
        -0.05257105082273483,
        0.028568532317876816,
        -0.06027628108859062,
        0.0002880518150050193,
        -0.037594884634017944,
        0.027197951450943947,
        -0.07028070837259293,
        0.0983506292104721,
        0.0011220111045986414,
        -0.14797921478748322,
        -0.017442399635910988,
        -0.007571612950414419,
        -0.07566072046756744,
        -0.0804617702960968,
        -0.0027776320930570364,
        -0.0029394780285656452,
        -0.015353608876466751,
        -0.022714579477906227,
        -0.07724098861217499,
        -0.05838426202535629,
        0.08071013540029526,
        0.04945097118616104,
        -0.1015499159693718,
        0.01780455932021141,
        -0.11184430867433548,
        -0.056127551943063736,
        0.07809745520353317,
        -0.007669378537684679,
        0.055647049099206924,
        -0.01980794407427311,
        -0.028190525248646736,
        0.10792133212089539,
        0.012978141196072102,
        -0.02594362385571003,
        0.05548981949687004,
        0.052796076983213425,
        0.0076352497562766075,
        -0.04077574238181114,
        0.02282102406024933,
        -0.09434354305267334,
        0.06876023858785629,
        -0.027103988453745842,
        0.06467632949352264,
        -0.014064931310713291,
        -0.023905504494905472,
        0.006697675213217735,
        -0.011531381867825985,
        -0.06751061230897903,
        -0.0178866945207119,
        0.05253137648105621,
        -0.01145170722156763,
        -0.02337890863418579,
        -0.08033591508865356,
        -0.017095360904932022,
        0.07570627331733704,
        0.0149493757635355,
        -0.022046243771910667,
        0.08162303268909454,
        -0.032547976821660995,
        0.027479590848088264,
        0.0033293047454208136,
        -0.012449848465621471,
        0.09740795940160751,
        0.10272224992513657,
        -0.01622326858341694,
        -0.029619107022881508,
        0.014877362176775932,
        -0.0604645274579525,
        -0.018623581156134605,
        0.17334073781967163,
        1.0248159584508342e-32,
        -0.020168334245681763,
        -0.005198551341891289,
        -0.004005705937743187,
        0.10403838753700256,
        0.1161043718457222,
        0.0024769180454313755,
        -0.043097447603940964,
        -0.01639328896999359,
        -0.006677613127976656,
        0.03175949305295944,
        -0.030078278854489326,
        -0.000632429146207869,
        -0.05753010883927345,
        -0.03715021163225174,
        -0.08491624146699905,
        -0.06740786880254745,
        -0.0018829096807166934,
        0.0063986447639763355,
        0.01743631437420845,
        0.005781329702585936,
        0.06855583190917969,
        0.000571431708522141,
        0.01848001405596733,
        0.05556537210941315,
        0.03840505704283714,
        -0.019764473661780357,
        -0.030102573335170746,
        -0.01778934895992279,
        0.030804282054305077,
        0.016565607860684395,
        0.10173410922288895,
        0.0008390163420699537,
        0.016624728217720985,
        0.06958692520856857,
        -0.08557604998350143,
        0.05303756892681122,
        -0.04660702869296074,
        -0.06377526372671127,
        -0.053156428039073944,
        -0.02554338425397873,
        -0.0705244168639183,
        -0.01147847343236208,
        -0.00843360647559166,
        0.016353236511349678,
        -0.06688325852155685,
        -0.07044553756713867,
        0.007039560005068779,
        0.05647352710366249,
        0.15291549265384674,
        0.04970870539546013,
        0.01606612280011177,
        0.01585191674530506,
        0.03721296787261963,
        -0.051542047411203384,
        0.018763430416584015,
        -0.013585873879492283,
        0.03180105239152908,
        0.05802905559539795,
        0.09080958366394043,
        -0.025806132704019547,
        0.09211535006761551,
        0.07208504527807236,
        -0.06270577758550644,
        0.024828674271702766,
        0.050247762352228165,
        -0.035034675151109695,
        0.04756869748234749,
        -0.011582682840526104,
        0.08314387500286102,
        -0.05707547068595886,
        -0.015063755214214325,
        -0.05948720499873161,
        0.014186972752213478,
        0.033936552703380585,
        0.04410708323121071,
        0.007927656173706055,
        -0.059370800852775574,
        -0.015199742279946804,
        -0.03886359930038452,
        -0.11720822751522064,
        -0.01910414732992649,
        -0.0402749627828598,
        -0.07023175060749054,
        -0.062110140919685364,
        0.11741377413272858,
        -0.013347584754228592,
        -0.018455032259225845,
        -0.04735025018453598,
        0.016453862190246582,
        0.06681286543607712,
        -0.003637665184214711,
        -0.014424566179513931,
        -0.05674031749367714,
        0.06597471982240677,
        -0.03826647624373436,
        -1.2280060344622207e-32,
        0.0937497615814209,
        -0.0009763200068846345,
        -0.08526831120252609,
        -0.03761256858706474,
        -0.02531057968735695,
        -0.04104361683130264,
        -0.0020272715482860804,
        -0.06378573179244995,
        0.004675114061683416,
        0.05789874866604805,
        0.028229592368006706,
        -0.028306495398283005,
        -0.0073974765837192535,
        0.02307315729558468,
        -0.006313897203654051,
        0.02094046026468277,
        0.09735552966594696,
        -0.015225262381136417,
        -0.04693802073597908,
        -0.02160622552037239,
        0.005411422811448574,
        0.058186210691928864,
        -0.030809029936790466,
        0.08169850707054138,
        -0.0718451514840126,
        0.05150934308767319,
        0.06309428066015244,
        0.06996210664510727,
        -0.045981552451848984,
        -0.040933068841695786,
        -0.07007348537445068,
        0.011782852001488209,
        -0.08614014089107513,
        0.06698784977197647,
        -0.10500970482826233,
        -0.05366043373942375,
        0.035078562796115875,
        -0.011447498574852943,
        -0.034573979675769806,
        0.031108520925045013,
        0.04366941750049591,
        -0.011567343026399612,
        -0.0748077854514122,
        0.08446841686964035,
        -0.032472122460603714,
        -0.02427166886627674,
        0.019031083211302757,
        0.02536262758076191,
        -0.0400848463177681,
        -0.01632564328610897,
        -0.007432999089360237,
        -0.04936644062399864,
        -0.03349607437849045,
        -0.028257880359888077,
        -0.021051518619060516,
        0.015069643966853619,
        0.10630413889884949,
        -0.12921342253684998,
        -0.03241230547428131,
        -0.001571935717947781,
        -0.005760781466960907,
        0.012221548706293106,
        0.07835006713867188,
        -0.004574255086481571,
        0.0012249731225892901,
        -0.04159526154398918,
        -0.01078274380415678,
        0.03513813763856888,
        0.08280527591705322,
        -0.04362066462635994,
        -0.00872787181288004,
        -0.0020161932334303856,
        -0.014623913913965225,
        -0.0326843224465847,
        -0.07457390427589417,
        0.016578655689954758,
        -0.045810677111148834,
        -0.004328271374106407,
        0.06196616590023041,
        0.02040110155940056,
        -0.050238095223903656,
        -0.018565760925412178,
        0.011017895303666592,
        -0.050893813371658325,
        -0.0876113623380661,
        -0.04751715809106827,
        -0.03267623111605644,
        0.06746388226747513,
        0.028858710080385208,
        -0.0014732888666912913,
        0.0014438492944464087,
        -0.014690556563436985,
        0.027194926515221596,
        0.022355712950229645,
        0.021017510443925858,
        -5.8877720476857576e-8,
        -0.09302538633346558,
        -0.007714482024312019,
        -0.04186733812093735,
        -0.07207143306732178,
        0.013874044641852379,
        -0.03402527794241905,
        -0.019375577569007874,
        -0.012053976766765118,
        0.033125512301921844,
        -0.04640502855181694,
        0.035797346383333206,
        -0.0178473349660635,
        -0.016013355925679207,
        0.015696441754698753,
        -0.009223220869898796,
        -0.010633508674800396,
        0.005937473848462105,
        0.10481834411621094,
        -0.030173949897289276,
        -0.10856279730796814,
        0.033988479524850845,
        -0.011725964955985546,
        0.01960596814751625,
        -0.007625629659742117,
        0.057361770421266556,
        0.005758292973041534,
        -0.09913252294063568,
        0.01820017397403717,
        -0.016887372359633446,
        0.05159252882003784,
        0.004892204888164997,
        -0.005606618709862232,
        0.10552213340997696,
        -0.06278520822525024,
        -0.05601102486252785,
        0.060217928141355515,
        0.07274485379457474,
        -0.041555993258953094,
        0.027416644617915154,
        -0.07289709895849228,
        0.03330841660499573,
        0.0292977262288332,
        -0.06596343219280243,
        0.0014196140691637993,
        -0.02301378734409809,
        -0.030264828354120255,
        -0.02746424823999405,
        0.019578758627176285,
        0.05299581214785576,
        -0.09594327211380005,
        -0.02682863175868988,
        -0.03911285847425461,
        -0.09425968676805496,
        0.05818352848291397,
        -0.01744907535612583,
        -0.028591888025403023,
        -0.0038499285001307726,
        -0.03559393435716629,
        -0.0428098663687706,
        0.01294148713350296,
        -0.013349534012377262,
        0.04157741740345955,
        -0.02224339358508587,
        -0.08797715604305267
      ]
    },
    {
      "id": "642b84c8",
      "filePath": "03-evals/src/types.ts",
      "content": "// ============================================\n// 评估系统类型定义\n// ============================================\n\n/**\n * 测试样本\n * 每个样本包含输入和期望的输出要点\n */\nexport type EvalCase = {\n\tid: string;\n\tinput: string;               // 输入给 Agent 的内容\n\texpected_points: string[];   // 期望输出应包含的要点\n\tcategory?: string;           // 可选：分类（用于分组统计）\n};\n\n/**\n * 单次运行的评分记录\n */\nexport type SingleRunResult = {\n\trun_index: number;\n\toutput: string;\n\tscore: number;\n\treason: string;\n\tlatency_ms: number;\n};\n\n/**\n * 单个样本的评估结果（支持多次运行）\n */\nexport type EvalResult = {\n\tcase_id: string;\n\tinput: string;\n\truns: SingleRunResult[];     // 每次运行的详细记录\n\toutput: string;              // 最后一次运行的输出（用于展示）\n\tscore: number;               // 最终分数（所有运行的平均）\n\tscore_std: number;           // 分数标准差（衡量稳定性）\n\treason: string;              // 最后一次评分理由\n\tlatency_ms: number;          // 平均响应时间\n\tpassed: boolean;             // 平均 score >= 3 即为通过\n};\n\n/**\n * 汇总报告\n */\nexport type EvalReport = {\n\ttotal_cases: number;\n\tpassed_cases: number;\n\tfailed_cases: number;\n\tpass_rate: number;           // 0-1\n\taverage_score: number;       // 1-5\n\taverage_latency_ms: number;\n\trepeats_per_case: number;    // 每个 Case 跑了几次\n\tresults: EvalResult[];\n\tworst_cases: EvalResult[];   // score <= 2 的 Case\n\tunstable_cases: EvalResult[]; // score_std > 1 的 Case（不稳定）\n\trun_at: string;              // ISO 时间戳\n};\n\n/**\n * Agent 函数类型\n * 输入文本，输出 JSON 字符串\n */\nexport type AgentFn = (input: string) => Promise<string>;",
      "startLine": 1,
      "endLine": 64,
      "type": "other",
      "embedding": [
        -0.00638111587613821,
        0.06959038972854614,
        -0.0706760510802269,
        0.011441919952630997,
        -0.0008786999387666583,
        -0.006951690185815096,
        0.0621124804019928,
        0.06280183792114258,
        0.00991708505898714,
        -0.008914514444768429,
        0.04439742490649223,
        -0.07748400419950485,
        0.024454360827803612,
        -0.09349299222230911,
        -0.000491318351123482,
        0.003338078036904335,
        -0.11779329925775528,
        0.011935284361243248,
        -0.06607512384653091,
        -0.054734695702791214,
        -0.0018606557277962565,
        0.00550368195399642,
        -0.027727248147130013,
        -0.018343240022659302,
        -0.014873700216412544,
        -0.00528761139139533,
        -0.0009149153484031558,
        0.09273052215576172,
        -0.062332455068826675,
        -0.0314774215221405,
        -0.029460491612553596,
        0.04695678502321243,
        0.018065713346004486,
        0.07419387251138687,
        0.05540347099304199,
        0.07576808333396912,
        -0.03617296367883682,
        -0.06147012859582901,
        -0.032838474959135056,
        0.02450498193502426,
        -0.010470808483660221,
        0.04474617540836334,
        0.009226171299815178,
        -0.0627145916223526,
        0.027361111715435982,
        -0.0932982936501503,
        -0.10630092769861221,
        -0.08637255430221558,
        -0.05738716572523117,
        -0.02028391882777214,
        -0.08313533663749695,
        0.06216922774910927,
        -0.06071905046701431,
        -0.015266203321516514,
        0.06454567611217499,
        -0.0022773342207074165,
        -0.013081058859825134,
        -0.01270268578082323,
        -0.004922171588987112,
        -0.0708879828453064,
        -0.02299291454255581,
        0.02313149906694889,
        0.014255565591156483,
        -0.09049388766288757,
        -0.049993742257356644,
        -0.031847842037677765,
        -0.016107413917779922,
        0.07643403112888336,
        0.02998114377260208,
        -0.023854076862335205,
        -0.10289772599935532,
        0.0398283377289772,
        -0.08413870632648468,
        -0.004913835786283016,
        -0.06923867017030716,
        0.026311742141842842,
        -0.0158354714512825,
        -0.04402909800410271,
        -0.028524769470095634,
        -0.05439775809645653,
        -0.07980144768953323,
        -0.03732476010918617,
        -0.014801380224525928,
        0.03281074017286301,
        0.010043776594102383,
        0.03707049414515495,
        -0.010499159805476665,
        -0.008249596692621708,
        0.0625876858830452,
        0.030867960304021835,
        0.016986573114991188,
        0.018697140738368034,
        -0.0324532687664032,
        0.02669169008731842,
        0.08628195524215698,
        0.05113722383975983,
        -0.003675994696095586,
        0.003698921063914895,
        0.03009495697915554,
        0.07596522569656372,
        -0.07089059054851532,
        0.008808739483356476,
        0.06508617103099823,
        0.012060391716659069,
        -0.020186614245176315,
        -0.004737678449600935,
        0.05878442898392677,
        0.02378244698047638,
        0.01896255649626255,
        -0.06901606917381287,
        -0.040596675127744675,
        0.02341233380138874,
        -0.020307745784521103,
        -0.08608350902795792,
        -0.0821903795003891,
        0.048802830278873444,
        0.013426927849650383,
        -0.0004247571050655097,
        0.016641071066260338,
        0.08127330988645554,
        0.08897639811038971,
        0.013833349570631981,
        -0.026033760979771614,
        0.055874086916446686,
        -0.011962402611970901,
        -0.03198174014687538,
        0.10974769294261932,
        4.5531319004842164e-33,
        -0.05504518002271652,
        -0.11537925153970718,
        0.019568074494600296,
        -0.02838439866900444,
        0.004205726087093353,
        -0.012170705944299698,
        -0.0019287795294076204,
        -0.014590711332857609,
        -0.037164442241191864,
        0.02865242399275303,
        -0.10609850287437439,
        0.015769021585583687,
        -0.0828632190823555,
        -0.022365862503647804,
        -0.010957486927509308,
        -0.0508248545229435,
        0.04133931174874306,
        0.037430014461278915,
        -0.010974195785820484,
        0.028264187276363373,
        0.11201049387454987,
        0.04551926627755165,
        -0.004961127880960703,
        0.028389301151037216,
        -0.008645536378026009,
        0.054812703281641006,
        0.04479638859629631,
        0.0010685942834243178,
        -0.04561595991253853,
        0.0008170281071215868,
        0.0894278809428215,
        -0.06030711531639099,
        0.007344579789787531,
        -0.02661665342748165,
        0.014038021676242352,
        0.019111761823296547,
        0.005272558890283108,
        0.024398665875196457,
        -0.013407274149358273,
        -0.029476532712578773,
        -0.10355120152235031,
        -0.021880853921175003,
        -0.005951404105871916,
        0.026029113680124283,
        -0.049065001308918,
        -0.018186891451478004,
        -0.0936373695731163,
        0.023204514756798744,
        0.10004442930221558,
        -0.04097612574696541,
        -0.07052663713693619,
        0.031808510422706604,
        0.07198704779148102,
        0.04122728481888771,
        0.005495310761034489,
        0.002583905588835478,
        0.015413794666528702,
        0.04305348917841911,
        -0.040681492537260056,
        0.01683260127902031,
        -0.09547904878854752,
        0.08039327710866928,
        -0.02041369490325451,
        -0.038069963455200195,
        0.06396085023880005,
        -0.0011119273258373141,
        0.0719793513417244,
        -0.06338527798652649,
        0.048303693532943726,
        -0.04637717455625534,
        -0.10873378813266754,
        -0.002743236720561981,
        0.05139075219631195,
        0.020786898210644722,
        0.015450784005224705,
        -0.051553625613451004,
        -0.013546311296522617,
        -0.04368399828672409,
        -0.012581976130604744,
        -0.1194889172911644,
        -0.05670904740691185,
        -0.01573265716433525,
        -0.047006815671920776,
        -0.06063428148627281,
        0.06005894020199776,
        0.05243092030286789,
        -0.04843676835298538,
        -0.027209950610995293,
        -0.03071199730038643,
        -0.06166623532772064,
        -0.05235494300723076,
        0.006966754328459501,
        -0.05816010758280754,
        -0.10239357501268387,
        0.0026288891676813364,
        -8.006613080345169e-33,
        -0.0004529411962721497,
        0.02714717388153076,
        -0.017734995111823082,
        -0.01151260081678629,
        0.020613718777894974,
        -0.05239260196685791,
        0.033695802092552185,
        0.010365034453570843,
        -0.029822129756212234,
        0.07549819350242615,
        -0.09818151593208313,
        -0.0536213293671608,
        -0.013074910268187523,
        0.021315328776836395,
        0.028677117079496384,
        0.09129610657691956,
        -0.05192980170249939,
        0.013647126965224743,
        0.020286524668335915,
        -0.0004958197241649032,
        -0.022785475477576256,
        0.14384597539901733,
        -0.019078006967902184,
        0.03957508131861687,
        -0.05106689780950546,
        0.03276553750038147,
        0.0641884058713913,
        0.05255914852023125,
        -0.02487577125430107,
        -0.031559474766254425,
        -0.0016299757407978177,
        -0.03399685025215149,
        -0.037886716425418854,
        0.12564682960510254,
        -0.03950326889753342,
        -0.13598832488059998,
        0.08444326370954514,
        0.007940511219203472,
        -0.002642687177285552,
        0.04239960387349129,
        0.03628046438097954,
        -0.00014249930973164737,
        -0.04390805959701538,
        -0.04935416951775551,
        0.033095479011535645,
        0.040731560438871384,
        0.03718564286828041,
        0.061469487845897675,
        -0.04411681368947029,
        -0.08491848409175873,
        -0.0084686903283,
        -0.011638269759714603,
        -0.09740781038999557,
        0.0041894917376339436,
        -0.0063943988643586636,
        -0.07771267741918564,
        0.016451211646199226,
        -0.10350441187620163,
        -0.09983422607183456,
        -0.031692661345005035,
        0.0007522396044805646,
        0.011486531235277653,
        0.12539085745811462,
        0.00004586791692418046,
        0.05374062806367874,
        -0.023673182353377342,
        -0.026080401614308357,
        -0.08016616851091385,
        -0.027685856446623802,
        -0.022669672966003418,
        -0.06381525099277496,
        0.01682240329682827,
        -0.005686534568667412,
        0.008140122517943382,
        0.03388091176748276,
        0.03952435031533241,
        -0.06328539550304413,
        0.08793362230062485,
        0.0671379566192627,
        0.0705672949552536,
        -0.022351274266839027,
        0.03961965814232826,
        0.0590771846473217,
        0.11156922578811646,
        -0.025357475504279137,
        -0.0020804284140467644,
        0.07779864966869354,
        0.10980060696601868,
        -0.005326889920979738,
        0.022034406661987305,
        -0.02298739366233349,
        0.03525175899267197,
        0.05083460360765457,
        0.032993849366903305,
        -0.024428391829133034,
        -6.305827326968938e-8,
        -0.07541519403457642,
        -0.0829484611749649,
        -0.08522426337003708,
        0.042944084852933884,
        -0.05728854611515999,
        0.016271591186523438,
        -0.06395295262336731,
        -0.04639052227139473,
        0.016134940087795258,
        -0.08641365170478821,
        0.004801781382411718,
        0.018421899527311325,
        -0.10276458412408829,
        -0.06297116726636887,
        0.0009383289143443108,
        -0.0729883462190628,
        0.0062972125597298145,
        -0.003799808444455266,
        -0.03806840255856514,
        -0.034090764820575714,
        0.023489143699407578,
        0.03352421522140503,
        -0.036368269473314285,
        -0.05295092985033989,
        0.029236864298582077,
        -0.022270916029810905,
        -0.012225648388266563,
        0.041928019374608994,
        -0.02203524298965931,
        -0.0376252718269825,
        0.06535719335079193,
        -0.015103654935956001,
        0.03169887140393257,
        -0.05160653218626976,
        -0.005828970577567816,
        0.0185101181268692,
        0.12655864655971527,
        -0.008615994825959206,
        0.006172075867652893,
        0.04367935657501221,
        0.022102762013673782,
        0.024571621790528297,
        -0.05044935271143913,
        -0.008407690562307835,
        0.05721595510840416,
        -0.08768665790557861,
        -0.0010464033111929893,
        -0.012079376727342606,
        0.12277551740407944,
        0.04692699387669563,
        -0.04486621171236038,
        -0.10177109390497208,
        -0.06964186578989029,
        -0.03306176885962486,
        0.01836361549794674,
        -0.06545790284872055,
        -0.0029791975393891335,
        0.00542204175144434,
        0.018954424187541008,
        0.038587093353271484,
        0.021468382328748703,
        -0.020341433584690094,
        0.02668687142431736,
        0.03684655576944351
      ]
    },
    {
      "id": "53f8ce0f",
      "filePath": "03-evals/src/runner.ts",
      "content": "import { EvalCase, EvalResult, EvalReport, AgentFn, SingleRunResult } from './types';\nimport { judge } from './judge';\n\n// ============================================\n// 评估运行器\n// ============================================\n\n/**\n * 计算标准差\n */",
      "startLine": 1,
      "endLine": 10,
      "type": "other",
      "embedding": [
        -0.05936804413795471,
        0.0680152028799057,
        -0.0544002428650856,
        0.006589094642549753,
        0.032613158226013184,
        0.047233473509550095,
        0.046481527388095856,
        0.021853994578123093,
        -0.03755198419094086,
        0.023854611441493034,
        0.01479433849453926,
        -0.028708579018712044,
        -0.05306823551654816,
        0.0050467499531805515,
        0.021164871752262115,
        0.052081458270549774,
        -0.12370862066745758,
        0.04252666234970093,
        -0.04164888709783554,
        -0.06241482496261597,
        0.030416736379265785,
        0.028876112774014473,
        0.009469015523791313,
        0.027153152972459793,
        -0.0435747355222702,
        0.006756429094821215,
        0.014914829283952713,
        0.06868996471166611,
        -0.04884336516261101,
        -0.012712633237242699,
        -0.007279165554791689,
        -0.005268903914839029,
        0.05305797606706619,
        0.059732627123594284,
        0.09504687786102295,
        0.03970590978860855,
        -0.07154643535614014,
        -0.015105588361620903,
        -0.014222826808691025,
        0.05888122692704201,
        0.05833358317613602,
        -0.03043593466281891,
        -0.004565899260342121,
        -0.04563970863819122,
        0.011883138678967953,
        -0.05718768760561943,
        -0.08018945902585983,
        -0.02736601047217846,
        -0.015350526198744774,
        -0.02623407356441021,
        -0.06439077854156494,
        0.015449893660843372,
        -0.034455202519893646,
        -0.06402292847633362,
        0.04375218227505684,
        -0.0003097549779340625,
        -0.01251054648309946,
        0.010377641767263412,
        0.02027238719165325,
        -0.12881115078926086,
        0.03378935530781746,
        0.03148769587278366,
        0.03100116178393364,
        -0.03733072802424431,
        0.016135750338435173,
        0.0003971121332142502,
        -0.11224918067455292,
        0.10318826138973236,
        0.06249644234776497,
        -0.03194433078169823,
        -0.052063584327697754,
        0.014046130701899529,
        -0.02158825844526291,
        -0.017584379762411118,
        -0.07359124720096588,
        -0.047294098883867264,
        -0.05876871943473816,
        0.003253118833526969,
        0.08241023123264313,
        -0.09334741532802582,
        -0.02516254223883152,
        -0.15574300289154053,
        -0.02745727077126503,
        0.040560126304626465,
        0.0330110527575016,
        0.009075453504920006,
        0.0480678454041481,
        -0.07010870426893234,
        0.03911728784441948,
        0.032853204756975174,
        -0.024191902950406075,
        -0.0008826921693980694,
        0.02723768539726734,
        -0.002677468815818429,
        0.052168626338243484,
        0.10128011554479599,
        -0.07043839991092682,
        0.005835178308188915,
        0.05480556935071945,
        0.09972935169935226,
        -0.03608786687254906,
        -0.006782207638025284,
        -0.01573062874376774,
        0.07016462087631226,
        -0.04801226407289505,
        -0.05284605547785759,
        0.042760249227285385,
        0.009101572446525097,
        0.07677534967660904,
        -0.06377208232879639,
        0.06639093160629272,
        0.020551346242427826,
        0.02879989705979824,
        -0.046163156628608704,
        0.001705882023088634,
        -0.03405314311385155,
        -0.048816878348588943,
        0.0240872111171484,
        0.0015086252242326736,
        0.07366719096899033,
        0.024371394887566566,
        -0.004982094746083021,
        -0.04856044054031372,
        0.045687299221754074,
        0.027991853654384613,
        -0.02251344360411167,
        0.08431043475866318,
        1.5172158483309052e-32,
        -0.05608367174863815,
        -0.06954886019229889,
        0.03117923066020012,
        0.029311617836356163,
        -0.011746454052627087,
        -0.004002927336841822,
        -0.0351974256336689,
        -0.0889301523566246,
        -0.1404874622821808,
        0.052737265825271606,
        -0.07594107836484909,
        -0.037216801196336746,
        -0.04276835918426514,
        -0.0731448158621788,
        -0.053059596568346024,
        -0.02846633829176426,
        -0.026918547227978706,
        0.015115577727556229,
        -0.03542832285165787,
        -0.008974063210189342,
        0.06076999753713608,
        0.057626187801361084,
        -0.035456400364637375,
        -0.010875431820750237,
        -0.04385333135724068,
        -0.002327915048226714,
        0.0046556429006159306,
        -0.043444596230983734,
        0.040650174021720886,
        0.026939060539007187,
        0.06658374518156052,
        -0.04675276577472687,
        0.04041533172130585,
        0.07207603007555008,
        0.012928031384944916,
        0.04727308824658394,
        -0.0025126284454017878,
        -0.042709819972515106,
        0.017684508115053177,
        -0.014080760069191456,
        -0.058879103511571884,
        -0.0032967336010187864,
        0.02284356765449047,
        0.00615712208673358,
        -0.062464240938425064,
        0.001852892804890871,
        -0.0510672964155674,
        0.0766889750957489,
        0.08686055988073349,
        0.04669734463095665,
        -0.07207101583480835,
        0.04772351682186127,
        0.10710305720567703,
        0.0026103423442691565,
        0.05477096885442734,
        -0.0010679069673642516,
        -0.013899683021008968,
        0.10856056213378906,
        0.011992800049483776,
        -0.003823141800239682,
        0.05314609408378601,
        0.09278500825166702,
        -0.035204336047172546,
        -0.037924185395240784,
        0.05354051664471626,
        -0.05558007210493088,
        0.02806803025305271,
        -0.070652537047863,
        0.027881024405360222,
        -0.03498139977455139,
        -0.05676699057221413,
        -0.047691766172647476,
        -0.0030781535897403955,
        0.00019456111476756632,
        0.03476589545607567,
        -0.05461433529853821,
        0.029328586533665657,
        0.01833019033074379,
        -0.05640426650643349,
        -0.1060212031006813,
        -0.0544997863471508,
        -0.018944159150123596,
        0.005548402667045593,
        -0.04322173818945885,
        0.051994483917951584,
        -0.06798380613327026,
        -0.05050209164619446,
        -0.08454099297523499,
        0.029070628806948662,
        -0.05342963710427284,
        -0.030151693150401115,
        -0.02379751019179821,
        -0.11117333173751831,
        -0.014734340831637383,
        -0.01981126144528389,
        -1.5381021788931094e-32,
        0.08135633915662766,
        0.05891134962439537,
        0.05078328773379326,
        -0.038751136511564255,
        -0.03415565565228462,
        -0.03473442792892456,
        0.027410531416535378,
        -0.026034755632281303,
        0.006881602108478546,
        0.1060875877737999,
        -0.06259168684482574,
        -0.021101541817188263,
        0.02825423888862133,
        -0.027108987793326378,
        0.07035311311483383,
        0.020279981195926666,
        0.019087204709649086,
        0.008868223987519741,
        -0.029468687251210213,
        -0.04969864338636398,
        0.01072581484913826,
        0.0704839900135994,
        -0.03179040178656578,
        0.11443103849887848,
        -0.029190970584750175,
        0.04191241040825844,
        0.13476425409317017,
        0.03159331530332565,
        -0.011281049810349941,
        -0.034888654947280884,
        -0.07279364764690399,
        -0.003299620933830738,
        -0.0915272906422615,
        0.05034104734659195,
        -0.13091231882572174,
        -0.07184936106204987,
        0.0969168096780777,
        -0.017993036657571793,
        0.006135354749858379,
        -0.009925312362611294,
        -0.01937831938266754,
        0.07560758292675018,
        -0.07388533651828766,
        -0.05108444765210152,
        0.03541362285614014,
        -0.0004055068420711905,
        0.025403562933206558,
        0.134185329079628,
        -0.039306189864873886,
        -0.10632695257663727,
        -0.015665851533412933,
        -0.040763065218925476,
        -0.03033638931810856,
        -0.021816808730363846,
        -0.03398239240050316,
        -0.055956192314624786,
        0.05868058651685715,
        -0.07086282223463058,
        -0.10808909684419632,
        -0.02319602109491825,
        0.015302666462957859,
        0.012556204572319984,
        0.04169290140271187,
        0.007858498953282833,
        -0.04023592546582222,
        -0.019117986783385277,
        -0.03326880559325218,
        -0.02723652496933937,
        0.023880887776613235,
        -0.06325194239616394,
        0.016141217201948166,
        0.0030749288853257895,
        -0.04835183173418045,
        0.017871681600809097,
        -0.004366793669760227,
        0.0405045822262764,
        -0.05064346268773079,
        0.12449202686548233,
        0.06380555778741837,
        0.028216272592544556,
        -0.01837412640452385,
        0.030029375106096268,
        0.07286254316568375,
        0.0013660922413691878,
        0.00204808684065938,
        0.048468492925167084,
        -0.035798683762550354,
        0.09289737790822983,
        0.02480604499578476,
        0.04912566766142845,
        -0.02502262219786644,
        -0.002230697078630328,
        0.07748926430940628,
        0.0541922003030777,
        -0.02643195167183876,
        -6.349273462546989e-8,
        -0.0969092845916748,
        -0.05689099803566933,
        -0.005933670327067375,
        -0.0006059331353753805,
        -0.07843134552240372,
        0.061399657279253006,
        0.006784519180655479,
        -0.09850718826055527,
        0.019822001457214355,
        -0.038099635392427444,
        0.029050592333078384,
        -0.005955998320132494,
        -0.04043818265199661,
        0.0030458257533609867,
        -0.005470543634146452,
        0.008123157545924187,
        0.027500610798597336,
        0.04286329820752144,
        -0.07797358930110931,
        -0.005776458885520697,
        -0.000043807169276988134,
        -0.006665281020104885,
        -0.006467854138463736,
        0.003970248159021139,
        0.04006781429052353,
        0.00251189898699522,
        -0.06043434888124466,
        -0.019166314974427223,
        -0.041682153940200806,
        0.03325628116726875,
        0.03229614719748497,
        0.008775272406637669,
        0.013806115835905075,
        -0.09766925871372223,
        -0.042072542011737823,
        0.07884018868207932,
        0.09006092697381973,
        0.01604045182466507,
        0.005745916627347469,
        0.023943813517689705,
        -0.03369858115911484,
        0.024457670748233795,
        -0.016526060178875923,
        0.03227793797850609,
        0.029873309656977654,
        -0.10117918252944946,
        -0.03853869438171387,
        0.015632089227437973,
        0.05749950185418129,
        -0.06334532052278519,
        0.037092164158821106,
        -0.08599589020013809,
        -0.11596283316612244,
        -0.014100243337452412,
        -0.02478286810219288,
        -0.020049434155225754,
        0.04943511262536049,
        0.03943013399839401,
        -0.07542191445827484,
        -0.025789272040128708,
        0.05599525570869446,
        -0.025485100224614143,
        0.069191575050354,
        -0.04234522953629494
      ]
    },
    {
      "id": "26ee5e37",
      "filePath": "03-evals/src/runner.ts",
      "content": "function calculateStd(values: number[]): number {\n\tif (values.length <= 1) return 0;\n\tconst mean = values.reduce((a, b) => a + b, 0) / values.length;\n\tconst squaredDiffs = values.map(v => Math.pow(v - mean, 2));\n\treturn Math.sqrt(squaredDiffs.reduce((a, b) => a + b, 0) / values.length);\n}\n\n/**\n * 运行完整的评估流程（支持 N-Shot 多次运行）\n *\n * @param cases 测试样本列表\n * @param agentFn 待评估的 Agent 函数\n * @param repeats 每个样本运行次数（默认 1）\n * @returns 完整的评估报告\n */",
      "startLine": 11,
      "endLine": 25,
      "type": "function",
      "name": "calculateStd",
      "embedding": [
        -0.09893130511045456,
        0.06961027532815933,
        -0.019782355055212975,
        -0.07528077065944672,
        -0.04238556697964668,
        0.05211450904607773,
        0.0068969279527664185,
        0.08606225997209549,
        0.03342904523015022,
        0.047579191625118256,
        0.09056133031845093,
        0.0459350049495697,
        0.0003257135394960642,
        0.016407102346420288,
        -0.042008016258478165,
        -0.0023423396050930023,
        -0.1361241638660431,
        0.07750464230775833,
        -0.02005787007510662,
        -0.09846320748329163,
        0.013156333938241005,
        0.0003252002061344683,
        0.01986326277256012,
        0.017937252297997475,
        0.03227280080318451,
        -0.012760336510837078,
        -0.0011323386570438743,
        0.026056425645947456,
        0.0166047103703022,
        0.00037918068119324744,
        0.03704109415411949,
        0.006979257799685001,
        0.018601376563310623,
        0.03404994308948517,
        0.01930909976363182,
        -0.0037329918704926968,
        -0.06075169891119003,
        -0.012676125392317772,
        -0.03505069762468338,
        0.10562363266944885,
        0.0016967908013612032,
        -0.005761368200182915,
        0.019392652437090874,
        -0.04322030767798424,
        0.06921659409999847,
        -0.006772564258426428,
        -0.07948438078165054,
        -0.021239077672362328,
        -0.005991707555949688,
        0.03194720298051834,
        -0.04284657537937164,
        0.07332675158977509,
        -0.05610532686114311,
        -0.016674643382430077,
        0.08501558750867844,
        -0.055971909314394,
        -0.00594966160133481,
        -0.03376712277531624,
        0.0646696388721466,
        -0.058379899710416794,
        0.026441652327775955,
        -0.00809603463858366,
        0.11128632724285126,
        -0.03379397466778755,
        0.041565634310245514,
        0.006919609382748604,
        -0.018587063997983932,
        0.033970143646001816,
        0.006682568695396185,
        0.05127301812171936,
        -0.016339655965566635,
        0.07997237145900726,
        -0.0019575487822294235,
        -0.016347475349903107,
        -0.09003277122974396,
        -0.06801273673772812,
        -0.054660722613334656,
        -0.043028030544519424,
        -0.014977049082517624,
        -0.07122641801834106,
        0.006099047139286995,
        -0.10074800997972488,
        -0.016819247975945473,
        0.01754637435078621,
        -0.021975232288241386,
        0.05295602232217789,
        0.06352395564317703,
        0.006979260127991438,
        0.0939255878329277,
        -0.02063194289803505,
        0.030554184690117836,
        0.04450974613428116,
        -0.061567362397909164,
        -0.020414289087057114,
        0.018611235544085503,
        0.0925324335694313,
        -0.020793937146663666,
        0.05978046730160713,
        -0.014978455379605293,
        0.0533144474029541,
        -0.0293582696467638,
        -0.0187209565192461,
        0.01828342117369175,
        0.0008041695691645145,
        -0.10152934491634369,
        -0.03879566863179207,
        0.09863347560167313,
        -0.008076751604676247,
        0.059271104633808136,
        0.008351358585059643,
        0.033734340220689774,
        0.0004589691525325179,
        -0.009540984407067299,
        0.06081819161772728,
        0.02497895248234272,
        -0.03998517245054245,
        0.01568581908941269,
        -0.027295788750052452,
        0.015022584237158298,
        -0.02496747300028801,
        0.06638164073228836,
        0.032719410955905914,
        -0.04919150471687317,
        0.07964472472667694,
        -0.03891420736908913,
        0.018447577953338623,
        0.06231027841567993,
        7.093192990986802e-33,
        -0.08733108639717102,
        -0.03891757130622864,
        0.05182144045829773,
        0.0074302456341683865,
        -0.013615554198622704,
        -0.059094034135341644,
        -0.04746948555111885,
        -0.07069158554077148,
        -0.057662975043058395,
        0.07416432350873947,
        -0.10019796341657639,
        -0.050786711275577545,
        -0.034803517162799835,
        -0.04190438985824585,
        -0.009996348060667515,
        -0.07728274166584015,
        0.0371476374566555,
        -0.01108809094876051,
        -0.002515101572498679,
        -0.02003326639533043,
        0.08321017771959305,
        -0.0015080852899700403,
        -0.016258206218481064,
        0.057084955275058746,
        -0.018895843997597694,
        0.021987859159708023,
        0.01615411601960659,
        0.0024976017884910107,
        0.062200792133808136,
        -0.010991210117936134,
        0.11358407884836197,
        0.04970073699951172,
        -0.05476747080683708,
        0.01097056083381176,
        0.04273228719830513,
        0.0074843754991889,
        0.07033197581768036,
        0.01010350976139307,
        -0.0023300594184547663,
        -0.009229500778019428,
        -0.0777653306722641,
        0.024248527362942696,
        0.048398058861494064,
        -0.006468465551733971,
        -0.027154676616191864,
        -0.061660654842853546,
        -0.006275225896388292,
        0.0264381542801857,
        0.0747419223189354,
        0.05799321085214615,
        -0.08544956892728806,
        0.0468062087893486,
        0.070981964468956,
        0.016669394448399544,
        0.0715782642364502,
        -0.00862564891576767,
        -0.04103000834584236,
        -0.002415470313280821,
        -0.07039383798837662,
        0.07843738794326782,
        0.0887179896235466,
        0.03648917004466057,
        -0.0007066153339110315,
        0.003140122862532735,
        0.005475644022226334,
        -0.009587549604475498,
        -0.03147166222333908,
        -0.039201200008392334,
        0.05271326005458832,
        0.013433748856186867,
        -0.03061351180076599,
        -0.035865090787410736,
        -0.010235273279249668,
        -0.04688096418976784,
        0.02237936481833458,
        -0.07799310237169266,
        0.05674484372138977,
        0.022952424362301826,
        -0.039180271327495575,
        -0.19982492923736572,
        -0.10369905829429626,
        -0.013833686709403992,
        -0.03467261791229248,
        -0.052884794771671295,
        0.0899389237165451,
        -0.022645317018032074,
        -0.04644688963890076,
        -0.10061408579349518,
        -0.04193343222141266,
        -0.0479949414730072,
        -0.0981375053524971,
        -0.02756463922560215,
        -0.05002337321639061,
        0.03421662747859955,
        -0.0472777783870697,
        -8.939643354211128e-33,
        -0.0526440255343914,
        0.1261863261461258,
        0.010843289084732533,
        -0.012390421703457832,
        -0.0411255806684494,
        0.018284574151039124,
        0.019403312355279922,
        0.014934910461306572,
        0.047845978289842606,
        0.021744562312960625,
        -0.07663809508085251,
        -0.022524887695908546,
        -0.03863909840583801,
        0.032254986464977264,
        0.07389508187770844,
        0.0063746036030352116,
        0.06603963673114777,
        -0.018101908266544342,
        -0.03265438228845596,
        -0.07540438324213028,
        0.021900106221437454,
        0.12197920680046082,
        0.0044655282981693745,
        0.04364733770489693,
        -0.03954466059803963,
        0.10778199136257172,
        0.09963958710432053,
        -0.03205990046262741,
        -0.014065176248550415,
        -0.06845586746931076,
        -0.03946814686059952,
        -0.041655655950307846,
        -0.07894451916217804,
        0.07518812268972397,
        -0.10433995723724365,
        -0.08630376309156418,
        0.10246331989765167,
        -0.05354826897382736,
        -0.023282786831259727,
        -0.024814367294311523,
        0.014957329258322716,
        -0.01472444087266922,
        -0.007421351503580809,
        -0.024687090888619423,
        0.06071500852704048,
        0.022366665303707123,
        0.030320949852466583,
        0.056177474558353424,
        0.004428214859217405,
        -0.13138552010059357,
        -0.048948220908641815,
        -0.027791839092969894,
        -0.051763445138931274,
        0.02761017717421055,
        -0.056650400161743164,
        0.004714908078312874,
        -0.026757752522826195,
        -0.05027754604816437,
        -0.021845292299985886,
        -0.03783196583390236,
        0.03600722923874855,
        -0.023389218375086784,
        0.010283282026648521,
        -0.015844691544771194,
        -0.0599999763071537,
        0.0012970382813364267,
        -0.07985945045948029,
        -0.013119969516992569,
        0.05535163730382919,
        0.00520493695512414,
        -0.013308035209774971,
        0.0761851891875267,
        0.015152279287576675,
        0.007778490427881479,
        -0.07004215568304062,
        -0.06740306317806244,
        -0.08912815153598785,
        0.004177464637905359,
        0.06702035665512085,
        0.06928862631320953,
        0.027200518175959587,
        0.05523889884352684,
        0.05810455605387688,
        -0.00893621239811182,
        -0.05102912336587906,
        0.025987299159169197,
        0.07260171324014664,
        0.09335179626941681,
        0.0183334331959486,
        0.00841045007109642,
        -0.03302508592605591,
        0.04863318055868149,
        0.04023262858390808,
        0.04087606817483902,
        -0.004551582969725132,
        -5.9519191353274437e-8,
        -0.07690008729696274,
        -0.031134234741330147,
        -0.06397540122270584,
        -0.031658150255680084,
        -0.02802562341094017,
        -0.018555309623479843,
        -0.06715519726276398,
        -0.07780749350786209,
        0.01091144047677517,
        -0.14809691905975342,
        0.037274397909641266,
        -0.0004575965867843479,
        -0.04954561963677406,
        0.018985619768500328,
        -0.03174009919166565,
        0.009573184885084629,
        -0.04156384617090225,
        -0.0041718133725225925,
        -0.048344600945711136,
        -0.02176154963672161,
        -0.012729279696941376,
        -0.0055063944309949875,
        -0.03716515377163887,
        0.029458878561854362,
        -0.03762434050440788,
        -0.027930408716201782,
        -0.05602988973259926,
        -0.04027396813035011,
        -0.015270555391907692,
        0.02810804173350334,
        0.006800890900194645,
        -0.0017619355348870158,
        0.028264502063393593,
        -0.05366019904613495,
        -0.03234690800309181,
        0.030003836378455162,
        0.11277791857719421,
        0.031798139214515686,
        0.08062605559825897,
        0.04424775764346123,
        -0.06293671578168869,
        0.012870222330093384,
        0.05757686495780945,
        0.04238295555114746,
        0.06353654712438583,
        -0.08077101409435272,
        0.012856774963438511,
        -0.06275582313537598,
        0.027820993214845657,
        -0.06908213347196579,
        0.06446634232997894,
        -0.028878943994641304,
        -0.08540232479572296,
        -0.011840937659144402,
        -0.005915407557040453,
        -0.07410737127065659,
        0.0008040170068852603,
        -0.015698527917265892,
        -0.07583162188529968,
        0.007537787314504385,
        0.009747622534632683,
        -0.005059854127466679,
        -0.0003885262703988701,
        0.00627078115940094
      ]
    },
    {
      "id": "476cd930",
      "filePath": "03-evals/src/runner.ts",
      "content": "export async function runEval(\n\tcases: EvalCase[],\n\tagentFn: AgentFn,\n\trepeats: number = 1\n): Promise<EvalReport> {\n\tconsole.log(`\\n🧪 Starting Evaluation with ${cases.length} test cases...`);\n\tif (repeats > 1) {\n\t\tconsole.log(`🔄 Each case will be run ${repeats} times for stability\\n`);\n\t} else {\n\t\tconsole.log('');\n\t}\n\n\tconst results: EvalResult[] = [];\n\n\tfor (const testCase of cases) {\n\t\tconsole.log(`📋 [${testCase.id}] Running${repeats > 1 ? ` (${repeats}x)` : ''}...`);\n\n\t\tconst runs: SingleRunResult[] = [];\n\n\t\tfor (let i = 0; i < repeats; i++) {\n\t\t\tconst startTime = Date.now();\n\t\t\tlet output = \"\";\n\n\t\t\ttry {\n\t\t\t\toutput = await agentFn(testCase.input);\n\t\t\t} catch (e: any) {\n\t\t\t\toutput = `ERROR: ${e.message}`;\n\t\t\t}\n\n\t\t\tconst latency = Date.now() - startTime;\n\n\t\t\t// 用 Judge 评分\n\t\t\tif (repeats > 1) {\n\t\t\t\tconsole.log(`   ⚖️  Run ${i + 1}/${repeats} judging...`);\n\t\t\t} else {\n\t\t\t\tconsole.log(`   ⚖️  Judging...`);\n\t\t\t}\n\t\t\tconst { score, reason } = await judge(testCase, output);\n\n\t\t\truns.push({\n\t\t\t\trun_index: i + 1,\n\t\t\t\toutput,\n\t\t\t\tscore,\n\t\t\t\treason,\n\t\t\t\tlatency_ms: latency\n\t\t\t});\n\n\t\t\tif (repeats > 1) {\n\t\t\t\tconst emoji = score >= 4 ? '✅' : score >= 3 ? '⚠️' : '❌';\n\t\t\t\tconsole.log(`      ${emoji} Run ${i + 1}: ${score}/5`);",
      "startLine": 26,
      "endLine": 75,
      "type": "function",
      "name": "runEval (part 1)",
      "embedding": [
        -0.03490310534834862,
        0.04708120971918106,
        -0.018023448064923286,
        0.06361005455255508,
        0.055693019181489944,
        0.01419381145387888,
        0.025953009724617004,
        0.024237172678112984,
        0.04674965515732765,
        -0.040807876735925674,
        -0.020339421927928925,
        -0.01972380094230175,
        -0.014894754625856876,
        -0.02552354522049427,
        0.010323667898774147,
        0.036274559795856476,
        -0.10490233451128006,
        0.017179008573293686,
        -0.06724772602319717,
        -0.11159196496009827,
        0.07085718214511871,
        0.01886538229882717,
        0.006030025891959667,
        -0.021110789850354195,
        -0.08639658242464066,
        0.002784745767712593,
        -0.022452054545283318,
        -0.004789430648088455,
        -0.013118812814354897,
        -0.03206372261047363,
        0.03280273452401161,
        -0.03200909122824669,
        -0.05420948565006256,
        0.050365887582302094,
        -0.03657224774360657,
        0.07248973101377487,
        -0.09852157533168793,
        -0.04865489900112152,
        0.004880483262240887,
        0.0137497428804636,
        0.04116161912679672,
        0.029424509033560753,
        -0.03472737595438957,
        -0.07487025111913681,
        0.09995314478874207,
        -0.09925670921802521,
        -0.11233445256948471,
        0.00003141104753012769,
        -0.012500984594225883,
        0.04189489409327507,
        -0.044029828161001205,
        -0.005315151531249285,
        -0.03459556773304939,
        -0.03823196515440941,
        0.0851929634809494,
        0.006683793850243092,
        -0.013407861813902855,
        -0.018524933606386185,
        0.020308848470449448,
        -0.0658109039068222,
        0.0327167883515358,
        -0.042159970849752426,
        0.05225415900349617,
        -0.05077248066663742,
        0.07151496410369873,
        -0.053383756428956985,
        -0.009499832056462765,
        0.10260643810033798,
        0.022112326696515083,
        0.07597595453262329,
        -0.018849361687898636,
        0.05840567871928215,
        -0.009763037785887718,
        -0.028708603233098984,
        -0.11161566525697708,
        0.040084611624479294,
        -0.02652447484433651,
        -0.053440142422914505,
        0.0051137651316821575,
        0.03295159339904785,
        -0.059521980583667755,
        -0.07644736766815186,
        -0.05175125598907471,
        -0.021511053666472435,
        0.041508935391902924,
        0.06239812448620796,
        0.04964490979909897,
        -0.02605193294584751,
        0.02331680990755558,
        -0.05153840035200119,
        -0.023588618263602257,
        0.025370152667164803,
        0.002333209151402116,
        0.08113905787467957,
        0.09778501093387604,
        0.08631501346826553,
        0.02685297280550003,
        0.033411700278520584,
        0.04522915184497833,
        0.10450439900159836,
        -0.04726707190275192,
        0.016064347699284554,
        0.012481752783060074,
        0.011954101733863354,
        -0.019538287073373795,
        -0.04283605143427849,
        0.036053188145160675,
        -0.04403740540146828,
        -0.0654512271285057,
        -0.061313197016716,
        0.0006998147582635283,
        0.10760661214590073,
        0.03806533291935921,
        0.03795996308326721,
        0.015307090245187283,
        -0.011507386341691017,
        0.01455151941627264,
        0.019622793421149254,
        0.05545137822628021,
        0.11691266298294067,
        0.14511381089687347,
        0.04362224414944649,
        -0.01690978743135929,
        0.04802471771836281,
        0.09433886408805847,
        -0.04298395290970802,
        0.11517874896526337,
        7.725763235362738e-33,
        -0.015822885558009148,
        -0.07801036536693573,
        -0.022865861654281616,
        -0.02691286988556385,
        0.04438231512904167,
        0.030545266345143318,
        0.02008122205734253,
        -0.0323784165084362,
        -0.11870341002941132,
        0.048280008137226105,
        -0.055878445506095886,
        0.04205155000090599,
        -0.015636634081602097,
        -0.07441320270299911,
        -0.025569871068000793,
        -0.032143063843250275,
        0.09673153609037399,
        0.004222056828439236,
        0.06358212232589722,
        0.051482848823070526,
        0.07796468585729599,
        -0.07297062128782272,
        -0.03278650343418121,
        -0.0023075484205037355,
        -0.0025132219307124615,
        -0.03288345783948898,
        0.022358426824212074,
        0.01453340146690607,
        -0.018951641395688057,
        -0.03269485756754875,
        0.08647001534700394,
        0.04797849431633949,
        -0.043943412601947784,
        0.017113549634814262,
        0.05104418843984604,
        -0.0049537536688148975,
        0.008604188449680805,
        0.025023873895406723,
        -0.044674940407276154,
        -0.009787197224795818,
        -0.03318016231060028,
        -0.0018911042716354132,
        -0.0336296446621418,
        -0.015499282628297806,
        -0.035888973623514175,
        -0.04132898896932602,
        -0.0609935037791729,
        -0.025211146101355553,
        0.06726686656475067,
        -0.010438275523483753,
        -0.03518674522638321,
        0.061117492616176605,
        0.03131428733468056,
        -0.06998559087514877,
        0.08347204327583313,
        -0.021908195689320564,
        0.042768388986587524,
        -0.01638692244887352,
        -0.020780524238944054,
        0.05963389202952385,
        -0.027515821158885956,
        -0.009194926358759403,
        -0.023962637409567833,
        -0.029148537665605545,
        -0.01708298549056053,
        -0.01712891273200512,
        0.007020881399512291,
        -0.005877484101802111,
        0.05906333029270172,
        -0.012267171405255795,
        -0.01795634627342224,
        -0.025924954563379288,
        0.02030210569500923,
        0.004053815733641386,
        0.01119344960898161,
        -0.037473294883966446,
        -0.04718807712197304,
        -0.02490588091313839,
        -0.09451165795326233,
        -0.14066538214683533,
        -0.009395182132720947,
        -0.01879706420004368,
        -0.07088064402341843,
        0.07810775935649872,
        0.08339335769414902,
        0.041786398738622665,
        -0.07849274575710297,
        -0.08332385867834091,
        -0.026283016428351402,
        0.010307964868843555,
        -0.09236179292201996,
        0.0077476040460169315,
        0.0155543964356184,
        -0.0592074878513813,
        0.006805360317230225,
        -6.686468272182444e-33,
        0.047850243747234344,
        0.008960530161857605,
        -0.021906698122620583,
        0.031742408871650696,
        0.02816811203956604,
        -0.06340242922306061,
        0.041961029171943665,
        -0.0034884223714470863,
        -0.026340069249272346,
        0.019308393821120262,
        -0.05668521299958229,
        -0.045413851737976074,
        0.013506116345524788,
        0.03179251775145531,
        0.01518594566732645,
        0.0971250906586647,
        -0.023384179919958115,
        -0.03269888088107109,
        0.038163453340530396,
        -0.048317454755306244,
        0.036755651235580444,
        0.10899863392114639,
        0.02250726707279682,
        0.015683963894844055,
        -0.06239952892065048,
        0.07787264138460159,
        0.08584536612033844,
        0.002568914322182536,
        -0.023459499701857567,
        -0.07079880684614182,
        -0.025007931515574455,
        -0.08476661890745163,
        -0.04333646968007088,
        0.08441390097141266,
        0.011829085648059845,
        -0.05949659273028374,
        0.10193122178316116,
        -0.04120380058884621,
        -0.009097015485167503,
        0.04844704270362854,
        0.05419331416487694,
        0.00239766133017838,
        -0.04994940012693405,
        -0.04964810237288475,
        -0.0125352181494236,
        -0.001071000355295837,
        0.05316180735826492,
        0.0771387442946434,
        0.048543836921453476,
        -0.059932999312877655,
        0.02104244753718376,
        -0.0672331303358078,
        -0.10261686891317368,
        -0.002701208693906665,
        -0.04354635253548622,
        -0.10298891365528107,
        0.03423389047384262,
        -0.11187286674976349,
        -0.0034549059346318245,
        0.04846881702542305,
        -0.013490607030689716,
        -0.03315785527229309,
        0.08240273594856262,
        -0.02488144114613533,
        0.027097968384623528,
        -0.039637669920921326,
        -0.04068243131041527,
        -0.039507899433374405,
        0.09790441393852234,
        0.06274131685495377,
        -0.05168314650654793,
        0.036211587488651276,
        -0.015490940771996975,
        0.03142273426055908,
        0.020771300420165062,
        -0.002220118185505271,
        -0.0762190893292427,
        -0.05066821724176407,
        0.0677008107304573,
        0.05069795623421669,
        -0.07209206372499466,
        0.041934773325920105,
        0.0027550829108804464,
        0.027664044871926308,
        -0.049471478909254074,
        0.05790327861905098,
        0.0827598050236702,
        0.07416348159313202,
        0.021547839045524597,
        0.009058290161192417,
        0.003941504750400782,
        0.0320737361907959,
        0.0066046458669006824,
        0.023198582231998444,
        -0.02664543315768242,
        -5.806616343306814e-8,
        -0.0751727744936943,
        -0.04669909179210663,
        -0.03645482286810875,
        0.0544288195669651,
        -0.03760431334376335,
        -0.0649016723036766,
        0.02061466872692108,
        -0.10066300630569458,
        0.02925420179963112,
        -0.05847273766994476,
        0.041729945689439774,
        0.023969948291778564,
        0.0441652312874794,
        0.0032950330059975386,
        0.018507419154047966,
        -0.03280629590153694,
        -0.010323447175323963,
        0.02179976925253868,
        -0.045861635357141495,
        0.0026210551150143147,
        0.03386770933866501,
        0.07310264557600021,
        -0.03251904249191284,
        -0.0331295020878315,
        0.033966414630413055,
        -0.04620950296521187,
        0.06304910778999329,
        0.06195420026779175,
        -0.01891426183283329,
        0.03712747246026993,
        -0.016550416126847267,
        0.013098372146487236,
        0.05705408751964569,
        -0.04759081080555916,
        -0.024817686527967453,
        -0.007775911130011082,
        0.056510504335165024,
        -0.03923524171113968,
        0.0402868390083313,
        0.06186956167221069,
        0.03889317810535431,
        0.039337970316410065,
        0.022632140666246414,
        -0.006292175501585007,
        -0.004404199775308371,
        -0.13214793801307678,
        -0.02354815974831581,
        -0.033066872507333755,
        0.13473330438137054,
        -0.01614425517618656,
        -0.0418756902217865,
        -0.10020355880260468,
        -0.08293546736240387,
        0.007417723536491394,
        0.07049605995416641,
        -0.07293567806482315,
        0.02622108906507492,
        -0.038292206823825836,
        -0.004310480318963528,
        0.04295888543128967,
        0.03321019560098648,
        -0.09192941337823868,
        0.024912873283028603,
        -0.04351363331079483
      ]
    },
    {
      "id": "441d7f27",
      "filePath": "03-evals/src/runner.ts",
      "content": "});\n\n\t\t\tif (repeats > 1) {\n\t\t\t\tconst emoji = score >= 4 ? '✅' : score >= 3 ? '⚠️' : '❌';\n\t\t\t\tconsole.log(`      ${emoji} Run ${i + 1}: ${score}/5`);\n\t\t\t}\n\t\t}\n\n\t\t// 汇总多次运行的结果\n\t\tconst scores = runs.map(r => r.score);\n\t\tconst latencies = runs.map(r => r.latency_ms);\n\t\tconst avgScore = scores.reduce((a, b) => a + b, 0) / scores.length;\n\t\tconst avgLatency = latencies.reduce((a, b) => a + b, 0) / latencies.length;\n\t\tconst scoreStd = calculateStd(scores);\n\n\t\tconst result: EvalResult = {\n\t\t\tcase_id: testCase.id,\n\t\t\tinput: testCase.input,\n\t\t\truns: runs,\n\t\t\toutput: runs[runs.length - 1].output,\n\t\t\tscore: Math.round(avgScore * 100) / 100, // 保留两位小数\n\t\t\tscore_std: Math.round(scoreStd * 100) / 100,\n\t\t\treason: runs[runs.length - 1].reason,\n\t\t\tlatency_ms: Math.round(avgLatency),\n\t\t\tpassed: avgScore >= 3\n\t\t};\n\n\t\tresults.push(result);\n\n\t\tconst emoji = avgScore >= 4 ? '✅' : avgScore >= 3 ? '⚠️' : '❌';\n\t\tif (repeats > 1) {\n\t\t\tconst stabilityNote = scoreStd > 1 ? ' (unstable!)' : '';\n\t\t\tconsole.log(`   ${emoji} Avg Score: ${avgScore.toFixed(2)}/5 (std: ${scoreStd.toFixed(2)})${stabilityNote}\\n`);\n\t\t} else {\n\t\t\tconsole.log(`   ${emoji} Score: ${avgScore}/5 - ${result.reason}\\n`);\n\t\t}\n\t}\n\n\t// 生成报告\n\tconst passedCases = results.filter(r => r.passed);\n\tconst worstCases = results.filter(r => r.score <= 2);\n\tconst unstableCases = results.filter(r => r.score_std > 1);\n\tconst totalScore = results.reduce((sum, r) => sum + r.score, 0);\n\tconst totalLatency = results.reduce((sum, r) => sum + r.latency_ms, 0);\n\n\tconst report: EvalReport = {\n\t\ttotal_cases: cases.length,\n\t\tpassed_cases: passedCases.length,\n\t\tfailed_cases: cases.length - passedCases.length,\n\t\tpass_rate: passedCases.length / cases.length,",
      "startLine": 71,
      "endLine": 120,
      "type": "function",
      "name": "runEval (part 2)",
      "embedding": [
        0.031944576650857925,
        0.0799376368522644,
        0.0340544767677784,
        -0.005567783024162054,
        0.012388268485665321,
        0.003363923169672489,
        0.07626042515039444,
        0.05951126664876938,
        0.07386190444231033,
        -0.024133482947945595,
        -0.010608147829771042,
        -0.05688336491584778,
        0.030050285160541534,
        -0.07334623485803604,
        -0.01399490237236023,
        0.001719314488582313,
        -0.15538634359836578,
        0.057133328169584274,
        -0.07569154351949692,
        -0.11798335611820221,
        0.03338638320565224,
        -0.005251970142126083,
        -0.002571134129539132,
        -0.0150230647996068,
        0.0015162702184170485,
        0.0673125833272934,
        -0.022359836846590042,
        0.054308123886585236,
        -0.045844901353120804,
        -0.01221020519733429,
        -0.009075489826500416,
        -0.04619632661342621,
        0.05570068582892418,
        0.07616496831178665,
        -0.06714081019163132,
        0.0480400025844574,
        -0.06121068820357323,
        -0.05784483999013901,
        -0.017129594460129738,
        0.005563381128013134,
        -0.0012576335575431585,
        0.04454461857676506,
        0.018964407965540886,
        -0.05903957039117813,
        0.10419705510139465,
        -0.03130602464079857,
        -0.12355763465166092,
        -0.04203319549560547,
        -0.004893479868769646,
        0.02685576118528843,
        -0.013469272293150425,
        0.010271253064274788,
        -0.003696741769090295,
        -0.04729228466749191,
        0.023370619863271713,
        0.006025427952408791,
        0.01933964155614376,
        -0.065739706158638,
        0.036465201526880264,
        -0.12696923315525055,
        -0.027498988434672356,
        -0.0047834692522883415,
        0.07282686233520508,
        -0.08324376493692398,
        0.05221637710928917,
        -0.07252601534128189,
        0.050242193043231964,
        0.06243390962481499,
        0.005083682015538216,
        0.12267736345529556,
        0.0031409040093421936,
        0.10891787707805634,
        0.028346791863441467,
        -0.02555251121520996,
        -0.10017472505569458,
        0.058463048189878464,
        -0.02247428148984909,
        -0.08395600318908691,
        -0.006212826818227768,
        0.04835492745041847,
        -0.027775941416621208,
        -0.11919998377561569,
        -0.010749135166406631,
        -0.03053322434425354,
        0.05154743045568466,
        0.00010837723675649613,
        0.05779579281806946,
        -0.03095850721001625,
        0.024920979514718056,
        -0.0018421809654682875,
        -0.050450168550014496,
        0.015378688462078571,
        -0.015658166259527206,
        0.04087257385253906,
        0.10898662358522415,
        0.06342902779579163,
        0.0438416451215744,
        -0.029814017936587334,
        0.02783246710896492,
        0.08581171929836273,
        -0.056495897471904755,
        0.06669384241104126,
        0.032067157328128815,
        -0.04316836968064308,
        -0.03714059293270111,
        0.0036855197977274656,
        0.07243606448173523,
        -0.01457584835588932,
        -0.00499099912121892,
        -0.07306908071041107,
        -0.021437974646687508,
        0.04375419020652771,
        0.03651423379778862,
        0.04136001691222191,
        0.017293184995651245,
        0.007516602985560894,
        0.05470828339457512,
        0.009107225574553013,
        0.08574753999710083,
        0.09113933891057968,
        0.0981752872467041,
        0.06123140826821327,
        -0.04016030579805374,
        0.03131129592657089,
        0.014149202033877373,
        -0.08283251523971558,
        0.04479089379310608,
        7.568900861085197e-33,
        -0.04865153878927231,
        -0.059075597673654556,
        -0.02069387584924698,
        -0.041226062923669815,
        0.006510300096124411,
        0.04655071347951889,
        -0.04458019137382507,
        0.02405792847275734,
        -0.12629152834415436,
        0.03179256245493889,
        -0.1142037883400917,
        0.018218766897916794,
        0.021913735195994377,
        0.006851067766547203,
        0.03775736689567566,
        -0.04523942992091179,
        0.05605483800172806,
        -0.018295804038643837,
        0.016988733783364296,
        -0.00933073926717043,
        0.053458891808986664,
        -0.05004451423883438,
        -0.021253293380141258,
        -0.008587543852627277,
        -0.04666151478886604,
        -0.01851838454604149,
        0.05245479568839073,
        0.015182603150606155,
        -0.03664066269993782,
        -0.035288456827402115,
        0.03409155085682869,
        0.02922903560101986,
        -0.045975860208272934,
        -0.031856127083301544,
        0.07411891967058182,
        0.004636974073946476,
        0.06848963350057602,
        0.07230176776647568,
        -0.03793912008404732,
        0.0015656689647585154,
        -0.006078348029404879,
        -0.012464412488043308,
        -0.024893753230571747,
        -0.011630653403699398,
        -0.03342290595173836,
        0.02649097703397274,
        -0.04181361570954323,
        0.007592065259814262,
        0.043867360800504684,
        0.004799630958586931,
        -0.03872557356953621,
        0.03224679455161095,
        -0.02154230885207653,
        -0.028951231390237808,
        0.016236545518040657,
        -0.004798243287950754,
        0.06357750296592712,
        0.019629836082458496,
        -0.024573301896452904,
        -0.007948203012347221,
        -0.04056120663881302,
        0.02898428775370121,
        0.02777855098247528,
        -0.026118632405996323,
        -0.0028854734264314175,
        0.040264204144477844,
        0.00048427277943119407,
        -0.027738669887185097,
        0.014932028017938137,
        0.025824464857578278,
        -0.025444813072681427,
        -0.016705192625522614,
        0.023206079378724098,
        -0.031008198857307434,
        -0.03150840103626251,
        -0.026344934478402138,
        -0.05843057483434677,
        -0.0563754066824913,
        -0.07682503759860992,
        -0.10063234716653824,
        -0.00267961947247386,
        -0.01991407386958599,
        -0.03744647279381752,
        -0.042244162410497665,
        0.09286236763000488,
        0.00328276795335114,
        0.0009152127313427627,
        -0.04619787260890007,
        -0.07004369050264359,
        -0.03537849709391594,
        -0.09958682954311371,
        0.004074741154909134,
        0.019121157005429268,
        -0.0681154727935791,
        -0.03084399551153183,
        -6.838089411023257e-33,
        -0.028375783935189247,
        0.06215503439307213,
        -0.0004671933420468122,
        0.07709266990423203,
        0.03201243281364441,
        -0.01856875792145729,
        0.07713819295167923,
        -0.014309762977063656,
        -0.02221403643488884,
        0.013329334557056427,
        -0.06335581094026566,
        -0.07141389697790146,
        -0.04432644322514534,
        0.008628511801362038,
        0.06375113129615784,
        0.10502646118402481,
        -0.041525907814502716,
        0.038355544209480286,
        0.029658012092113495,
        -0.008515996858477592,
        -0.03142566233873367,
        0.11676275730133057,
        0.04326773062348366,
        0.025740263983607292,
        -0.053226880729198456,
        0.06985533237457275,
        0.05729004368185997,
        -0.025093767791986465,
        -0.04667922854423523,
        -0.11787690967321396,
        -0.029689500108361244,
        -0.06771479547023773,
        -0.050882015377283096,
        0.10944335907697678,
        -0.014297477900981903,
        -0.05016711726784706,
        0.07816789299249649,
        -0.09390199929475784,
        -0.042312219738960266,
        0.05434131994843483,
        0.030419716611504555,
        0.019716773182153702,
        -0.03349869325757027,
        0.02218165621161461,
        0.06489033252000809,
        0.06592879444360733,
        0.031122902408242226,
        0.06236543133854866,
        0.0057009318843483925,
        -0.08009852468967438,
        0.0029943035915493965,
        -0.073126420378685,
        -0.09370411932468414,
        0.04865771904587746,
        -0.018619026988744736,
        -0.06114041805267334,
        -0.018466787412762642,
        -0.06400740891695023,
        -0.07033970206975937,
        0.013000080361962318,
        -0.050108782947063446,
        -0.030344003811478615,
        0.10149283707141876,
        -0.028462238609790802,
        0.07067771255970001,
        0.005198480095714331,
        0.012917980551719666,
        -0.018312936648726463,
        0.05653490498661995,
        0.027416709810495377,
        -0.057993002235889435,
        0.09162228554487228,
        0.03882695361971855,
        0.013334167189896107,
        0.007667613681405783,
        0.013912214897572994,
        -0.06688826531171799,
        0.03043464757502079,
        0.06084964796900749,
        0.0083842184394598,
        -0.0511966273188591,
        -0.000612535746768117,
        0.010790973901748657,
        0.05232224985957146,
        -0.09243447333574295,
        -0.004460455384105444,
        0.10265734791755676,
        0.06458968669176102,
        0.012970829382538795,
        0.005739354528486729,
        -0.01493978500366211,
        0.10707688331604004,
        0.049156561493873596,
        0.03789539262652397,
        0.014621486887335777,
        -5.095107979968816e-8,
        -0.0054166424088180065,
        -0.06612803786993027,
        -0.1045180931687355,
        0.0746476873755455,
        -0.047184351831674576,
        0.02269408293068409,
        -0.024407140910625458,
        -0.06328494846820831,
        -0.0014764185762032866,
        -0.0898880735039711,
        0.030395980924367905,
        -0.0006642607622779906,
        -0.021890195086598396,
        -0.010702062398195267,
        -0.023076020181179047,
        -0.06171633303165436,
        -0.045150529593229294,
        0.05047008395195007,
        -0.023149915039539337,
        0.008206652477383614,
        0.030942725017666817,
        0.06074647232890129,
        -0.04976380243897438,
        -0.016352243721485138,
        -0.013096564449369907,
        -0.05151638016104698,
        0.011906376108527184,
        0.0011433231411501765,
        -0.045743800699710846,
        -0.021725784987211227,
        0.023003291338682175,
        0.003914176486432552,
        0.020215868949890137,
        -0.003737692954018712,
        -0.009068967774510384,
        -0.03514624759554863,
        0.09311196953058243,
        -0.022960614413022995,
        0.0477885864675045,
        0.12988883256912231,
        0.02619481272995472,
        0.02338450588285923,
        -0.036363087594509125,
        -0.033545058220624924,
        -0.006006535142660141,
        -0.09993341565132141,
        -0.028020348399877548,
        -0.036574047058820724,
        0.11880641430616379,
        0.051545821130275726,
        -0.001449614530429244,
        -0.04658382385969162,
        -0.075861357152462,
        -0.012178215198218822,
        0.04248187690973282,
        -0.11767418682575226,
        0.018548766151070595,
        0.008550574071705341,
        -0.07291405647993088,
        0.04998199641704559,
        0.028996502980589867,
        -0.06425801664590836,
        -0.008618460036814213,
        0.001980009488761425
      ]
    },
    {
      "id": "d851dbd4",
      "filePath": "03-evals/src/runner.ts",
      "content": "const report: EvalReport = {\n\t\ttotal_cases: cases.length,\n\t\tpassed_cases: passedCases.length,\n\t\tfailed_cases: cases.length - passedCases.length,\n\t\tpass_rate: passedCases.length / cases.length,\n\t\taverage_score: totalScore / cases.length,\n\t\taverage_latency_ms: totalLatency / cases.length,\n\t\trepeats_per_case: repeats,\n\t\tresults: results,\n\t\tworst_cases: worstCases,\n\t\tunstable_cases: unstableCases,\n\t\trun_at: new Date().toISOString()\n\t};\n\n\treturn report;\n}\n\n/**\n * 打印报告摘要到控制台\n */",
      "startLine": 116,
      "endLine": 135,
      "type": "function",
      "name": "runEval (part 3)",
      "embedding": [
        -0.048950258642435074,
        0.09531298279762268,
        -0.04181455820798874,
        0.04641193151473999,
        0.026997042819857597,
        0.027386421337723732,
        -0.015839748084545135,
        0.11660795658826828,
        -0.042985886335372925,
        -0.0019903790671378374,
        0.015537516213953495,
        0.044901106506586075,
        -0.02539638802409172,
        0.00041203227010555565,
        -0.08458106219768524,
        0.021280262619256973,
        -0.1196533665060997,
        0.024016017094254494,
        0.049361664801836014,
        -0.07646238803863525,
        0.02811385877430439,
        0.02720160037279129,
        0.04465353861451149,
        -0.04547257721424103,
        0.02729269489645958,
        0.05487499013543129,
        -0.04802560433745384,
        0.03743598982691765,
        -0.019180888310074806,
        -0.029706811532378197,
        -0.0002817415224853903,
        -0.0026748667005449533,
        -0.0035086125135421753,
        0.036855023354291916,
        -0.011983823962509632,
        0.06015801802277565,
        -0.09838835150003433,
        -0.05932409316301346,
        -0.0019539245404303074,
        0.057865094393491745,
        0.020807424560189247,
        0.04593641683459282,
        -0.008578160777688026,
        -0.012489414773881435,
        0.014864283613860607,
        -0.06509575247764587,
        -0.10987663269042969,
        -0.022065632045269012,
        -0.04303532466292381,
        0.029552839696407318,
        -0.07766406983137131,
        0.029024794697761536,
        -0.06413619220256805,
        0.021467404440045357,
        0.05830918252468109,
        -0.01538833323866129,
        -0.03536380082368851,
        -0.051302339881658554,
        -0.0164599921554327,
        -0.05881009250879288,
        0.02756577730178833,
        -0.010030639357864857,
        0.036822982132434845,
        -0.025933226570487022,
        0.07574737817049026,
        -0.01279474887996912,
        0.02109880931675434,
        0.09645707905292511,
        -0.03804999217391014,
        0.053642477840185165,
        -0.0010122735984623432,
        0.06002268195152283,
        -0.0660879984498024,
        0.047065749764442444,
        -0.07047847658395767,
        0.025144759565591812,
        -0.049517855048179626,
        -0.03762369975447655,
        0.021721387282013893,
        -0.02853667177259922,
        -0.03539501503109932,
        -0.09600780159235,
        -0.033477671444416046,
        0.04179403558373451,
        0.07357502728700638,
        0.09191202372312546,
        0.04573390632867813,
        -0.057066407054662704,
        0.024764839559793472,
        -0.023815661668777466,
        -0.006194045301526785,
        -0.020311135798692703,
        -0.02329646609723568,
        0.01844937354326248,
        0.012959170155227184,
        0.02080135978758335,
        0.01410771906375885,
        0.006652954500168562,
        0.05181019380688667,
        0.05093502998352051,
        -0.02904452756047249,
        0.013059655204415321,
        0.057455845177173615,
        0.029369177296757698,
        -0.07006008923053741,
        -0.042088598012924194,
        0.018261626362800598,
        -0.0007558875367976725,
        -0.026125889271497726,
        -0.0028468933887779713,
        0.07258535176515579,
        0.07448051869869232,
        0.044308267533779144,
        -0.062400564551353455,
        -0.03405524790287018,
        -0.011288771405816078,
        -0.04739571735262871,
        0.026592548936605453,
        0.08417819440364838,
        0.13669376075267792,
        0.09107721596956253,
        0.022035017609596252,
        -0.08940254896879196,
        0.08104966580867767,
        0.013942255638539791,
        0.014681162312626839,
        0.13409991562366486,
        4.1453852362786125e-33,
        -0.0322115384042263,
        -0.09663096070289612,
        0.0038812418933957815,
        -0.006409293506294489,
        -0.002178287599235773,
        -0.0010277099208906293,
        -0.04748999699950218,
        -0.054534003138542175,
        -0.09867152571678162,
        0.07393639534711838,
        -0.09934291988611221,
        -0.0033252029679715633,
        -0.0012435568496584892,
        -0.05884649232029915,
        -0.02548016794025898,
        -0.02251611463725567,
        0.0541909858584404,
        0.05329134687781334,
        -0.07172370702028275,
        0.007416724227368832,
        0.12912926077842712,
        -0.027449965476989746,
        -0.01631424017250538,
        -0.029719538986682892,
        0.006338552106171846,
        -0.031846314668655396,
        0.029202602803707123,
        0.007629615720361471,
        -0.03105742670595646,
        -0.010547413490712643,
        0.05071637034416199,
        -0.033399708569049835,
        -0.016123158857226372,
        0.03809348866343498,
        0.05714650824666023,
        0.019169356673955917,
        0.02557634748518467,
        0.027449985966086388,
        0.013559828512370586,
        -0.0014013309264555573,
        0.0032756784930825233,
        0.012617617845535278,
        -0.08209139853715897,
        -0.020119355991482735,
        -0.022285187616944313,
        -0.017737409099936485,
        -0.03802479803562164,
        0.002198366215452552,
        0.07564079016447067,
        -0.0018478604033589363,
        -0.06021136790513992,
        0.04939405992627144,
        0.04623735696077347,
        0.019137395545840263,
        0.050709787756204605,
        -0.0394970066845417,
        0.04291369765996933,
        -0.02698279358446598,
        -0.004773920867592096,
        0.06475226581096649,
        0.05566568300127983,
        0.03752380609512329,
        0.010140137746930122,
        -0.05432506650686264,
        0.0007790923700667918,
        -0.0927024558186531,
        0.0784933865070343,
        -0.03297051414847374,
        0.019303645938634872,
        -0.026688259094953537,
        -0.03762362152338028,
        -0.040535930544137955,
        0.0031225779093801975,
        0.00048505343147553504,
        -0.02210899628698826,
        -0.05180095136165619,
        0.016756262630224228,
        -0.02815793827176094,
        -0.07277383655309677,
        -0.15954498946666718,
        -0.031256649643182755,
        -0.07874532788991928,
        -0.011016478762030602,
        -0.022562475875020027,
        0.07715851813554764,
        0.00009074377157958224,
        -0.0485498271882534,
        -0.08912467956542969,
        -0.03964002802968025,
        -0.06924916058778763,
        -0.04337487369775772,
        -0.02665388584136963,
        -0.06079581379890442,
        -0.014226866886019707,
        -0.0324602872133255,
        -5.0852535811884956e-33,
        0.014681996777653694,
        0.0397409163415432,
        0.039412759244441986,
        0.023281607776880264,
        -0.025005286559462547,
        -0.05877554416656494,
        0.034740760922431946,
        0.05030224844813347,
        0.007796532474458218,
        0.1239289864897728,
        -0.04356195777654648,
        -0.05152037739753723,
        -0.016466740518808365,
        -0.02001926489174366,
        0.08263161033391953,
        0.055876705795526505,
        -0.011466973461210728,
        0.0005545030580833554,
        -0.018074195832014084,
        -0.04372445493936539,
        -0.008177187293767929,
        0.07921178638935089,
        0.021473940461874008,
        0.052928708493709564,
        -0.05256415531039238,
        0.09871477633714676,
        0.13631193339824677,
        -0.03417983278632164,
        -0.03859113156795502,
        -0.08371492475271225,
        -0.035594649612903595,
        -0.04510173574090004,
        -0.04919489100575447,
        0.06795921176671982,
        -0.07452293485403061,
        -0.016845228150486946,
        0.14060790836811066,
        -0.04249202460050583,
        0.010094065219163895,
        0.09634844213724136,
        0.03611695393919945,
        0.08195310831069946,
        -0.0663934126496315,
        -0.010464402846992016,
        0.03237522393465042,
        0.0425652340054512,
        0.05752720683813095,
        0.014502374455332756,
        0.027068987488746643,
        -0.13963335752487183,
        0.020173534750938416,
        -0.01868155226111412,
        0.0037546216044574976,
        -0.007590386550873518,
        -0.0822463259100914,
        -0.057963237166404724,
        -0.03866274654865265,
        -0.08565264195203781,
        -0.10391733795404434,
        0.021622296422719955,
        0.0458739697933197,
        -0.041519876569509506,
        0.030948055908083916,
        -0.07641834020614624,
        -0.01758735440671444,
        0.013174610212445259,
        -0.03709322214126587,
        -0.05400325730443001,
        0.03477206453680992,
        -0.013274922966957092,
        -0.07614652812480927,
        0.04657112807035446,
        -0.0003112139238510281,
        0.021334156394004822,
        -0.020970920100808144,
        0.008824112825095654,
        -0.03185945749282837,
        0.01241734717041254,
        0.02911974862217903,
        0.034557946026325226,
        -0.050992317497730255,
        0.016966165974736214,
        0.03215397149324417,
        0.036055319011211395,
        -0.048284780234098434,
        0.025462517514824867,
        0.037107594311237335,
        0.043297167867422104,
        -0.028424177318811417,
        -0.02410079538822174,
        -0.010027379728853703,
        0.020525891333818436,
        -0.008331973105669022,
        0.03634510561823845,
        0.009899305179715157,
        -5.3703931968129837e-8,
        -0.03929253667593002,
        -0.022364137694239616,
        -0.060379866510629654,
        0.03663290664553642,
        0.01316123828291893,
        -0.005782012827694416,
        0.01908872462809086,
        -0.06224806234240532,
        0.06786074489355087,
        -0.03133537992835045,
        0.05038732290267944,
        0.005072243046015501,
        -0.038733284920454025,
        -0.047949232161045074,
        0.0367661789059639,
        0.011885673739016056,
        -0.06348252296447754,
        0.09333644807338715,
        -0.08323372900485992,
        -0.017166726291179657,
        0.05346043407917023,
        0.07381071895360947,
        -0.0028783909510821104,
        -0.05455242469906807,
        -0.007411311846226454,
        -0.01505309622734785,
        0.01577463187277317,
        0.06315620988607407,
        0.030146636068820953,
        0.005381817929446697,
        -0.01603480987250805,
        0.03228999301791191,
        0.049787044525146484,
        -0.10623039305210114,
        -0.08640455454587936,
        0.04044623672962189,
        0.07694189250469208,
        0.05802099034190178,
        0.038286540657281876,
        0.04465234652161598,
        -0.02700401470065117,
        0.07264194637537003,
        -0.017305925488471985,
        0.08415395021438599,
        -0.047358009964227676,
        -0.0895218625664711,
        -0.058577340096235275,
        -0.010908275842666626,
        0.058066971600055695,
        -0.062776580452919,
        0.061845388263463974,
        -0.08374621719121933,
        -0.08474363386631012,
        0.04308662936091423,
        -0.025867804884910583,
        -0.018898988142609596,
        0.007061711046844721,
        0.0016886579105630517,
        -0.1460895538330078,
        -0.04918697476387024,
        0.01753510721027851,
        -0.052830059081315994,
        0.06569930166006088,
        0.031745705753564835
      ]
    },
    {
      "id": "94cd53c1",
      "filePath": "03-evals/src/runner.ts",
      "content": "export function printReportSummary(report: EvalReport): void {\n\tconsole.log(\"\\n\" + \"=\".repeat(50));\n\tconsole.log(\"📊 EVALUATION REPORT\");\n\tconsole.log(\"=\".repeat(50));\n\tconsole.log(`📅 Run at: ${report.run_at}`);\n\tconsole.log(`📋 Total Cases: ${report.total_cases}`);\n\tif (report.repeats_per_case > 1) {\n\t\tconsole.log(`🔄 Repeats per Case: ${report.repeats_per_case}`);\n\t}\n\tconsole.log(`✅ Passed: ${report.passed_cases} (${(report.pass_rate * 100).toFixed(1)}%)`);\n\tconsole.log(`❌ Failed: ${report.failed_cases}`);\n\tconsole.log(`⭐ Average Score: ${report.average_score.toFixed(2)} / 5`);\n\tconsole.log(`⏱️  Average Latency: ${report.average_latency_ms.toFixed(0)}ms`);\n\n\tif (report.worst_cases.length > 0) {\n\t\tconsole.log(\"\\n🚨 Worst Cases (score <= 2):\");\n\t\tfor (const c of report.worst_cases) {\n\t\t\tconsole.log(`   - [${c.case_id}] Score ${c.score}: ${c.reason}`);\n\t\t}\n\t}\n\n\tif (report.unstable_cases.length > 0) {\n\t\tconsole.log(\"\\n⚠️  Unstable Cases (std > 1):\");\n\t\tfor (const c of report.unstable_cases) {\n\t\t\tconsole.log(`   - [${c.case_id}] Avg ${c.score}, Std ${c.score_std}`);\n\t\t}\n\t}\n\n\tconsole.log(\"=\".repeat(50) + \"\\n\");\n}",
      "startLine": 136,
      "endLine": 166,
      "type": "function",
      "name": "printReportSummary",
      "embedding": [
        0.026501070708036423,
        0.0780913457274437,
        -0.012637250125408173,
        0.04901764169335365,
        0.06445629894733429,
        0.03704085946083069,
        0.009666690602898598,
        0.08759461343288422,
        0.0612185001373291,
        0.03448633849620819,
        -0.0010040357010439038,
        -0.007585562765598297,
        0.002116681542247534,
        -0.022693941369652748,
        -0.02774713933467865,
        -0.023312916979193687,
        -0.1883953958749771,
        0.026095116510987282,
        -0.03584928438067436,
        -0.07054900377988815,
        0.09155503660440445,
        0.059277575463056564,
        -0.02359732612967491,
        0.004054742399603128,
        -0.050103478133678436,
        0.062120117247104645,
        -0.018724214285612106,
        0.05031232908368111,
        -0.06050455942749977,
        0.010830436833202839,
        -0.060813285410404205,
        -0.03378977254033089,
        0.026566900312900543,
        0.040365222841501236,
        -0.008632093667984009,
        -0.015418044291436672,
        -0.0739194005727768,
        -0.018529294058680534,
        -0.0030028645414859056,
        0.01829005964100361,
        -0.015045059844851494,
        0.05451265349984169,
        0.009958717040717602,
        -0.0769323855638504,
        0.07182729244232178,
        -0.11404541879892349,
        -0.17295297980308533,
        0.0013098388444632292,
        -0.0006180015625432134,
        0.07131383568048477,
        -0.017847295850515366,
        0.007177405990660191,
        -0.003213006304576993,
        -0.03478331118822098,
        0.05348033457994461,
        -0.01485793199390173,
        -0.048632774502038956,
        -0.04724888503551483,
        0.014171441085636616,
        -0.09893271327018738,
        0.005957392975687981,
        -0.013571914285421371,
        0.03816770762205124,
        -0.08639373630285263,
        0.08711277693510056,
        -0.04778370261192322,
        -0.03170376643538475,
        0.13253706693649292,
        -0.010882027447223663,
        0.15045125782489777,
        -0.04420681670308113,
        0.04706520959734917,
        -0.012983803637325764,
        -0.0383945070207119,
        -0.07159170508384705,
        0.011876569129526615,
        -0.06284328550100327,
        -0.041361499577760696,
        -0.023395271971821785,
        0.03362984582781792,
        -0.02510344237089157,
        -0.06420508027076721,
        -0.07370800524950027,
        -0.019677752628922462,
        0.04474354162812233,
        0.032062776386737823,
        0.10993613302707672,
        0.03986096382141113,
        0.04152768477797508,
        -0.07750475406646729,
        -0.05805828422307968,
        0.0671912208199501,
        0.030878478661179543,
        0.05370587855577469,
        0.01285951491445303,
        0.12630821764469147,
        0.031033195555210114,
        0.0017449763836339116,
        0.06652510911226273,
        0.06298817694187164,
        -0.01707981526851654,
        -0.007127851713448763,
        0.02162977308034897,
        -0.006209735758602619,
        -0.026957271620631218,
        -0.051035333424806595,
        0.025344017893075943,
        0.02042401023209095,
        -0.01083493884652853,
        -0.015392045490443707,
        0.018788395449519157,
        0.11453118175268173,
        -0.00365212163887918,
        0.0077765281312167645,
        0.01691598817706108,
        -0.000013209190910856705,
        0.0424598827958107,
        -0.01854279264807701,
        0.05385809764266014,
        0.07975220680236816,
        0.10454651713371277,
        0.04073251783847809,
        -0.03358479216694832,
        0.07120145112276077,
        0.13187961280345917,
        -0.03464255481958389,
        0.13450512290000916,
        4.1943926977903475e-33,
        -0.03532470017671585,
        -0.11246828734874725,
        0.006083063315600157,
        0.0007854190189391375,
        0.013738221488893032,
        0.04271112009882927,
        -0.02288278378546238,
        -0.0043749683536589146,
        -0.04240133985877037,
        0.05031771585345268,
        -0.10805610567331314,
        0.04894744232296944,
        0.0041467067785561085,
        -0.07251978665590286,
        -0.015101243741810322,
        -0.01488819532096386,
        0.0564299002289772,
        0.05193240940570831,
        0.03669879585504532,
        0.050949227064847946,
        0.0643264427781105,
        -0.09488465636968613,
        0.018268734216690063,
        0.04096537455916405,
        0.02585182897746563,
        -0.026035020127892494,
        0.04538177698850632,
        0.010104617103934288,
        -0.04768487438559532,
        -0.03785629943013191,
        0.15479834377765656,
        0.03059355914592743,
        -0.04338963329792023,
        -0.0367061123251915,
        0.058310311287641525,
        -0.04504682868719101,
        0.041772905737161636,
        0.06245512142777443,
        -0.021865611895918846,
        0.0407150462269783,
        -0.05620464310050011,
        -0.012000166811048985,
        -0.04205287992954254,
        0.02389153279364109,
        0.001705873291939497,
        -0.001746934955008328,
        -0.011157280765473843,
        0.02804798074066639,
        0.02867899090051651,
        -0.015774307772517204,
        -0.06020430475473404,
        0.0735076442360878,
        0.02288103848695755,
        -0.020825015380978584,
        0.04317596182227135,
        -0.01962197944521904,
        0.020680014044046402,
        -0.0051614525727927685,
        -0.021926142275333405,
        -0.008599920198321342,
        0.025441987439990044,
        0.037732746452093124,
        0.007985937409102917,
        -0.0441795289516449,
        0.02972026728093624,
        -0.012248718179762363,
        0.05223485082387924,
        0.02904670499265194,
        0.03519152104854584,
        0.00024015142116695642,
        -0.03676435351371765,
        -0.034078165888786316,
        0.04150555282831192,
        -0.012039018794894218,
        0.008582049049437046,
        -0.03688561171293259,
        -0.0010390030220150948,
        0.0016832792898640037,
        -0.07265380769968033,
        -0.10999526083469391,
        -0.025657352060079575,
        -0.018034780398011208,
        -0.03520365059375763,
        -0.03155277296900749,
        0.08498840779066086,
        0.024836301803588867,
        -0.01154196448624134,
        -0.02240324765443802,
        -0.07055056840181351,
        -0.04320499673485756,
        -0.07983802258968353,
        0.011911061592400074,
        -0.005177612416446209,
        -0.05523481220006943,
        -0.0139507707208395,
        -3.627797441196297e-33,
        -0.0032526066061109304,
        0.028231710195541382,
        0.05256205052137375,
        0.03666279837489128,
        -0.004122409038245678,
        -0.03161903843283653,
        0.011160893365740776,
        0.019328515976667404,
        -0.03920227289199829,
        0.022628022357821465,
        -0.04845120385289192,
        -0.10399407893419266,
        -0.03583146631717682,
        0.05859331786632538,
        0.06255937367677689,
        0.11305077373981476,
        -0.053554922342300415,
        0.004017570987343788,
        0.0015024353051558137,
        -0.04635979235172272,
        0.0465351901948452,
        0.03667302802205086,
        0.09424993395805359,
        0.019743740558624268,
        -0.08720909059047699,
        0.046735912561416626,
        0.09435480833053589,
        -0.03517599403858185,
        -0.04435969889163971,
        -0.0789342150092125,
        0.01979556679725647,
        0.00626029958948493,
        -0.013650143519043922,
        0.0983753576874733,
        -0.020513882860541344,
        -0.1012595146894455,
        0.10349760949611664,
        -0.011885707266628742,
        -0.009365265257656574,
        0.0861482247710228,
        0.0010546278208494186,
        0.01847993955016136,
        -0.045530498027801514,
        -0.04894956946372986,
        0.007739212829619646,
        -0.03653855249285698,
        0.0755772590637207,
        0.047183696180582047,
        0.015426302328705788,
        -0.09005887806415558,
        -0.030076557770371437,
        -0.09259401261806488,
        -0.09497079998254776,
        0.029223162680864334,
        -0.00952870026230812,
        -0.056754063814878464,
        -0.02902626059949398,
        -0.09522451460361481,
        -0.11551565676927567,
        0.04528234899044037,
        -0.022748785093426704,
        -0.014932557940483093,
        0.04109910875558853,
        -0.07205156981945038,
        0.017466410994529724,
        -0.018257714807987213,
        -0.005369316320866346,
        -0.06872490048408508,
        0.03366320952773094,
        0.06229857727885246,
        -0.030980896204710007,
        0.02819683775305748,
        -0.007892977446317673,
        0.009714647196233273,
        -0.005151242017745972,
        0.03258063644170761,
        -0.025940924882888794,
        0.026654977351427078,
        0.023603184148669243,
        0.054796576499938965,
        -0.03604007884860039,
        0.01993779093027115,
        0.023046160116791725,
        0.007825248874723911,
        -0.0799093097448349,
        0.009226477704942226,
        0.0922216922044754,
        0.04114847630262375,
        -0.0008794109453447163,
        0.0011917566880583763,
        -0.026820756494998932,
        0.03502597659826279,
        0.05722326412796974,
        0.027775004506111145,
        0.0184225644916296,
        -4.614831894400595e-8,
        -0.05862748622894287,
        -0.05737150460481644,
        -0.049307987093925476,
        0.0011098005343228579,
        -0.021204151213169098,
        0.01316752191632986,
        -0.017436936497688293,
        -0.06550603359937668,
        0.0034423714969307184,
        -0.06026945263147354,
        0.021454861387610435,
        0.00014443414693232626,
        -0.019267598167061806,
        0.019178219139575958,
        -0.012172558344900608,
        -0.06272637099027634,
        -0.024733219295740128,
        0.03040008805692196,
        -0.04343743249773979,
        0.03294413536787033,
        0.017317524179816246,
        0.035668134689331055,
        -0.017943697050213814,
        -0.05060708150267601,
        0.024023696780204773,
        -0.0558682382106781,
        0.04554778337478638,
        0.016026580706238747,
        -0.03083069622516632,
        -0.006792374886572361,
        -0.006471026223152876,
        0.0193613450974226,
        0.0514768585562706,
        -0.044563669711351395,
        -0.007721551228314638,
        -0.05625591054558754,
        0.09675806015729904,
        0.013728839345276356,
        -0.01044031884521246,
        0.07913549244403839,
        0.024372592568397522,
        0.01295909471809864,
        -0.03465455397963524,
        -0.01261281780898571,
        0.05976887419819832,
        -0.12778712809085846,
        -0.04724842682480812,
        0.0009505701018497348,
        0.10834188759326935,
        -0.04019402712583542,
        0.008161571808159351,
        -0.0912926197052002,
        -0.06180017068982124,
        -0.0076968795619904995,
        0.028533419594168663,
        -0.035735804587602615,
        0.027697861194610596,
        -0.01339968852698803,
        -0.056580424308776855,
        0.01373635046184063,
        0.024192608892917633,
        -0.05549157038331032,
        -0.0032335007563233376,
        -0.004603777080774307
      ]
    },
    {
      "id": "88688482",
      "filePath": "03-evals/src/judge.ts",
      "content": "import 'dotenv/config';\nimport OpenAI from 'openai';\nimport { z } from 'zod';\nimport { EvalCase, EvalResult } from './types';\n\n// ============================================\n// Judge LLM 模块\n// ============================================\n\nconst client = new OpenAI({\n\tapiKey: process.env.OPENAI_API_KEY,\n\tbaseURL: process.env.OPENAI_BASE_URL,\n});\n\n// Judge 输出的 Schema\nconst JudgeOutputSchema = z.object({\n\tscore: z.number().min(1).max(5),\n\treason: z.string()\n});\n\n/**\n * 用 LLM 评估 Agent 的输出质量\n *\n * @param testCase 测试样本（包含 input 和 expected_points）\n * @param actualOutput Agent 的实际输出\n * @returns 评分结果（score + reason）\n */",
      "startLine": 1,
      "endLine": 27,
      "type": "other",
      "embedding": [
        -0.05500190332531929,
        0.08495524525642395,
        -0.08943984657526016,
        -0.012231594882905483,
        0.03100036084651947,
        -0.03112381510436535,
        0.10154566913843155,
        0.0819409117102623,
        0.02122540958225727,
        0.01096904743462801,
        0.016668453812599182,
        -0.07593835145235062,
        0.021207110956311226,
        0.00022811780218034983,
        0.07549970597028732,
        0.04685359448194504,
        -0.03313115984201431,
        -0.012940600514411926,
        -0.055905506014823914,
        -0.03700727969408035,
        0.041880037635564804,
        0.006696607917547226,
        0.009952446445822716,
        -0.03384210541844368,
        -0.03876568377017975,
        -0.0675019770860672,
        0.0020820500794798136,
        0.045773427933454514,
        -0.007813183590769768,
        -0.02139545977115631,
        0.02706810086965561,
        0.05514336749911308,
        -0.037759408354759216,
        0.0185882318764925,
        0.06645660847425461,
        0.07279572635889053,
        -0.05204421281814575,
        -0.08267795294523239,
        -0.03594500198960304,
        -0.0018916205735877156,
        0.04952466860413551,
        0.05527658015489578,
        -0.041622284799814224,
        -0.061497703194618225,
        0.06533874571323395,
        -0.04104219004511833,
        -0.07857559621334076,
        -0.06260266900062561,
        -0.06329818069934845,
        -0.012067043222486973,
        -0.12499704211950302,
        0.004491043277084827,
        -0.02978452667593956,
        -0.04217945784330368,
        0.04145728051662445,
        0.01667267642915249,
        -0.06744005531072617,
        0.010813692584633827,
        -0.0191152635961771,
        -0.08627582341432571,
        0.0018396131927147508,
        -0.0329633466899395,
        0.02532423846423626,
        -0.02922036312520504,
        -0.04067947342991829,
        -0.00901616271585226,
        -0.042892493307590485,
        0.012565148994326591,
        0.034767359495162964,
        -0.06084945797920227,
        -0.03651772439479828,
        0.030803656205534935,
        0.011932882480323315,
        -0.04009759798645973,
        -0.08632828295230865,
        -0.0009941448224708438,
        -0.01141735166311264,
        -0.024106262251734734,
        0.04719582572579384,
        -0.10172606259584427,
        -0.04236193001270294,
        -0.08225837349891663,
        -0.03582068532705307,
        0.030025284737348557,
        0.039837196469306946,
        0.07356840372085571,
        0.025694245472550392,
        -0.047886237502098083,
        0.07580211013555527,
        0.032510675489902496,
        0.028299996629357338,
        0.0025521903298795223,
        -0.061556991189718246,
        0.06377532333135605,
        0.12661731243133545,
        -0.002577009843662381,
        -0.027005139738321304,
        0.010871650651097298,
        0.022405020892620087,
        0.1606411337852478,
        0.00030086643528193235,
        0.017000766471028328,
        -0.005944909993559122,
        0.0009675804176367819,
        -0.047948069870471954,
        0.00011042963160434738,
        0.07636652141809464,
        0.015157141722738743,
        -0.024838438257575035,
        -0.04485863447189331,
        -0.03427943214774132,
        0.030655192211270332,
        0.07603232562541962,
        -0.08987550437450409,
        -0.05593075975775719,
        0.05256558582186699,
        -0.0520935133099556,
        0.012636804953217506,
        0.005593492649495602,
        0.05736437067389488,
        0.08379989117383957,
        0.009000000543892384,
        -0.09541310369968414,
        0.035355344414711,
        -0.003889705054461956,
        0.015423444099724293,
        0.10527422279119492,
        1.4777752210617342e-32,
        -0.022459357976913452,
        -0.021420588716864586,
        -0.0034914908464998007,
        -0.0310404971241951,
        0.022944863885641098,
        0.049826424568891525,
        0.040723223239183426,
        0.006720499135553837,
        -0.12167183309793472,
        0.006346531677991152,
        -0.11527800559997559,
        0.014375160448253155,
        -0.0649479329586029,
        -0.07589010149240494,
        0.0048436629585921764,
        0.021545175462961197,
        -0.02778587117791176,
        0.06684593111276627,
        0.033505067229270935,
        -0.016279222443699837,
        0.07519946992397308,
        0.010167665779590607,
        -0.04982632026076317,
        0.01820562221109867,
        -0.05535738170146942,
        0.04269002005457878,
        -0.026156147941946983,
        -0.044559989124536514,
        -0.04722027853131294,
        0.00909463781863451,
        0.14713986217975616,
        -0.03401146084070206,
        0.008623355068266392,
        0.05502582713961601,
        0.006418443284928799,
        -0.002474373672157526,
        -0.00967281125485897,
        -0.010159401223063469,
        -0.06268155574798584,
        -0.09514907747507095,
        -0.04689053073525429,
        0.026731861755251884,
        -0.03765149042010307,
        0.04330650344491005,
        -0.0904080793261528,
        -0.01277974620461464,
        -0.06970253586769104,
        0.0006039641448296607,
        0.08425687253475189,
        -0.03283819556236267,
        -0.12238595634698868,
        0.03806329891085625,
        0.08494401723146439,
        0.03974293917417526,
        0.023645570501685143,
        -0.010842162184417248,
        -0.018473444506525993,
        0.04417385905981064,
        -0.00910415779799223,
        -0.014542143791913986,
        -0.044136472046375275,
        0.07402648776769638,
        0.0047158184461295605,
        -0.028391040861606598,
        0.016760019585490227,
        0.01760127581655979,
        -0.02985440008342266,
        -0.07664815336465836,
        0.10743805766105652,
        -0.04070773720741272,
        -0.05196642875671387,
        0.029701221734285355,
        -0.037935372442007065,
        0.017325541004538536,
        -0.025896094739437103,
        -0.09643788635730743,
        -0.006467278581112623,
        -0.034211039543151855,
        0.027891790494322777,
        -0.10501538217067719,
        -0.029525987803936005,
        -0.004752385430037975,
        -0.05060180649161339,
        0.06820450723171234,
        0.03162873908877373,
        0.015927309170365334,
        -0.0686240866780281,
        -0.07658412307500839,
        0.02604222111403942,
        0.01770608313381672,
        -0.012164090760052204,
        -0.03524221479892731,
        -0.06511051207780838,
        -0.011459807865321636,
        -0.01493291649967432,
        -1.4255632884812607e-32,
        -0.0072639258578419685,
        0.009813668206334114,
        -0.09084806591272354,
        0.0592186339199543,
        -0.04329650104045868,
        -0.062273357063531876,
        0.006071757525205612,
        -0.01797623373568058,
        0.01828598976135254,
        0.04488733783364296,
        -0.00901979859918356,
        -0.022594083100557327,
        0.08401927351951599,
        0.023876987397670746,
        -0.00836263783276081,
        0.005498854909092188,
        -0.04953225329518318,
        0.024203384295105934,
        0.044939570128917694,
        -0.01283042598515749,
        0.01880575530230999,
        0.11942131072282791,
        -0.07026747614145279,
        0.0325152687728405,
        -0.008686959743499756,
        0.08702579140663147,
        0.029432835057377815,
        -0.05443565174937248,
        -0.0261581689119339,
        0.013601296581327915,
        -0.048830244690179825,
        0.029260188341140747,
        -0.10720103979110718,
        0.11419909447431564,
        -0.048581812530756,
        -0.09352799504995346,
        0.1234457865357399,
        -0.0006012770463712513,
        -0.00407260050997138,
        0.07680322974920273,
        -0.009692429564893246,
        -0.0029852339066565037,
        -0.021143168210983276,
        -0.04205550625920296,
        0.019940411671996117,
        -0.001205378444865346,
        0.031179621815681458,
        0.0817374661564827,
        -0.00927708949893713,
        -0.09943658113479614,
        0.00972774624824524,
        -0.022739600390195847,
        -0.05673511326313019,
        -0.04883375018835068,
        -0.021239589899778366,
        -0.030724002048373222,
        0.048316195607185364,
        -0.12445924431085587,
        -0.10465981066226959,
        -0.001537143369205296,
        0.062235839664936066,
        -0.04190829396247864,
        0.010664191097021103,
        0.051277343183755875,
        -0.0031645665876567364,
        0.022797271609306335,
        -0.023403814062476158,
        0.01721922494471073,
        0.0664442852139473,
        -0.088864766061306,
        -0.051228657364845276,
        -0.013275657780468464,
        0.0038176083471626043,
        0.018513092771172523,
        0.05448988825082779,
        0.031056025996804237,
        -0.045222047716379166,
        0.06924516707658768,
        0.10055713355541229,
        0.032730717211961746,
        -0.04514849931001663,
        -0.023491576313972473,
        0.07765606790781021,
        0.03559459373354912,
        -0.010595868341624737,
        -0.013449536636471748,
        0.003986777737736702,
        0.06124255806207657,
        -0.0033069527707993984,
        0.06415887176990509,
        -0.06684393435716629,
        0.06074089929461479,
        0.017554620280861855,
        0.03811373561620712,
        -0.0006459751166403294,
        -7.509441957154195e-8,
        -0.11390013247728348,
        -0.11775077134370804,
        -0.034421663731336594,
        0.08002223819494247,
        -0.08695517480373383,
        -0.006782516837120056,
        0.015764327719807625,
        -0.04853236675262451,
        -0.011410399340093136,
        -0.051662787795066833,
        -0.009734325110912323,
        0.03924807533621788,
        -0.08301310241222382,
        -0.049927085638046265,
        -0.0015918455319479108,
        0.019391749054193497,
        0.0050805495120584965,
        0.08712959289550781,
        -0.05636944621801376,
        -0.0352395735681057,
        0.036341167986392975,
        -0.007495590019971132,
        -0.01458998303860426,
        -0.06426526606082916,
        0.0549425333738327,
        -0.06885089725255966,
        0.00020511045295279473,
        0.054224152117967606,
        -0.009591057896614075,
        -0.024404166266322136,
        -0.0027252444997429848,
        -0.019994521513581276,
        0.0618356354534626,
        -0.06723514199256897,
        -0.011953869834542274,
        0.11113207787275314,
        0.02590227499604225,
        0.01902889274060726,
        0.038231316953897476,
        0.07810311019420624,
        -0.022467443719506264,
        0.04591544717550278,
        -0.025689175352454185,
        -0.012856375426054,
        0.03247251734137535,
        -0.05085552856326103,
        -0.007464059162884951,
        -0.00014227429346647114,
        0.08931732177734375,
        -0.016386181116104126,
        -0.014195770025253296,
        -0.06409440189599991,
        -0.057617105543613434,
        0.0019255495863035321,
        -0.01613864302635193,
        0.003385127754881978,
        0.009131188504397869,
        -0.0095790084451437,
        -0.03470347821712494,
        0.0256648026406765,
        0.038046613335609436,
        0.045697327703237534,
        0.016870005056262016,
        -0.032274823635816574
      ]
    },
    {
      "id": "3c6a6518",
      "filePath": "03-evals/src/judge.ts",
      "content": "export async function judge(\n\ttestCase: EvalCase,\n\tactualOutput: string\n): Promise<{ score: number; reason: string }> {\n\n\tconst prompt = `You are an AI Output Evaluator.\n\n## Task\nEvaluate how well the AI's actual output matches the expected requirements.\n\n## User Input (given to the AI)\n${testCase.input || \"(empty input)\"}\n\n## Expected Key Points\n${testCase.expected_points.map((p, i) => `${i + 1}. ${p}`).join('\\n')}\n\n## Actual AI Output\n${actualOutput}\n\n## Scoring Rubric\n- 5: Excellent - covers all expected points accurately, well-structured\n- 4: Good - covers most points, minor issues or missing details\n- 3: Acceptable - covers some points, noticeable gaps or inaccuracies\n- 2: Poor - misses important points or contains significant errors\n- 1: Failed - completely irrelevant, harmful, or crashed\n\n## Your Response\nReturn ONLY a JSON object with two fields:\n- \"score\": a number from 1 to 5\n- \"reason\": a brief explanation (1-2 sentences) of why you gave this score\n\nExample: {\"score\": 4, \"reason\": \"Extracted name and company correctly, but years of experience was slightly off.\"}`;\n\n\tconst completion = await client.chat.completions.create({\n\t\tmodel: process.env.OPENAI_MODEL || 'gpt-4o',\n\t\tmessages: [\n\t\t\t{ role: \"system\", content: \"You are a strict but fair evaluator. Return only valid JSON.\" },\n\t\t\t{ role: \"user\", content: prompt }\n\t\t],\n\t\tresponse_format: { type: \"json_object\" },\n\t\ttemperature: 0.1, // 评分需要一致性\n\t});\n\n\tconst result = completion.choices[0].message.content;\n\tif (!result) {\n\t\treturn { score: 1, reason: \"Judge failed to respond\" };\n\t}\n\n\ttry {\n\t\tconst parsed = JSON.parse(result);\n\t\treturn JudgeOutputSchema.parse(parsed);\n\t} catch (e) {\n\t\tconsole.error(\"Judge output parsing failed:\", result);\n\t\treturn { score: 1, reason: \"Judge output was not valid JSON\" };\n\t}\n}",
      "startLine": 28,
      "endLine": 84,
      "type": "function",
      "name": "judge",
      "embedding": [
        -0.021723035722970963,
        0.0998036116361618,
        0.008808952756226063,
        0.07237645983695984,
        0.06349361687898636,
        -0.0023837073240429163,
        0.024572376161813736,
        0.07076281309127808,
        0.02534486912190914,
        -0.03583201393485069,
        -0.03309692069888115,
        -0.04134467616677284,
        -0.03089597076177597,
        0.028985580429434776,
        0.046514686197042465,
        0.02158476412296295,
        -0.06510606408119202,
        -0.056420207023620605,
        -0.07294858247041702,
        -0.10601767897605896,
        0.03846938908100128,
        0.040876105427742004,
        0.013834293000400066,
        -0.037047117948532104,
        -0.06337261199951172,
        0.009596414864063263,
        0.018369296565651894,
        -0.0038818479515612125,
        -0.08552098274230957,
        -0.011821625754237175,
        -0.027824275195598602,
        -0.06224886700510979,
        0.016882725059986115,
        0.05664515495300293,
        -0.0464506633579731,
        0.06003601849079132,
        -0.0514775849878788,
        -0.0833057165145874,
        0.029660550877451897,
        -0.04012707993388176,
        0.05239299312233925,
        0.07621903717517853,
        -0.040320511907339096,
        -0.11484597623348236,
        0.13642539083957672,
        -0.12109121680259705,
        -0.06835111975669861,
        -0.04024511203169823,
        0.030026884749531746,
        0.05846145376563072,
        -0.05827752873301506,
        0.03220450505614281,
        -0.04679945111274719,
        0.0002398866490693763,
        0.025325754657387733,
        0.05676250532269478,
        -0.056645266711711884,
        -0.02940557152032852,
        -0.03857738524675369,
        -0.11092140525579453,
        0.03577905148267746,
        -0.09941259771585464,
        -0.0021638786420226097,
        -0.0531754344701767,
        0.028974423184990883,
        -0.062137968838214874,
        -0.05183885246515274,
        0.05988660827279091,
        0.004878743086010218,
        0.06290648132562637,
        0.04662942886352539,
        0.05372995510697365,
        0.013053606264293194,
        -0.05814492329955101,
        -0.06368081271648407,
        0.022752637043595314,
        -0.046466726809740067,
        -0.0344354510307312,
        0.02638161927461624,
        0.07748065888881683,
        -0.061339784413576126,
        -0.09692119807004929,
        -0.06337794661521912,
        0.001468153903260827,
        -0.013197018764913082,
        0.031011246144771576,
        0.006846389267593622,
        -0.022824376821517944,
        -0.014446298591792583,
        -0.05100497603416443,
        -0.06177897751331329,
        -0.03996467962861061,
        0.0045807743445038795,
        0.1096339151263237,
        0.07209689915180206,
        0.09518987685441971,
        0.004555977415293455,
        -0.04654907062649727,
        0.004671177361160517,
        0.07314510643482208,
        -0.04550054669380188,
        -0.006682659033685923,
        0.023525357246398926,
        -0.06830792129039764,
        0.026993418112397194,
        0.02227010950446129,
        0.02750573866069317,
        -0.03192703798413277,
        -0.03817285969853401,
        -0.02259458601474762,
        -0.02048119157552719,
        0.06589466333389282,
        0.011445472948253155,
        0.053096700459718704,
        -0.00902269035577774,
        0.0019887215457856655,
        0.01329399086534977,
        0.011637001298367977,
        0.0326337032020092,
        0.13109619915485382,
        0.15147492289543152,
        0.028688810765743256,
        -0.01687336340546608,
        0.06549118459224701,
        0.0814279168844223,
        -0.05196961760520935,
        0.06814677268266678,
        7.543288308548718e-33,
        0.04135177284479141,
        -0.06659266352653503,
        -0.0020853618625551462,
        -0.004480202682316303,
        0.0756501629948616,
        0.027009714394807816,
        0.011915519833564758,
        -0.022237572818994522,
        -0.08598008751869202,
        0.019923703745007515,
        -0.06711646169424057,
        0.03256624564528465,
        0.025936167687177658,
        -0.06354779005050659,
        0.0021235630847513676,
        0.02150394767522812,
        0.015577643178403378,
        0.016510719433426857,
        0.02891698107123375,
        0.05875932797789574,
        0.04673236608505249,
        -0.03644079715013504,
        -0.03164839372038841,
        0.022475343197584152,
        0.014547565951943398,
        -0.025269515812397003,
        0.000678054173476994,
        0.008928706869482994,
        -0.09140734374523163,
        -0.03318725526332855,
        0.04305596649646759,
        -0.0006297771469689906,
        0.027488820254802704,
        -0.0012831101194024086,
        0.05959642678499222,
        -0.020330648869276047,
        0.017779065296053886,
        0.021203605458140373,
        -0.08750521391630173,
        -0.06243782863020897,
        0.012315399013459682,
        -0.020266884937882423,
        -0.05344007909297943,
        0.022959597408771515,
        -0.09177470952272415,
        -0.053665343672037125,
        -0.01790277101099491,
        0.00809174682945013,
        0.0547904334962368,
        0.028735119849443436,
        -0.07740473002195358,
        0.05735773965716362,
        0.049473509192466736,
        -0.01730511337518692,
        0.014132851734757423,
        -0.00916185975074768,
        0.04152387008070946,
        0.06438595801591873,
        0.027940088883042336,
        -0.03856512904167175,
        -0.02288603037595749,
        0.011938923969864845,
        -0.00036118720890954137,
        -0.03009333461523056,
        0.019949542358517647,
        -0.021640224382281303,
        -0.041062355041503906,
        0.007876257412135601,
        0.030957303941249847,
        -0.019323626533150673,
        -0.052146460860967636,
        -0.015170320868492126,
        -0.00016759027494117618,
        -0.014284266158938408,
        0.0004612880584318191,
        -0.06876694411039352,
        -0.0510374940931797,
        -0.02018294483423233,
        0.000767584191635251,
        -0.080558180809021,
        -0.00007877929601818323,
        -0.01645057089626789,
        -0.09034590423107147,
        0.04764947667717934,
        0.012325017713010311,
        0.07688674330711365,
        -0.02917083539068699,
        -0.046155575662851334,
        -0.007262994535267353,
        0.0013728644698858261,
        -0.05826966464519501,
        0.02424672245979309,
        -0.06572603434324265,
        -0.045142773538827896,
        0.014761791564524174,
        -6.471985368879502e-33,
        0.0334148146212101,
        -0.02445913292467594,
        -0.03788302093744278,
        0.048815637826919556,
        0.06607472896575928,
        -0.06613019853830338,
        0.07391607761383057,
        -0.005986310075968504,
        0.002109193243086338,
        0.03365110605955124,
        -0.059253692626953125,
        -0.04143117368221283,
        0.052080120891332626,
        0.017492569983005524,
        0.010716154240071774,
        0.07396087050437927,
        -0.06071068346500397,
        -0.04141361266374588,
        0.05546468123793602,
        -0.047951605170965195,
        0.019356613978743553,
        0.09831546992063522,
        0.03216281160712242,
        0.03223980590701103,
        -0.05780569836497307,
        0.04836336150765419,
        0.0278213769197464,
        -0.022731732577085495,
        -0.04910408705472946,
        -0.02947780303657055,
        -0.021711109206080437,
        0.010973266325891018,
        -0.05610359460115433,
        0.05510402470827103,
        0.016914252191781998,
        -0.08630397915840149,
        0.0934329554438591,
        0.001980295404791832,
        -0.03283262252807617,
        0.0909794494509697,
        0.018635878339409828,
        0.030253322795033455,
        -0.07078170776367188,
        -0.022641675546765327,
        0.022524382919073105,
        0.0011092841159552336,
        0.11908083409070969,
        0.05186885967850685,
        -0.031053556129336357,
        -0.028462160378694534,
        0.019359782338142395,
        -0.041808634996414185,
        -0.08852533251047134,
        0.054052259773015976,
        -0.014181208796799183,
        -0.11172867566347122,
        0.00016911901184357703,
        -0.12041401863098145,
        -0.006167993880808353,
        0.052256133407354355,
        -0.03820088505744934,
        -0.06715001165866852,
        0.0910881757736206,
        -0.011414342559874058,
        0.06791595369577408,
        -0.046439278870821,
        -0.014130123890936375,
        -0.02260313741862774,
        0.10542452335357666,
        0.04446567967534065,
        -0.050758153200149536,
        0.00007023407670203596,
        0.05187123268842697,
        0.037175774574279785,
        0.07281617075204849,
        0.015747064724564552,
        -0.07784757763147354,
        -0.023579265922307968,
        0.05587431788444519,
        0.015987256541848183,
        -0.03782714903354645,
        -0.028819449245929718,
        0.04022248089313507,
        0.0699743703007698,
        0.04923093691468239,
        0.005887249950319529,
        0.05853285267949104,
        0.09013841301202774,
        -0.04402504488825798,
        0.03715990111231804,
        0.01937992125749588,
        0.011953392066061497,
        -0.005880474112927914,
        -0.0009123675408773124,
        -0.022731788456439972,
        -5.6835009587530294e-8,
        -0.11136011779308319,
        -0.020266614854335785,
        -0.07650937885046005,
        0.07255934178829193,
        -0.06650687754154205,
        -0.0012045892653986812,
        0.03750871121883392,
        -0.050321392714977264,
        0.030858958140015602,
        -0.06743282824754715,
        -0.009055355563759804,
        0.010384097695350647,
        -0.014568494632840157,
        -0.025031737983226776,
        0.02405373565852642,
        -0.005198362749069929,
        0.0033574788831174374,
        0.12911272048950195,
        -0.04387876018881798,
        0.05091581121087074,
        0.08021137118339539,
        0.022763920947909355,
        -0.06419280171394348,
        -0.014159325510263443,
        0.08062200993299484,
        0.0010485074017196894,
        0.005212063435465097,
        0.015477895736694336,
        -0.05669011175632477,
        -0.023918526247143745,
        0.002363296225667,
        -0.035158671438694,
        0.06223667412996292,
        -0.004856651183217764,
        0.026725485920906067,
        -0.02163938619196415,
        0.10806410759687424,
        -0.008095286786556244,
        0.022044330835342407,
        0.1194840744137764,
        0.051552750170230865,
        0.11193189769983292,
        -0.034008726477622986,
        -0.014376635663211346,
        -0.007626333273947239,
        -0.07503039389848709,
        0.004837133921682835,
        -0.0005459498497657478,
        0.11508987098932266,
        -0.024022269994020462,
        -0.008481315337121487,
        -0.0861867293715477,
        -0.09385325014591217,
        -0.034480273723602295,
        -0.012167375534772873,
        -0.033489298075437546,
        0.06983327120542526,
        -0.0063183060847222805,
        -0.060266513377428055,
        0.0029739649035036564,
        0.10234496742486954,
        -0.0253171194344759,
        -0.0260264053940773,
        -0.03124055825173855
      ]
    },
    {
      "id": "3132e27b",
      "filePath": "03-evals/src/index.ts",
      "content": "import 'dotenv/config';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport OpenAI from 'openai';\nimport { z } from 'zod';\nimport { EvalCase } from './types';\nimport { runEval, printReportSummary } from './runner';\n\n// ============================================\n// 加载测试数据\n// ============================================\n\nconst casesPath = path.join(__dirname, '../data/cases.json');\nconst casesData = JSON.parse(fs.readFileSync(casesPath, 'utf-8'));\nconst testCases: EvalCase[] = casesData.cases;\n\n// ============================================\n// 待评估的 Agent（来自 Project 1 的简化版）\n// ============================================\n\nconst client = new OpenAI({\n\tapiKey: process.env.OPENAI_API_KEY,\n\tbaseURL: process.env.OPENAI_BASE_URL,\n});\n\n// 定义提取的 Schema\nconst ProfileSchema = z.object({\n\tname: z.string().nullable().describe(\"Person's full name\"),\n\ttitle: z.string().nullable().describe(\"Job title or role\"),\n\tcompany: z.string().nullable().describe(\"Company or organization name\"),\n\tyears: z.number().nullable().describe(\"Years of experience\")\n});\n\n/**\n * 简化版的结构化提取器（待评估对象）\n * 这是我们要测试的 Agent\n */",
      "startLine": 1,
      "endLine": 37,
      "type": "other",
      "embedding": [
        -0.0657525286078453,
        0.09626466780900955,
        -0.061769288033246994,
        0.04943757504224777,
        -0.008326881565153599,
        -0.04863222688436508,
        0.01587548851966858,
        0.0784463956952095,
        -0.03567805141210556,
        -0.05724494904279709,
        0.02015778422355652,
        -0.049195751547813416,
        -0.02116474322974682,
        -0.018276840448379517,
        0.04158207029104233,
        0.013474106788635254,
        -0.102393738925457,
        0.015272436663508415,
        -0.03932170942425728,
        -0.07003173232078552,
        0.05239884927868843,
        0.01892150193452835,
        0.05761547014117241,
        -0.07625104486942291,
        -0.002499867230653763,
        0.009664200246334076,
        0.060074470937252045,
        0.03418651223182678,
        -0.07455293834209442,
        0.006744200363755226,
        0.04944419488310814,
        0.04259313642978668,
        -0.03354130685329437,
        0.026338357478380203,
        0.08770807832479477,
        0.0948568731546402,
        -0.074542336165905,
        -0.08769357204437256,
        0.020335372537374496,
        -0.001490586786530912,
        0.037894800305366516,
        0.10878898203372955,
        -0.054077789187431335,
        -0.08265776187181473,
        0.07335984706878662,
        -0.07495375722646713,
        -0.05204304680228233,
        -0.06576024740934372,
        -0.024895763024687767,
        0.002795955864712596,
        -0.1305990219116211,
        -0.025271138176321983,
        -0.057476818561553955,
        0.0013757669366896152,
        0.05221104994416237,
        0.03654494136571884,
        -0.06666992604732513,
        -0.0027312401216477156,
        -0.016686195507645607,
        -0.05484386160969734,
        0.033183515071868896,
        -0.02383403852581978,
        0.03778337314724922,
        -0.03839108347892761,
        -0.015749361366033554,
        -0.0029430410359054804,
        -0.07976333051919937,
        0.041827522218227386,
        -0.030133536085486412,
        -0.06410694867372513,
        -0.006827383767813444,
        0.05370623990893364,
        -0.04765435308218002,
        0.02452239766716957,
        -0.12071838229894638,
        -0.0345148928463459,
        -0.026250457391142845,
        -0.0046705869026482105,
        0.022052645683288574,
        -0.06411039084196091,
        -0.030899811536073685,
        -0.08193347603082657,
        -0.024889618158340454,
        0.05336908623576164,
        -0.009115573950111866,
        0.08949782699346542,
        -0.006405329797416925,
        -0.04064470902085304,
        0.0001693357335170731,
        0.011533671990036964,
        -0.04319726675748825,
        -0.01945004053413868,
        -0.02845018170773983,
        0.022315461188554764,
        0.05468381568789482,
        0.07987246662378311,
        -0.0015259934589266777,
        0.05144137144088745,
        -0.000709083687979728,
        0.0778123140335083,
        -0.043562233448028564,
        -0.04527135565876961,
        0.042034611105918884,
        0.022342734038829803,
        -0.07278243452310562,
        0.010733895003795624,
        0.10173509269952774,
        0.003353860229253769,
        -0.07285130769014359,
        0.006952482275664806,
        -0.026184365153312683,
        0.08111606538295746,
        -0.03051874041557312,
        -0.08234916627407074,
        -0.06176033243536949,
        -0.00521416449919343,
        -0.012073548510670662,
        -0.02162976562976837,
        0.020664671435952187,
        0.1135791465640068,
        0.13276860117912292,
        -0.00757224578410387,
        -0.04504193365573883,
        0.04800086468458176,
        -0.012461247853934765,
        -0.050893913954496384,
        0.10363878309726715,
        1.255070763332347e-32,
        -0.04397676885128021,
        -0.04806842282414436,
        0.0032709736842662096,
        0.03504584729671478,
        0.04968538507819176,
        -0.024329205974936485,
        0.0667848289012909,
        0.025216136127710342,
        -0.11101891845464706,
        -0.0006020665168762207,
        -0.13408593833446503,
        0.042414214462041855,
        -0.07179314643144608,
        -0.07844353467226028,
        -0.09259532392024994,
        0.0018843980506062508,
        0.03704943135380745,
        0.07330527156591415,
        0.006750780623406172,
        0.007145751733332872,
        0.06073334068059921,
        0.028521385043859482,
        -0.05250344052910805,
        0.05105452984571457,
        -0.011233626864850521,
        -0.03314834088087082,
        -0.010426891036331654,
        -0.01170547865331173,
        -0.0426957793533802,
        -0.014894417487084866,
        0.13697557151317596,
        -0.03381378948688507,
        0.012923209927976131,
        0.03415507450699806,
        0.015409190207719803,
        0.023239783942699432,
        0.0001987830619327724,
        -0.026908550411462784,
        -0.11196036636829376,
        -0.0582352913916111,
        -0.008906996808946133,
        -0.004922938998788595,
        0.0050695836544036865,
        0.020977864041924477,
        -0.07381763309240341,
        0.023688040673732758,
        -0.08686575293540955,
        0.004697183612734079,
        0.03998083993792534,
        -0.02648518607020378,
        -0.06424582749605179,
        0.05227688327431679,
        0.031760573387145996,
        0.05331255868077278,
        0.033645786345005035,
        -0.0032529972959309816,
        0.009780843742191792,
        0.02993718348443508,
        -0.0515260212123394,
        0.011224934831261635,
        -0.06413193047046661,
        0.08785832673311234,
        -0.018022414296865463,
        -0.017628248780965805,
        0.05420144647359848,
        -0.0018630924168974161,
        0.007715494371950626,
        -0.038779500871896744,
        0.0376221127808094,
        -0.012171585112810135,
        -0.06519325077533722,
        -0.019678043201565742,
        0.037748049944639206,
        0.017854489386081696,
        0.030923835933208466,
        -0.06966082751750946,
        -0.03632589057087898,
        -0.040762919932603836,
        -0.02952481061220169,
        -0.09400088340044022,
        -0.020480282604694366,
        -0.0015086036873981357,
        0.0069139678962528706,
        0.027853762730956078,
        0.019021745771169662,
        0.038705386221408844,
        -0.02474924735724926,
        -0.05453876778483391,
        0.017699887976050377,
        0.03257899731397629,
        -0.03428323566913605,
        -0.00407981825992465,
        -0.062231194227933884,
        -0.013358389027416706,
        -0.014380534179508686,
        -1.3978155973933067e-32,
        0.023619798943400383,
        -0.023710044100880623,
        0.04228118807077408,
        -0.03343837335705757,
        0.03752583637833595,
        -0.02382805198431015,
        0.04765249788761139,
        0.022876759991049767,
        -0.0008088977774605155,
        0.04493984207510948,
        -0.0010622346308082342,
        -0.0575035959482193,
        0.030288152396678925,
        -0.031084654852747917,
        0.013696093112230301,
        0.09743085503578186,
        -0.06402022391557693,
        -0.03314431384205818,
        0.036706648766994476,
        0.010901304893195629,
        -0.035276349633932114,
        0.1386372148990631,
        0.01401294581592083,
        0.0358893908560276,
        -0.04380510747432709,
        0.03315373510122299,
        0.0190728846937418,
        0.025051895529031754,
        -0.03311587870121002,
        -0.021202122792601585,
        -0.03195388242602348,
        0.0019320470746606588,
        -0.13266302645206451,
        0.06290946900844574,
        -0.04886539652943611,
        -0.0917113721370697,
        0.07093194127082825,
        0.02508046105504036,
        0.00625721225515008,
        0.001885694800876081,
        0.032437898218631744,
        -0.00011537835234776139,
        -0.04734833538532257,
        -0.024208666756749153,
        0.032336171716451645,
        -0.049169816076755524,
        0.055948689579963684,
        0.07327443361282349,
        -0.0022642563562840223,
        -0.06440383940935135,
        0.0458197183907032,
        -0.045349542051553726,
        -0.06538324803113937,
        0.017895391210913658,
        0.03321231156587601,
        -0.025882411748170853,
        0.028704462572932243,
        -0.15631243586540222,
        -0.08715595304965973,
        -0.04137001186609268,
        0.06000753119587898,
        -0.07119853049516678,
        0.06929038465023041,
        0.061064213514328,
        0.027361532673239708,
        -0.06625696271657944,
        -0.031193453818559647,
        0.01558041200041771,
        0.013917641714215279,
        -0.10047624260187149,
        -0.08443871885538101,
        -0.034949447959661484,
        0.0383370965719223,
        0.023152848705649376,
        0.05022710934281349,
        0.013666648417711258,
        -0.05549583584070206,
        -0.023227272555232048,
        0.0683869943022728,
        0.055450133979320526,
        -0.028133045881986618,
        0.03391960263252258,
        -0.011699382215738297,
        0.06901968270540237,
        0.022305257618427277,
        0.000029962495318613946,
        0.008572389371693134,
        0.06105237081646919,
        -0.03377988189458847,
        -0.0010683153523132205,
        -0.03537581488490105,
        -0.014062370173633099,
        -0.02087125927209854,
        -0.01970476470887661,
        -0.03387976437807083,
        -7.163729520698325e-8,
        -0.12939073145389557,
        -0.050361886620521545,
        -0.07439972460269928,
        0.02514594793319702,
        -0.0680212676525116,
        -0.034662675112485886,
        0.010408937931060791,
        -0.04917226731777191,
        0.06590382754802704,
        -0.026303157210350037,
        -0.00021430477499961853,
        0.03699290007352829,
        -0.06831464171409607,
        0.015665410086512566,
        -0.05670375004410744,
        0.00937420129776001,
        -0.012689068913459778,
        0.05948871001601219,
        -0.036599427461624146,
        0.012817173264920712,
        0.05869302898645401,
        0.011565504595637321,
        -0.02253769338130951,
        -0.006156831048429012,
        0.05840979889035225,
        -0.04191845655441284,
        -0.030772892758250237,
        -0.024559535086154938,
        -0.0032842482905834913,
        0.019680697470903397,
        -0.03471783921122551,
        -0.029000289738178253,
        0.0838986486196518,
        -0.03658657521009445,
        -0.013236268423497677,
        0.014577609486877918,
        0.14275631308555603,
        -0.016091972589492798,
        -0.024648059159517288,
        0.1058194488286972,
        0.0522637702524662,
        0.07687462121248245,
        -0.0006058018188923597,
        0.007922259159386158,
        0.01633048802614212,
        -0.08624979853630066,
        0.004766800906509161,
        0.02134830318391323,
        0.13256317377090454,
        0.018297094851732254,
        -0.031067131087183952,
        -0.09726469218730927,
        -0.0506288968026638,
        -0.0610114224255085,
        -0.04000471159815788,
        -0.024626316502690315,
        0.021783223375678062,
        0.033713970333337784,
        -0.04457789659500122,
        0.026551568880677223,
        0.04790752753615379,
        -0.03716184198856354,
        0.06757103651762009,
        0.03741741180419922
      ]
    },
    {
      "id": "3d8d51ff",
      "filePath": "03-evals/src/index.ts",
      "content": "async function extractorAgent(input: string): Promise<string> {\n\tif (!input || input.trim() === \"\") {\n\t\treturn JSON.stringify({ name: null, title: null, company: null, years: null });\n\t}\n\n\tconst completion = await client.chat.completions.create({\n\t\tmodel: process.env.OPENAI_MODEL || 'gpt-4o',\n\t\tmessages: [\n\t\t\t{\n\t\t\t\trole: \"system\",\n\t\t\t\tcontent: `You are a structured data extractor.\nExtract the following fields from the user input:\n- name: Person's full name (string or null)\n- title: Job title or role (string or null)\n- company: Company or organization name (string or null)\n- years: Years of experience as a number (number or null)\n\nReturn ONLY valid JSON with these 4 fields. If a field cannot be determined, use null.`\n\t\t\t},\n\t\t\t{ role: \"user\", content: input }\n\t\t],\n\t\tresponse_format: { type: \"json_object\" },\n\t\ttemperature: 0,\n\t});\n\n\tconst result = completion.choices[0].message.content;\n\tif (!result) {\n\t\treturn JSON.stringify({ error: \"No response from LLM\" });\n\t}\n\n\t// 清洗 markdown\n\tconst clean = result.replace(/```json/g, '').replace(/```/g, '').trim();\n\n\ttry {\n\t\t// 验证格式\n\t\tJSON.parse(clean);\n\t\treturn clean;\n\t} catch {\n\t\treturn JSON.stringify({ error: \"Invalid JSON from LLM\", raw: clean });\n\t}\n}\n\n// ============================================\n// 主入口\n// ============================================\n\n// 每个 Case 运行次数（用于降低随机波动）\n// 设为 1 则单次运行，设为 3 则每个 Case 跑 3 次取平均\nconst REPEATS = parseInt(process.env.EVAL_REPEATS || '1', 10);",
      "startLine": 38,
      "endLine": 87,
      "type": "function",
      "name": "extractorAgent",
      "embedding": [
        -0.09725204855203629,
        0.10232527554035187,
        0.10415548086166382,
        0.025654904544353485,
        0.01699303276836872,
        -0.06616996228694916,
        -0.0059565892443060875,
        0.005987110547721386,
        0.02511204406619072,
        -0.05768829584121704,
        0.002199040027335286,
        -0.043872252106666565,
        -0.05363963171839714,
        0.010275183245539665,
        0.04514198377728462,
        0.02750472165644169,
        -0.11230987310409546,
        -0.0027934664394706488,
        -0.06565293669700623,
        -0.09936714917421341,
        0.05548172444105148,
        0.040887635201215744,
        0.00648218858987093,
        -0.01898697018623352,
        -0.00763008464127779,
        0.013132047839462757,
        0.021366141736507416,
        -0.03028881549835205,
        -0.05816283077001572,
        0.01392781175673008,
        0.02377936989068985,
        -0.030041923746466637,
        0.03779321536421776,
        0.004463247023522854,
        0.013549395836889744,
        0.07525575906038284,
        -0.07174119353294373,
        -0.07820268720388412,
        0.07312077283859253,
        -0.01771964132785797,
        0.009717551060020924,
        0.022260533645749092,
        -0.04111136123538017,
        -0.0779392197728157,
        0.09916869550943375,
        -0.09892302751541138,
        -0.026731383055448532,
        -0.05885028466582298,
        0.002512756735086441,
        0.04353504627943039,
        -0.06468482315540314,
        0.02261348068714142,
        -0.05282355472445488,
        0.05840906873345375,
        0.03660779073834419,
        0.027996918186545372,
        -0.06427745521068573,
        -0.045655086636543274,
        -0.04355102404952049,
        -0.0630800798535347,
        0.030847150832414627,
        -0.09221888333559036,
        -0.03503654897212982,
        -0.024563049897551537,
        0.010503982193768024,
        -0.02722608670592308,
        -0.0364622138440609,
        0.04995090514421463,
        0.00945767667144537,
        -0.010577891021966934,
        0.0188002847135067,
        0.03917102515697479,
        -0.08125703781843185,
        0.018797146156430244,
        -0.09852480888366699,
        0.0355946309864521,
        -0.027071114629507065,
        -0.008692089468240738,
        -0.010452507063746452,
        0.0859469547867775,
        -0.027149461209774017,
        -0.09476727247238159,
        -0.029734455049037933,
        0.013914708979427814,
        -0.049312904477119446,
        0.08450233191251755,
        -0.06191891059279442,
        -0.03652072325348854,
        0.016892794519662857,
        -0.0636788159608841,
        -0.05485527962446213,
        -0.026115501299500465,
        -0.0016321715665981174,
        0.07506401091814041,
        0.051890622824430466,
        0.08104117959737778,
        -0.0188892912119627,
        0.011479171924293041,
        -0.03235311061143875,
        0.09318923950195312,
        -0.06638287752866745,
        -0.05025479942560196,
        -0.0005597061826847494,
        -0.025662507861852646,
        -0.020023027434945107,
        0.010447191074490547,
        0.017679668962955475,
        -0.012549033388495445,
        -0.04524935781955719,
        -0.011029676534235477,
        -0.03115166164934635,
        0.07016436010599136,
        -0.02195160649716854,
        0.035692501813173294,
        -0.03137176111340523,
        0.01844141259789467,
        0.023458220064640045,
        -0.02528533712029457,
        0.0215480774641037,
        0.14610156416893005,
        0.1288973093032837,
        0.01685328781604767,
        -0.04887353628873825,
        0.07601950317621231,
        0.027235878631472588,
        -0.050403885543346405,
        0.12924960255622864,
        1.175262264156397e-32,
        0.04905623570084572,
        0.0408148393034935,
        0.01187318004667759,
        -0.02564496360719204,
        0.034054502844810486,
        0.01981257274746895,
        -0.022924935445189476,
        -0.006618565414100885,
        -0.03590310737490654,
        -0.006478853523731232,
        -0.04539882391691208,
        -0.04585927352309227,
        0.005841062869876623,
        -0.10389338433742523,
        -0.04173506796360016,
        -0.02717379853129387,
        0.0545886792242527,
        0.007907706312835217,
        0.04694162681698799,
        0.033868540078401566,
        0.03269670531153679,
        0.03227483108639717,
        -0.04213910922408104,
        0.06407365202903748,
        0.007538522128015757,
        -0.031261228024959564,
        0.002479083603248,
        0.018373185768723488,
        -0.030599189922213554,
        -0.02134438417851925,
        0.08025144785642624,
        -0.056739456951618195,
        0.008560610935091972,
        0.05570366978645325,
        0.049877237528562546,
        0.0339263416826725,
        0.003636021399870515,
        -0.008352360688149929,
        -0.07206762582063675,
        -0.060844678431749344,
        -0.0032535912469029427,
        -0.009655814617872238,
        -0.025421075522899628,
        0.013112729415297508,
        -0.04830002412199974,
        -0.07838010042905807,
        -0.03122517466545105,
        -0.029686447232961655,
        0.02732264995574951,
        0.0002715177251957357,
        -0.019435739144682884,
        0.08749191462993622,
        0.03871549665927887,
        0.026446841657161713,
        0.02162231132388115,
        -0.030566390603780746,
        0.06026340648531914,
        0.027433691546320915,
        0.010731976479291916,
        -0.00872056744992733,
        -0.014937556348741055,
        0.01460357941687107,
        0.017326051369309425,
        -0.04359884560108185,
        0.03867025673389435,
        -0.023831665515899658,
        -0.024401508271694183,
        -0.010302633047103882,
        0.0035515723284333944,
        -0.048923902213573456,
        -0.06767167150974274,
        -0.03357011079788208,
        0.026587342843413353,
        0.023914456367492676,
        -0.01994267664849758,
        -0.07696318626403809,
        -0.05122474208474159,
        0.0008129262132570148,
        0.018834123387932777,
        -0.07223865389823914,
        0.010676651261746883,
        -0.044351376593112946,
        -0.06267350912094116,
        0.08289328962564468,
        0.023979227989912033,
        0.09734726697206497,
        0.0170915350317955,
        -0.03432879224419594,
        0.051004018634557724,
        0.045117832720279694,
        -0.04672672972083092,
        -0.0011754907900467515,
        -0.041481055319309235,
        -0.03850900009274483,
        -0.009654564782977104,
        -1.0972748261350616e-32,
        0.08369603008031845,
        -0.008382976055145264,
        0.002217539120465517,
        0.01763126812875271,
        0.05085214599967003,
        -0.06658516824245453,
        0.07894954085350037,
        0.05383811518549919,
        0.029623810201883316,
        0.01171328965574503,
        0.0008948207832872868,
        -0.026307502761483192,
        0.023887962102890015,
        0.003757175523787737,
        -0.02438262104988098,
        0.10639461874961853,
        -0.014498322270810604,
        -0.035121772438287735,
        -0.028535012155771255,
        -0.007844008505344391,
        0.020872632041573524,
        0.11849251389503479,
        -0.029286861419677734,
        0.039786625653505325,
        -0.07308461517095566,
        0.046191275119781494,
        0.007432239595800638,
        0.035552334040403366,
        -0.05903850123286247,
        -0.0038364059291779995,
        -0.04908266291022301,
        -0.011694878339767456,
        -0.09138008952140808,
        0.047796569764614105,
        0.00631775613874197,
        -0.08336109668016434,
        0.06593561917543411,
        0.11062793433666229,
        -0.022556675598025322,
        0.05393574759364128,
        0.0462409071624279,
        -0.013347241096198559,
        -0.06628324091434479,
        0.013911033980548382,
        0.009550556540489197,
        -0.044354215264320374,
        0.037912651896476746,
        0.04496600106358528,
        -0.03482424467802048,
        -0.04651442915201187,
        0.02627415396273136,
        -0.026114799082279205,
        -0.05604810640215874,
        0.03644239157438278,
        0.025508398190140724,
        -0.06542032212018967,
        0.05861831456422806,
        -0.14484599232673645,
        -0.04410203546285629,
        -0.0029359718319028616,
        -0.03652026504278183,
        -0.054769448935985565,
        0.07998582720756531,
        -0.004892002325505018,
        0.09658599644899368,
        -0.06410091370344162,
        -0.01690029539167881,
        0.03691062703728676,
        0.07791460305452347,
        -0.07048283517360687,
        -0.03738483041524887,
        -0.021371006965637207,
        0.020481759682297707,
        0.01659240387380123,
        0.07907945662736893,
        -0.032661281526088715,
        -0.08573540300130844,
        -0.0630762055516243,
        0.06286346167325974,
        0.06309787184000015,
        -0.021702906116843224,
        -0.016299467533826828,
        0.03303610533475876,
        0.1082594022154808,
        0.05363224446773529,
        -0.021388275548815727,
        -0.007368065882474184,
        0.050281133502721786,
        -0.047989267855882645,
        -0.047746673226356506,
        -0.022254489362239838,
        -0.02020534873008728,
        -0.004489864222705364,
        0.023342324420809746,
        0.01618596911430359,
        -6.671611885167295e-8,
        -0.10809582471847534,
        -0.06405603140592575,
        -0.07151702791452408,
        0.030933942645788193,
        0.0020076516084372997,
        -0.03054267168045044,
        0.008854962885379791,
        -0.07477676123380661,
        0.09618155658245087,
        -0.07335448265075684,
        -0.01214433740824461,
        0.04725886136293411,
        -0.07021288573741913,
        -0.06279455870389938,
        0.0012683800887316465,
        -0.02220159024000168,
        -0.039573848247528076,
        0.10478319227695465,
        -0.045233793556690216,
        0.016275223344564438,
        0.08140004426240921,
        0.01203042920678854,
        -0.01763872429728508,
        -0.024364951997995377,
        0.0915427953004837,
        0.007371244952082634,
        -0.012640897184610367,
        0.025147125124931335,
        -0.02696256712079048,
        0.02237066812813282,
        -0.007487945258617401,
        -0.027545878663659096,
        0.08351960778236389,
        -0.01637060008943081,
        -0.004878344014286995,
        -0.010666580870747566,
        0.14706118404865265,
        -0.021102305501699448,
        0.002482645446434617,
        0.08052531629800797,
        0.12524458765983582,
        0.09930868446826935,
        -0.08029446750879288,
        0.004742330405861139,
        -0.039481986314058304,
        -0.09522193670272827,
        0.038381434977054596,
        -0.019223179668188095,
        0.1208999827504158,
        0.004568119533360004,
        -0.009609539993107319,
        -0.044627003371715546,
        -0.0467701219022274,
        -0.023222509771585464,
        -0.05043704807758331,
        -0.08176318556070328,
        0.05040725693106651,
        0.01634138636291027,
        -0.0519413948059082,
        0.017865000292658806,
        0.1292683333158493,
        -0.049962788820266724,
        0.039874568581581116,
        -0.020563239231705666
      ]
    },
    {
      "id": "2a273842",
      "filePath": "03-evals/src/index.ts",
      "content": "async function main() {\n\tconst modelName = process.env.OPENAI_MODEL || 'gpt-4o';\n\n\tconsole.log(\"🚀 Project 3: Evaluation System\");\n\tconsole.log(`🤖 Model: ${modelName}`);\n\tconsole.log(`📂 Loaded ${testCases.length} test cases`);\n\tif (REPEATS > 1) {\n\t\tconsole.log(`🔄 Repeats per case: ${REPEATS}`);\n\t}\n\n\t// 运行评估\n\tconst report = await runEval(testCases, extractorAgent, REPEATS);\n\n\t// 打印报告\n\tprintReportSummary(report);\n\n\t// 生成文件名：时间戳 + 模型名\n\tconst timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, 19);\n\tconst safeModelName = modelName.replace(/[^a-zA-Z0-9-]/g, '_');\n\tconst baseFilename = `${timestamp}_${safeModelName}`;\n\n\t// 确保 reports 目录存在\n\tconst reportsDir = path.join(__dirname, '../data/reports');\n\tif (!fs.existsSync(reportsDir)) {\n\t\tfs.mkdirSync(reportsDir, { recursive: true });\n\t}\n\n\t// 保存 JSON 报告\n\tconst jsonPath = path.join(reportsDir, `${baseFilename}.json`);\n\tfs.writeFileSync(jsonPath, JSON.stringify(report, null, 2), 'utf-8');\n\tconsole.log(`📄 JSON report saved to: ${jsonPath}`);\n\n\t// 生成 Markdown 报告\n\tconst mdContent = generateMarkdownReport(report, modelName);\n\tconst mdPath = path.join(reportsDir, `${baseFilename}.md`);\n\tfs.writeFileSync(mdPath, mdContent, 'utf-8');\n\tconsole.log(`📝 Markdown report saved to: ${mdPath}`);\n}\n\n/**\n * 生成 Markdown 格式的评估报告\n */",
      "startLine": 88,
      "endLine": 129,
      "type": "function",
      "name": "main",
      "embedding": [
        -0.059736672788858414,
        0.03762270510196686,
        -0.08335772901773453,
        0.05091360583901405,
        0.02460166998207569,
        -0.006393846124410629,
        -0.04592129588127136,
        0.16230691969394684,
        0.006002894602715969,
        0.04349625110626221,
        0.011337523348629475,
        0.008347278460860252,
        0.029343022033572197,
        -0.04750777781009674,
        -0.03270429000258446,
        0.002908894559368491,
        -0.12929658591747284,
        0.032503820955753326,
        -0.03256234899163246,
        -0.05315166339278221,
        0.04633079469203949,
        0.07947730273008347,
        0.04621466249227524,
        -0.026722481474280357,
        0.03727984428405762,
        -0.01584707200527191,
        0.024244917556643486,
        0.009145699441432953,
        -0.09403938800096512,
        -0.027672624215483665,
        -0.015158496797084808,
        0.013333049602806568,
        -0.04805182293057442,
        -0.006834466475993395,
        0.05059228092432022,
        0.11806265264749527,
        0.025667564943432808,
        -0.09785697609186172,
        0.03288161754608154,
        -0.03642674908041954,
        0.036474741995334625,
        0.10478265583515167,
        -0.0133201377466321,
        -0.08276841044425964,
        0.04837215319275856,
        -0.14307956397533417,
        -0.08120721578598022,
        -0.04269026964902878,
        -0.014795647002756596,
        0.05110621079802513,
        -0.058644410222768784,
        0.005256687756627798,
        -0.06690742820501328,
        0.005116884596645832,
        0.04979685693979263,
        0.019631903618574142,
        -0.02297426015138626,
        -0.015597228892147541,
        -0.06668012589216232,
        -0.039968341588974,
        0.029877470806241035,
        -0.01427537389099598,
        -0.029115064069628716,
        -0.07594118267297745,
        0.03159685060381889,
        -0.014928927645087242,
        -0.026971422135829926,
        0.07595206797122955,
        0.02706257253885269,
        0.013433802872896194,
        -0.05687197670340538,
        0.10414998233318329,
        -0.07358177751302719,
        0.01772206462919712,
        -0.09786223620176315,
        0.027276014909148216,
        0.04334629699587822,
        0.06385662406682968,
        -0.036187827587127686,
        -0.038424789905548096,
        -0.020869074389338493,
        -0.05868199095129967,
        -0.044723622500896454,
        -0.029330244287848473,
        -0.006229245103895664,
        0.0327012874186039,
        0.029840653762221336,
        0.01852582022547722,
        0.021430743858218193,
        -0.0876629576086998,
        -0.07679063826799393,
        0.009253239259123802,
        -0.06374870240688324,
        0.008078118786215782,
        0.02100100927054882,
        0.050714701414108276,
        0.018465107306838036,
        0.0971643403172493,
        0.04295336455106735,
        0.07669791579246521,
        -0.01304553635418415,
        0.022865017876029015,
        0.02838020585477352,
        0.020331310108304024,
        -0.023100387305021286,
        -0.005116717889904976,
        0.013486441224813461,
        0.01930553838610649,
        -0.08503611385822296,
        -0.017218466848134995,
        0.0327298529446125,
        0.0890197679400444,
        -0.031088925898075104,
        -0.022357020527124405,
        0.022519059479236603,
        -0.01698889583349228,
        -0.008458321914076805,
        -0.04605874791741371,
        -0.023714879527688026,
        0.12144744396209717,
        0.12401841580867767,
        0.031002866104245186,
        0.0006253329920582473,
        0.09864039719104767,
        0.06583544611930847,
        -0.049915093928575516,
        0.06688688695430756,
        5.0210917934427535e-33,
        0.0006332638440653682,
        -0.04822291433811188,
        0.06893113255500793,
        0.03144878149032593,
        0.08456360548734665,
        0.042064543813467026,
        0.03507058322429657,
        -0.02331872284412384,
        -0.04359367489814758,
        0.03282160684466362,
        -0.10541581362485886,
        -0.002564870286732912,
        -0.020765557885169983,
        -0.11404788494110107,
        -0.05375583842396736,
        -0.042355574667453766,
        0.021864408627152443,
        -0.0058149234391748905,
        -0.00016766894259490073,
        0.023556146770715714,
        0.10722320526838303,
        -0.0374779999256134,
        -0.047012072056531906,
        0.01628144457936287,
        -0.0319918692111969,
        -0.030721288174390793,
        0.017279837280511856,
        0.0116893220692873,
        -0.053541380912065506,
        -0.024682413786649704,
        0.11891819536685944,
        0.013956844806671143,
        -0.021018462255597115,
        0.019998446106910706,
        0.01737895794212818,
        -0.007818344049155712,
        0.02229481004178524,
        -0.01797751896083355,
        -0.04742227867245674,
        -0.00826036836951971,
        0.030502138659358025,
        0.01583886705338955,
        -0.03987996280193329,
        0.025426896288990974,
        -0.040499456226825714,
        -0.03165086358785629,
        -0.08324185758829117,
        -0.0353393517434597,
        0.011962679214775562,
        -0.05078165605664253,
        -0.04163477569818497,
        0.05494575947523117,
        0.021736249327659607,
        -0.010687124915421009,
        -0.009904138743877411,
        0.024323558434844017,
        -0.010446222499012947,
        -0.061627551913261414,
        -0.007602561265230179,
        0.037845857441425323,
        0.01791928894817829,
        0.028113463893532753,
        -0.03184494376182556,
        0.022744251415133476,
        0.04649677500128746,
        -0.017736434936523438,
        0.04694225639104843,
        0.02406107448041439,
        0.06844629347324371,
        0.041291918605566025,
        -0.0415092371404171,
        -0.04650101065635681,
        0.07903753221035004,
        -0.031090740114450455,
        0.04985566437244415,
        -0.05336742475628853,
        -0.018756551668047905,
        -0.019255824387073517,
        -0.08502577990293503,
        -0.06610939651727676,
        0.03912634402513504,
        -0.007308056112378836,
        -0.07335492968559265,
        -0.012269505299627781,
        0.06856152415275574,
        0.02459157258272171,
        -0.0544234924018383,
        -0.01690261997282505,
        -0.031602874398231506,
        -0.0669672042131424,
        0.05187497287988663,
        0.011864790692925453,
        0.013241028413176537,
        -0.07191004604101181,
        0.007495182100683451,
        -5.6959423655658595e-33,
        0.08999580144882202,
        0.019608359783887863,
        0.05369142070412636,
        -0.033984068781137466,
        0.0389617495238781,
        -0.0654158964753151,
        -0.02187931537628174,
        -0.022215615957975388,
        -0.08598294854164124,
        0.03209305182099342,
        -0.08087694644927979,
        -0.04580448567867279,
        -0.02389526553452015,
        0.006370362360030413,
        0.03287777304649353,
        0.02621389925479889,
        0.016286861151456833,
        -0.08351728320121765,
        -0.01181403361260891,
        -0.010964875109493732,
        0.00861118920147419,
        0.11604726314544678,
        0.07549644261598587,
        0.0474223867058754,
        -0.042871493846178055,
        0.004042409360408783,
        -0.005365010350942612,
        0.04894987866282463,
        -0.05781424418091774,
        -0.02198926918208599,
        -0.026007141917943954,
        0.021201374009251595,
        -0.07591293752193451,
        0.05003732442855835,
        0.00994765292853117,
        -0.08331473171710968,
        0.07166647166013718,
        0.016614876687526703,
        0.021668244153261185,
        0.07443788647651672,
        0.00878006499260664,
        0.01668655313551426,
        -0.029331499710679054,
        -0.018105600029230118,
        0.04946719855070114,
        0.00904165394604206,
        0.08122323453426361,
        0.09197056293487549,
        -0.006125138606876135,
        -0.09110572934150696,
        -0.007305630017071962,
        -0.09191018342971802,
        -0.0758427083492279,
        -0.0014377780025824904,
        0.03252911567687988,
        -0.056513331830501556,
        -0.014829693362116814,
        -0.13253886997699738,
        -0.0635620579123497,
        0.05649615824222565,
        -0.007132462691515684,
        -0.025338269770145416,
        0.02783523127436638,
        -0.07272147387266159,
        0.01698940433561802,
        -0.08208407461643219,
        0.0026229778304696083,
        -0.029696209356188774,
        0.07852191478013992,
        0.0332760252058506,
        -0.11156422644853592,
        0.04266837611794472,
        0.026003286242485046,
        0.024757152423262596,
        0.08036604523658752,
        0.01923076994717121,
        -0.053459033370018005,
        -0.053548961877822876,
        0.021067878231406212,
        0.06124086305499077,
        -0.06104857847094536,
        -0.0031292864587157965,
        -0.027702558785676956,
        0.022362399846315384,
        0.028494730591773987,
        -0.059291377663612366,
        0.0281212218105793,
        0.08045746386051178,
        -0.01902053877711296,
        -0.07553351670503616,
        -0.037326082587242126,
        0.01970028690993786,
        0.04564859718084335,
        -0.006579067558050156,
        -0.007225516717880964,
        -5.0802558604345904e-8,
        -0.05156197398900986,
        -0.025264009833335876,
        -0.08398789912462234,
        0.038937389850616455,
        -0.007416072767227888,
        -0.0045515489764511585,
        -0.020449437201023102,
        -0.03383757174015045,
        0.0737043172121048,
        -0.04905802011489868,
        -0.007841859012842178,
        0.006527953315526247,
        -0.03735223039984703,
        -0.004054413642734289,
        -0.08386556804180145,
        -0.06250972300767899,
        0.03039429895579815,
        0.03779109567403793,
        -0.0386693999171257,
        0.04080423712730408,
        0.029371123760938644,
        0.016845405101776123,
        -0.013518006540834904,
        -0.011778966523706913,
        0.08605633676052094,
        -0.05547086521983147,
        0.050133075565099716,
        0.017172396183013916,
        -0.005486072041094303,
        0.04888244345784187,
        -0.01051179226487875,
        -0.011568425223231316,
        0.04223703220486641,
        -0.010540061630308628,
        -0.022100646048784256,
        -0.057603318244218826,
        0.19441260397434235,
        0.05139332637190819,
        0.018517104908823967,
        0.06936706602573395,
        0.09681248664855957,
        0.1131753921508789,
        -0.011161234229803085,
        0.03847607970237732,
        -0.0633578896522522,
        -0.10277192294597626,
        -0.022087808698415756,
        -0.005095724016427994,
        0.10749069601297379,
        0.026238633319735527,
        -0.012199641205370426,
        -0.05790768563747406,
        -0.020048975944519043,
        -0.002396814525127411,
        -0.012575656175613403,
        -0.0322846919298172,
        0.04417155683040619,
        -0.012379772961139679,
        -0.01438281312584877,
        0.021088307723402977,
        0.05658847838640213,
        -0.043127525597810745,
        0.044330280274152756,
        0.007583577651530504
      ]
    },
    {
      "id": "cfb97db1",
      "filePath": "03-evals/src/index.ts",
      "content": "function generateMarkdownReport(report: import('./types').EvalReport, modelName: string): string {\n\tconst passEmoji = report.pass_rate >= 0.8 ? '✅' : report.pass_rate >= 0.5 ? '⚠️' : '❌';\n\n\tlet md = `# Evaluation Report\n\n## Summary\n\n| Metric | Value |\n|--------|-------|\n| **Model** | ${modelName} |\n| **Run Time** | ${report.run_at} |\n| **Total Cases** | ${report.total_cases} |\n| **Repeats per Case** | ${report.repeats_per_case} |\n| **Passed** | ${report.passed_cases} (${(report.pass_rate * 100).toFixed(1)}%) ${passEmoji} |\n| **Failed** | ${report.failed_cases} |\n| **Average Score** | ${report.average_score.toFixed(2)} / 5 |\n| **Average Latency** | ${report.average_latency_ms.toFixed(0)}ms |\n\n`;\n\n\tif (report.unstable_cases && report.unstable_cases.length > 0) {\n\t\tmd += `## Unstable Cases (Std > 1)\n\n| Case ID | Avg Score | Std Dev |\n|---------|-----------|--------|\n`;\n\t\tfor (const c of report.unstable_cases) {\n\t\t\tmd += `| ${c.case_id} | ${c.score}/5 | ${c.score_std} |\\n`;\n\t\t}\n\t\tmd += '\\n';\n\t}\n\n\tif (report.worst_cases.length > 0) {\n\t\tmd += `## Worst Cases (Score <= 2)\n\n| Case ID | Score | Reason |\n|---------|-------|--------|\n`;\n\t\tfor (const c of report.worst_cases) {\n\t\t\tmd += `| ${c.case_id} | ${c.score}/5 | ${c.reason} |\\n`;\n\t\t}\n\t\tmd += '\\n';\n\t}\n\n\tconst hasMultipleRuns = report.repeats_per_case > 1;\n\n\tif (hasMultipleRuns) {\n\t\tmd += `## All Results\n\n| Case ID | Avg Score | Std | Latency | Reason |",
      "startLine": 130,
      "endLine": 179,
      "type": "function",
      "name": "generateMarkdownReport (part 1)",
      "embedding": [
        0.003806755878031254,
        0.05991702154278755,
        -0.032678134739398956,
        0.05467451363801956,
        0.01891213282942772,
        0.007273704744875431,
        -0.0032460808288306,
        0.11615964770317078,
        0.002705874154344201,
        0.04647456482052803,
        0.014055805280804634,
        -0.03120332956314087,
        0.03755625709891319,
        -0.05990895628929138,
        -0.08592705428600311,
        0.004019536077976227,
        -0.13894367218017578,
        -0.01349708717316389,
        -0.006688824389129877,
        -0.02756844460964203,
        0.02674444392323494,
        0.08717885613441467,
        -0.04636276885867119,
        -0.02432858571410179,
        -0.02049964666366577,
        0.028034336864948273,
        -0.0012027760967612267,
        0.06599081307649612,
        -0.08494629710912704,
        -0.011306560598313808,
        -0.05138745158910751,
        0.023188695311546326,
        0.0010121996747329831,
        0.07205397635698318,
        0.013629968278110027,
        -0.024255452677607536,
        -0.033185627311468124,
        -0.030235953629016876,
        0.006432144902646542,
        0.020817195996642113,
        0.013151586055755615,
        0.025422049686312675,
        0.038828786462545395,
        -0.08826346695423126,
        0.021822327747941017,
        -0.10041951388120651,
        -0.1433819830417633,
        -0.04245160520076752,
        0.00719734700396657,
        0.021091898903250694,
        -0.08183826506137848,
        0.024837208911776543,
        -0.042748305946588516,
        -0.008799117058515549,
        0.05529879033565521,
        -0.014034979045391083,
        -0.017940538004040718,
        -0.06567704677581787,
        -0.04193431884050369,
        -0.12167348712682724,
        0.009776344522833824,
        -0.022036362439393997,
        0.057617850601673126,
        -0.08880386501550674,
        0.09239426255226135,
        -0.013472272083163261,
        -0.033102694898843765,
        0.07193025946617126,
        -0.035233065485954285,
        0.10341405868530273,
        -0.05942431837320328,
        0.0650118738412857,
        -0.0002834034967236221,
        -0.005240439437329769,
        -0.04357272759079933,
        0.026530735194683075,
        -0.003245946718379855,
        -0.015435566194355488,
        0.029295381158590317,
        -0.011903493665158749,
        -0.08398061990737915,
        -0.08507414162158966,
        -0.0748593807220459,
        -0.06268112361431122,
        0.04687123745679855,
        -0.03814917057752609,
        0.10878419876098633,
        -0.0036548220086842775,
        0.0650993138551712,
        -0.06352017819881439,
        -0.006004994735121727,
        0.03511422872543335,
        -0.04191228002309799,
        -0.0033994533587247133,
        0.04417363554239273,
        0.0774487629532814,
        -0.0056144376285374165,
        -0.009438550099730492,
        0.03787043318152428,
        0.059832505881786346,
        -0.024946382269263268,
        0.007006243336945772,
        0.024092698469758034,
        -0.04099160060286522,
        -0.02373318187892437,
        -0.01111648790538311,
        0.08801671862602234,
        0.021257154643535614,
        -0.03991911560297012,
        -0.06057225167751312,
        0.012717386707663536,
        0.07419061660766602,
        0.020974082872271538,
        -0.025081658735871315,
        -0.0005985185271129012,
        0.009539182297885418,
        0.03305770084261894,
        0.012331624515354633,
        0.061176419258117676,
        0.055303286761045456,
        0.07979977875947952,
        0.059817537665367126,
        -0.04839178919792175,
        0.07761263102293015,
        -0.00040104062645696104,
        -0.03078751638531685,
        0.03453321382403374,
        5.7364917778814435e-33,
        -0.04752352088689804,
        -0.11537262797355652,
        -0.00269707920961082,
        -0.039432037621736526,
        0.021237751469016075,
        0.019564969465136528,
        -0.0032320371828973293,
        0.026832815259695053,
        -0.015025178901851177,
        0.05018864572048187,
        -0.108896404504776,
        0.010148221626877785,
        -0.020775804296135902,
        -0.04982952028512955,
        0.006956335622817278,
        -0.02044258452951908,
        0.02783365733921528,
        0.04044758528470993,
        -0.006238911300897598,
        0.012414523400366306,
        0.12054043263196945,
        -0.07004757225513458,
        -0.02046508714556694,
        0.01498502492904663,
        0.01660498045384884,
        -0.007131355348974466,
        0.006036396604031324,
        -0.026807473972439766,
        -0.05866730585694313,
        -0.043042171746492386,
        0.07177376002073288,
        0.02428131364285946,
        -0.0037566160317510366,
        -0.04233858734369278,
        0.041284240782260895,
        -0.010559624992311,
        0.05481173098087311,
        0.04924655705690384,
        0.035962533205747604,
        0.010409310460090637,
        -0.03162173926830292,
        -0.01453942060470581,
        -0.0453188493847847,
        0.0007481514476239681,
        -0.04456457868218422,
        0.01829593814909458,
        -0.029989637434482574,
        -0.020544052124023438,
        0.03853427618741989,
        -0.039628058671951294,
        -0.04069947823882103,
        -0.010981112718582153,
        0.01885593682527542,
        0.011000984348356724,
        -0.034678954631090164,
        0.017508069053292274,
        -0.026074113324284554,
        0.021668395027518272,
        0.013800918124616146,
        0.04754887521266937,
        -0.029039638116955757,
        0.05312522500753403,
        0.01619783230125904,
        -0.06340113282203674,
        0.033191755414009094,
        0.04948066174983978,
        0.07127460837364197,
        0.02754022926092148,
        0.05558140575885773,
        0.04003925994038582,
        -0.01154126226902008,
        -0.009538699872791767,
        0.03940068185329437,
        -0.017228830605745316,
        0.023282067850232124,
        -0.07513409852981567,
        0.025233406573534012,
        -0.07006117701530457,
        -0.040645357221364975,
        -0.10138589143753052,
        -0.055125582963228226,
        0.013912196271121502,
        -0.07234835624694824,
        -0.05383520573377609,
        0.09515009820461273,
        -0.006913349032402039,
        -0.00947502814233303,
        -0.05653298646211624,
        -0.13001269102096558,
        -0.0814739391207695,
        -0.028010521084070206,
        -0.03278940171003342,
        -0.013358031399548054,
        -0.05224884673953056,
        -0.026516392827033997,
        -6.78917929513745e-33,
        -0.0026701129972934723,
        0.024038024246692657,
        0.05202161520719528,
        0.011768870055675507,
        0.01908017508685589,
        -0.030530394986271858,
        -0.0013135505141690373,
        -0.01603582315146923,
        -0.026720255613327026,
        0.02108270488679409,
        -0.03280409052968025,
        -0.10038062930107117,
        -0.05332254245877266,
        0.015577413141727448,
        0.0658031776547432,
        0.08815276622772217,
        -0.06231659650802612,
        -0.03781573474407196,
        0.004338392987847328,
        0.011350669898092747,
        0.016308605670928955,
        0.11680441349744797,
        0.04087960347533226,
        0.06722809374332428,
        -0.09645642340183258,
        0.05927036702632904,
        0.05941067263484001,
        -0.013476778753101826,
        -0.04087083414196968,
        -0.08883796632289886,
        -0.024403603747487068,
        0.016486667096614838,
        -0.040669433772563934,
        0.12047126889228821,
        -0.05462082847952843,
        -0.06924217939376831,
        0.10284312814474106,
        -0.060130905359983444,
        -0.013282686471939087,
        0.09630316495895386,
        0.03466169163584709,
        0.07392328977584839,
        -0.0784628689289093,
        0.007153123151510954,
        0.04918712005019188,
        0.030169153586030006,
        0.10385875403881073,
        0.06490816175937653,
        0.004790593404322863,
        -0.08977208286523819,
        -0.02124999836087227,
        -0.09363251179456711,
        -0.08815444260835648,
        0.040804892778396606,
        -0.07977008074522018,
        -0.02861059457063675,
        -0.01585146225988865,
        -0.07611546665430069,
        -0.08853606134653091,
        0.03304366394877434,
        -0.007395296823233366,
        -0.010470298118889332,
        0.009741730988025665,
        -0.07732529938220978,
        0.06716037541627884,
        0.009776923805475235,
        -0.026270048692822456,
        -0.06981635838747025,
        0.021418798714876175,
        0.09453173726797104,
        -0.056472741067409515,
        0.04079481586813927,
        0.03591502085328102,
        -0.02970964089035988,
        0.03331772983074188,
        0.09164807945489883,
        -0.021743502467870712,
        0.05989247187972069,
        0.03565666452050209,
        0.03970687836408615,
        -0.07083994895219803,
        0.022425049915909767,
        0.051431670784950256,
        0.05003443360328674,
        -0.11437869817018509,
        -0.001079827779904008,
        0.09338957816362381,
        0.07151376456022263,
        -0.013719872571527958,
        0.019327353686094284,
        -0.05234686657786369,
        0.027028752490878105,
        0.07773897796869278,
        0.0006020445725880563,
        -0.02268086187541485,
        -5.7386113638813185e-8,
        -0.0003836964606307447,
        -0.01270910445600748,
        -0.043035682290792465,
        0.024107078090310097,
        -0.02905990742146969,
        0.03938157111406326,
        -0.04462765157222748,
        -0.03733856976032257,
        -0.017343882471323013,
        -0.07685183733701706,
        0.04380422830581665,
        -0.026382727548480034,
        -0.06515590846538544,
        -0.02055339887738228,
        -0.015941519290208817,
        -0.04712139815092087,
        -0.05090155079960823,
        0.0475597009062767,
        -0.060094431042671204,
        0.01797454245388508,
        0.024234691634774208,
        0.023668643087148666,
        -0.03723405674099922,
        -0.016765637323260307,
        0.03112102299928665,
        -0.020087003707885742,
        0.032113511115312576,
        0.01129116676747799,
        0.015744313597679138,
        0.02058178372681141,
        0.030133526772260666,
        0.002285048132762313,
        0.0457746647298336,
        -0.023026129230856895,
        0.02447265200316906,
        -0.026818696409463882,
        0.16101688146591187,
        0.024161143228411674,
        0.01569017954170704,
        0.09239517897367477,
        -0.031642522662878036,
        0.08098164945840836,
        -0.06358585506677628,
        -0.013154513202607632,
        0.040967270731925964,
        -0.08810035139322281,
        -0.049170609563589096,
        -0.003089219331741333,
        0.12933094799518585,
        -0.012304957024753094,
        0.017622793093323708,
        -0.08863542973995209,
        -0.06383319944143295,
        0.00697752833366394,
        0.0006091078394092619,
        -0.07673488557338715,
        0.020395880565047264,
        0.04670841991901398,
        -0.07036076486110687,
        0.00014634421677328646,
        0.04216066747903824,
        -0.06623903661966324,
        0.02343672700226307,
        0.02921692095696926
      ]
    },
    {
      "id": "aba79882",
      "filePath": "03-evals/src/index.ts",
      "content": "if (hasMultipleRuns) {\n\t\tmd += `## All Results\n\n| Case ID | Avg Score | Std | Latency | Reason |\n|---------|-----------|-----|---------|--------|\n`;\n\t\tfor (const r of report.results) {\n\t\t\tconst emoji = r.score >= 4 ? '✅' : r.score >= 3 ? '⚠️' : '❌';\n\t\t\tconst stdNote = r.score_std > 1 ? ' ⚠️' : '';\n\t\t\tmd += `| ${r.case_id} | ${r.score}/5 ${emoji} | ${r.score_std}${stdNote} | ${r.latency_ms}ms | ${r.reason} |\\n`;\n\t\t}\n\t} else {\n\t\tmd += `## All Results\n\n| Case ID | Score | Latency | Reason |\n|---------|-------|---------|--------|\n`;\n\t\tfor (const r of report.results) {\n\t\t\tconst emoji = r.score >= 4 ? '✅' : r.score >= 3 ? '⚠️' : '❌';\n\t\t\tmd += `| ${r.case_id} | ${r.score}/5 ${emoji} | ${r.latency_ms}ms | ${r.reason} |\\n`;\n\t\t}\n\t}\n\n\treturn md;\n}\n\nif (require.main === module) {\n\tmain();\n}",
      "startLine": 175,
      "endLine": 204,
      "type": "function",
      "name": "generateMarkdownReport (part 2)",
      "embedding": [
        -0.022651147097349167,
        0.09012917429208755,
        -0.011337190866470337,
        0.021784095093607903,
        0.06691005080938339,
        0.04436539486050606,
        0.06561203300952911,
        0.07726027816534042,
        0.007393228821456432,
        -0.005271025002002716,
        0.02635066956281662,
        -0.01626560091972351,
        0.03997405618429184,
        -0.04760727286338806,
        -0.024577239528298378,
        -0.016402484849095345,
        -0.09830395877361298,
        -0.004959067329764366,
        -0.025992725044488907,
        -0.12193873524665833,
        0.03947118669748306,
        0.03817715868353844,
        -0.02568233385682106,
        -0.03620745986700058,
        -0.03262773156166077,
        0.10747797787189484,
        0.02658449485898018,
        0.039774052798748016,
        -0.04059228673577309,
        -0.013309532776474953,
        -0.01428817305713892,
        -0.005183798260986805,
        -0.0035282913595438004,
        0.07806054502725601,
        -0.005469280295073986,
        0.06252474337816238,
        -0.05407601594924927,
        -0.028885118663311005,
        0.016520487144589424,
        0.022999942302703857,
        0.011984136886894703,
        0.02221737429499626,
        -0.016176549717783928,
        -0.07394511252641678,
        0.07712700963020325,
        -0.06432027369737625,
        -0.10235562920570374,
        -0.009984041564166546,
        -0.018958885222673416,
        0.003833967726677656,
        -0.07890164107084274,
        0.012033206410706043,
        -0.0463554672896862,
        -0.03094811737537384,
        0.09115684777498245,
        0.00018733444449026138,
        -0.023601403459906578,
        -0.07370906323194504,
        -0.014379482716321945,
        -0.1422252058982849,
        -0.009345878846943378,
        -0.038260504603385925,
        0.07734274864196777,
        -0.10164952278137207,
        0.07276679575443268,
        -0.04359999671578407,
        -0.032396670430898666,
        0.07121700793504715,
        0.02875359356403351,
        0.05702943354845047,
        -0.050896935164928436,
        0.08576342463493347,
        -0.010811038315296173,
        0.020001322031021118,
        -0.1275777965784073,
        0.03891017287969589,
        -0.031552497297525406,
        -0.06224612146615982,
        0.019091757014393806,
        0.03460543975234032,
        -0.03987155109643936,
        -0.07866796851158142,
        -0.04178568720817566,
        -0.03805174306035042,
        0.06413140892982483,
        -0.010933567769825459,
        0.058931346982717514,
        -0.04356508329510689,
        -0.012453975155949593,
        -0.06900495290756226,
        -0.02515004388988018,
        -0.021776584908366203,
        -0.02017640508711338,
        0.04985126852989197,
        0.06073011830449104,
        0.0570632666349411,
        -0.03291237726807594,
        -0.004539507906883955,
        0.060106195509433746,
        0.10146624594926834,
        -0.04527030512690544,
        0.05768206715583801,
        0.045209627598524094,
        -0.012368695810437202,
        -0.05911973863840103,
        0.008353129960596561,
        0.05327180400490761,
        -0.0030350652523338795,
        -0.046592727303504944,
        -0.0961785539984703,
        -0.01691235415637493,
        0.0814545601606369,
        0.04940841346979141,
        -0.029563259333372116,
        -0.025574369356036186,
        -0.015541532076895237,
        0.04388038441538811,
        0.0071083237417042255,
        0.07611331343650818,
        0.058937013149261475,
        0.08704017847776413,
        0.021905509755015373,
        -0.060721270740032196,
        0.08275630325078964,
        0.01853702962398529,
        -0.030147157609462738,
        0.024780554696917534,
        6.049941019948053e-33,
        -0.060973066836595535,
        -0.10096488147974014,
        -0.031303148716688156,
        -0.02569805271923542,
        0.03410583361983299,
        0.032758548855781555,
        -0.027639951556921005,
        -0.013192973099648952,
        -0.050787899643182755,
        0.03481253236532211,
        -0.08037864416837692,
        -0.017949232831597328,
        -0.009950773790478706,
        -0.03019420988857746,
        -0.02181249111890793,
        -0.0333840474486351,
        0.0703623816370964,
        0.014497279189527035,
        0.02623620815575123,
        0.008976034820079803,
        0.06906264275312424,
        -0.030803045257925987,
        0.0006935661076568067,
        0.038339484483003616,
        0.012964465655386448,
        -0.024046767503023148,
        0.04933343827724457,
        -0.04888784512877464,
        -0.004324852488934994,
        -0.05147581174969673,
        0.08375542610883713,
        0.0010458448668941855,
        -0.010357516817748547,
        0.024911129847168922,
        0.07232696563005447,
        0.027642961591482162,
        0.03100481815636158,
        -0.009191442281007767,
        -0.023287702351808548,
        -0.017850248143076897,
        -0.02421567402780056,
        -0.0027187191881239414,
        -0.07422731816768646,
        0.006998306605964899,
        -0.045906100422143936,
        0.03158200904726982,
        -0.06349553167819977,
        -0.009938946925103664,
        0.026674149557948112,
        -0.032652273774147034,
        -0.030042381957173347,
        0.0575282908976078,
        -0.000035281216696603224,
        -0.00884960126131773,
        0.010148325935006142,
        -0.026933850720524788,
        -0.012841569259762764,
        0.021663125604391098,
        0.011067836545407772,
        0.020186977460980415,
        -0.05776657909154892,
        0.04248998314142227,
        -0.02784653753042221,
        -0.00992507766932249,
        0.06095685437321663,
        0.033970631659030914,
        0.06373181194067001,
        0.01352345198392868,
        0.08267480880022049,
        -0.0054223970510065556,
        -0.020590517669916153,
        -0.015447795391082764,
        0.06594298779964447,
        0.011085853911936283,
        -0.02104911208152771,
        -0.009670011699199677,
        -0.07677032798528671,
        -0.07614823430776596,
        -0.01095673255622387,
        -0.09663069248199463,
        -0.023516952991485596,
        -0.020053375512361526,
        -0.07084796577692032,
        -0.04137410223484039,
        0.07340548187494278,
        -0.005056502763181925,
        -0.04998158663511276,
        -0.1031944677233696,
        -0.05105976387858391,
        -0.01827642321586609,
        -0.04478852450847626,
        0.00989488884806633,
        -0.012391048483550549,
        -0.06993083655834198,
        -0.03488422930240631,
        -5.673726624361272e-33,
        0.04502889886498451,
        -0.00693952850997448,
        0.007334875408560038,
        0.014747772365808487,
        0.013475780375301838,
        -0.018525924533605576,
        0.03869902715086937,
        -0.046085670590400696,
        -0.02385035529732704,
        0.07101208716630936,
        -0.03465932607650757,
        -0.0905952975153923,
        0.007962956093251705,
        0.003690215526148677,
        0.03868633881211281,
        0.14146266877651215,
        -0.05329068377614021,
        0.024621063843369484,
        0.0008971124771051109,
        0.008333264850080013,
        -0.023842692375183105,
        0.1457865685224533,
        0.03675602376461029,
        0.03608368709683418,
        -0.07706418633460999,
        0.08420463651418686,
        0.06357523053884506,
        -0.034043412655591965,
        -0.09644993394613266,
        -0.09018134325742722,
        -0.016374865546822548,
        -0.011325966566801071,
        -0.043946415185928345,
        0.1115231141448021,
        -0.05906262248754501,
        -0.005734216421842575,
        0.05816994979977608,
        -0.07005146890878677,
        -0.0155966030433774,
        0.08886624872684479,
        0.06647254526615143,
        0.06697376072406769,
        -0.028650688007473946,
        0.02726357989013195,
        0.013229280710220337,
        0.009761197492480278,
        0.011403534561395645,
        0.09103722870349884,
        0.004667232744395733,
        -0.08631399273872375,
        -0.05080275610089302,
        -0.07613839209079742,
        -0.04993826895952225,
        -0.03592827916145325,
        -0.023112785071134567,
        -0.07327244430780411,
        0.018964407965540886,
        -0.05271310731768608,
        -0.10505128651857376,
        0.047217655926942825,
        0.024398431181907654,
        -0.03313574194908142,
        0.02750498801469803,
        -0.03859628736972809,
        0.0845210999250412,
        -0.06126684322953224,
        0.010287505574524403,
        -0.046909887343645096,
        0.07912728190422058,
        0.04813268780708313,
        -0.023588698357343674,
        0.041395172476768494,
        0.0528399758040905,
        0.007940960116684437,
        0.0512748658657074,
        0.05621114745736122,
        -0.04403485730290413,
        0.0781082734465599,
        0.0447348952293396,
        0.03455004841089249,
        -0.06609054654836655,
        -0.030607949942350388,
        0.042286764830350876,
        0.07469025254249573,
        -0.12854504585266113,
        0.030959423631429672,
        0.0856746956706047,
        0.08777869492769241,
        0.029277091845870018,
        0.007945436984300613,
        -0.02718007192015648,
        0.03458164632320404,
        0.08425194025039673,
        0.005944429896771908,
        0.03875969722867012,
        -5.6578191021117163e-8,
        -0.01926577091217041,
        -0.1046285554766655,
        -0.11083629727363586,
        0.01961054839193821,
        -0.03056849166750908,
        0.008803943172097206,
        -0.043007221072912216,
        -0.036902252584695816,
        0.0027080830186605453,
        -0.0660366415977478,
        0.05058833584189415,
        0.004531933460384607,
        -0.0776190459728241,
        -0.052250154316425323,
        -0.0038838074542582035,
        -0.06596514582633972,
        -0.029791273176670074,
        0.03830568864941597,
        -0.02553430385887623,
        0.004146427847445011,
        0.0603838674724102,
        0.07457580417394638,
        -0.021602965891361237,
        0.03962370380759239,
        0.05097386613488197,
        -0.04966846853494644,
        0.047328900545835495,
        0.010291369631886482,
        -0.02512231655418873,
        0.003176401136443019,
        0.049376342445611954,
        -0.010593020357191563,
        0.03422164171934128,
        -0.05694729834794998,
        0.0407223217189312,
        -0.044372621923685074,
        0.12835693359375,
        0.010977565310895443,
        0.03147651627659798,
        0.10732964426279068,
        0.03605034574866295,
        0.043021366000175476,
        -0.05173817649483681,
        0.0040764943696558475,
        -0.015970733016729355,
        -0.06300455331802368,
        -0.04524491727352142,
        -0.02745625749230385,
        0.09733741730451584,
        -0.02543720230460167,
        -0.01627093367278576,
        -0.11854910105466843,
        -0.04747940972447395,
        -0.0010156688513234258,
        -0.0023414804600179195,
        -0.041423533111810684,
        0.013903189450502396,
        0.07278841733932495,
        -0.00487873237580061,
        -0.009062997065484524,
        0.06310547888278961,
        -0.008267879486083984,
        0.011837620288133621,
        -0.0010697193210944533
      ]
    },
    {
      "id": "b8c32347",
      "filePath": "02-deep-research/src/types.ts",
      "content": "export type ResearchState = {\n\tgoal: string;\n\titeration: number;\n\tmax_iterations: number;\n\tgathered_info: string[];\n\tvisited_urls: string[];      // Dedup: URLs already visited\n\tsearched_queries: string[];  // Dedup: Queries already searched\n\tlogs: string[];\n};\n\nexport const INITIAL_STATE: ResearchState = {\n\tgoal: \"\",\n\titeration: 0,\n\tmax_iterations: 5,\n\tgathered_info: [],\n\tvisited_urls: [],\n\tsearched_queries: [],\n\tlogs: []\n};",
      "startLine": 1,
      "endLine": 20,
      "type": "other",
      "embedding": [
        -0.05032997205853462,
        0.07525842636823654,
        0.034688640385866165,
        0.06617724150419235,
        -0.01186720747500658,
        -0.02822648547589779,
        0.00984172523021698,
        0.024107705801725388,
        0.0031125477980822325,
        0.054443929344415665,
        -0.06938795000314713,
        0.019270287826657295,
        -0.09751009196043015,
        0.019180288538336754,
        -0.013393121771514416,
        0.023483430966734886,
        -0.11542772501707077,
        -0.048949290066957474,
        -0.00153932289686054,
        -0.0898868516087532,
        0.08051621913909912,
        0.05313137546181679,
        0.01606055721640587,
        -0.006311326753348112,
        0.027026431635022163,
        -0.0054673971608281136,
        -0.030160939320921898,
        -0.07478249818086624,
        0.09890691936016083,
        0.06732213497161865,
        0.017901120707392693,
        0.023397602140903473,
        -0.05018147826194763,
        0.11891461163759232,
        0.038126666098833084,
        0.03378920629620552,
        -0.10642854869365692,
        -0.035477764904499054,
        0.00820114091038704,
        -0.011266418732702732,
        0.04993806406855583,
        0.09375610202550888,
        0.002301465719938278,
        -0.07900610566139221,
        0.009332360699772835,
        -0.06504134088754654,
        -0.07655011862516403,
        -0.03670670464634895,
        0.0291622132062912,
        0.03826480358839035,
        -0.06085110828280449,
        -0.020027615129947662,
        -0.07299119234085083,
        -0.05750018358230591,
        0.10763534158468246,
        0.026346586644649506,
        -0.05644094571471214,
        -0.06032824143767357,
        -0.008131629787385464,
        -0.05226308852434158,
        0.07280533015727997,
        -0.07073822617530823,
        0.01570170372724533,
        -0.10683000832796097,
        0.07671613246202469,
        0.00693300599232316,
        -0.06779731810092926,
        0.09829028695821762,
        0.10357852280139923,
        0.05897153541445732,
        -0.0077049145475029945,
        0.04489978775382042,
        -0.03186759725213051,
        -0.01996256783604622,
        0.034265995025634766,
        -0.05614086240530014,
        -0.11132609099149704,
        -0.0151714738458395,
        0.021866902709007263,
        -0.05656904727220535,
        0.007849025540053844,
        -0.07153957337141037,
        0.03615191951394081,
        0.08150043338537216,
        0.032584723085165024,
        -0.009289240464568138,
        0.02856910228729248,
        -0.05913868919014931,
        0.07530183345079422,
        -0.08384399861097336,
        -0.03047364205121994,
        -0.08119378983974457,
        -0.023910755291581154,
        0.04370610788464546,
        -0.023822451010346413,
        0.04418754205107689,
        -0.03922019526362419,
        0.019004536792635918,
        0.027522122487425804,
        0.0321810282766819,
        -0.0043905554339289665,
        -0.008433802053332329,
        0.0929863303899765,
        0.020553184673190117,
        -0.14188402891159058,
        -0.02040683478116989,
        0.044914230704307556,
        0.053866032510995865,
        0.019852668046951294,
        0.06738802045583725,
        0.014964967034757137,
        0.07822179794311523,
        0.0020915085915476084,
        0.049715183675289154,
        -0.05016092211008072,
        -0.013817925937473774,
        -0.06931392103433609,
        -0.03341815620660782,
        0.00008595383405918255,
        0.15514495968818665,
        0.07038446515798569,
        -0.034923385828733444,
        0.00014024846313986927,
        -0.01207271683961153,
        -0.032124750316143036,
        -0.020397929474711418,
        0.07328801602125168,
        4.73936693985293e-33,
        0.006554701831191778,
        0.009184977039694786,
        -0.03368527442216873,
        0.03075547330081463,
        0.006604866124689579,
        0.0652085542678833,
        0.005145047791302204,
        -0.0473637729883194,
        -0.11134666204452515,
        0.06576665490865707,
        -0.08802394568920135,
        0.0680941790342331,
        -0.05488932505249977,
        0.008098313584923744,
        -0.012282118201255798,
        -0.0853724554181099,
        0.03911573439836502,
        0.030906356871128082,
        0.004858603235334158,
        0.016342846676707268,
        0.06576757878065109,
        0.041262757033109665,
        -0.007015521638095379,
        -0.04014820605516434,
        0.049803588539361954,
        -0.032333772629499435,
        -0.027520915493369102,
        -0.0072997636161744595,
        -0.08296804875135422,
        0.006704096682369709,
        0.0501549132168293,
        0.015712596476078033,
        -0.011118334718048573,
        0.06419818103313446,
        0.06278274953365326,
        0.06724903732538223,
        0.08605258911848068,
        0.03237280994653702,
        -0.08296006172895432,
        -0.043827831745147705,
        0.00443565146997571,
        0.029802711680531502,
        -0.015775004401803017,
        -0.021229993551969528,
        -0.0872143805027008,
        -0.047844819724559784,
        -0.0832991674542427,
        -0.013040151447057724,
        0.01671394519507885,
        0.006057270802557468,
        -0.08457408845424652,
        0.08468969166278839,
        -0.05927775427699089,
        -0.10342390835285187,
        0.0848231166601181,
        -0.01574774459004402,
        0.04925645887851715,
        0.015323983505368233,
        0.04544546455144882,
        0.012760564684867859,
        0.07324256002902985,
        0.0014671642566099763,
        0.004417589865624905,
        0.00403963727876544,
        0.0008509523468092084,
        0.04235955327749252,
        0.050510283559560776,
        0.02130783721804619,
        0.0864812582731247,
        0.001812720438465476,
        0.0019217043882235885,
        0.029262607917189598,
        -0.031985148787498474,
        -0.03347050026059151,
        0.02498607151210308,
        -0.0411994606256485,
        -0.023836202919483185,
        0.023613039404153824,
        -0.03774067014455795,
        -0.017796557396650314,
        -0.004532212391495705,
        -0.1398242712020874,
        -0.08495815098285675,
        0.09524184465408325,
        0.06592360138893127,
        -0.03970716893672943,
        -0.06976799666881561,
        -0.08261317759752274,
        0.005384789314121008,
        0.024123024195432663,
        -0.06295014917850494,
        0.00886999350041151,
        -0.015501726418733597,
        -0.05493498966097832,
        -0.07135607302188873,
        -5.1829731612563216e-33,
        0.07702579349279404,
        -0.001892784028314054,
        0.02266068197786808,
        0.028385519981384277,
        -0.02048979327082634,
        -0.050034113228321075,
        0.05448688194155693,
        -0.04952828586101532,
        -0.019180499017238617,
        0.08483842760324478,
        0.06618933379650116,
        0.008694273419678211,
        0.026593945920467377,
        -0.043859727680683136,
        0.01857590489089489,
        0.07864841818809509,
        -0.00042466341983526945,
        -0.0794844925403595,
        -0.007663239724934101,
        -0.049186013638973236,
        -0.011085686273872852,
        0.011591082438826561,
        -0.052518993616104126,
        0.05764700472354889,
        -0.0645952820777893,
        0.07453439384698868,
        0.07751341164112091,
        0.003107030177488923,
        -0.018903663381934166,
        -0.05026712641119957,
        -0.007551853079348803,
        -0.0320669524371624,
        -0.09295192360877991,
        0.03919481486082077,
        -0.06515064090490341,
        0.05547741428017616,
        0.054525502026081085,
        0.044561680406332016,
        -0.02080470137298107,
        -0.01493232510983944,
        0.03647813946008682,
        0.047703154385089874,
        -0.055104613304138184,
        0.02310449257493019,
        -0.01399809867143631,
        -0.06953734159469604,
        0.04892436042428017,
        0.09180905669927597,
        0.008243749849498272,
        -0.08605139702558517,
        0.06584841012954712,
        -0.0450141504406929,
        -0.00934892799705267,
        -0.04448176547884941,
        -0.03870194032788277,
        -0.006987723987549543,
        -0.008271662518382072,
        -0.06604915112257004,
        -0.06594990193843842,
        0.000902871135622263,
        0.008378888480365276,
        -0.056454114615917206,
        -0.052915655076503754,
        0.000038592363125644624,
        -0.0245574451982975,
        -0.08120842278003693,
        -0.08653515577316284,
        0.008703306317329407,
        0.013959039933979511,
        0.0021434673108160496,
        -0.021923355758190155,
        0.027802763506770134,
        0.02900894358754158,
        0.004785375203937292,
        0.011482423171401024,
        -0.010103913955390453,
        0.00584047706797719,
        0.007992876693606377,
        0.1263875812292099,
        -0.004666038788855076,
        -0.05061759799718857,
        0.03641413152217865,
        0.03305387124419212,
        0.003603559685871005,
        0.04843759164214134,
        0.026321668177843094,
        -0.06048772111535072,
        0.09965664148330688,
        -0.020998384803533554,
        0.01983816921710968,
        -0.041722603142261505,
        -0.06412211060523987,
        -0.040283769369125366,
        -0.003349883947521448,
        0.0026722473558038473,
        -4.4562007417425775e-8,
        -0.13556645810604095,
        -0.026418697088956833,
        -0.055714432150125504,
        0.018619287759065628,
        0.08231037855148315,
        -0.05412546172738075,
        0.01934429630637169,
        0.06374479085206985,
        -0.013098599389195442,
        -0.05868019163608551,
        -0.03517165035009384,
        0.05141458660364151,
        -0.03445867449045181,
        0.030131746083498,
        0.013293704017996788,
        -0.01828407309949398,
        0.04589484632015228,
        0.0005764008965343237,
        -0.042530909180641174,
        -0.01834004931151867,
        -0.0119210509583354,
        0.009993335232138634,
        0.03238844871520996,
        0.00915260799229145,
        0.012145036831498146,
        -0.013865289278328419,
        0.006073337979614735,
        0.015923278406262398,
        0.01944911666214466,
        0.053395867347717285,
        -0.03271312639117241,
        0.037622448056936264,
        -0.04260093346238136,
        -0.04836855083703995,
        -0.013491916470229626,
        -0.00833123829215765,
        0.03284251689910889,
        0.01431827899068594,
        -0.01279811467975378,
        -0.05560373514890671,
        0.03278529644012451,
        0.048970386385917664,
        0.04015659913420677,
        0.07937775552272797,
        -0.04638638347387314,
        -0.03972412273287773,
        -0.029970157891511917,
        0.022386623546481133,
        0.07498060911893845,
        -0.0310529638081789,
        0.01643194444477558,
        -0.05261724442243576,
        -0.04345911368727684,
        0.06168072298169136,
        -0.02955070324242115,
        -0.01268786657601595,
        0.025026608258485794,
        -0.0057935104705393314,
        -0.039188165217638016,
        0.015348363667726517,
        0.1047939881682396,
        -0.07542009651660919,
        -0.03814620524644852,
        -0.014139418490231037
      ]
    },
    {
      "id": "537be287",
      "filePath": "02-deep-research/src/tools.ts",
      "content": "import { z } from 'zod';\nimport { tavily } from '@tavily/core';\nimport OpenAI from 'openai';\n\n// ============================================\n// 初始化客户端\n// ============================================\n\n// Tavily 客户端：用于搜索和网页内容提取\nconst tavilyClient = tavily({ apiKey: process.env.TAVILY_KEY });\n\n// OpenAI 客户端：用于内容总结\nconst openai = new OpenAI({\n\tapiKey: process.env.OPENAI_API_KEY,\n\tbaseURL: process.env.OPENAI_BASE_URL,\n});\n\n// ============================================\n// Tool 1: 搜索工具\n// ============================================\n\nexport const SearchToolSchema = z.object({\n\tquery: z.string().describe(\"The search query to send to Google\")\n});\n\nexport type SearchResult = {\n\turl: string;\n\ttitle: string;\n\tsnippet: string;\n};\n\n/**\n * 执行真实的网络搜索\n */",
      "startLine": 1,
      "endLine": 34,
      "type": "other",
      "embedding": [
        -0.09164906293153763,
        0.07737680524587631,
        -0.004165671765804291,
        0.08361243456602097,
        -0.022402066737413406,
        -0.03489147499203682,
        0.04617108404636383,
        0.05784093961119652,
        -0.0002482206327840686,
        -0.029259834438562393,
        -0.04750186204910278,
        -0.03775075823068619,
        0.018382659181952477,
        -0.058615174144506454,
        0.05891021713614464,
        0.07023344188928604,
        -0.06799008697271347,
        -0.008923765271902084,
        -0.09147729724645615,
        -0.0316954031586647,
        0.09219501912593842,
        0.05078371986746788,
        0.09252092987298965,
        -0.05141422897577286,
        -0.04193754121661186,
        -0.015547169372439384,
        0.016200607642531395,
        -0.07516103982925415,
        -0.018680907785892487,
        0.057941507548093796,
        0.002172306180000305,
        0.03953422233462334,
        -0.078172467648983,
        0.10054449737071991,
        0.06706689298152924,
        0.10857639461755753,
        -0.06435566395521164,
        -0.07347691804170609,
        0.03446526825428009,
        -0.05458500236272812,
        0.04871008172631264,
        0.06636779755353928,
        -0.04998844489455223,
        -0.11007697135210037,
        0.07350709289312363,
        -0.006648288108408451,
        -0.046864040195941925,
        -0.06227212771773338,
        -0.028526244685053825,
        -0.0364999920129776,
        -0.14918960630893707,
        -0.04028603062033653,
        -0.08847960829734802,
        -0.051750607788562775,
        0.07056304067373276,
        0.015124157071113586,
        -0.0958959236741066,
        -0.035813163965940475,
        0.04519140347838402,
        -0.06262606382369995,
        0.05243898555636406,
        -0.09039163589477539,
        0.04881686717271805,
        -0.049567628651857376,
        0.009841629303991795,
        0.021225545555353165,
        -0.06402261555194855,
        -0.010063210502266884,
        0.025790847837924957,
        -0.08415445685386658,
        -0.04568779468536377,
        0.04371242597699165,
        -0.03324513137340546,
        0.013953587971627712,
        -0.06563173234462738,
        -0.03156761825084686,
        -0.05236426740884781,
        -0.024368906393647194,
        -0.0022984077222645283,
        -0.05363956093788147,
        0.009585153311491013,
        -0.0448782779276371,
        0.01714959926903248,
        0.07513940334320068,
        0.06558193266391754,
        0.058397240936756134,
        0.034316398203372955,
        -0.11143824458122253,
        0.054203491657972336,
        -0.021150430664420128,
        -0.04497216269373894,
        -0.06091786548495293,
        -0.009071438573300838,
        0.05663514509797096,
        0.10082705318927765,
        0.01196438167244196,
        0.01080191321671009,
        0.014374014921486378,
        -0.015305896289646626,
        0.056344613432884216,
        0.03520948812365532,
        0.00725219864398241,
        0.02742822840809822,
        -0.06155817210674286,
        -0.06791572272777557,
        0.038976527750492096,
        0.06806078553199768,
        0.028605889528989792,
        -0.049231354147195816,
        -0.00915684923529625,
        -0.04489753395318985,
        0.04683502018451691,
        0.025028370320796967,
        -0.11419051140546799,
        -0.06929749995470047,
        -0.020229561254382133,
        -0.008514129556715488,
        -0.07035103440284729,
        0.03271092101931572,
        0.09764611721038818,
        0.08722611516714096,
        -0.0020936359651386738,
        -0.10283496230840683,
        -0.009091032668948174,
        -0.026537856087088585,
        -0.014795401133596897,
        0.08161276578903198,
        1.581738292437159e-32,
        -0.03103364259004593,
        -0.0065580797381699085,
        -0.0262885894626379,
        -0.022218722850084305,
        0.0012958272127434611,
        0.04551386088132858,
        0.0775858536362648,
        0.03254968672990799,
        -0.11501788347959518,
        0.0017069862224161625,
        -0.12558066844940186,
        0.025677548721432686,
        -0.11145384609699249,
        -0.0508013479411602,
        -0.07309304922819138,
        -0.013042817823588848,
        0.018923277035355568,
        0.021083950996398926,
        0.00912318006157875,
        0.031703099608421326,
        0.03207090124487877,
        0.04009279981255531,
        -0.02548527531325817,
        0.022787993773818016,
        -0.011040355078876019,
        -0.03257790952920914,
        -0.0329471118748188,
        -0.0932672768831253,
        -0.07250801473855972,
        -0.027395781129598618,
        0.10043001919984818,
        -0.06144961342215538,
        -0.03680701181292534,
        0.02879866398870945,
        0.010615595616400242,
        -0.01037252601236105,
        0.045468851923942566,
        -0.008638500235974789,
        -0.11485850065946579,
        -0.0534600205719471,
        0.004016886465251446,
        0.026364780962467194,
        -0.019761057570576668,
        -0.01963656023144722,
        -0.006269059609621763,
        0.013730059377849102,
        -0.10667236894369125,
        -0.03640235960483551,
        0.03868306055665016,
        -0.06052973493933678,
        -0.05894899740815163,
        0.06622150540351868,
        -0.02999851107597351,
        0.013453861698508263,
        0.04698820784687996,
        -0.013702483847737312,
        0.020987575873732567,
        0.056132081896066666,
        -0.005526703782379627,
        0.010867283679544926,
        -0.06073473021388054,
        0.01604427583515644,
        0.047088589519262314,
        0.015208019874989986,
        0.06716408580541611,
        -0.020761914551258087,
        0.04392409697175026,
        0.03329649195075035,
        -0.000543114438187331,
        -0.005618424620479345,
        -0.02589481510221958,
        -0.03299328684806824,
        0.01777290180325508,
        0.02263554371893406,
        0.021574988961219788,
        -0.09738952666521072,
        -0.02032821625471115,
        -0.04312221705913544,
        0.06765200942754745,
        -0.028784282505512238,
        -0.016382798552513123,
        -0.044487930834293365,
        -0.026204459369182587,
        0.04573438689112663,
        0.0002936816308647394,
        0.055378299206495285,
        -0.025816701352596283,
        -0.10437994450330734,
        0.047646425664424896,
        0.010135560296475887,
        -0.04439130052924156,
        -0.02120846137404442,
        -0.0697442963719368,
        -0.049904465675354004,
        -0.05148205906152725,
        -1.631757928053349e-32,
        0.05688941478729248,
        -0.019086845219135284,
        0.00030270032584667206,
        0.014713134616613388,
        0.016014771535992622,
        -0.036926429718732834,
        0.0039812917821109295,
        -0.049352262169122696,
        0.0024614722933620214,
        0.05284162983298302,
        0.028538931161165237,
        -0.022664610296487808,
        0.08939433842897415,
        -0.05158226937055588,
        0.023375514894723892,
        0.0981859415769577,
        -0.03296465426683426,
        -0.0054889339953660965,
        -0.022724149748682976,
        0.029758721590042114,
        -0.027853948995471,
        0.098147913813591,
        -0.054124604910612106,
        0.06087583675980568,
        -0.01854623481631279,
        0.0664583221077919,
        0.05431672930717468,
        0.04870394989848137,
        -0.003426674287766218,
        -0.0008620801381766796,
        -0.02414899878203869,
        0.04262561723589897,
        -0.12356621026992798,
        0.08689741045236588,
        -0.08659861981868744,
        -0.03199198842048645,
        0.060880303382873535,
        0.01503293402493,
        0.01438132207840681,
        -0.0022234064526855946,
        0.020388901233673096,
        -0.03193807229399681,
        -0.057423532009124756,
        -0.04259558767080307,
        0.044641539454460144,
        -0.026757650077342987,
        -0.006597665138542652,
        0.07413588464260101,
        -0.02437264285981655,
        -0.036752618849277496,
        0.0894935205578804,
        -0.0332467183470726,
        -0.08723346889019012,
        -0.04770433530211449,
        0.032436881214380264,
        -0.04788446053862572,
        0.005985759198665619,
        -0.1319575011730194,
        -0.09768889099359512,
        -0.0608317106962204,
        0.039862193167209625,
        -0.05753543972969055,
        0.05804518610239029,
        0.0176262054592371,
        0.03930646553635597,
        -0.017383502796292305,
        -0.03265392407774925,
        0.007114586886018515,
        0.026734845712780952,
        -0.07791589200496674,
        -0.03715018182992935,
        -0.006399649661034346,
        0.07447850704193115,
        -0.004251538310199976,
        0.041789401322603226,
        0.048622872680425644,
        -0.014429212547838688,
        0.01737125776708126,
        0.10986123979091644,
        0.03565048426389694,
        -0.03733748942613602,
        0.02387770265340805,
        0.05236249417066574,
        0.062105271965265274,
        -0.020866937935352325,
        -0.032047029584646225,
        -0.03146753087639809,
        0.06579610705375671,
        -0.027137048542499542,
        -0.03400276228785515,
        -0.04467766359448433,
        -0.05981312319636345,
        -0.05224534869194031,
        0.004644797649234533,
        -0.010151312686502934,
        -7.280457481328995e-8,
        -0.10798995196819305,
        0.002494183834642172,
        -0.09955760091543198,
        0.030576953664422035,
        -0.016255881637334824,
        0.0196077860891819,
        -0.015829293057322502,
        -0.009148417972028255,
        -0.006420835852622986,
        -0.02896793745458126,
        0.014207309111952782,
        0.02988484688103199,
        -0.03464508056640625,
        0.013642731122672558,
        -0.013354443944990635,
        -0.0015723231481388211,
        -0.015170336700975895,
        -0.003728993237018585,
        -0.014939799904823303,
        -0.04781592637300491,
        0.06640511006116867,
        0.003861773293465376,
        0.048288002610206604,
        0.0032313703559339046,
        0.061805933713912964,
        -0.03423919528722763,
        -0.04300294071435928,
        0.007936068810522556,
        0.030686592683196068,
        0.025481197983026505,
        -0.03913530707359314,
        -0.05640952289104462,
        0.04450982064008713,
        -0.021988218650221825,
        0.03561066463589668,
        0.006632699631154537,
        0.100901298224926,
        -0.05260973051190376,
        -0.05710295960307121,
        0.060032498091459274,
        0.09262647479772568,
        0.07149350643157959,
        0.021094607189297676,
        -0.0007657356909476221,
        -0.04970516264438629,
        -0.0372965931892395,
        0.010042252019047737,
        0.011089976876974106,
        0.12192529439926147,
        0.06648103892803192,
        -0.005263838451355696,
        -0.06008639931678772,
        -0.00948667898774147,
        0.01626724936068058,
        -0.036265697330236435,
        -0.0028431680984795094,
        0.009150764904916286,
        -0.005290890112519264,
        -0.04141855239868164,
        0.013349954038858414,
        0.010748214088380337,
        0.011705487035214901,
        0.03856858238577843,
        0.03219061717391014
      ]
    },
    {
      "id": "dca51306",
      "filePath": "02-deep-research/src/tools.ts",
      "content": "export async function searchGoogle(query: string): Promise<SearchResult[]> {\n\tconsole.log(`🔎 [Tavily] Searching for: \"${query}\"`);\n\n\ttry {\n\t\tconst response = await tavilyClient.search(query, {\n\t\t\tmaxResults: 5,\n\t\t\tsearchDepth: \"basic\",\n\t\t});\n\n\t\treturn response.results.map(r => ({\n\t\t\turl: r.url,\n\t\t\ttitle: r.title,\n\t\t\tsnippet: r.content.slice(0, 300)\n\t\t}));\n\t} catch (e: any) {\n\t\tconsole.error(\"Tavily Error:\", e.message);\n\t\treturn [];\n\t}\n}\n\n// ============================================\n// Tool 2: 网页访问工具\n// ============================================\n\nexport const VisitToolSchema = z.object({\n\turl: z.string().describe(\"The URL to visit and read\")\n});\n\n/**\n * 访问网页并提取内容\n */",
      "startLine": 35,
      "endLine": 65,
      "type": "function",
      "name": "searchGoogle",
      "embedding": [
        -0.08087670058012009,
        0.09757622331380844,
        0.02424561232328415,
        0.103084035217762,
        -0.010256723500788212,
        -0.01993095688521862,
        -0.009052610956132412,
        0.03632352128624916,
        0.026292646303772926,
        -0.05862627923488617,
        -0.07657337188720703,
        -0.009370760060846806,
        -0.005534348543733358,
        -0.030901048332452774,
        0.028121694922447205,
        -0.003346868557855487,
        -0.08107275515794754,
        -0.006853163242340088,
        -0.03932543471455574,
        -0.05184205621480942,
        0.10200855135917664,
        0.09697197377681732,
        0.08772158622741699,
        -0.04867062717676163,
        -0.038355279713869095,
        -0.025493154302239418,
        -0.08505503088235855,
        -0.11851488798856735,
        -0.02097315341234207,
        0.02306390553712845,
        0.038516346365213394,
        -0.0045458185486495495,
        -0.06753972172737122,
        0.07877931743860245,
        0.06507415324449539,
        0.08073119074106216,
        -0.10159431397914886,
        -0.07187352329492569,
        0.05938864126801491,
        -0.03763763606548309,
        0.017057335004210472,
        0.09728741645812988,
        -0.047425925731658936,
        -0.08839993178844452,
        0.09047834575176239,
        -0.0730363205075264,
        -0.04797836020588875,
        -0.06230006739497185,
        -0.005189923569560051,
        0.02621488831937313,
        -0.09580641984939575,
        -0.013515885919332504,
        -0.09216630458831787,
        -0.035121090710163116,
        0.0994979664683342,
        0.04370080679655075,
        -0.07619671523571014,
        -0.038259658962488174,
        0.0169423408806324,
        -0.07420628517866135,
        0.075560562312603,
        -0.1327168494462967,
        0.025963516905903816,
        -0.04599831625819206,
        0.028724081814289093,
        -0.025053929537534714,
        -0.05463453754782677,
        0.01920200325548649,
        0.05020856484770775,
        0.018705638125538826,
        -0.05088234692811966,
        0.030628511682152748,
        -0.026205558329820633,
        0.02985146827995777,
        -0.020989321172237396,
        0.013602718710899353,
        -0.056518226861953735,
        -0.023096900433301926,
        0.005757572595030069,
        -0.014220945537090302,
        -0.006678712088614702,
        -0.07857565581798553,
        0.021827392280101776,
        0.07636435329914093,
        0.053331054747104645,
        0.08085660636425018,
        0.01599406637251377,
        -0.07594908028841019,
        0.04786461964249611,
        -0.06180233508348465,
        -0.01116523239761591,
        -0.07062851637601852,
        -0.022377271205186844,
        0.09760779142379761,
        0.020962189882993698,
        0.031274255365133286,
        -0.014851708896458149,
        -0.007217255420982838,
        -0.028523527085781097,
        0.006539246067404747,
        0.04676811397075653,
        0.010630376636981964,
        0.0618603490293026,
        -0.08027446269989014,
        -0.03576859086751938,
        0.02453496865928173,
        0.047140512615442276,
        -0.0031136253383010626,
        -0.03489251434803009,
        -0.0019085622625425458,
        -0.025110427290201187,
        0.05811768025159836,
        -0.0037551685236394405,
        -0.03146299347281456,
        -0.005441667046397924,
        -0.04488876834511757,
        0.009759525768458843,
        -0.06971069425344467,
        0.008124936372041702,
        0.11124009639024734,
        0.1133934035897255,
        0.04198436066508293,
        -0.049160029739141464,
        -0.008038671687245369,
        0.05358999967575073,
        -0.018544208258390427,
        0.0912417620420456,
        1.468791358548781e-32,
        0.02623363584280014,
        0.0016649157041683793,
        -0.023488054051995277,
        0.02374124899506569,
        0.023158784955739975,
        0.06209856644272804,
        0.08645893633365631,
        0.01234480645507574,
        -0.09194700419902802,
        0.031294289976358414,
        -0.0958719477057457,
        -0.027474714443087578,
        -0.04251356050372124,
        -0.07886583358049393,
        -0.07935123145580292,
        0.0062264506705105305,
        0.04380897060036659,
        -0.007229036185890436,
        0.0011484096758067608,
        0.07044457644224167,
        0.021761154755949974,
        0.008294382132589817,
        0.01016076747328043,
        -0.005139534827321768,
        0.045409929007291794,
        -0.04885096848011017,
        -0.025350961834192276,
        -0.0334504209458828,
        -0.07584162056446075,
        -0.00729631632566452,
        0.04838138073682785,
        -0.03747580945491791,
        -0.02895607054233551,
        0.021105872467160225,
        0.059266865253448486,
        0.0007635967922396958,
        0.022900879383087158,
        0.028582144528627396,
        -0.13052622973918915,
        -0.0006159481126815081,
        -0.041391342878341675,
        -0.012549787759780884,
        -0.05415736138820648,
        0.012943618930876255,
        -0.05220242962241173,
        -0.05301918834447861,
        -0.09391332417726517,
        -0.015981553122401237,
        0.06830641627311707,
        -0.010735956020653248,
        -0.07724206894636154,
        0.10557030886411667,
        -0.028548836708068848,
        -0.04603467881679535,
        0.1163255050778389,
        0.008348552510142326,
        0.03203006461262703,
        0.08699128776788712,
        0.009313130751252174,
        -0.0029876206535845995,
        0.009962402284145355,
        -0.051049623638391495,
        0.03193175420165062,
        -0.015089213848114014,
        0.058160118758678436,
        -0.0025088253896683455,
        0.026617947965860367,
        0.0014849152648821473,
        -0.04911430552601814,
        -0.021211614832282066,
        0.0188338290899992,
        -0.1165817379951477,
        0.05776162073016167,
        0.012279786169528961,
        0.03258763998746872,
        -0.07967078685760498,
        -0.06044549494981766,
        0.002290641888976097,
        0.08340947329998016,
        -0.06946209073066711,
        -0.0062369080260396,
        -0.07806525379419327,
        -0.03901345655322075,
        0.07794152945280075,
        0.021164167672395706,
        0.059550121426582336,
        -0.0001991745812119916,
        -0.09944750368595123,
        0.028773188591003418,
        0.057696565985679626,
        -0.035028573125600815,
        -0.005782116204500198,
        -0.0667271614074707,
        -0.08831252157688141,
        -0.04441109672188759,
        -1.4118919953076098e-32,
        0.10818006843328476,
        0.00028826462221331894,
        0.004730162676423788,
        0.03696661815047264,
        -0.009671898558735847,
        -0.028058670461177826,
        0.05481262505054474,
        -0.03236256539821625,
        0.017863761633634567,
        0.060712527483701706,
        0.008359369821846485,
        0.010272806510329247,
        0.035323236137628555,
        -0.012371271848678589,
        0.004145777318626642,
        0.11289032548666,
        -0.004613949451595545,
        -0.06003887951374054,
        0.008316503837704659,
        -0.013089201413094997,
        0.04993206635117531,
        0.045920319855213165,
        -0.03552725166082382,
        0.0766376331448555,
        -0.06436407566070557,
        0.025938672944903374,
        0.05001714453101158,
        -0.014902952127158642,
        -0.03771842271089554,
        -0.050845369696617126,
        0.01834118366241455,
        0.02087937481701374,
        -0.08822446316480637,
        0.050150830298662186,
        -0.01914631947875023,
        -0.007488984148949385,
        0.04931153357028961,
        0.013491892255842686,
        -0.046759266406297684,
        -0.0007443836657330394,
        0.008028783835470676,
        -0.026806924492120743,
        -0.0479428730905056,
        -0.055561646819114685,
        0.05172005295753479,
        -0.09044555574655533,
        -0.0022388745564967394,
        0.05248875916004181,
        0.004014687146991491,
        -0.001269567059352994,
        0.05228319764137268,
        -0.07164915651082993,
        -0.03182917833328247,
        -0.014403408393263817,
        0.006811120547354221,
        -0.03360314667224884,
        -0.01695817895233631,
        -0.10148722678422928,
        -0.0253509022295475,
        -0.004188177175819874,
        0.0016187230357900262,
        -0.053218305110931396,
        0.009754532016813755,
        -0.010022067464888096,
        0.008399024605751038,
        -0.02487809769809246,
        -0.015877651050686836,
        -0.0038549217861145735,
        0.07592237740755081,
        -0.02106320671737194,
        -0.013048063963651657,
        -0.012591729871928692,
        0.05908570811152458,
        -0.005001282785087824,
        0.034592244774103165,
        0.03101315349340439,
        -0.054287929087877274,
        -0.08278661966323853,
        0.10471299290657043,
        0.03803018108010292,
        0.007329427171498537,
        0.05141414701938629,
        0.04825428128242493,
        0.10070284456014633,
        0.006991017609834671,
        -0.035827990621328354,
        -0.046750813722610474,
        0.10027821362018585,
        -0.03913301229476929,
        -0.049410466104745865,
        -0.012926897034049034,
        -0.0730532854795456,
        -0.03882135823369026,
        0.020134394988417625,
        0.021793143823742867,
        -6.820516063044124e-8,
        -0.12464514374732971,
        0.020393142476677895,
        -0.06308094412088394,
        0.005652132909744978,
        0.015164406038820744,
        0.0014425946865230799,
        0.003450981806963682,
        -0.01258171908557415,
        -0.031054889783263206,
        -0.02781890518963337,
        -0.0011136571411043406,
        0.013394230976700783,
        0.019363397732377052,
        0.039423052221536636,
        -0.019403496757149696,
        -0.057809386402368546,
        0.02332756295800209,
        0.02870366722345352,
        -0.022714048624038696,
        -0.031721167266368866,
        0.07167178392410278,
        0.03490351513028145,
        0.027758195996284485,
        -0.030124451965093613,
        0.07442847639322281,
        -0.007281891070306301,
        -0.010453213937580585,
        0.024374239146709442,
        -0.01853269711136818,
        -0.010547135025262833,
        -0.03196535259485245,
        -0.05128694698214531,
        0.05121076852083206,
        -0.0017663666512817144,
        0.0020995247177779675,
        -0.0025739469565451145,
        0.10423877835273743,
        -0.05890387296676636,
        -0.031433120369911194,
        0.056785743683576584,
        0.10250852257013321,
        0.05753237381577492,
        0.09502268582582474,
        0.024762114509940147,
        -0.08502449840307236,
        -0.055105894804000854,
        -0.008028003387153149,
        -0.030809665098786354,
        0.11317742615938187,
        0.01919841207563877,
        0.015695227310061455,
        -0.05316491425037384,
        -0.05845098942518234,
        0.03869236633181572,
        -0.05206645652651787,
        -0.05314971134066582,
        0.020592493936419487,
        -0.0360417366027832,
        -0.06240829452872276,
        0.03010312095284462,
        0.03464118018746376,
        0.012197770178318024,
        0.016492942348122597,
        -0.023434607312083244
      ]
    },
    {
      "id": "c96197e5",
      "filePath": "02-deep-research/src/tools.ts",
      "content": "export async function visitWebpage(url: string): Promise<string> {\n\tconsole.log(`🌐 [Tavily Extract] Visiting: ${url}`);\n\n\ttry {\n\t\tconst response = await tavilyClient.extract([url]);\n\t\tif (response.results && response.results.length > 0) {\n\t\t\treturn response.results[0].rawContent.slice(0, 4000); // 取更多内容用于总结\n\t\t}\n\t\treturn \"No content extracted.\";\n\t} catch (e: any) {\n\t\tconsole.error(\"Tavily Extract Error:\", e.message);\n\t\treturn `Failed to extract content from ${url}`;\n\t}\n}\n\n// ============================================\n// Tool 3: 内容总结工具（新增）\n// ============================================\n\n/**\n * 对长文本进行 LLM 总结\n *\n * 目的：把 2000-4000 字的网页内容压缩成 200-300 字的摘要\n * 这样可以显著降低后续 Token 消耗，并让 Context 更聚焦\n *\n * @param content 原始内容\n * @param goal 研究目标，用于指导总结方向\n * @returns 压缩后的摘要\n */",
      "startLine": 66,
      "endLine": 94,
      "type": "function",
      "name": "visitWebpage",
      "embedding": [
        -0.14460089802742004,
        0.07124350965023041,
        -0.01811077445745468,
        0.018701476976275444,
        0.019975628703832626,
        -0.04146993160247803,
        0.009038706310093403,
        0.029564835131168365,
        0.07010024040937424,
        -0.016278984025120735,
        0.013506834395229816,
        -0.03703814372420311,
        0.02283015102148056,
        -0.062300845980644226,
        0.007052314467728138,
        0.058858633041381836,
        -0.09279296547174454,
        0.018367649987339973,
        -0.08484118431806564,
        -0.022470997646450996,
        0.06817396730184555,
        0.030473697930574417,
        0.0025982481893152,
        -0.008462030440568924,
        -0.013252549804747105,
        0.016380101442337036,
        -0.08308757096529007,
        -0.06274011731147766,
        0.01982877589762211,
        0.007337058894336224,
        0.050798628479242325,
        0.026075491681694984,
        -0.07422077655792236,
        -0.006470906548202038,
        0.10725356638431549,
        0.14143744111061096,
        -0.06604156643152237,
        -0.07064048945903778,
        0.0384494923055172,
        0.011206801980733871,
        0.038885314017534256,
        0.024129904806613922,
        -0.03145797550678253,
        -0.07026851177215576,
        0.06965501606464386,
        -0.08892836421728134,
        -0.07180856168270111,
        -0.05191528797149658,
        -0.09431228786706924,
        -0.01153491623699665,
        -0.08773139864206314,
        0.01599903590977192,
        -0.07742009311914444,
        -0.024672187864780426,
        0.04068896919488907,
        -0.026073474436998367,
        -0.07965021580457687,
        -0.006883487571030855,
        -0.021666575223207474,
        -0.02891065552830696,
        0.04698069393634796,
        -0.08029703795909882,
        0.01765228994190693,
        -0.04649299010634422,
        0.0058229826390743256,
        0.034814946353435516,
        -0.10281384736299515,
        0.020701758563518524,
        0.045983415096998215,
        0.011330170556902885,
        -0.09669309109449387,
        -0.016435978934168816,
        -0.07935111969709396,
        0.034098099917173386,
        0.00672457180917263,
        -0.0465509295463562,
        -0.025915853679180145,
        0.006643383763730526,
        -0.05980061739683151,
        -0.08750255405902863,
        0.03148135170340538,
        -0.04089445248246193,
        0.06853464990854263,
        0.04677116498351097,
        -0.027060531079769135,
        0.10780211538076401,
        -0.06144864112138748,
        -0.04332653805613518,
        0.07731850445270538,
        0.0033858115784823895,
        0.023053206503391266,
        -0.04172546789050102,
        0.007463372312486172,
        0.08361638337373734,
        0.07288441807031631,
        0.01240248791873455,
        -0.04117535799741745,
        0.028289005160331726,
        -0.006668330170214176,
        0.054880574345588684,
        0.007783344481140375,
        0.00905621238052845,
        -0.01879004016518593,
        -0.06406038254499435,
        -0.0223274864256382,
        -0.025169895961880684,
        0.045828696340322495,
        0.02068927139043808,
        0.02118995413184166,
        -0.027334637939929962,
        -0.024131327867507935,
        0.026299946010112762,
        -0.03046136349439621,
        -0.07073729485273361,
        -0.023511670529842377,
        -0.030125074088573456,
        0.003624670673161745,
        -0.0665794238448143,
        0.023807860910892487,
        0.09484431147575378,
        0.09995625168085098,
        0.01576795056462288,
        -0.02973518706858158,
        0.034470051527023315,
        0.00266675790771842,
        -0.08671940863132477,
        0.12343494594097137,
        1.2724225293184224e-32,
        -0.006779901217669249,
        0.006724226754158735,
        -0.01799941435456276,
        -0.05230680853128433,
        0.032720889896154404,
        0.012041176669299603,
        0.06041420251131058,
        -0.06618205457925797,
        -0.038774143904447556,
        0.00405144365504384,
        -0.046776097267866135,
        -0.01742086373269558,
        -0.055520426481962204,
        -0.07582259178161621,
        -0.060998689383268356,
        0.007372244261205196,
        0.039302702993154526,
        -0.004326707683503628,
        0.06299209594726562,
        0.005826751235872507,
        -0.008147237822413445,
        0.010727249085903168,
        0.004583399277180433,
        0.02036788873374462,
        0.011786646209657192,
        -0.024796966463327408,
        -0.013969698920845985,
        0.026650216430425644,
        -0.06993576139211655,
        0.00994875282049179,
        0.08997881412506104,
        -0.012102397158741951,
        -0.01071311254054308,
        0.03125482052564621,
        0.05191691219806671,
        -0.01424434408545494,
        0.057756926864385605,
        -0.011378567665815353,
        -0.1143563762307167,
        0.008634014055132866,
        -0.0982387587428093,
        0.022291963919997215,
        -0.019036555662751198,
        0.03567015379667282,
        -0.039198342710733414,
        -0.0983581617474556,
        -0.10451611131429672,
        -0.006146891508251429,
        0.07708960771560669,
        -0.032917506992816925,
        -0.07431795448064804,
        0.11054868996143341,
        0.06758365035057068,
        0.00008744213118916377,
        0.06330708414316177,
        -0.044013526290655136,
        -0.014931396581232548,
        0.05214162543416023,
        0.013044924475252628,
        0.03594731166958809,
        0.04955426603555679,
        -0.04289272800087929,
        0.003553274553269148,
        -0.03978591784834862,
        0.0769234448671341,
        -0.01661359705030918,
        0.02423996664583683,
        -0.00005352546213543974,
        -0.04570916295051575,
        -0.04485085979104042,
        -0.027101729065179825,
        -0.045843705534935,
        0.043577197939157486,
        0.01359644066542387,
        -0.009196369908750057,
        -0.057763006538152695,
        -0.010551045648753643,
        0.04125587269663811,
        0.047706928104162216,
        -0.06382628530263901,
        -0.003365864511579275,
        -0.04959911108016968,
        -0.013694746419787407,
        0.020264551043510437,
        -0.009343886747956276,
        0.10493719577789307,
        -0.015889795497059822,
        -0.10029644519090652,
        0.04238894581794739,
        0.021233484148979187,
        -0.025569932535290718,
        -0.01758754253387451,
        -0.06620395928621292,
        -0.04935760423541069,
        -0.03408069908618927,
        -1.3812853550216622e-32,
        0.09421436488628387,
        0.046869464218616486,
        -0.011826432310044765,
        0.019401945173740387,
        -0.019454650580883026,
        -0.030526280403137207,
        0.043947115540504456,
        -0.0026373444125056267,
        0.047828540205955505,
        0.08310069888830185,
        0.003475516801699996,
        0.0235679280012846,
        -0.029763175174593925,
        -0.025388233363628387,
        0.03342229872941971,
        0.08438974618911743,
        0.04136497899889946,
        -0.04585179686546326,
        -0.0195750929415226,
        -0.007587889675050974,
        0.05260578915476799,
        0.0934484526515007,
        -0.10677263140678406,
        0.06260747462511063,
        -0.05847159028053284,
        0.039493441581726074,
        0.06033209338784218,
        -0.0012774213682860136,
        -0.044287923723459244,
        -0.01835573837161064,
        0.031346190720796585,
        0.02889002114534378,
        -0.10456285625696182,
        0.10802362859249115,
        -0.034795019775629044,
        -0.06769255548715591,
        0.03824041783809662,
        0.033986374735832214,
        0.0002151727967429906,
        -0.030470771715044975,
        0.049410250037908554,
        0.0005808336427435279,
        -0.051464762538671494,
        -0.04109292849898338,
        0.05967945605516434,
        -0.033535923808813095,
        -0.00996529683470726,
        0.027543451637029648,
        -0.003901556134223938,
        -0.0540689118206501,
        0.06705696135759354,
        -0.07533147931098938,
        0.003413584316149354,
        -0.03377304971218109,
        0.0019370786612853408,
        -0.026418039575219154,
        -0.0063981106504797935,
        -0.0918937474489212,
        -0.07296625524759293,
        -0.044537853449583054,
        0.04581832513213158,
        0.022609427571296692,
        -0.008160415105521679,
        -0.01988956518471241,
        -0.0027920107822865248,
        -0.0012314437190070748,
        -0.045285310596227646,
        0.027957798913121223,
        0.021660612896084785,
        -0.043838322162628174,
        -0.020802540704607964,
        -0.0038438804913312197,
        0.001710529555566609,
        -0.01021377369761467,
        -0.00416610948741436,
        0.010050643235445023,
        -0.04232693463563919,
        -0.03499922901391983,
        0.06764650344848633,
        0.11230739951133728,
        -0.030013518407940865,
        0.061886951327323914,
        0.044022757560014725,
        0.06743688136339188,
        0.025893334299325943,
        -0.012536726891994476,
        -0.019398637115955353,
        0.10056253522634506,
        -0.009185661561787128,
        -0.08863122761249542,
        0.031363345682621,
        -0.029598630964756012,
        -0.06446169316768646,
        0.08010635524988174,
        0.04546474292874336,
        -7.25740036955358e-8,
        -0.11382206529378891,
        -0.07086475938558578,
        -0.10041578114032745,
        -0.024431083351373672,
        -0.0043633924797177315,
        0.00633023027330637,
        -0.018323030322790146,
        -0.07010125368833542,
        -0.0008661281899549067,
        -0.04507668688893318,
        -0.035909343510866165,
        -0.03746545687317848,
        -0.054184067994356155,
        0.00203720317222178,
        -0.06622324138879776,
        -0.04384616017341614,
        -0.016015812754631042,
        0.03589755296707153,
        -0.011172935366630554,
        -0.06743119657039642,
        0.05442067235708237,
        0.014513335190713406,
        0.06469932943582535,
        -0.08486420661211014,
        0.04796021431684494,
        -0.031123319640755653,
        -0.025006137788295746,
        0.05376186966896057,
        -0.06964590400457382,
        -0.050426919013261795,
        -0.023302320390939713,
        -0.03186048939824104,
        0.010034603998064995,
        -0.03161022439599037,
        0.02264503389596939,
        0.03940419852733612,
        0.1495712250471115,
        -0.04070241004228592,
        -0.036932460963726044,
        0.033652741461992264,
        0.09650822728872299,
        0.027912244200706482,
        0.07088731974363327,
        0.04967367649078369,
        -0.02009746991097927,
        -0.05867398902773857,
        0.011884859763085842,
        0.0006552166305482388,
        0.10522829741239548,
        -0.03452030569314957,
        0.08204098790884018,
        -0.04393693804740906,
        -0.0746360644698143,
        0.063023641705513,
        -0.03330449014902115,
        -0.08055003732442856,
        -0.007149312179535627,
        -0.02527938038110733,
        -0.043905388563871384,
        0.04006776958703995,
        0.07125385850667953,
        -0.017971986904740334,
        0.0729558989405632,
        -0.02713148295879364
      ]
    },
    {
      "id": "92b2344c",
      "filePath": "02-deep-research/src/tools.ts",
      "content": "export async function summarizeContent(content: string, goal: string): Promise<string> {\n\t// 如果内容已经很短，不需要总结\n\tif (content.length < 500) {\n\t\treturn content;\n\t}\n\n\tconsole.log(`📝 [Summarizing] ${content.length} chars -> ~300 chars`);\n\n\ttry {\n\t\tconst completion = await openai.chat.completions.create({\n\t\t\tmodel: process.env.OPENAI_MODEL || 'gpt-4o-mini', // 用便宜的模型做总结\n\t\t\tmessages: [\n\t\t\t\t{\n\t\t\t\t\trole: \"system\",\n\t\t\t\t\tcontent: `You are a research assistant. Summarize the following content in 2-3 paragraphs, focusing on information relevant to: \"${goal}\". Be concise but keep key facts and numbers.`\n\t\t\t\t},\n\t\t\t\t{ role: \"user\", content: content }\n\t\t\t],\n\t\t\tmax_tokens: 500,\n\t\t\ttemperature: 0.3,\n\t\t});\n\n\t\treturn completion.choices[0].message.content || content;\n\t} catch (e: any) {\n\t\tconsole.error(\"Summarization Error:\", e.message);\n\t\t// 如果总结失败，返回截断的原文\n\t\treturn content.slice(0, 500) + \"... (truncated)\";\n\t}\n}",
      "startLine": 95,
      "endLine": 124,
      "type": "function",
      "name": "summarizeContent",
      "embedding": [
        -0.048774126917123795,
        0.055931251496076584,
        0.021592317149043083,
        0.0888156071305275,
        0.0635838434100151,
        0.01530994102358818,
        0.02200116217136383,
        0.033902596682310104,
        0.0859844908118248,
        -0.01344155240803957,
        -0.0207106564193964,
        -0.04089618846774101,
        -0.03953075036406517,
        0.03293756768107414,
        0.036045465618371964,
        0.012259463779628277,
        -0.020814567804336548,
        -0.019138053059577942,
        -0.0769856870174408,
        -0.12401337176561356,
        0.060240305960178375,
        0.048683710396289825,
        0.09395632892847061,
        0.011890046298503876,
        0.049746714532375336,
        -0.02529534325003624,
        -0.06879020482301712,
        -0.015350503847002983,
        0.018225206062197685,
        0.02415938302874565,
        -0.009567851200699806,
        0.007676063571125269,
        0.06334000080823898,
        0.051230233162641525,
        0.015087557956576347,
        0.10338210314512253,
        -0.07933294028043747,
        -0.05682295560836792,
        0.0271128062158823,
        -0.013217151165008545,
        0.04697554558515549,
        0.07170528173446655,
        -0.05044040083885193,
        -0.03679971396923065,
        0.08755660057067871,
        -0.10113216936588287,
        -0.10440810024738312,
        -0.09487123787403107,
        0.026979951187968254,
        0.035089850425720215,
        -0.10246396064758301,
        0.0691508948802948,
        -0.08769397437572479,
        0.01686396822333336,
        0.0882788747549057,
        0.027916966006159782,
        -0.06225677207112312,
        -0.04383203387260437,
        -0.021340221166610718,
        -0.051702745258808136,
        0.02793130837380886,
        -0.08137217909097672,
        0.004975964780896902,
        -0.08077047020196915,
        0.06715422868728638,
        -0.008738450706005096,
        -0.03342554345726967,
        0.10029694437980652,
        -0.013142378069460392,
        0.05671803280711174,
        -0.020365051925182343,
        0.04402375593781471,
        -0.017482057213783264,
        0.037688735872507095,
        -0.04519473388791084,
        -0.0037919271271675825,
        -0.01716519705951214,
        0.012119154445827007,
        -0.03347848728299141,
        0.03440835326910019,
        -0.02110268548130989,
        -0.020003098994493484,
        0.023817168548703194,
        0.043822821229696274,
        -0.040801454335451126,
        0.11070806533098221,
        -0.01792047545313835,
        -0.02429014816880226,
        0.006546419113874435,
        -0.06155254319310188,
        -0.06873010098934174,
        -0.07034724205732346,
        0.025168919935822487,
        0.09257353097200394,
        0.010156110860407352,
        0.029366208240389824,
        -0.021112093701958656,
        -0.017429273575544357,
        -0.044937361031770706,
        0.04182109236717224,
        -0.00015173979045357555,
        -0.008968055248260498,
        0.024701233953237534,
        -0.07352439314126968,
        -0.06454863399267197,
        -0.030315715819597244,
        0.03664417564868927,
        -0.0035171210765838623,
        -0.07559732347726822,
        -0.009673895314335823,
        0.008908766321837902,
        0.03610808029770851,
        -0.04023796319961548,
        0.018213218078017235,
        0.0071721309795975685,
        -0.036361489444971085,
        0.02443365938961506,
        -0.049607813358306885,
        0.06278620660305023,
        0.12201273441314697,
        0.15212079882621765,
        0.04183296859264374,
        -0.012392345815896988,
        0.09178926795721054,
        0.03130807727575302,
        -0.04425216093659401,
        0.145752415060997,
        6.836009520706271e-33,
        0.04244814068078995,
        0.014629754237830639,
        0.024692082777619362,
        0.0781971663236618,
        0.09309025853872299,
        0.03447398915886879,
        -0.01796937733888626,
        -0.053031835705041885,
        -0.08657082170248032,
        -0.011853133328258991,
        -0.0629100650548935,
        0.016125570982694626,
        -0.057194069027900696,
        -0.06478006392717361,
        0.027044834569096565,
        -0.04345787689089775,
        0.026426808908581734,
        0.0633763000369072,
        0.052211083471775055,
        0.06928328424692154,
        0.010175053030252457,
        0.0015899372519925237,
        0.006091251969337463,
        -0.0016626070719212294,
        0.005565573461353779,
        -0.016531122848391533,
        0.0002482538402546197,
        -0.03634701669216156,
        -0.08634026348590851,
        -0.012968150898814201,
        0.025692200288176537,
        0.004447970073670149,
        -0.005845925305038691,
        0.03640754520893097,
        0.014062030240893364,
        -0.003529683453962207,
        -0.002381640952080488,
        -0.03074272722005844,
        -0.07840219885110855,
        -0.022614387795329094,
        -0.056167904287576675,
        0.018721070140600204,
        -0.0926668718457222,
        -0.05480428412556648,
        -0.10524360090494156,
        -0.07307036221027374,
        0.008446483872830868,
        0.026114026084542274,
        0.08506692945957184,
        -0.02101190760731697,
        -0.061811137944459915,
        0.058726612478494644,
        0.04520047828555107,
        -0.032544173300266266,
        0.07718873023986816,
        -0.05969391018152237,
        0.10259899497032166,
        0.005152777768671513,
        0.058849435299634933,
        -0.0021686118561774492,
        0.002859189175069332,
        -0.03295368701219559,
        0.010014883242547512,
        -0.002487155143171549,
        0.07189206033945084,
        0.007223509717732668,
        -0.03997079282999039,
        0.03200317919254303,
        0.06412235647439957,
        -0.053775861859321594,
        -0.04420814290642738,
        -0.022445660084486008,
        0.00457735825330019,
        0.04370341822504997,
        -0.005377497058361769,
        -0.03591090440750122,
        -0.03839092329144478,
        0.013449792750179768,
        0.010424317792057991,
        -0.05681709572672844,
        0.037333324551582336,
        -0.05908859148621559,
        -0.021875204518437386,
        -0.006233852356672287,
        -0.03173181414604187,
        0.09694775193929672,
        -0.00873729307204485,
        -0.024345528334379196,
        0.03483054041862488,
        -0.014720904640853405,
        -0.05595754459500313,
        -0.018267756327986717,
        -0.022277796640992165,
        0.011115501634776592,
        -0.06603006273508072,
        -6.308653367568622e-33,
        0.0535142682492733,
        0.03507198765873909,
        -0.07123276591300964,
        0.012854579836130142,
        0.015941305086016655,
        -0.01674705371260643,
        0.01027058344334364,
        0.022934312000870705,
        -0.0013760142028331757,
        0.01697148196399212,
        0.013395185582339764,
        -0.04605809971690178,
        0.04959304258227348,
        -0.041062723845243454,
        -0.005056182853877544,
        0.010392027907073498,
        0.006690833251923323,
        -0.0360611155629158,
        0.04719557985663414,
        0.006231361068785191,
        -0.006398117169737816,
        -0.028675729408860207,
        -0.039257779717445374,
        0.020896416157484055,
        -0.013918268494307995,
        0.08674803376197815,
        0.0512753464281559,
        -0.019210204482078552,
        -0.06959657371044159,
        -0.09521198272705078,
        0.03683048486709595,
        0.0029241512529551983,
        -0.1106240451335907,
        -0.010439584031701088,
        -0.04670662805438042,
        -0.05224347859621048,
        0.05122683197259903,
        0.043573543429374695,
        -0.02170622907578945,
        0.03606574982404709,
        0.09589900821447372,
        -0.0032613002695143223,
        -0.01686004549264908,
        -0.05834174528717995,
        -0.018523359671235085,
        -0.039496976882219315,
        0.0241363774985075,
        -0.01643495075404644,
        0.01935814693570137,
        -0.040499523282051086,
        0.06552963703870773,
        -0.06470724195241928,
        -0.038081735372543335,
        -0.03576572611927986,
        -0.024540020152926445,
        -0.042438238859176636,
        -0.009643527679145336,
        -0.09300844371318817,
        0.01522776484489441,
        -0.09921949356794357,
        -0.07310698181390762,
        -0.027008330449461937,
        0.027702372521162033,
        -0.04579748213291168,
        0.035138171166181564,
        -0.06549274921417236,
        0.0022470587864518166,
        0.009438915178179741,
        0.05933304503560066,
        -0.006355739664286375,
        -0.011952701024711132,
        -0.02131050080060959,
        0.05756750702857971,
        0.045857932418584824,
        0.025667576119303703,
        -0.010740650817751884,
        -0.043241847306489944,
        -0.047424111515283585,
        0.09264408051967621,
        0.07561327517032623,
        -0.029337046667933464,
        -0.02154880203306675,
        0.06823892891407013,
        0.04783162847161293,
        0.06451227515935898,
        0.0009466276969760656,
        0.0016129591967910528,
        0.163327157497406,
        0.009659511037170887,
        0.02615300752222538,
        -0.03143132105469704,
        0.02884295955300331,
        -0.027197014540433884,
        0.03294429928064346,
        0.02667771838605404,
        -6.03949459332398e-8,
        -0.1483980119228363,
        -0.058907050639390945,
        -0.1639324426651001,
        0.006235069595277309,
        -0.02492416836321354,
        -0.053889889270067215,
        -0.003714314429089427,
        -0.0802696943283081,
        0.05408988520503044,
        -0.026204468682408333,
        -0.03418111056089401,
        -0.005400421097874641,
        -0.05832798033952713,
        -0.030434463173151016,
        -0.06622348725795746,
        0.009718598797917366,
        0.023368464782834053,
        0.07206703722476959,
        0.02156345173716545,
        -0.06658138334751129,
        0.08306092768907547,
        0.005954344291239977,
        -0.005858547054231167,
        -0.06668172031641006,
        0.01655608043074608,
        0.02115405723452568,
        -0.09301000088453293,
        0.09463372826576233,
        -0.005760212428867817,
        -0.018287496641278267,
        0.00965696107596159,
        -0.017295636236667633,
        0.024920234456658363,
        -0.0012815991649404168,
        -0.004346253350377083,
        0.004227308090776205,
        0.12293104082345963,
        -0.030960414558649063,
        0.05820273235440254,
        0.06947565823793411,
        0.09593462198972702,
        0.07317087054252625,
        -0.007207327056676149,
        0.03997879475355148,
        0.0006664746324531734,
        -0.05119093134999275,
        -0.0406741127371788,
        -0.03474697843194008,
        0.042025092989206314,
        -0.017761394381523132,
        0.07752194255590439,
        -0.09341006726026535,
        -0.06952168047428131,
        0.041347116231918335,
        -0.0378560908138752,
        -0.03492523357272148,
        0.02699243649840355,
        -0.006265121977776289,
        -0.02109694853425026,
        0.005239794030785561,
        0.046734146773815155,
        -0.026479141786694527,
        -0.049766235053539276,
        0.0032366113737225533
      ]
    },
    {
      "id": "534f0338",
      "filePath": "02-deep-research/src/state.ts",
      "content": "import * as fs from 'fs';\nimport * as path from 'path';\nimport { ResearchState, INITIAL_STATE } from './types';\n\n// ============================================\n// 状态持久化模块\n// ============================================\n// 作用：让程序崩溃后能够断点续跑\n// 原理：每次状态变更后写入 JSON 文件，启动时尝试加载\n\nconst STATE_FILE = path.join(__dirname, '../.research-state.json');\n\n/**\n * 保存状态到磁盘\n * 在每次 Tool 执行完成后调用\n */",
      "startLine": 1,
      "endLine": 16,
      "type": "other",
      "embedding": [
        -0.11658389121294022,
        0.09543100744485855,
        -0.036394648253917694,
        0.013692108914256096,
        -0.02717343531548977,
        0.003871666267514229,
        0.022754380479454994,
        0.07324695587158203,
        -0.01556225586682558,
        0.01740609109401703,
        0.015506651252508163,
        -0.010230225510895252,
        -0.010805794969201088,
        0.0027427326422184706,
        0.016858920454978943,
        0.05163310468196869,
        -0.12583354115486145,
        0.014994173310697079,
        -0.07003820687532425,
        -0.10104872286319733,
        0.03528609126806259,
        0.003724713111296296,
        0.05790301039814949,
        -0.017035674303770065,
        0.01489692647010088,
        0.026391474530100822,
        0.023254962638020515,
        -0.047929033637046814,
        0.011415418237447739,
        0.0714842677116394,
        -0.0009846154134720564,
        0.0614815354347229,
        -0.03738079592585564,
        0.014644102193415165,
        0.09172682464122772,
        0.09380758553743362,
        0.01647178828716278,
        -0.0350179448723793,
        0.02008272148668766,
        0.019431222230196,
        0.002970287809148431,
        0.07075246423482895,
        0.05883202329277992,
        -0.1060958132147789,
        0.03177948668599129,
        -0.0689852237701416,
        -0.023091094568371773,
        -0.03802049905061722,
        -0.052690912038087845,
        0.020073384046554565,
        -0.11265186220407486,
        0.023076077923178673,
        -0.040858857333660126,
        -0.037823788821697235,
        0.06477922201156616,
        -0.006082369014620781,
        0.001577490707859397,
        0.01794303208589554,
        -0.07053593546152115,
        -0.05946315452456474,
        0.015800386667251587,
        -0.007476486265659332,
        -0.01228850893676281,
        -0.06846058368682861,
        -0.018628424033522606,
        0.05343640223145485,
        -0.052267856895923615,
        0.09016604721546173,
        0.03971495479345322,
        -0.003871015040203929,
        -0.02186387963593006,
        0.04032662883400917,
        -0.033858295530080795,
        0.0038561553228646517,
        -0.010006312280893326,
        -0.0622614286839962,
        -0.02635195292532444,
        0.04248329624533653,
        0.0007265625754371285,
        -0.13314801454544067,
        0.04719419404864311,
        -0.10684924572706223,
        0.02474297024309635,
        0.02634659968316555,
        -0.04137907922267914,
        0.05273889750242233,
        -0.037664152681827545,
        -0.07302217930555344,
        0.06598891317844391,
        -0.01560671441257,
        0.004660359118133783,
        -0.08030740916728973,
        -0.011484075337648392,
        0.028629569336771965,
        0.08648338913917542,
        0.04406527802348137,
        0.04254990816116333,
        0.029978007078170776,
        -0.020584048703312874,
        0.08651448041200638,
        -0.004097849130630493,
        -0.03196728229522705,
        0.01156526431441307,
        0.008568592369556427,
        -0.07471011579036713,
        0.014481247402727604,
        -0.028373831883072853,
        -0.02264646627008915,
        -0.006318654399365187,
        0.01436839159578085,
        0.007306124549359083,
        0.04604649171233177,
        -0.04265587404370308,
        -0.051289040595293045,
        -0.019011253491044044,
        -0.017389342188835144,
        -0.035187624394893646,
        -0.04488205909729004,
        0.011778794229030609,
        0.11726124584674835,
        0.06143466755747795,
        -0.08201636373996735,
        -0.10839101672172546,
        0.057268667966127396,
        -0.033249031752347946,
        -0.048707492649555206,
        0.07051561027765274,
        5.821316919604718e-33,
        -0.04605819657444954,
        -0.007847260683774948,
        0.022602198645472527,
        0.04685802012681961,
        -0.04306412115693092,
        -0.032257381826639175,
        0.06044086813926697,
        -0.06863976269960403,
        -0.12833712995052338,
        0.02699754759669304,
        -0.07174664735794067,
        0.005946868099272251,
        -0.063714399933815,
        -0.04648533836007118,
        -0.07633522897958755,
        -0.06176457181572914,
        0.012327786535024643,
        -0.03607754781842232,
        0.022999173030257225,
        -0.028310982510447502,
        0.07921810448169708,
        0.07632707059383392,
        0.004235116299241781,
        -0.005568649619817734,
        -0.007634849287569523,
        -0.03996182605624199,
        0.023685207590460777,
        0.013342761434614658,
        -0.049964141100645065,
        0.017556458711624146,
        0.07646531611680984,
        0.0021120125893503428,
        -0.013428688049316406,
        0.044839151203632355,
        0.02689141035079956,
        0.05707699432969093,
        0.08834273368120193,
        -0.04742822423577309,
        -0.08026392757892609,
        -0.054032325744628906,
        0.031859103590250015,
        0.04183793067932129,
        -0.04427322372794151,
        0.05944884568452835,
        0.0003826841711997986,
        -0.02712724544107914,
        -0.08848612010478973,
        -0.0803145319223404,
        -0.0017237886786460876,
        0.00047208170872181654,
        -0.09937489777803421,
        0.09239508211612701,
        -0.00698384502902627,
        0.010922225192189217,
        0.03147105872631073,
        -0.005273174028843641,
        0.007502696011215448,
        0.03314678743481636,
        0.0064808065071702,
        -0.03335319459438324,
        0.0787469670176506,
        0.002458417322486639,
        -0.01397279929369688,
        0.03679179027676582,
        0.07367628812789917,
        -0.022213181480765343,
        0.030686277896165848,
        0.03634970262646675,
        0.03581121191382408,
        -0.018974222242832184,
        -0.054211534559726715,
        0.05185249075293541,
        0.032344307750463486,
        -0.024910658597946167,
        0.017247438430786133,
        -0.051434680819511414,
        0.017211375758051872,
        0.010230242274701595,
        -0.00942015927284956,
        -0.0439147911965847,
        0.0027840640395879745,
        -0.0326322540640831,
        -0.07490026205778122,
        0.010465927422046661,
        0.03140685707330704,
        0.011770504526793957,
        -0.04565618932247162,
        -0.020312847569584846,
        0.020921887829899788,
        -0.03560856729745865,
        -0.03246692195534706,
        0.007307735737413168,
        -0.0017377387266606092,
        0.010866256430745125,
        -0.011273444630205631,
        -1.029773826280618e-32,
        0.08803335577249527,
        0.0015940619632601738,
        0.037488896399736404,
        -0.01828484795987606,
        -0.0005316015449352562,
        -0.11778038740158081,
        0.011266030371189117,
        -0.058027155697345734,
        0.0030076326802372932,
        0.08616293221712112,
        0.01293235644698143,
        -0.035813912749290466,
        0.049284085631370544,
        -0.04741927608847618,
        0.06293939054012299,
        0.022403180599212646,
        -0.02294076420366764,
        -0.025803349912166595,
        -0.01840456761419773,
        0.04096392169594765,
        -0.03258570656180382,
        0.035529643297195435,
        -0.06097228825092316,
        0.06899642199277878,
        -0.0734892338514328,
        -0.004112114664167166,
        -0.02104428969323635,
        -0.012291810475289822,
        -0.04244541749358177,
        0.01644195429980755,
        -0.00827115774154663,
        -0.001151135889813304,
        -0.1318902224302292,
        0.10939639061689377,
        -0.08939206600189209,
        -0.061198677867650986,
        0.06326772272586823,
        0.0027849990874528885,
        -0.0017081897240132093,
        -0.060640692710876465,
        -0.012693814001977444,
        0.07828005403280258,
        -0.04239729046821594,
        -0.00256291008554399,
        0.03584453463554382,
        -0.00663100415840745,
        0.011549620889127254,
        0.07666399329900742,
        -0.052291274070739746,
        -0.12081817537546158,
        0.052265435457229614,
        -0.06469309329986572,
        -0.0442180410027504,
        -0.07516355067491531,
        0.046558815985918045,
        -0.04195108264684677,
        0.00867494847625494,
        -0.080987848341465,
        -0.14327022433280945,
        0.008574186824262142,
        0.008667686954140663,
        -0.007570547517389059,
        -0.07169526815414429,
        0.002029811730608344,
        -0.012450690381228924,
        -0.07850806415081024,
        -0.07613755017518997,
        0.03524482995271683,
        0.10705488920211792,
        -0.09692373126745224,
        -0.013355571776628494,
        0.06007605791091919,
        0.0538419745862484,
        0.020944494754076004,
        0.07322398573160172,
        0.023433275520801544,
        -0.03655411675572395,
        0.005002857185900211,
        0.0828743427991867,
        0.046066198498010635,
        -0.06025738641619682,
        0.031265318393707275,
        -0.027356509119272232,
        0.046318959444761276,
        -0.00012460588186513633,
        0.024976028129458427,
        -0.02952362224459648,
        0.10041818022727966,
        -0.032515864819288254,
        -0.09904893487691879,
        0.01066806260496378,
        -0.04914969578385353,
        0.02214077115058899,
        -0.008410671725869179,
        0.028361689299345016,
        -6.76561100476647e-8,
        -0.09705528616905212,
        -0.10492407530546188,
        -0.11803657561540604,
        -0.008708864450454712,
        -0.042588911950588226,
        -0.014448762871325016,
        -0.03852296620607376,
        -0.009433647617697716,
        0.04445458948612213,
        -0.0717485100030899,
        -0.022392302751541138,
        0.003106805495917797,
        -0.1191360205411911,
        -0.04146546870470047,
        -0.13115717470645905,
        -0.05096495896577835,
        -0.009181472472846508,
        0.06369706243276596,
        -0.00785531010478735,
        0.012358159758150578,
        0.039659399539232254,
        -0.006557792890816927,
        0.028654342517256737,
        -0.011695193126797676,
        0.03184255585074425,
        0.00940307043492794,
        -0.02512717805802822,
        -0.030674118548631668,
        -0.01732020638883114,
        0.03456945717334747,
        -0.02503766305744648,
        -0.0672001913189888,
        -0.01932549849152565,
        -0.04444844275712967,
        0.03124438412487507,
        -0.02786216512322426,
        0.1517048329114914,
        0.03941846638917923,
        0.031759198755025864,
        0.02382700890302658,
        0.06961572170257568,
        0.0619920939207077,
        -0.03272786736488342,
        0.0513833723962307,
        -0.03375881165266037,
        -0.050508931279182434,
        0.00025476518203504384,
        0.015857217833399773,
        0.08713799715042114,
        -0.05613455921411514,
        0.009564416483044624,
        -0.046123772859573364,
        -0.04462091997265816,
        0.030196724459528923,
        -0.01587911695241928,
        0.0076906029134988785,
        -0.001360508264042437,
        0.05871771648526192,
        -0.05885748937726021,
        -0.01688496209681034,
        0.08578398078680038,
        -0.020602259784936905,
        -0.016430072486400604,
        0.011422816663980484
      ]
    },
    {
      "id": "53cdd5bc",
      "filePath": "02-deep-research/src/state.ts",
      "content": "export function saveState(state: ResearchState): void {\n\ttry {\n\t\tfs.writeFileSync(STATE_FILE, JSON.stringify(state, null, 2), 'utf-8');\n\t\tconsole.log(`💾 State saved (iteration ${state.iteration})`);\n\t} catch (e: any) {\n\t\tconsole.error(\"Failed to save state:\", e.message);\n\t}\n}\n\n/**\n * 从磁盘加载状态\n * 程序启动时调用，如果文件存在则恢复进度\n *\n * @param goal 当前任务目标，用于判断是否是同一个任务\n * @returns 加载的状态，如果文件不存在或目标不匹配则返回 null\n */",
      "startLine": 17,
      "endLine": 32,
      "type": "function",
      "name": "saveState",
      "embedding": [
        -0.09039109200239182,
        0.04853925481438637,
        -0.04430577531456947,
        0.02998223342001438,
        0.031008480116724968,
        0.040796685963869095,
        0.02163485810160637,
        0.041639164090156555,
        0.03380664065480232,
        0.04801974445581436,
        0.008864814415574074,
        -0.03592102602124214,
        -0.005581147037446499,
        -0.03340200334787369,
        -0.0022879133466631174,
        -0.002519553992897272,
        -0.1406707763671875,
        0.010019483976066113,
        -0.0790150985121727,
        -0.07235303521156311,
        0.04297131672501564,
        0.000055102827900554985,
        0.045309633016586304,
        0.017766142264008522,
        0.052561044692993164,
        0.04028729349374771,
        0.00801471620798111,
        -0.036083023995161057,
        0.0023108774330466986,
        0.05411704629659653,
        -0.06794928014278412,
        -0.0017274782294407487,
        -0.025441473349928856,
        -0.014811544679105282,
        0.11342696845531464,
        0.1270631104707718,
        -0.06057819724082947,
        -0.06071963906288147,
        -0.05035921558737755,
        -0.033150654286146164,
        -0.02930638939142227,
        0.02987612411379814,
        -0.016764648258686066,
        -0.05376482754945755,
        0.034398965537548065,
        -0.020756060257554054,
        -0.015303128398954868,
        -0.02086479775607586,
        -0.01857554167509079,
        0.03996090590953827,
        -0.07033221423625946,
        0.09031381458044052,
        -0.04563668370246887,
        -0.01007651723921299,
        0.11820749938488007,
        -0.011116227135062218,
        0.016145825386047363,
        0.02669544145464897,
        -0.08889208734035492,
        -0.01477919053286314,
        -0.02339867502450943,
        -0.048319630324840546,
        -0.012904572300612926,
        -0.05687175318598747,
        0.05025249719619751,
        0.09403976052999496,
        -0.07473709434270859,
        0.07700692117214203,
        -0.002816113643348217,
        -0.0025727027095854282,
        -0.06223023682832718,
        0.029710540547966957,
        -0.04221190884709358,
        0.025629274547100067,
        0.008509480394423008,
        -0.05833891034126282,
        -0.006226480007171631,
        0.019039131700992584,
        -0.02298569865524769,
        -0.037786342203617096,
        0.04275359585881233,
        -0.10791899263858795,
        -0.015154395252466202,
        0.03741448000073433,
        -0.035859715193510056,
        0.05543621629476547,
        -0.009891821071505547,
        -0.04107019305229187,
        0.07773873209953308,
        -0.018688354641199112,
        -0.06974644958972931,
        -0.0711236223578453,
        0.03392408415675163,
        0.05401955917477608,
        -0.027300117537379265,
        0.034202951937913895,
        0.04124242812395096,
        0.029879340901970863,
        -0.05069689452648163,
        0.03257548436522484,
        0.056929100304841995,
        -0.011057418771088123,
        0.032339662313461304,
        0.004773995373398066,
        -0.041559722274541855,
        -0.06945475190877914,
        0.029907796531915665,
        -0.029541855677962303,
        0.039727672934532166,
        0.017379354685544968,
        0.025660645216703415,
        0.08276950567960739,
        -0.02883455902338028,
        0.014233007095754147,
        -0.017823508009314537,
        -0.018655283376574516,
        -0.04776750132441521,
        -0.053618866950273514,
        -0.019345737993717194,
        0.08973412215709686,
        0.03583400696516037,
        -0.04051019251346588,
        -0.05801232531666756,
        0.0599517896771431,
        -0.008653948083519936,
        -0.08909336477518082,
        0.10560207068920135,
        -4.1315632594228655e-34,
        0.012088581919670105,
        -0.0028433511033654213,
        0.023959074169397354,
        0.07819702476263046,
        -0.009173034690320492,
        -0.03136202320456505,
        0.028456365689635277,
        -0.10450050979852676,
        -0.10552117228507996,
        -0.03314351662993431,
        -0.037924136966466904,
        -0.02119479887187481,
        -0.03334604203701019,
        0.023372607305645943,
        -0.036761991679668427,
        -0.0734683945775032,
        0.004927578382194042,
        -0.04203486442565918,
        0.050814058631658554,
        0.03900957107543945,
        0.07441119104623795,
        0.08615871518850327,
        0.0428631491959095,
        -0.04433973506093025,
        -0.045208342373371124,
        0.000904013984836638,
        -0.006444475147873163,
        -0.03939131647348404,
        -0.02563275769352913,
        0.017285719513893127,
        0.004101065918803215,
        -0.025113658979535103,
        0.046537164598703384,
        0.021444154903292656,
        0.020197171717882156,
        0.018291853368282318,
        0.04565800726413727,
        -0.036994025111198425,
        -0.08401673287153244,
        -0.038410041481256485,
        -0.019758135080337524,
        0.03377882018685341,
        -0.03856360539793968,
        0.07150841504335403,
        -0.011838306672871113,
        -0.09142404049634933,
        -0.07357282191514969,
        -0.04009198397397995,
        0.009947898797690868,
        -0.013022750616073608,
        -0.05380867049098015,
        0.10149198025465012,
        0.004986962303519249,
        -0.05346962809562683,
        0.06458700448274612,
        -0.04076122120022774,
        0.04767369478940964,
        -0.02791438437998295,
        -0.0073255253955721855,
        -0.06213797628879547,
        0.11996594071388245,
        -0.02780194580554962,
        0.013559937477111816,
        0.03183834254741669,
        0.038174670189619064,
        0.028913017362356186,
        0.02543625608086586,
        -0.02390478365123272,
        0.032306112349033356,
        -0.06253059953451157,
        -0.07466164976358414,
        -0.04080721735954285,
        -0.017491091042757034,
        -0.011225937865674496,
        0.02936735562980175,
        -0.010065502487123013,
        -0.0015309032751247287,
        0.014422734268009663,
        0.0018350939499214292,
        -0.09974193572998047,
        -0.010894247330725193,
        -0.11126302927732468,
        -0.14650070667266846,
        0.02091016247868538,
        0.03452109172940254,
        -0.019875293597579002,
        -0.05803479254245758,
        -0.03249003738164902,
        0.02983677387237549,
        -0.03720584139227867,
        -0.04131169244647026,
        -0.011408817023038864,
        0.019076157361268997,
        -0.06202826276421547,
        -0.03894684091210365,
        -4.017357371084757e-33,
        0.08684707432985306,
        -0.01003565825521946,
        -0.03415897488594055,
        0.055348027497529984,
        -0.020973216742277145,
        -0.09027823060750961,
        0.04491099715232849,
        0.026155825704336166,
        0.00682693999260664,
        0.04839611425995827,
        -0.05201563984155655,
        -0.031702183187007904,
        0.0014055162901058793,
        0.002640297170728445,
        0.012007536366581917,
        -0.006602759473025799,
        0.022329851984977722,
        0.025404969230294228,
        -0.002743150107562542,
        -0.05407173931598663,
        -0.005227083805948496,
        -0.029841693118214607,
        -0.02196813002228737,
        0.0989248976111412,
        -0.034944433718919754,
        0.027462366968393326,
        0.0023925788700580597,
        -0.0071054608561098576,
        -0.06669438630342484,
        -0.057604528963565826,
        -0.002622500527650118,
        0.022724850103259087,
        -0.10159064829349518,
        0.09144819527864456,
        -0.03476210683584213,
        -0.03819933533668518,
        0.05909453704953194,
        -0.03425690159201622,
        -0.05620110407471657,
        0.007703610695898533,
        0.019875969737768173,
        0.030338311567902565,
        -0.044290002435445786,
        0.009442862123250961,
        0.032962389290332794,
        0.016719603911042213,
        -0.03881964460015297,
        0.05851048231124878,
        -0.025564169511198997,
        -0.044110171496868134,
        0.08546238392591476,
        -0.07837262749671936,
        -0.04055211693048477,
        -0.07298745959997177,
        0.026607777923345566,
        -0.030015945434570312,
        -0.005071825347840786,
        -0.06528361886739731,
        -0.0682196393609047,
        -0.01663779653608799,
        -0.049151189625263214,
        -0.04969310387969017,
        -0.0293374452739954,
        -0.06493760645389557,
        -0.027026444673538208,
        -0.012002323754131794,
        0.017965255305171013,
        0.04809432849287987,
        0.1305702179670334,
        -0.03956647217273712,
        0.04357796534895897,
        0.016543420031666756,
        -0.015107636339962482,
        0.041500501334667206,
        0.022855672985315323,
        -0.000394028757000342,
        -0.07349982112646103,
        -0.06071483716368675,
        0.06962550431489944,
        0.037221331149339676,
        -0.052848730236291885,
        0.014762897044420242,
        -0.0064705898985266685,
        0.07972471415996552,
        0.056785620748996735,
        0.04050198197364807,
        -0.041889600455760956,
        0.09098649024963379,
        0.0014638382708653808,
        -0.04199669882655144,
        -0.01297353208065033,
        0.06195402890443802,
        0.01210082694888115,
        0.02738523855805397,
        0.014795037917792797,
        -5.355280663366102e-8,
        -0.12030616402626038,
        -0.054563652724027634,
        -0.14029985666275024,
        0.01396001223474741,
        -0.037237994372844696,
        -0.04324173554778099,
        -0.025391308590769768,
        -0.14757472276687622,
        0.07284735888242722,
        -0.1160072535276413,
        -0.0032977613154798746,
        -0.006658829748630524,
        -0.08729028701782227,
        -0.06333811581134796,
        -0.11436762660741806,
        -0.020978203043341637,
        0.06238050386309624,
        0.07115383446216583,
        0.007144080940634012,
        0.003837878815829754,
        0.07130742818117142,
        0.05863477662205696,
        -0.0006329118623398244,
        -0.03550580143928528,
        -0.002762995893135667,
        0.008947349153459072,
        0.023775096982717514,
        0.06108304113149643,
        -0.030704166740179062,
        -0.03562115132808685,
        0.051460519433021545,
        -0.04099121689796448,
        0.015568994916975498,
        -0.039783306419849396,
        -0.038860298693180084,
        0.0354510135948658,
        0.1710338145494461,
        0.02039293758571148,
        0.09283863008022308,
        -0.016006093472242355,
        0.08203020691871643,
        0.07988244295120239,
        -0.06083434820175171,
        0.036190494894981384,
        -0.040032729506492615,
        -0.05119669437408447,
        -0.03036295436322689,
        0.03574832156300545,
        0.05733156576752663,
        -0.05642002820968628,
        0.019947772845625877,
        -0.006950333248823881,
        -0.032927095890045166,
        0.08302067965269089,
        0.023937374353408813,
        -0.039261817932128906,
        -0.014470923691987991,
        0.045066192746162415,
        0.009449047036468983,
        0.0053676944226026535,
        0.10905198007822037,
        0.032433755695819855,
        -0.009774102829396725,
        0.006739108357578516
      ]
    },
    {
      "id": "10ff1f6c",
      "filePath": "02-deep-research/src/state.ts",
      "content": "export function loadState(goal: string): ResearchState | null {\n\ttry {\n\t\tif (!fs.existsSync(STATE_FILE)) {\n\t\t\treturn null;\n\t\t}\n\t\tconst data = fs.readFileSync(STATE_FILE, 'utf-8');\n\t\tconst state = JSON.parse(data) as ResearchState;\n\n\t\t// 只有目标相同才恢复状态，否则从头开始\n\t\tif (state.goal === goal) {\n\t\t\tconsole.log(`🔄 Resuming from saved state (iteration ${state.iteration})`);\n\t\t\treturn state;\n\t\t} else {\n\t\t\tconsole.log(`🆕 Different goal detected. Starting fresh.`);\n\t\t\treturn null;\n\t\t}\n\t} catch (e: any) {\n\t\tconsole.error(\"Failed to load state:\", e.message);\n\t\treturn null;\n\t}\n}\n\n/**\n * 清除状态文件\n * 任务成功完成后调用，避免下次启动误恢复\n */",
      "startLine": 33,
      "endLine": 58,
      "type": "function",
      "name": "loadState",
      "embedding": [
        -0.1086936816573143,
        0.04759799689054489,
        -0.01749945804476738,
        0.0389983095228672,
        0.06481856107711792,
        -0.005102647468447685,
        -0.021070284768939018,
        0.07291564345359802,
        0.03378354385495186,
        0.02079835534095764,
        -0.061881598085165024,
        0.009894298389554024,
        -0.04982656612992287,
        0.004814873915165663,
        0.0034559748601168394,
        -0.02643996849656105,
        -0.10794846713542938,
        -0.028705857694149017,
        -0.03331056237220764,
        -0.08858177810907364,
        0.06675706803798676,
        -0.009843099862337112,
        0.03108830377459526,
        -0.023259470239281654,
        -0.016587208956480026,
        0.050711262971162796,
        -0.00719514349475503,
        -0.07089786231517792,
        0.005216680001467466,
        0.04741646349430084,
        -0.03873011842370033,
        -0.05691396817564964,
        -0.07225225865840912,
        0.0055337827652692795,
        0.04494936764240265,
        0.10126571357250214,
        -0.11424096673727036,
        -0.05561738833785057,
        -0.02941136434674263,
        -0.021888181567192078,
        0.016687091439962387,
        0.0575997494161129,
        -0.0426284521818161,
        -0.057732101529836655,
        0.09611617773771286,
        -0.0692250207066536,
        -0.042417146265506744,
        -0.009740966372191906,
        0.0072944615967571735,
        0.0341939739882946,
        -0.07000769674777985,
        0.02541080117225647,
        -0.029406080022454262,
        -0.007828698493540287,
        0.11186403036117554,
        0.05203879997134209,
        0.026169762015342712,
        0.00009783497080206871,
        -0.07893233001232147,
        -0.02170383371412754,
        0.009204343892633915,
        -0.08103586733341217,
        -0.017542395740747452,
        -0.09144964069128036,
        0.08274301886558533,
        0.054642464965581894,
        -0.05581008270382881,
        0.07046149671077728,
        0.013190384022891521,
        0.010119684971868992,
        0.007955172099173069,
        0.05299411341547966,
        0.01105821318924427,
        0.00659265136346221,
        0.0077683571726083755,
        -0.06790118664503098,
        -0.04467533528804779,
        0.01250469870865345,
        0.02308790571987629,
        0.009315188974142075,
        0.0245212335139513,
        -0.11487504839897156,
        0.0067650331184268,
        0.018608011305332184,
        -0.0066988905891776085,
        0.0625254288315773,
        0.005141320172697306,
        -0.03475740924477577,
        0.03427615389227867,
        -0.04402325674891472,
        -0.06465363502502441,
        -0.052192192524671555,
        -0.013989216648042202,
        0.08905941247940063,
        -0.01139993965625763,
        0.04740973562002182,
        0.0045608170330524445,
        0.03704318776726723,
        -0.01892460323870182,
        0.028249608352780342,
        -0.0013276482932269573,
        -0.011235441081225872,
        0.05992172658443451,
        0.03625689074397087,
        -0.07199399173259735,
        -0.041986558586359024,
        0.03009207919239998,
        -0.018352234736084938,
        -0.01577657461166382,
        0.038737401366233826,
        0.05615837499499321,
        0.0762292817234993,
        0.025675229728221893,
        0.05766775831580162,
        -0.0052871182560920715,
        -0.011143450625240803,
        -0.03620801120996475,
        -0.016903599724173546,
        -0.03915535286068916,
        0.10826258361339569,
        0.06894175708293915,
        -0.061062801629304886,
        -0.003560357727110386,
        0.022473780438303947,
        0.017253410071134567,
        -0.051930345594882965,
        0.1102176234126091,
        3.560242148196525e-33,
        -0.044080544263124466,
        -0.03625033050775528,
        0.004997735843062401,
        0.06388239562511444,
        -0.04043304920196533,
        -0.02089744806289673,
        0.041963644325733185,
        -0.0801287293434143,
        -0.1300310641527176,
        0.030178900808095932,
        -0.03130270540714264,
        0.05755482241511345,
        -0.04222220554947853,
        -0.014645306393504143,
        -0.03596559539437294,
        -0.06195672228932381,
        0.04318675771355629,
        -0.03200163692235947,
        0.048491865396499634,
        0.04397638514637947,
        0.09203743934631348,
        -0.007246851921081543,
        0.02929987572133541,
        -0.01576932705938816,
        0.015957191586494446,
        -0.02515004575252533,
        -0.027404503896832466,
        0.036276720464229584,
        -0.04760424792766571,
        0.006102402228862047,
        0.06080538034439087,
        0.002488025464117527,
        0.008561762049794197,
        0.035089731216430664,
        0.032118238508701324,
        -0.04861951246857643,
        0.07090084254741669,
        -0.00838533230125904,
        -0.13846540451049805,
        -0.047509126365184784,
        0.058551181107759476,
        0.04446164518594742,
        -0.005435064900666475,
        0.06079782173037529,
        -0.06500916182994843,
        -0.09909062832593918,
        -0.06007613241672516,
        -0.05570291727781296,
        0.011182000860571861,
        -0.020893700420856476,
        -0.06517655402421951,
        0.09305054694414139,
        -0.02084970846772194,
        -0.1017315611243248,
        0.07481718063354492,
        -0.006691368762403727,
        0.01054327841848135,
        -0.020823251456022263,
        0.004519887734204531,
        -0.03412194550037384,
        0.10796039551496506,
        -0.06822136044502258,
        -0.009593321941792965,
        0.042050182819366455,
        0.03744794428348541,
        0.047320883721113205,
        0.006127284374088049,
        -0.029514096677303314,
        0.011059063486754894,
        -0.027158115059137344,
        -0.007226851768791676,
        -0.04692031070590019,
        0.033191829919815063,
        -0.029984289780259132,
        0.06786463409662247,
        -0.011489986442029476,
        -0.016550667583942413,
        0.03470684215426445,
        -0.03389040380716324,
        -0.06505217403173447,
        0.060102034360170364,
        -0.09099152684211731,
        -0.12231110036373138,
        0.08369798213243484,
        0.043879278004169464,
        0.02791152335703373,
        -0.054442472755908966,
        -0.07541938871145248,
        0.005639019887894392,
        0.04238802194595337,
        -0.04901275038719177,
        -0.023764530196785927,
        -0.00822088960558176,
        -0.02467755414545536,
        -0.03780820965766907,
        -5.626382854697935e-33,
        0.1082615926861763,
        -0.04117272049188614,
        -0.01795046031475067,
        0.005762940272688866,
        0.035095490515232086,
        -0.062004610896110535,
        0.06184129789471626,
        0.01079744566231966,
        0.004693947732448578,
        0.04273931682109833,
        -0.007523348089307547,
        -0.03179837763309479,
        0.014100573025643826,
        0.030651019886136055,
        -0.007186393719166517,
        0.09019777923822403,
        -0.0024360206443816423,
        -0.06575365364551544,
        -0.025285927578806877,
        -0.04030049219727516,
        0.047205232083797455,
        -0.02099636383354664,
        -0.0156770721077919,
        0.06482286751270294,
        -0.0592309907078743,
        0.04119740054011345,
        0.006603778339922428,
        -0.020369067788124084,
        -0.09389296919107437,
        -0.07319477200508118,
        -0.004488821141421795,
        -0.007321278564631939,
        -0.06450334936380386,
        0.07362814247608185,
        -0.04167403653264046,
        0.009528078138828278,
        0.07820236682891846,
        -0.013110795058310032,
        -0.037475910037755966,
        0.04289625212550163,
        0.03992196545004845,
        0.04685269296169281,
        -0.07976903021335602,
        -0.018704460933804512,
        -0.016588883474469185,
        -0.02722924016416073,
        0.03544599935412407,
        0.08846376091241837,
        -0.01698947325348854,
        -0.058751724660396576,
        0.058686789125204086,
        -0.03645996004343033,
        -0.024613726884126663,
        -0.04214564338326454,
        0.03501836955547333,
        -0.030240142717957497,
        -0.012019033543765545,
        -0.0680893212556839,
        -0.07647286355495453,
        0.017922990024089813,
        0.0062804692424833775,
        -0.10730358213186264,
        -0.0764184296131134,
        -0.00486839609220624,
        -0.01843995228409767,
        -0.019357988610863686,
        -0.0226135216653347,
        0.027557503432035446,
        0.1617879867553711,
        0.011941710487008095,
        -0.015117425471544266,
        0.05016353726387024,
        0.042546577751636505,
        0.0227306317538023,
        0.05824553221464157,
        -0.0010339885484427214,
        -0.08691903948783875,
        -0.09940217435359955,
        0.08969899266958237,
        0.035673100501298904,
        -0.03242424502968788,
        0.0021377892699092627,
        -0.025075331330299377,
        0.02418695017695427,
        0.09037216752767563,
        0.05113533139228821,
        -0.019421031698584557,
        0.08503181487321854,
        0.004979815799742937,
        -0.017100300639867783,
        -0.018717294558882713,
        -0.007585298735648394,
        -0.028927015140652657,
        -0.004118644166737795,
        0.0021397466771304607,
        -5.596612950853341e-8,
        -0.08925630152225494,
        -0.06646599620580673,
        -0.05850517749786377,
        0.006324939429759979,
        0.01240041758865118,
        -0.04559461399912834,
        0.015383079648017883,
        -0.09174410253763199,
        0.038171909749507904,
        -0.08718245476484299,
        -0.004184935707598925,
        0.024713292717933655,
        -0.013150840066373348,
        -0.011526975780725479,
        -0.08163011074066162,
        -0.04057804495096207,
        0.08436185121536255,
        0.10182797908782959,
        -0.009982926771044731,
        0.02784629911184311,
        0.055923979729413986,
        0.060841772705316544,
        0.013719714246690273,
        0.008677560836076736,
        0.03030344657599926,
        -0.009943454526364803,
        0.018973831087350845,
        -0.010154985822737217,
        -0.02485688589513302,
        -0.01878993585705757,
        -0.01567111164331436,
        -0.016401322558522224,
        0.02979978732764721,
        -0.058689918369054794,
        -0.04428248479962349,
        0.03271323814988136,
        0.13028374314308167,
        0.030365336686372757,
        0.051690589636564255,
        -0.015770981088280678,
        0.12336402386426926,
        0.09509237110614777,
        -0.025282910093665123,
        0.06028066575527191,
        -0.06505876779556274,
        -0.04192240536212921,
        -0.06871127337217331,
        0.03297439590096474,
        0.0723000168800354,
        -0.06068261340260506,
        -0.02172899805009365,
        -0.035828087478876114,
        -0.09003300964832306,
        0.05563121661543846,
        0.0028732395730912685,
        -0.05713890865445137,
        0.015018722042441368,
        0.021970564499497414,
        -0.03389159217476845,
        0.018215680494904518,
        0.11186595261096954,
        -0.024136224761605263,
        -0.029480937868356705,
        -0.04388607293367386
      ]
    },
    {
      "id": "f31eaf68",
      "filePath": "02-deep-research/src/state.ts",
      "content": "export function clearState(): void {\n\ttry {\n\t\tif (fs.existsSync(STATE_FILE)) {\n\t\t\tfs.unlinkSync(STATE_FILE);\n\t\t\tconsole.log(`🗑️  State file cleared`);\n\t\t}\n\t} catch (e: any) {\n\t\tconsole.error(\"Failed to clear state:\", e.message);\n\t}\n}\n\n// ============================================\n// 结果保存模块\n// ============================================\n\nconst RESULT_DIR = path.join(__dirname, 'result');\n\n/**\n * 将研究结果保存为 Markdown 文件\n *\n * @param goal 研究目标（用于生成文件名）\n * @param answer 最终答案\n * @param state 完整状态（用于生成元数据）\n */",
      "startLine": 59,
      "endLine": 82,
      "type": "function",
      "name": "clearState",
      "embedding": [
        -0.09950382262468338,
        0.059721384197473526,
        0.014818599447607994,
        0.03349842131137848,
        0.06639090925455093,
        0.012171519920229912,
        0.058968182653188705,
        0.032294951379299164,
        0.03210465982556343,
        0.03785734623670578,
        -0.021640770137310028,
        0.00497064832597971,
        -0.05217818543314934,
        -0.02620909921824932,
        -0.05623317137360573,
        0.049321889877319336,
        -0.11915643513202667,
        0.04292863607406616,
        -0.060406655073165894,
        -0.03836760297417641,
        0.057673025876283646,
        0.03760461509227753,
        0.04392481595277786,
        0.01715209148824215,
        0.0013316672993823886,
        0.003995938692241907,
        -0.0015301842940971255,
        -0.050283025950193405,
        0.0013730194186791778,
        0.005632046144455671,
        -0.00911037903279066,
        0.0105359498411417,
        -0.05932746082544327,
        -0.0180223248898983,
        0.07195039838552475,
        0.09466969966888428,
        -0.04209202155470848,
        -0.08889539539813995,
        0.02561039850115776,
        -0.006530086975544691,
        -0.022046053782105446,
        0.0767638310790062,
        -0.045401688665151596,
        -0.06702728569507599,
        0.06055522337555885,
        -0.027158604934811592,
        -0.02926984801888466,
        -0.005618257448077202,
        -0.0554579496383667,
        0.004686822649091482,
        -0.030014820396900177,
        0.055427186191082,
        -0.02478163130581379,
        -0.07985197752714157,
        0.12445791065692902,
        -0.03848053514957428,
        -0.03082243911921978,
        0.008737903088331223,
        -0.08511830121278763,
        -0.023228252306580544,
        -0.03252536058425903,
        -0.0777350664138794,
        -0.022348564118146896,
        -0.07403133064508438,
        0.08796150237321854,
        0.10064447671175003,
        -0.0628276839852333,
        0.09027734398841858,
        0.01916833221912384,
        0.00850941427052021,
        -0.07740475982427597,
        0.043594472110271454,
        0.00819461327046156,
        0.02370605245232582,
        -0.058973900973796844,
        -0.029947280883789062,
        -0.057184211909770966,
        0.053571928292512894,
        -0.04154421389102936,
        -0.05135499686002731,
        0.043325960636138916,
        -0.11548154801130295,
        0.0392722450196743,
        0.010400055907666683,
        0.02729298546910286,
        0.07767801731824875,
        -0.031231604516506195,
        -0.07197664678096771,
        0.10535934567451477,
        -0.01498013362288475,
        -0.03018181398510933,
        -0.008529041893780231,
        0.05384322628378868,
        0.06063755229115486,
        0.023923581466078758,
        0.021675365045666695,
        0.04150812700390816,
        0.0872378945350647,
        -0.011631792411208153,
        0.05815267935395241,
        0.021575970575213432,
        0.015045605599880219,
        -0.032541580498218536,
        -0.06185712292790413,
        -0.04314640536904335,
        0.037166327238082886,
        0.02903209626674652,
        0.011648494750261307,
        0.01731349714100361,
        -0.01976657658815384,
        -0.01548813097178936,
        -0.011017566546797752,
        -0.03498810529708862,
        -0.023187320679426193,
        -0.010698803700506687,
        0.010660804808139801,
        0.0063637616112828255,
        -0.0357830785214901,
        -0.013332739472389221,
        0.031754616647958755,
        0.0404847152531147,
        -0.04808598384261131,
        -0.05985034257173538,
        0.05780023708939552,
        -0.06492283195257187,
        -0.055067483335733414,
        0.11703695356845856,
        1.1798458839722378e-32,
        -0.03323086351156235,
        -0.050209883600473404,
        -0.07148237526416779,
        0.07738909125328064,
        0.0031171576119959354,
        -0.006371597293764353,
        0.02565445378422737,
        -0.07927875220775604,
        -0.13634563982486725,
        0.034246768802404404,
        -0.036770325154066086,
        -0.026546791195869446,
        -0.051950130611658096,
        -0.06036381423473358,
        -0.035164281725883484,
        -0.05024665594100952,
        0.042335644364356995,
        -0.022983931005001068,
        0.01603017747402191,
        -0.008721616119146347,
        0.06564179062843323,
        0.0641126036643982,
        0.013616690412163734,
        -0.02327686920762062,
        0.018725324422121048,
        -0.0449865497648716,
        -0.00467339251190424,
        -0.020489124581217766,
        0.006732775829732418,
        -0.023314382880926132,
        0.058410968631505966,
        -0.0005467621958814561,
        0.04242119565606117,
        0.031062252819538116,
        -0.0031613605096936226,
        -0.018311716616153717,
        0.016738947480916977,
        -0.03255371004343033,
        -0.10953406244516373,
        -0.0023825804237276316,
        0.02305152826011181,
        0.011458738707005978,
        -0.0720880851149559,
        0.04638529196381569,
        0.0029870951548218727,
        -0.09828031808137894,
        -0.08512331545352936,
        -0.0714949294924736,
        0.047553420066833496,
        -0.02708311751484871,
        -0.05245855823159218,
        0.11850844323635101,
        0.014965959824621677,
        -0.06193995475769043,
        0.04716729745268822,
        0.0018633479485288262,
        -0.008160424418747425,
        -0.018597504124045372,
        -0.0452209934592247,
        -0.031538911163806915,
        0.11821606010198593,
        -0.029953081160783768,
        -0.040156055241823196,
        0.001444020657800138,
        0.01236061379313469,
        -0.007578833494335413,
        0.026556212455034256,
        0.022998500615358353,
        0.032314736396074295,
        -0.08006840944290161,
        -0.06478862464427948,
        -0.0259786918759346,
        0.031708795577287674,
        -0.007802234031260014,
        0.03784533590078354,
        -0.040152594447135925,
        -0.051123205572366714,
        -0.012964097782969475,
        0.02241215482354164,
        -0.09942749887704849,
        0.03363073989748955,
        -0.13046997785568237,
        -0.11638817191123962,
        0.029321037232875824,
        0.07115676254034042,
        -0.013910271227359772,
        -0.06781424582004547,
        -0.052508577704429626,
        0.001365030650049448,
        0.034181494265794754,
        -0.04806899279356003,
        -0.011247821152210236,
        -0.015763018280267715,
        0.0007428571116179228,
        -0.036372002214193344,
        -1.4699789017166993e-32,
        0.13900306820869446,
        0.035178352147340775,
        -0.017386574298143387,
        0.0005645673954859376,
        -0.07341868430376053,
        -0.006187502294778824,
        0.06709597259759903,
        -0.022172968834638596,
        -0.010893222875893116,
        0.050450243055820465,
        0.016107678413391113,
        0.0034108462277799845,
        0.07431840151548386,
        0.03524453565478325,
        -0.013125269673764706,
        0.04812519624829292,
        -0.0007522928644903004,
        0.00699025159701705,
        -0.06324487924575806,
        0.0029560395050793886,
        0.02136041410267353,
        -0.023913554847240448,
        -0.017146700993180275,
        0.05908696725964546,
        -0.03796149417757988,
        0.035509973764419556,
        0.015822961926460266,
        -0.008093593642115593,
        -0.01205914281308651,
        -0.00034782220609486103,
        0.029237309470772743,
        -0.009572401642799377,
        -0.09534048289060593,
        0.031076207756996155,
        -0.02428685873746872,
        -0.07789690047502518,
        0.08589480817317963,
        -0.03377853333950043,
        -0.015236802399158478,
        -0.004747312515974045,
        0.037871554493904114,
        0.038531359285116196,
        -0.08898719400167465,
        -0.03665846586227417,
        0.015480331145226955,
        0.029050277546048164,
        -0.029284242540597916,
        0.08164790272712708,
        -0.04176381602883339,
        -0.09889861196279526,
        0.07326081395149231,
        -0.08609278500080109,
        0.006617968901991844,
        -0.04825793206691742,
        0.04379652068018913,
        -0.012954991310834885,
        -0.007693922147154808,
        -0.08206937462091446,
        -0.09268956631422043,
        0.02854316681623459,
        0.031184274703264236,
        -0.013820374384522438,
        -0.061722125858068466,
        -0.04082565754652023,
        0.010432717390358448,
        -0.007944573648273945,
        -0.044800058007240295,
        0.08481036126613617,
        0.10164327919483185,
        -0.035027626901865005,
        -0.017128974199295044,
        0.03370159864425659,
        -0.00016381552268285304,
        0.015286008827388287,
        0.05447039753198624,
        0.051954273134469986,
        -0.038880426436662674,
        -0.04624151438474655,
        0.06523745507001877,
        0.06518080830574036,
        -0.023345116525888443,
        0.004686998203396797,
        -0.054381001740694046,
        0.04114091768860817,
        0.026159632951021194,
        0.031028540804982185,
        -0.07631444931030273,
        0.0602901391685009,
        0.006189029663801193,
        -0.006251152139157057,
        -0.019013812765479088,
        -0.015236027538776398,
        0.03357704356312752,
        0.035617511719465256,
        -0.02510247565805912,
        -7.382007538581092e-8,
        -0.0888514444231987,
        -0.08614528179168701,
        -0.09018975496292114,
        -0.04901191219687462,
        -0.032772064208984375,
        -0.01907067932188511,
        -0.025670768693089485,
        -0.09494813531637192,
        -0.007106086239218712,
        -0.11154265701770782,
        -0.016905784606933594,
        -0.010443480685353279,
        -0.1337127685546875,
        -0.049879416823387146,
        -0.08334775269031525,
        -0.08340264111757278,
        0.013136832974851131,
        0.0814480185508728,
        0.007826294749975204,
        0.0013734637759625912,
        0.0525021068751812,
        -0.014661658555269241,
        -0.021668607369065285,
        0.048383038491010666,
        -0.0011752033606171608,
        -0.0290402639657259,
        0.013288835063576698,
        0.030885349959135056,
        -0.02626950666308403,
        -0.03756275400519371,
        0.004346786066889763,
        -0.045662395656108856,
        0.06459213048219681,
        0.005064074415713549,
        -0.022760838270187378,
        0.10030754655599594,
        0.12592096626758575,
        0.01303856074810028,
        0.03781301528215408,
        0.05423368886113167,
        0.071860171854496,
        0.11563757061958313,
        0.0020721436012536287,
        0.025181414559483528,
        -0.038637228310108185,
        -0.057420384138822556,
        0.01656634919345379,
        -0.030621828511357307,
        0.04305076226592064,
        -0.054462648928165436,
        -0.0006769676692783833,
        -0.008047571405768394,
        -0.10496161878108978,
        0.12852632999420166,
        -0.02298378013074398,
        -0.03417089208960533,
        -0.000369214394595474,
        0.041438326239585876,
        -0.06847727298736572,
        0.02760067582130432,
        0.06620659679174423,
        -0.0045254286378622055,
        -0.008709208108484745,
        -0.013966486789286137
      ]
    },
    {
      "id": "dedfdbbe",
      "filePath": "02-deep-research/src/state.ts",
      "content": "export function saveResult(goal: string, answer: string, state: ResearchState): void {\n\ttry {\n\t\t// 确保 result 目录存在\n\t\tif (!fs.existsSync(RESULT_DIR)) {\n\t\t\tfs.mkdirSync(RESULT_DIR, { recursive: true });\n\t\t}\n\n\t\t// 生成文件名：日期 + 目标前 30 字符\n\t\tconst timestamp = new Date().toISOString().slice(0, 10);\n\t\tconst safeGoal = goal.slice(0, 30).replace(/[^a-zA-Z0-9\\u4e00-\\u9fa5]/g, '_');\n\t\tconst filename = `${timestamp}_${safeGoal}.md`;\n\t\tconst filepath = path.join(RESULT_DIR, filename);\n\n\t\t// 构建 Markdown 内容\n\t\tconst content = `# Research Result\n\n## Goal\n${goal}\n\n## Answer\n${answer}\n\n---\n\n## Metadata\n- **Date**: ${new Date().toISOString()}\n- **Iterations**: ${state.iteration}\n- **Queries Used**: ${state.searched_queries.length}\n- **URLs Visited**: ${state.visited_urls.length}\n\n### Searched Queries\n${state.searched_queries.map(q => `- ${q}`).join('\\n')}\n\n### Visited URLs\n${state.visited_urls.map(u => `- ${u}`).join('\\n')}\n`;\n\n\t\tfs.writeFileSync(filepath, content, 'utf-8');\n\t\tconsole.log(`📄 Result saved to: ${filepath}`);\n\t} catch (e: any) {\n\t\tconsole.error(\"Failed to save result:\", e.message);\n\t}\n}",
      "startLine": 83,
      "endLine": 126,
      "type": "function",
      "name": "saveResult",
      "embedding": [
        -0.019419526681303978,
        0.09853684902191162,
        0.011989452876150608,
        0.07717464864253998,
        0.08553728461265564,
        0.03549927473068237,
        -0.0242744293063879,
        0.0724753811955452,
        0.047706492245197296,
        0.040308065712451935,
        -0.033604592084884644,
        0.0008472328772768378,
        -0.008610237389802933,
        -0.06513328105211258,
        -0.0543726310133934,
        -0.0293845497071743,
        -0.1470818966627121,
        0.013522741384804249,
        -0.07730825990438461,
        -0.09061947464942932,
        0.0834328904747963,
        0.05234382301568985,
        0.08910161256790161,
        -0.011970744468271732,
        0.024916470050811768,
        0.009294601157307625,
        0.008033066056668758,
        -0.0454217828810215,
        -0.05587011203169823,
        0.019531380385160446,
        -0.0009065787307918072,
        -0.011921391822397709,
        -0.037729427218437195,
        0.00918914470821619,
        0.07483402639627457,
        0.0884801521897316,
        -0.041142337024211884,
        -0.07892223447561264,
        0.012484217062592506,
        -0.07312406599521637,
        0.001326217083260417,
        0.04042797535657883,
        -0.009418226778507233,
        -0.061072662472724915,
        0.03196492791175842,
        -0.07494012266397476,
        -0.06895771622657776,
        -0.0542328804731369,
        -0.004189252387732267,
        0.07352592796087265,
        -0.05551505833864212,
        0.016617538407444954,
        -0.07381892204284668,
        -0.03094741515815258,
        0.10599417984485626,
        0.02265162765979767,
        -0.04140692576766014,
        -0.016693435609340668,
        -0.10307103395462036,
        -0.08495970070362091,
        0.02740825153887272,
        -0.09379702061414719,
        -0.00772857153788209,
        -0.09169629961252213,
        0.03679582104086876,
        0.029654335230588913,
        -0.06573795527219772,
        0.05377260223031044,
        0.06487563997507095,
        0.04148891940712929,
        -0.021704936400055885,
        0.07183811068534851,
        -0.05847084894776344,
        0.0045084566809237,
        -0.038049113005399704,
        -0.0424986407160759,
        -0.03417683392763138,
        0.03080754354596138,
        -0.04899900034070015,
        -0.021929867565631866,
        0.03054112195968628,
        -0.1332329660654068,
        0.004980652593076229,
        0.0049591329880058765,
        0.05791541934013367,
        -0.004229244310408831,
        0.004711857531219721,
        -0.012628302909433842,
        0.032203372567892075,
        -0.1349056512117386,
        -0.10477275401353836,
        -0.023249881342053413,
        0.018691986799240112,
        0.0414518266916275,
        -0.014451330527663231,
        0.0510636530816555,
        0.007648242637515068,
        0.07445838302373886,
        0.03860228881239891,
        0.024181023240089417,
        0.05213537812232971,
        0.019239207729697227,
        -0.017096199095249176,
        -0.04972899332642555,
        0.02075909450650215,
        0.012637569569051266,
        0.04642548784613609,
        -0.00551222451031208,
        0.009129302576184273,
        0.023650415241718292,
        -0.007759398315101862,
        0.07538527995347977,
        -0.0010187835432589054,
        0.01325660664588213,
        0.029391322284936905,
        -0.0554729700088501,
        -0.03817344084382057,
        -0.00006855104584246874,
        -0.013035845011472702,
        0.09882824122905731,
        0.1637217402458191,
        -0.0024847646709531546,
        -0.03390606492757797,
        0.04671883210539818,
        0.03033994883298874,
        -0.13432656228542328,
        0.10932070761919022,
        5.646700539867929e-33,
        0.026246652007102966,
        -0.020728813484311104,
        0.02574106678366661,
        0.01757567934691906,
        0.013283715583384037,
        0.039798419922590256,
        0.04521511122584343,
        -0.04004780203104019,
        -0.05222781002521515,
        0.017011528834700584,
        -0.0690571591258049,
        0.0045463633723556995,
        -0.012702041305601597,
        -0.06972193717956543,
        -0.01504172571003437,
        0.006856546737253666,
        0.01906067505478859,
        -0.043874457478523254,
        0.04211360216140747,
        0.06367001682519913,
        0.0747142806649208,
        -0.012134791351854801,
        -0.012303241528570652,
        0.016854416579008102,
        0.035319529473781586,
        -0.061200037598609924,
        0.000004446204457053682,
        -0.03414776176214218,
        -0.0678468868136406,
        -0.027836695313453674,
        0.028785422444343567,
        -0.014452856965363026,
        0.006414475850760937,
        0.008208387531340122,
        0.035123974084854126,
        0.02037082053720951,
        -0.003825077321380377,
        0.00776506494730711,
        -0.12715965509414673,
        -0.00642000837251544,
        0.04905357584357262,
        0.0007620069663971663,
        -0.022870546206831932,
        0.018928341567516327,
        -0.043289851397275925,
        -0.026946622878313065,
        -0.09223157167434692,
        -0.03881702199578285,
        0.03058139607310295,
        -0.022554287686944008,
        -0.06373783200979233,
        0.07447094470262527,
        -0.022138552740216255,
        -0.06337280571460724,
        0.04770222678780556,
        -0.0142420195043087,
        0.0181397907435894,
        -0.028477743268013,
        -0.006949574686586857,
        -0.018966669216752052,
        0.07905887812376022,
        -0.015955140814185143,
        -0.007687371224164963,
        -0.01881973259150982,
        -0.009498216211795807,
        -0.04159178584814072,
        0.08053173869848251,
        0.06805334985256195,
        0.009120863862335682,
        0.014427188783884048,
        -0.06580448150634766,
        -0.028048451989889145,
        0.03475475683808327,
        -0.036374833434820175,
        0.0025337461847811937,
        -0.07878971844911575,
        -0.051404040306806564,
        -0.028224116191267967,
        0.019631732255220413,
        -0.042632222175598145,
        0.03757962957024574,
        -0.13601216673851013,
        -0.12472431361675262,
        -0.006088878493756056,
        0.05750243365764618,
        0.02485433965921402,
        -0.007750856224447489,
        -0.04542160406708717,
        0.0006063366890884936,
        -0.0005937339155934751,
        -0.02503829076886177,
        -0.005234240088611841,
        -0.016944365575909615,
        -0.0751638188958168,
        -0.017687201499938965,
        -6.543090287476773e-33,
        0.10124851018190384,
        -0.022500408813357353,
        0.005092705599963665,
        0.02787172421813011,
        0.00413748761638999,
        -0.01866561733186245,
        0.07881952077150345,
        0.03847268968820572,
        -0.012951496057212353,
        -0.007597789634019136,
        -0.040806349366903305,
        -0.03181556612253189,
        0.05103921890258789,
        -0.04528546705842018,
        0.010376173071563244,
        0.06442355364561081,
        -0.0432504303753376,
        -0.0884738340973854,
        -0.024859368801116943,
        -0.01839299313724041,
        -0.021169817075133324,
        0.03484621271491051,
        0.0500657744705677,
        0.05617876723408699,
        -0.03281204402446747,
        0.035675447434186935,
        0.05075697973370552,
        -0.013559900224208832,
        -0.06892599165439606,
        -0.07833171635866165,
        0.01493818499147892,
        0.014915624633431435,
        -0.11767594516277313,
        0.0449383407831192,
        0.019037386402487755,
        -0.024944322183728218,
        0.04685964435338974,
        -0.004552301950752735,
        -0.034734588116407394,
        0.10677926987409592,
        0.020321587100625038,
        0.006880403961986303,
        -0.03872248902916908,
        -0.00912120845168829,
        0.04455436021089554,
        0.0046897828578948975,
        0.024785062298178673,
        0.08189733326435089,
        -0.020050186663866043,
        -0.018780119717121124,
        0.0897604450583458,
        -0.10714302957057953,
        -0.1041342169046402,
        -0.0021551167592406273,
        0.08754914999008179,
        -0.011567206121981144,
        -0.019325310364365578,
        -0.09491704404354095,
        -0.04576120898127556,
        0.03411700949072838,
        -0.04732648283243179,
        -0.032957229763269424,
        0.011076265946030617,
        -0.06765760481357574,
        0.033004824072122574,
        -0.027575170621275902,
        -0.0038393225986510515,
        0.0354747548699379,
        0.09924332797527313,
        0.023387249559164047,
        -0.025041894987225533,
        0.054320335388183594,
        0.05054066702723503,
        0.036699797958135605,
        0.0638900026679039,
        0.03421248868107796,
        -0.0546170175075531,
        -0.03559071943163872,
        0.055409181863069534,
        0.023636136204004288,
        -0.04424622654914856,
        0.04940277338027954,
        -0.002797417575493455,
        0.03832470625638962,
        0.03156484290957451,
        -0.020626287907361984,
        -0.03384096920490265,
        0.08242759108543396,
        -0.021954994648694992,
        -0.0754607766866684,
        -0.023095836862921715,
        0.005511808674782515,
        -0.00467673409730196,
        -0.027015982195734978,
        -0.017160771414637566,
        -4.876236658901689e-8,
        -0.1126142367720604,
        -0.0005895188078284264,
        -0.10985506325960159,
        0.018331129103899002,
        -0.008423457853496075,
        -0.02180047519505024,
        0.04088287055492401,
        -0.039837636053562164,
        -0.0009522557957097888,
        -0.06551636010408401,
        0.060411449521780014,
        -0.00019386978237889707,
        -0.028372056782245636,
        0.004605090711265802,
        -0.08155307173728943,
        -0.05025046318769455,
        0.08611215651035309,
        0.06397651880979538,
        -0.018837152048945427,
        0.0011405368568375707,
        0.07645062357187271,
        0.038209959864616394,
        -0.011289684101939201,
        0.005797899328172207,
        0.0514599047601223,
        0.004216641187667847,
        -0.002224223455414176,
        0.01932007074356079,
        -0.016728689894080162,
        -0.011958061717450619,
        0.01758556254208088,
        -0.07201696932315826,
        0.03767938166856766,
        -0.0017276086146011949,
        -0.004467191640287638,
        -0.025397615507245064,
        0.1195860505104065,
        0.0033892791252583265,
        0.024165142327547073,
        0.0573517382144928,
        0.1248287484049797,
        0.0758366584777832,
        0.003947865217924118,
        0.034588176757097244,
        -0.041156601160764694,
        -0.10891374945640564,
        0.04151494801044464,
        -0.007840866222977638,
        0.09211446344852448,
        0.004654330667108297,
        -0.03145980462431908,
        -0.0719854086637497,
        -0.012911315076053143,
        0.057302117347717285,
        -0.019126195460557938,
        -0.07646257430315018,
        0.07022592425346375,
        0.036501605063676834,
        -0.009503785520792007,
        -0.01517445594072342,
        0.1066785454750061,
        -0.035397719591856,
        0.0198894664645195,
        0.033661339432001114
      ]
    },
    {
      "id": "23ce971c",
      "filePath": "02-deep-research/src/index.ts",
      "content": "import 'dotenv/config';\nimport OpenAI from 'openai';\nimport { INITIAL_STATE, ResearchState } from './types';\nimport { searchGoogle, visitWebpage, summarizeContent, SearchResult } from './tools';\nimport { saveState, loadState, clearState, saveResult } from './state';\nimport { ChatCompletionTool } from 'openai/resources/chat/completions';\n\n// ============================================\n// 初始化\n// ============================================\n\nconst client = new OpenAI({\n\tapiKey: process.env.OPENAI_API_KEY,\n\tbaseURL: process.env.OPENAI_BASE_URL,\n});\n\n// ============================================\n// 简易并发控制器（替代 p-limit，避免 ESM 兼容问题）\n// ============================================",
      "startLine": 1,
      "endLine": 19,
      "type": "other",
      "embedding": [
        -0.07124563306570053,
        0.03574758023023605,
        0.02816317416727543,
        0.03452896326780319,
        0.0213500764220953,
        -0.011415419168770313,
        0.027226591482758522,
        -0.007103297859430313,
        0.022688934579491615,
        0.017513277009129524,
        -0.018868133425712585,
        -0.04443884640932083,
        -0.020598582923412323,
        -0.025907987728714943,
        0.045679185539484024,
        0.05666377767920494,
        -0.08739019185304642,
        -0.0228627510368824,
        -0.03246016055345535,
        -0.06611177325248718,
        0.09307407587766647,
        0.08259975910186768,
        0.08660710602998734,
        -0.024654420092701912,
        0.025038443505764008,
        0.04075480252504349,
        0.018330959603190422,
        -0.046391140669584274,
        -0.011714459396898746,
        0.04234864190220833,
        0.051740363240242004,
        0.02885454334318638,
        -0.03286852687597275,
        0.023354442790150642,
        0.05082092061638832,
        0.09479854255914688,
        -0.0976189523935318,
        -0.04935022443532944,
        0.015318067744374275,
        0.02561517059803009,
        0.035613078624010086,
        0.043464794754981995,
        -0.010223405435681343,
        -0.05615509673953056,
        0.03657139465212822,
        -0.045673467218875885,
        -0.07224297523498535,
        -0.06565754860639572,
        0.0303268451243639,
        0.007324068807065487,
        -0.13444733619689941,
        0.0061861868016421795,
        -0.078167624771595,
        -0.03583585470914841,
        0.04084296524524689,
        0.024871181696653366,
        -0.04180488735437393,
        -0.015462412498891354,
        0.006204530131071806,
        -0.09130267053842545,
        0.057620249688625336,
        -0.06631191074848175,
        0.03716684877872467,
        -0.08910224586725235,
        -0.015267635695636272,
        0.07455489784479141,
        -0.11807472258806229,
        0.03941147401928902,
        0.030173566192388535,
        -0.04005325213074684,
        -0.06310940533876419,
        0.07742547988891602,
        -0.027384772896766663,
        -0.02330828458070755,
        -0.029415244236588478,
        -0.06576467305421829,
        -0.09146107733249664,
        0.02605452574789524,
        0.02090987004339695,
        -0.0745592713356018,
        0.03191477060317993,
        -0.09921914339065552,
        0.002259710105136037,
        0.020947234705090523,
        0.032384809106588364,
        0.020749695599079132,
        0.03830774500966072,
        -0.11887569725513458,
        0.060940686613321304,
        -0.03985803574323654,
        -0.042923808097839355,
        -0.06701797246932983,
        -0.012087075039744377,
        0.028236880898475647,
        0.080840565264225,
        0.046655699610710144,
        -0.044550344347953796,
        0.04814174026250839,
        -0.009404540061950684,
        0.06455349922180176,
        0.047734588384628296,
        -0.020334061235189438,
        -0.026409992948174477,
        0.0034319586120545864,
        -0.06273908913135529,
        0.0036135632544755936,
        0.06112366169691086,
        0.06675264984369278,
        0.0014572058571502566,
        0.01021034549921751,
        -0.010874718427658081,
        0.04181065782904625,
        0.022047361359000206,
        -0.02975809946656227,
        -0.030185097828507423,
        0.016344964504241943,
        -0.007583734579384327,
        -0.0666620209813118,
        0.04621085524559021,
        0.10345889627933502,
        0.08196133375167847,
        -0.053845904767513275,
        -0.0943286195397377,
        0.02836751937866211,
        -0.06115151196718216,
        -0.04250062257051468,
        0.06796897947788239,
        1.549467152150447e-32,
        0.015948586165905,
        -0.029971349984407425,
        -0.04818270727992058,
        0.04195978865027428,
        0.03477524220943451,
        0.020018713548779488,
        0.00844800379127264,
        -0.061407074332237244,
        -0.1533799171447754,
        -0.05711296573281288,
        -0.10042305290699005,
        0.010667062364518642,
        -0.07411496341228485,
        -0.06106642633676529,
        -0.0904364138841629,
        -0.08611618727445602,
        -0.02713211625814438,
        0.07416322082281113,
        0.052960146218538284,
        -0.025709545239806175,
        0.01107470877468586,
        0.05722919479012489,
        0.030516155064105988,
        0.026509394869208336,
        -0.04243084788322449,
        -0.006299158092588186,
        -0.0354379266500473,
        -0.04522709921002388,
        -0.03612822666764259,
        -0.024618109688162804,
        0.0791984498500824,
        -0.02935211732983589,
        -0.0036131376400589943,
        0.050402432680130005,
        -0.005462557543069124,
        0.0009104171767830849,
        0.03601711988449097,
        -0.042378246784210205,
        -0.08895201236009598,
        -0.03024459443986416,
        -0.028531718999147415,
        0.025853753089904785,
        -0.006669022608548403,
        -0.0026274605188518763,
        -0.04380277171730995,
        -0.06466806679964066,
        -0.11056044697761536,
        0.03482089564204216,
        -0.00793864019215107,
        -0.004851869773119688,
        -0.1291992962360382,
        0.06913085281848907,
        -0.012328746728599072,
        -0.013998394832015038,
        0.030949311330914497,
        -0.1072399765253067,
        -0.020896118134260178,
        0.03537167236208916,
        0.023312214761972427,
        -0.02612423151731491,
        0.009381265379488468,
        0.03358098119497299,
        0.024096788838505745,
        -0.018036644905805588,
        0.06551449745893478,
        -0.006804278586059809,
        0.06331654638051987,
        0.0460907444357872,
        0.024265073239803314,
        -0.05437386780977249,
        0.006430209614336491,
        0.004575345665216446,
        0.042412739247083664,
        0.0281892791390419,
        0.020852694287896156,
        -0.07369981706142426,
        -0.023252645507454872,
        -0.012386253103613853,
        -0.006234903819859028,
        -0.04506373405456543,
        0.008772168308496475,
        -0.03135323524475098,
        -0.07531793415546417,
        0.04725756496191025,
        -0.01783652976155281,
        0.003022789256647229,
        -0.008501903153955936,
        -0.080076202750206,
        0.029039615765213966,
        0.027932388707995415,
        -0.033333711326122284,
        0.013733325526118279,
        -0.009113195352256298,
        -0.055194657295942307,
        -0.0387226827442646,
        -1.532928387444759e-32,
        0.10942627489566803,
        -0.006512925028800964,
        0.02721705473959446,
        0.033778347074985504,
        0.025465378537774086,
        -0.017408164218068123,
        0.06432314962148666,
        -0.002367017325013876,
        0.03725240379571915,
        0.0653739869594574,
        0.04710409417748451,
        -0.02819301001727581,
        0.0527997761964798,
        -0.06778059899806976,
        0.021370181813836098,
        0.06332439184188843,
        0.018786320462822914,
        -0.030329512432217598,
        -0.041379060596227646,
        -0.023266861215233803,
        -0.023846950381994247,
        0.07815999537706375,
        -0.08141988515853882,
        0.08430661261081696,
        -0.0045104376040399075,
        0.03807223588228226,
        0.00992139708250761,
        0.0381600484251976,
        -0.0642172172665596,
        -0.06987761706113815,
        -0.030516887083649635,
        0.028273196890950203,
        -0.17236550152301788,
        0.11562234163284302,
        -0.07233687490224838,
        0.024564778432250023,
        0.09032101184129715,
        0.044526368379592896,
        -0.03915128856897354,
        0.07009398937225342,
        0.06477484107017517,
        -0.02176063321530819,
        -0.0768732875585556,
        -0.01659541204571724,
        0.026117384433746338,
        -0.026044167578220367,
        0.010906160809099674,
        0.10434341430664062,
        -0.05656295269727707,
        -0.05978523939847946,
        0.07653617113828659,
        -0.06413604319095612,
        -0.0485561266541481,
        -0.07851745933294296,
        0.01730109378695488,
        0.0018607487436383963,
        0.04434829577803612,
        -0.06563184410333633,
        -0.10862874984741211,
        -0.0656106173992157,
        0.034702129662036896,
        -0.0788164734840393,
        0.008268307894468307,
        0.014455697499215603,
        0.012839574366807938,
        -0.038415659219026566,
        -0.024685772135853767,
        0.08053524047136307,
        0.05865955725312233,
        -0.09627094864845276,
        -0.038345422595739365,
        0.001181326573714614,
        0.07712467014789581,
        -0.0032115972135215998,
        0.10396113991737366,
        0.02452320232987404,
        0.024350708350539207,
        0.012132564559578896,
        0.09384385496377945,
        0.06752318888902664,
        -0.06415709108114243,
        0.016984013840556145,
        0.031181374564766884,
        0.006041597109287977,
        0.016980299726128578,
        0.03350083902478218,
        -0.05924978107213974,
        0.10741188377141953,
        -0.03156418725848198,
        0.015101340599358082,
        -0.09106556326150894,
        -0.037180542945861816,
        -0.0051156808622181416,
        0.028834670782089233,
        0.04197971150279045,
        -6.953974462931001e-8,
        -0.13231198489665985,
        -0.0389283262193203,
        -0.08876213431358337,
        0.04242604225873947,
        -0.04820883274078369,
        0.014824149198830128,
        0.031887929886579514,
        0.01760072633624077,
        0.02278091572225094,
        -0.058774493634700775,
        0.00777387386187911,
        -0.0017992095090448856,
        -0.05134953185915947,
        -0.012746160849928856,
        -0.08042438328266144,
        -0.0025035471189767122,
        0.016312479972839355,
        0.08176063746213913,
        -0.006543789990246296,
        -0.051649875938892365,
        0.05882254242897034,
        0.000774002110119909,
        0.05621956288814545,
        0.022035306319594383,
        0.01853606104850769,
        -0.0383806936442852,
        -0.03256863355636597,
        0.040517259389162064,
        -0.024583524093031883,
        -0.011768419295549393,
        -0.01608888991177082,
        -0.058029044419527054,
        0.023039791733026505,
        -0.07367539405822754,
        -0.001957374159246683,
        -0.0017249222146347165,
        0.07735484838485718,
        0.0138783510774374,
        -0.02769855223596096,
        0.058034222573041916,
        0.041514404118061066,
        0.04061800613999367,
        -0.04426056146621704,
        -0.0012590237893164158,
        -0.025749392807483673,
        0.0008761642966419458,
        -0.012968768365681171,
        0.023632854223251343,
        0.09243661165237427,
        -0.03112976811826229,
        -0.014917858876287937,
        -0.056074969470500946,
        0.024718312546610832,
        0.03351213410496712,
        -0.026912793517112732,
        -0.03736932948231697,
        0.029483109712600708,
        0.016211042180657387,
        -0.022345203906297684,
        0.016016807407140732,
        0.036488112062215805,
        0.018072333186864853,
        0.01051540207117796,
        0.0032773655839264393
      ]
    },
    {
      "id": "3a9fb374",
      "filePath": "02-deep-research/src/index.ts",
      "content": "async function runWithConcurrencyLimit<T>(\n\ttasks: (() => Promise<T>)[],\n\tlimit: number\n): Promise<T[]> {\n\tconst results: T[] = [];\n\tconst executing: Promise<void>[] = [];\n\n\tfor (const task of tasks) {\n\t\tconst p = task().then(result => {\n\t\t\tresults.push(result);\n\t\t});\n\t\texecuting.push(p as Promise<void>);\n\n\t\tif (executing.length >= limit) {\n\t\t\tawait Promise.race(executing);\n\t\t\t// 移除已完成的 promise\n\t\t\texecuting.splice(0, executing.findIndex(e => e === p) + 1);\n\t\t}\n\t}\n\n\tawait Promise.all(executing);\n\treturn results;\n}\n\n// ============================================\n// 工具定义（暴露给 LLM 的 Function Calling Schema）\n// ============================================\n\nconst tools: ChatCompletionTool[] = [\n\t{\n\t\ttype: \"function\",\n\t\tfunction: {\n\t\t\tname: \"search\",\n\t\t\tdescription: \"Search the web for information. Returns URLs with snippets.\",\n\t\t\tparameters: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tquery: { type: \"string\", description: \"The search keywords\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"query\"]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\ttype: \"function\",\n\t\tfunction: {\n\t\t\tname: \"visit_multiple\",\n\t\t\tdescription: \"Visit multiple URLs and read their content. Use this after search to gather detailed information.\",\n\t\t\tparameters: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\turls: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\titems: { type: \"string\" },\n\t\t\t\t\t\tdescription: \"List of URLs to visit (max 5)\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"urls\"]\n\t\t\t}\n\t\t}\n\t}\n];\n\n// ============================================\n// 核心函数：执行深度研究\n// ============================================",
      "startLine": 20,
      "endLine": 86,
      "type": "function",
      "name": "runWithConcurrencyLimit",
      "embedding": [
        -0.05358705669641495,
        0.05196891725063324,
        0.018676714971661568,
        0.0577986054122448,
        -0.022509969770908356,
        -0.015232402831315994,
        0.001972886500880122,
        0.02385624498128891,
        0.06447301805019379,
        -0.010419018566608429,
        -0.035601310431957245,
        0.0033508052583783865,
        -0.0034440364688634872,
        -0.0018479706486687064,
        0.007649908307939768,
        0.023195570334792137,
        -0.042320616543293,
        -0.04781795293092728,
        -0.06990228593349457,
        -0.10171642154455185,
        0.16431297361850739,
        0.01913757063448429,
        0.07787954062223434,
        -0.017424628138542175,
        -0.07763602584600449,
        0.005593211855739355,
        -0.0605894960463047,
        -0.11073031276464462,
        -0.060846395790576935,
        0.028427692130208015,
        0.05810103565454483,
        -0.044634755700826645,
        -0.05504964664578438,
        0.039792973548173904,
        -0.017456011846661568,
        0.03615608066320419,
        -0.09499847143888474,
        -0.07800080627202988,
        0.06377242505550385,
        -0.034005336463451385,
        0.026736680418252945,
        0.08482930064201355,
        -0.04847443103790283,
        -0.05992741882801056,
        0.09924996644258499,
        -0.10318103432655334,
        -0.09557408094406128,
        -0.07879289239645004,
        0.007760822307318449,
        0.04597543552517891,
        -0.07588924467563629,
        -0.014302747324109077,
        -0.05893607437610626,
        -0.01745707169175148,
        0.08128879219293594,
        0.020664047449827194,
        -0.06308039277791977,
        -0.02970867045223713,
        0.01362821739166975,
        -0.05994807183742523,
        0.06719023734331131,
        -0.11383599787950516,
        0.05824660137295723,
        -0.04725686460733414,
        0.014237549155950546,
        -0.004978331737220287,
        -0.03708989918231964,
        -0.00019284035079181194,
        0.07941369712352753,
        0.005782709456980228,
        -0.0028430696111172438,
        0.0561634860932827,
        -0.009504958987236023,
        -0.0236118845641613,
        -0.023221425712108612,
        -0.03265173360705376,
        -0.04690594598650932,
        -0.04092443361878395,
        -0.09723373502492905,
        -0.03247659653425217,
        -0.022374456748366356,
        -0.05621993541717529,
        0.009987322613596916,
        0.01003557350486517,
        0.02748478204011917,
        0.03176781162619591,
        -0.025044018402695656,
        -0.07385067641735077,
        0.041496798396110535,
        -0.09327930957078934,
        -0.0426192581653595,
        -0.052666738629341125,
        -0.107297882437706,
        0.0703730583190918,
        0.04545687511563301,
        0.03850674256682396,
        -0.051684413105249405,
        0.0026173957157880068,
        -0.0040978603065013885,
        0.0126425726339221,
        0.018792172893881798,
        -0.002077797893434763,
        0.0492238812148571,
        -0.05163979157805443,
        -0.01695661060512066,
        0.006564180366694927,
        0.04014772176742554,
        -0.0024842149578034878,
        -0.07328575104475021,
        0.004435434006154537,
        -0.04336324334144592,
        0.07239186018705368,
        -0.009194472804665565,
        0.026669299229979515,
        -0.025388266891241074,
        -0.01792886108160019,
        0.03430073335766792,
        -0.041155532002449036,
        0.011405350640416145,
        0.1291654407978058,
        0.13552621006965637,
        0.04336034134030342,
        -0.05585022270679474,
        0.006084158085286617,
        0.0037918526213616133,
        -0.060016561299562454,
        0.0840090736746788,
        1.1548043278166706e-32,
        0.09477575123310089,
        -0.0574716217815876,
        -0.00042242923518642783,
        -0.01127775851637125,
        0.016870416700839996,
        0.014592788182199001,
        0.09791504591703415,
        0.010999795980751514,
        -0.09730450063943863,
        -0.0010280526475980878,
        -0.05788632109761238,
        0.005362170748412609,
        -0.04039550572633743,
        -0.06876084208488464,
        -0.034446388483047485,
        -0.05514874681830406,
        0.05818048492074013,
        0.04393761232495308,
        0.0675799697637558,
        0.004261638969182968,
        -0.002270609373226762,
        -0.003190424758940935,
        -0.034124717116355896,
        0.010409378446638584,
        0.06355679035186768,
        -0.02878991886973381,
        -0.017774762585759163,
        0.03377750888466835,
        -0.11300357431173325,
        -0.02190071903169155,
        0.06525230407714844,
        0.038684338331222534,
        -0.06981473416090012,
        0.04000630974769592,
        0.04021307826042175,
        0.028818167746067047,
        -0.023949958384037018,
        0.048812270164489746,
        -0.08306959271430969,
        -0.034919653087854385,
        0.05565372109413147,
        -0.014831816777586937,
        -0.009126262739300728,
        -0.027986884117126465,
        -0.07678765058517456,
        -0.04006209969520569,
        -0.10020537674427032,
        -0.01753460243344307,
        0.03401254117488861,
        0.017010938376188278,
        -0.051863186061382294,
        0.05271996930241585,
        -0.023817865177989006,
        -0.03665599599480629,
        0.09243880957365036,
        -0.010934801772236824,
        -0.002640607301145792,
        0.03698330372571945,
        0.010633128695189953,
        0.015813510864973068,
        -0.013386443257331848,
        -0.05256585031747818,
        -0.04504093900322914,
        -0.010109922848641872,
        0.03843863680958748,
        -0.016335513442754745,
        0.013886918313801289,
        0.0426446869969368,
        0.03226815164089203,
        0.012003523297607899,
        0.0008087570313364267,
        0.005513899493962526,
        0.06880021095275879,
        -0.007462307810783386,
        0.03605763986706734,
        -0.04762030392885208,
        -0.05549120530486107,
        -0.05501268804073334,
        -0.029534736648201942,
        -0.016231544315814972,
        0.019035562872886658,
        -0.06966280937194824,
        -0.033331919461488724,
        0.08190983533859253,
        0.010108621791005135,
        0.09798118472099304,
        -0.02146986313164234,
        -0.05736224725842476,
        -0.008783685974776745,
        0.019025549292564392,
        -0.04537319019436836,
        0.03475825488567352,
        -0.01393584068864584,
        -0.07720950245857239,
        -0.05939307436347008,
        -1.0492453024548138e-32,
        0.09774015843868256,
        -0.016864215955138206,
        0.01136073935776949,
        0.04895448684692383,
        0.05513981729745865,
        0.0026075856294482946,
        0.07546817511320114,
        -0.023019520565867424,
        -0.04028811678290367,
        0.04466627165675163,
        0.016906332224607468,
        -0.03211478143930435,
        0.029041383415460587,
        -0.03257407993078232,
        -0.004183323122560978,
        0.14138111472129822,
        0.017830222845077515,
        -0.05870581045746803,
        0.040011048316955566,
        -0.007320080883800983,
        -0.013320916332304478,
        0.1101403683423996,
        -0.014179333113133907,
        0.002123825950548053,
        -0.05237570032477379,
        0.002082106191664934,
        0.04042259603738785,
        0.03221810609102249,
        -0.04503609612584114,
        -0.06213079020380974,
        0.019674766808748245,
        -0.018920596688985825,
        -0.11569564044475555,
        0.05582461506128311,
        0.025879211723804474,
        -0.04861025884747505,
        0.051246527582407,
        0.08128642290830612,
        -0.03918240964412689,
        0.063438281416893,
        0.049620334059000015,
        -0.009773775935173035,
        -0.01699075847864151,
        -0.01909860223531723,
        0.049776606261730194,
        -0.08807096630334854,
        0.03723287209868431,
        0.05932430550456047,
        -0.045844048261642456,
        -0.023494282737374306,
        0.03533649072051048,
        -0.04560275748372078,
        -0.07821904122829437,
        0.0002630947274155915,
        0.03326720744371414,
        -0.061923522502183914,
        0.021204542368650436,
        -0.11650953441858292,
        0.006648010574281216,
        -0.03090718947350979,
        0.017665008082985878,
        -0.023295633494853973,
        0.04030214622616768,
        0.021413957700133324,
        0.08417990058660507,
        -0.04511941596865654,
        -0.045191891491413116,
        -0.03766186535358429,
        0.04028434306383133,
        0.027762066572904587,
        -0.0539928637444973,
        0.009523137472569942,
        0.060686010867357254,
        0.021391652524471283,
        0.07762671262025833,
        -0.0663297101855278,
        -0.062025293707847595,
        -0.02804088033735752,
        0.11170987784862518,
        0.07766913622617722,
        0.02664526365697384,
        0.03021707944571972,
        0.0464211069047451,
        0.0071054487489163876,
        -0.0004493231244850904,
        -0.006784453988075256,
        -0.044240403920412064,
        0.1032755970954895,
        -0.04980215057730675,
        -0.005467428360134363,
        -0.01705031655728817,
        -0.10148630291223526,
        -0.016584882512688637,
        -0.03692566975951195,
        -0.0002821010129991919,
        -5.82690482531234e-8,
        -0.10727787762880325,
        0.053846750408411026,
        -0.053940825164318085,
        0.022536955773830414,
        0.004706855863332748,
        -0.01106670405715704,
        0.0456661693751812,
        0.03607264533638954,
        -0.0167499128729105,
        -0.0656479150056839,
        0.04669801518321037,
        0.010764834471046925,
        0.04296628013253212,
        0.09213311970233917,
        -0.01365016121417284,
        -0.05789325386285782,
        0.044878482818603516,
        -0.00931893102824688,
        -0.004584618378430605,
        0.008177019655704498,
        0.028450407087802887,
        0.010916763916611671,
        -0.002680993638932705,
        0.017929093912243843,
        0.13824471831321716,
        0.034374166280031204,
        -0.013471848331391811,
        0.047070443630218506,
        -0.013727674260735512,
        0.035200368613004684,
        -0.0684335008263588,
        -0.06191466748714447,
        0.04675737023353577,
        0.004527909215539694,
        0.03451523184776306,
        -0.00861158687621355,
        0.046363428235054016,
        -0.021847229450941086,
        -0.026770129799842834,
        0.08597014844417572,
        0.09139145910739899,
        0.034796614199876785,
        0.06939586251974106,
        0.0399644672870636,
        0.012992212548851967,
        -0.04592221975326538,
        0.009056488052010536,
        -0.003008692990988493,
        0.08672943711280823,
        0.009881668724119663,
        -0.019202731549739838,
        -0.06137264519929886,
        -0.04104902595281601,
        0.030747605487704277,
        -0.04017576202750206,
        -0.027974750846624374,
        0.07625225186347961,
        -0.054459914565086365,
        -0.04256024211645126,
        0.0246296264231205,
        0.12514029443264008,
        -0.03417617827653885,
        -0.024700818583369255,
        0.007137733977288008
      ]
    },
    {
      "id": "b79acfae",
      "filePath": "02-deep-research/src/index.ts",
      "content": "async function runResearch(goal: string) {\n\t// 1. 尝试从磁盘加载状态（断点续跑）\n\tlet state: ResearchState = loadState(goal) || { ...INITIAL_STATE, goal };\n\n\tconsole.log(`\\n🎯 Goal: \"${goal}\"`);\n\tconsole.log(\"-----------------------------------\");\n\n\t// 2. 核心循环\n\twhile (state.iteration < state.max_iterations) {\n\t\tstate.iteration++;\n\t\tconsole.log(`\\n🔄 [Step ${state.iteration}/${state.max_iterations}] Thinking...`);\n\n\t\t// 3. 构造上下文\n\t\tconst context = `\nCurrent Goal: ${state.goal}\n\nAlready Searched Queries (DO NOT repeat these):\n${state.searched_queries.length > 0 ? state.searched_queries.map(q => `- \"${q}\"`).join(\"\\n\") : \"(none yet)\"}\n\nAlready Visited URLs (DO NOT visit these again):\n${state.visited_urls.length > 0 ? state.visited_urls.join(\"\\n\") : \"(none yet)\"}\n\nGathered Information (Summarized):\n${state.gathered_info.map((info, i) => `[Note ${i + 1}]: ${info}`).join(\"\\n\\n\")}\n\nInstructions:\n1. If you need more info, use 'search' with a NEW query.\n2. After searching, use 'visit_multiple' with the promising URLs to get full content.\n3. If you have enough info to answer the goal comprehensively, respond with your final answer (do not call tools).\n4. Avoid repeating searches or visits.\n`;\n\n\t\t// 4. 调用 LLM\n\t\tconst completion = await client.chat.completions.create({\n\t\t\tmodel: process.env.OPENAI_MODEL || 'gpt-4o',\n\t\t\tmessages: [\n\t\t\t\t{\n\t\t\t\t\trole: \"system\",\n\t\t\t\t\tcontent: \"You are a Deep Research Worker. Be thorough but efficient. When you have enough information, synthesize and respond.\"\n\t\t\t\t},\n\t\t\t\t{ role: \"user\", content: context }\n\t\t\t],\n\t\t\ttools: tools,\n\t\t\ttool_choice: \"auto\",\n\t\t});\n\n\t\tconst message = completion.choices[0].message;\n\n\t\t// 5. 处理工具调用\n\t\tif (message.tool_calls && message.tool_calls.length > 0) {",
      "startLine": 87,
      "endLine": 136,
      "type": "function",
      "name": "runResearch (part 1)",
      "embedding": [
        -0.030939914286136627,
        0.048038411885499954,
        0.021128583699464798,
        0.07561967521905899,
        0.02649836242198944,
        -0.006129471119493246,
        0.040048807859420776,
        -0.012669396586716175,
        0.06680253148078918,
        -0.0366433709859848,
        -0.0467870756983757,
        -0.010417652316391468,
        -0.005256517790257931,
        -0.030056659132242203,
        0.008411281742155552,
        0.04101644456386566,
        -0.06646896153688431,
        0.006281637586653233,
        -0.057995717972517014,
        -0.1122828796505928,
        0.09498072415590286,
        0.03660232201218605,
        0.051406729966402054,
        -0.024059627205133438,
        -0.030150579288601875,
        0.04437720403075218,
        -0.005147094372659922,
        -0.07890424877405167,
        0.02622024528682232,
        0.015473232604563236,
        -0.0058365208096802235,
        0.005647186655551195,
        -0.06267499178647995,
        0.07641474157571793,
        0.02113727480173111,
        0.05166501924395561,
        -0.09713850170373917,
        -0.06430400907993317,
        0.018635734915733337,
        -0.0416683629155159,
        0.02830120362341404,
        0.06346344202756882,
        -0.015572739765048027,
        -0.0705404132604599,
        0.07014456391334534,
        -0.06176653504371643,
        -0.10757437348365784,
        -0.03948711231350899,
        0.060059089213609695,
        0.01447244267910719,
        -0.07063046097755432,
        -0.033352162688970566,
        -0.04967784881591797,
        0.018619855865836143,
        0.10503924638032913,
        0.04097244143486023,
        -0.06687860935926437,
        -0.036619316786527634,
        -0.07989680767059326,
        -0.0667814165353775,
        0.06112915277481079,
        -0.10696467757225037,
        -0.014201909303665161,
        -0.06299706548452377,
        0.02214399352669716,
        -0.0061613111756742,
        -0.03283659368753433,
        0.006909549236297607,
        0.07042447477579117,
        0.042352985590696335,
        0.0030503543093800545,
        0.055161818861961365,
        -0.01475620549172163,
        -0.04381883144378662,
        -0.047449544072151184,
        -0.0014258809387683868,
        -0.017035415396094322,
        -0.013229464180767536,
        -0.043993741273880005,
        -0.026709342375397682,
        -0.04017643257975578,
        -0.0878349095582962,
        -0.008423589169979095,
        0.0021109094377607107,
        0.03803586959838867,
        -0.02161680907011032,
        -0.0007619169191457331,
        -0.10453667491674423,
        0.08059049397706985,
        -0.103534035384655,
        -0.0750504657626152,
        -0.01648722030222416,
        -0.011209685355424881,
        0.04127129167318344,
        0.05349187180399895,
        0.07039089500904083,
        0.012197734788060188,
        0.029609566554427147,
        -0.001858118106611073,
        0.07587236911058426,
        0.022291919216513634,
        0.030243415385484695,
        0.034452203661203384,
        -0.01880035363137722,
        -0.06580451875925064,
        0.0019647330045700073,
        -0.008117006160318851,
        0.06126602739095688,
        -0.0349523164331913,
        0.029543953016400337,
        -0.040953993797302246,
        0.04054644703865051,
        0.05146399512887001,
        0.07367081195116043,
        -0.019136730581521988,
        -0.0058558015152812,
        0.03867962211370468,
        -0.009928993880748749,
        0.006567565258592367,
        0.14267566800117493,
        0.1339004933834076,
        0.014225589111447334,
        -0.033818840980529785,
        0.0006793963257223368,
        0.019016114994883537,
        -0.07591725140810013,
        0.0432695671916008,
        3.1395422709288285e-33,
        0.08448352664709091,
        -0.019238611683249474,
        0.00037077811430208385,
        -0.0023549720644950867,
        0.009919265285134315,
        0.09459203481674194,
        0.07236821204423904,
        0.013941656798124313,
        -0.0895339846611023,
        0.022535264492034912,
        -0.06684243679046631,
        0.07457869499921799,
        -0.03637823835015297,
        -0.047418516129255295,
        -0.015651436522603035,
        -0.07737745344638824,
        0.01080973632633686,
        0.048695020377635956,
        0.03609586879611015,
        0.022922134026885033,
        0.07129702717065811,
        -0.021268688142299652,
        -0.025083545595407486,
        0.017155062407255173,
        0.05128803849220276,
        -0.01778978854417801,
        -0.019113635644316673,
        -0.03827637806534767,
        -0.12278768420219421,
        -0.013757326640188694,
        0.019792072474956512,
        0.024550393223762512,
        -0.06769614666700363,
        -0.0014284104108810425,
        0.06327858567237854,
        0.029596641659736633,
        0.048524852842092514,
        0.025371549651026726,
        -0.07498371601104736,
        -0.04233786091208458,
        0.01599879004061222,
        -0.01728835515677929,
        0.016151312738656998,
        -0.0693754181265831,
        -0.09312727302312851,
        -0.0603640116751194,
        -0.09313458949327469,
        -0.027435312047600746,
        -0.02849888801574707,
        0.02096366696059704,
        -0.02432451769709587,
        0.03931937366724014,
        -0.05793431028723717,
        -0.053235121071338654,
        0.01622501015663147,
        -0.039179980754852295,
        -0.00302768568508327,
        0.02662353217601776,
        0.006889586336910725,
        0.05691888928413391,
        0.006935880985110998,
        -0.058568455278873444,
        0.0046517252922058105,
        0.029185080900788307,
        0.03888733312487602,
        0.04075899347662926,
        0.00011442740651546046,
        0.0771067887544632,
        0.08965358138084412,
        0.006226147059351206,
        -0.023997623473405838,
        0.021801091730594635,
        0.07717441767454147,
        -0.06116456165909767,
        0.04310048371553421,
        -0.13776005804538727,
        -0.05581659823656082,
        -0.03489244729280472,
        -0.018923044204711914,
        -0.027349181473255157,
        0.04799952358007431,
        -0.10395391285419464,
        -0.095117948949337,
        0.06260089576244354,
        0.041197121143341064,
        0.0642317533493042,
        0.007272766903042793,
        -0.0949675589799881,
        -0.03822775185108185,
        -0.011681748554110527,
        -0.08451782912015915,
        0.02204287238419056,
        0.02435488998889923,
        -0.06294550746679306,
        -0.011607280932366848,
        -2.5540942889994962e-33,
        0.11586859077215195,
        -0.08567839115858078,
        0.04897747188806534,
        0.021282529458403587,
        0.10011323541402817,
        -0.08051586896181107,
        0.08225405216217041,
        -0.005595587193965912,
        -0.041856925934553146,
        -0.03246219456195831,
        -0.005883292760699987,
        -0.018773691728711128,
        0.07419777661561966,
        -0.007631746120750904,
        0.010878929868340492,
        0.12661266326904297,
        0.017735516652464867,
        -0.06559767574071884,
        0.022353943437337875,
        0.04319663718342781,
        -0.036523304879665375,
        0.049944762140512466,
        -0.06556451320648193,
        -0.00020414245955180377,
        -0.031417686492204666,
        0.030503684654831886,
        0.05701000615954399,
        0.012739957310259342,
        -0.01981610804796219,
        -0.028516391292214394,
        0.03383095934987068,
        -0.03558522090315819,
        -0.1307111233472824,
        0.023391513153910637,
        -0.021505942568182945,
        0.00885437149554491,
        0.05271226912736893,
        0.03848816454410553,
        -0.051926255226135254,
        0.06317660212516785,
        0.07111547887325287,
        -0.015597369521856308,
        -0.02327597141265869,
        0.02033276855945587,
        -0.004088530782610178,
        -0.03988604247570038,
        0.015350067056715488,
        0.10834914445877075,
        -0.08616147935390472,
        -0.02170499786734581,
        0.048651788383722305,
        -0.06011033430695534,
        -0.0985264778137207,
        0.028990626335144043,
        0.021450921893119812,
        -0.046786658465862274,
        -0.018148034811019897,
        -0.04582558944821358,
        -0.038497619330883026,
        -0.03698604926466942,
        -0.006811927072703838,
        0.005065493751317263,
        -0.014763528481125832,
        -0.003280888544395566,
        0.07136314362287521,
        -0.034775085747241974,
        -0.009468602947890759,
        0.008234390988945961,
        0.05487669259309769,
        -0.001721424050629139,
        -0.08581271767616272,
        0.035081151872873306,
        0.08244116604328156,
        0.01424557063728571,
        0.07673059403896332,
        0.02512938715517521,
        -0.04140973463654518,
        -0.04111980274319649,
        0.0782417431473732,
        0.04232439771294594,
        -0.0996144711971283,
        -0.008812329731881618,
        0.029078204184770584,
        -0.0019970559515058994,
        0.0027653502766042948,
        0.02425980381667614,
        -0.029478205367922783,
        0.13172957301139832,
        -0.05078781768679619,
        -0.03197319433093071,
        -0.017623700201511383,
        -0.026673180982470512,
        0.019381675869226456,
        0.004882918205112219,
        0.00585006782785058,
        -5.2574058884147234e-8,
        -0.10949384421110153,
        0.02252417616546154,
        -0.04881004989147186,
        0.04587230458855629,
        0.05997925251722336,
        -0.009154153987765312,
        0.058677587658166885,
        0.07145289331674576,
        -0.04065168648958206,
        -0.08481216430664062,
        0.03677228465676308,
        0.029817009344697,
        0.014636308886110783,
        0.0336657352745533,
        -0.024254431948065758,
        -0.03206348419189453,
        0.025953393429517746,
        0.008770778775215149,
        -0.03810485824942589,
        0.009022741578519344,
        0.0006275585619732738,
        0.04371894523501396,
        -0.014986412599682808,
        0.010037751868367195,
        0.0450737327337265,
        0.017071479931473732,
        0.007860830053687096,
        0.012731777504086494,
        -0.0015933206304907799,
        0.03398408368229866,
        -0.005679759196937084,
        -0.02327710948884487,
        0.019396649673581123,
        -0.01248963177204132,
        0.03781528398394585,
        -0.05280722305178642,
        0.07689862698316574,
        -0.026832833886146545,
        -0.01898505724966526,
        0.050434261560440063,
        0.12983983755111694,
        0.07290256023406982,
        0.04404453560709953,
        0.0180202703922987,
        0.014355989173054695,
        -0.06728804856538773,
        -0.003693847917020321,
        -0.052634548395872116,
        0.12163947522640228,
        -0.036166440695524216,
        -0.029666835442185402,
        -0.07796910405158997,
        -0.02994638867676258,
        0.01689031533896923,
        0.01779237948358059,
        -0.012419372797012329,
        0.05793238803744316,
        0.005011765751987696,
        -0.011912486515939236,
        0.05546478182077408,
        0.07928890734910965,
        -0.05378209426999092,
        -0.05451777204871178,
        0.03257981687784195
      ]
    },
    {
      "id": "1abd4125",
      "filePath": "02-deep-research/src/index.ts",
      "content": "const message = completion.choices[0].message;\n\n\t\t// 5. 处理工具调用\n\t\tif (message.tool_calls && message.tool_calls.length > 0) {\n\t\t\tconst toolCall = message.tool_calls[0];\n\t\t\tconst funcName = toolCall.function.name;\n\t\t\tconst args = JSON.parse(toolCall.function.arguments);\n\n\t\t\tconsole.log(`🛠️  Action: ${funcName}`);\n\n\t\t\tif (funcName === 'search') {\n\t\t\t\tconst query = args.query;\n\t\t\t\tif (state.searched_queries.includes(query)) {\n\t\t\t\t\tstate.gathered_info.push(`[SKIP] Already searched for \"${query}\".`);\n\t\t\t\t\tconsole.log(`⚠️  Skipped duplicate search`);\n\t\t\t\t} else {\n\t\t\t\t\tstate.searched_queries.push(query);\n\t\t\t\t\tconst searchResults = await searchGoogle(query);\n\t\t\t\t\tif (searchResults.length === 0) {\n\t\t\t\t\t\tstate.gathered_info.push(`No results found for \"${query}\".`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst result = `Search Results for \"${query}\":\\n` +\n\t\t\t\t\t\t\tsearchResults.map((r: SearchResult) => `- ${r.title}: ${r.url}\\n  ${r.snippet}`).join(\"\\n\\n\");\n\t\t\t\t\t\tstate.gathered_info.push(result);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (funcName === 'visit_multiple') {\n\t\t\t\tlet urls: string[] = args.urls || [];\n\t\t\t\t// 限制最多 5 个 URL\n\t\t\t\turls = urls.slice(0, 5);\n\t\t\t\t// 过滤掉已访问的 URL\n\t\t\t\tconst newUrls = urls.filter(url => !state.visited_urls.includes(url));\n\n\t\t\t\tif (newUrls.length === 0) {\n\t\t\t\t\tstate.gathered_info.push(\"[SKIP] All URLs have been visited already.\");\n\t\t\t\t\tconsole.log(`⚠️  All URLs already visited`);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(`🌐 Visiting ${newUrls.length} URLs in parallel (max 3 concurrent)...`);\n\n\t\t\t\t\t// 构造任务列表\n\t\t\t\t\tconst tasks = newUrls.map(url => async () => {\n\t\t\t\t\t\tstate.visited_urls.push(url);\n\t\t\t\t\t\tconst content = await visitWebpage(url);\n\t\t\t\t\t\t// 对每个页面做总结，压缩 Token\n\t\t\t\t\t\tconst summary = await summarizeContent(content, state.goal);\n\t\t\t\t\t\treturn { url, summary };\n\t\t\t\t\t});\n\n\t\t\t\t\t// 并发访问（带限流）",
      "startLine": 132,
      "endLine": 181,
      "type": "function",
      "name": "runResearch (part 2)",
      "embedding": [
        -0.04119376465678215,
        0.04352374002337456,
        0.052723806351423264,
        0.04346825182437897,
        -0.024314766749739647,
        -0.007696839049458504,
        0.028941823169589043,
        -0.01690986379981041,
        0.052475277334451675,
        -0.020283766090869904,
        -0.03237483650445938,
        -0.026826627552509308,
        -0.02567392587661743,
        -0.00736549636349082,
        -0.020326931029558182,
        -0.001657334971241653,
        -0.08469712734222412,
        -0.004113805014640093,
        -0.041419271379709244,
        -0.12832285463809967,
        0.11360128968954086,
        0.07129870355129242,
        0.03992071747779846,
        -0.038715727627277374,
        -0.041311025619506836,
        0.01563863642513752,
        0.0005634485860355198,
        -0.11458829790353775,
        -0.04062710329890251,
        -0.010672105476260185,
        0.0005350436549633741,
        -0.028902865946292877,
        -0.08621229231357574,
        0.036449868232011795,
        0.005948119331151247,
        -0.022152699530124664,
        -0.09526698291301727,
        -0.0799868106842041,
        0.06311725825071335,
        -0.035213109105825424,
        -0.020796213299036026,
        0.08821083605289459,
        -0.01573939621448517,
        -0.09633472561836243,
        0.037235863506793976,
        -0.045610662549734116,
        -0.1021871417760849,
        -0.0063911909237504005,
        0.054024629294872284,
        0.02325245924293995,
        -0.05187300220131874,
        -0.042033497244119644,
        -0.03571658581495285,
        -0.0011217226274311543,
        0.14136703312397003,
        0.023284511640667915,
        -0.10024327784776688,
        -0.03375586122274399,
        -0.06167057529091835,
        -0.06365017592906952,
        0.053695786744356155,
        -0.0929122343659401,
        0.010799341835081577,
        -0.06203939765691757,
        0.005739037413150072,
        -0.007834521122276783,
        -0.03933097794651985,
        0.031569886952638626,
        0.0674772709608078,
        0.04767837002873421,
        -0.015582057647407055,
        0.056167107075452805,
        0.018467675894498825,
        0.008011618629097939,
        -0.06320014595985413,
        -0.04010362550616264,
        -0.04758462682366371,
        -0.021889954805374146,
        -0.06173595041036606,
        -0.00953709613531828,
        -0.026784945279359818,
        -0.0999670997262001,
        -0.01877119205892086,
        0.030603161081671715,
        0.04699055105447769,
        0.019713357090950012,
        -0.02427702210843563,
        -0.07099221646785736,
        0.03978995978832245,
        -0.12342024594545364,
        -0.04553303122520447,
        -0.013675935566425323,
        -0.03179426118731499,
        0.03616730496287346,
        0.04309428855776787,
        0.08507424592971802,
        -0.05443046987056732,
        0.006621178239583969,
        -0.02294611744582653,
        0.059946026653051376,
        0.01269140187650919,
        -0.017621204257011414,
        0.05918990075588226,
        -0.017681071534752846,
        -0.023351110517978668,
        0.013969668187201023,
        0.013767248019576073,
        0.01883687637746334,
        -0.028136704117059708,
        0.061122067272663116,
        -0.025769200176000595,
        0.07886595278978348,
        0.024784455075860023,
        0.06374896317720413,
        -0.05449627339839935,
        -0.019553039222955704,
        0.07036252319812775,
        -0.04486442357301712,
        -0.015143890865147114,
        0.06952773034572601,
        0.11726608872413635,
        0.023074254393577576,
        -0.04832260310649872,
        -0.013659094460308552,
        0.03535439819097519,
        -0.05312173441052437,
        0.06200046092271805,
        5.581854394004818e-33,
        0.07364628463983536,
        -0.020659618079662323,
        -0.06504397839307785,
        0.010386873967945576,
        -0.02460421435534954,
        0.05927670747041702,
        0.08560743182897568,
        0.0005221578758209944,
        -0.061771441251039505,
        0.0020373358856886625,
        -0.05987163633108139,
        0.031156038865447044,
        -0.002164444187656045,
        -0.061911165714263916,
        -0.0457073412835598,
        -0.06475483626127243,
        0.04926297068595886,
        0.018580405041575432,
        0.03844958543777466,
        0.0015077173011377454,
        0.01544503029435873,
        0.010456857271492481,
        -0.004122206009924412,
        0.005002737510949373,
        0.060943447053432465,
        -0.037344589829444885,
        0.016614917665719986,
        -0.01874854974448681,
        -0.1031908392906189,
        -0.028898322954773903,
        0.07310815900564194,
        0.035046834498643875,
        -0.017940359190106392,
        0.044525571167469025,
        0.09597541391849518,
        0.06357316672801971,
        0.015398531220853329,
        0.029678810387849808,
        -0.09951824694871902,
        -0.0330781489610672,
        0.010911049321293831,
        -0.019438764080405235,
        -0.029821420088410378,
        -0.026011962443590164,
        -0.04411767050623894,
        -0.03987907990813255,
        -0.1345568150281906,
        -0.017830941826105118,
        -0.018109316006302834,
        0.0316447913646698,
        -0.021573035046458244,
        0.0779813900589943,
        -0.012447419576346874,
        -0.03496506065130234,
        0.051889147609472275,
        -0.010688177309930325,
        -0.031743165105581284,
        0.025090346112847328,
        -0.00007519953942392021,
        0.04639984294772148,
        -0.015845075249671936,
        -0.03088226541876793,
        0.00413097906857729,
        0.014105782844126225,
        0.017595045268535614,
        0.04574821889400482,
        -0.010365789756178856,
        0.059574052691459656,
        0.07696723937988281,
        -0.0377797856926918,
        0.008207416161894798,
        -0.024075321853160858,
        0.10588174313306808,
        -0.0015484510222449899,
        0.0269762109965086,
        -0.08128105849027634,
        -0.08307725936174393,
        -0.053313519805669785,
        0.007849480025470257,
        -0.051884476095438004,
        0.045068394392728806,
        -0.1309659630060196,
        -0.07641445100307465,
        0.07612557709217072,
        0.09354601800441742,
        0.07325749844312668,
        -0.007385759148746729,
        -0.0722154900431633,
        -0.010356065817177296,
        0.07240528613328934,
        -0.05297904089093208,
        0.040292464196681976,
        0.008845514617860317,
        -0.04025953635573387,
        0.01584727317094803,
        -5.180790782525623e-33,
        0.09745000302791595,
        -0.025715559720993042,
        0.039442479610443115,
        0.047709934413433075,
        0.024218395352363586,
        -0.026801323518157005,
        0.07285920530557632,
        -0.018662551417946815,
        -0.028506284579634666,
        -0.0010458925971761346,
        -0.00039714574813842773,
        0.012893865816295147,
        0.07829184085130692,
        -0.00464645866304636,
        0.032368749380111694,
        0.1594168245792389,
        -0.0037820879369974136,
        -0.08505947142839432,
        0.029563991352915764,
        0.03624383360147476,
        -0.006209996063262224,
        0.07898932695388794,
        -0.025357685983181,
        -0.021994508802890778,
        -0.11412473767995834,
        0.03499241918325424,
        0.04140599071979523,
        -0.008415862917900085,
        -0.03363129124045372,
        -0.04721209406852722,
        0.06492617726325989,
        -0.023647721856832504,
        -0.11109598726034164,
        0.02908909134566784,
        0.04692263901233673,
        -0.024613847956061363,
        0.06964833289384842,
        0.07441595196723938,
        -0.016956280916929245,
        0.04109681770205498,
        0.03645426407456398,
        -0.04896073788404465,
        -0.011146568693220615,
        -0.01137570571154356,
        -0.03133345767855644,
        -0.08139929175376892,
        0.030881887301802635,
        0.10639621317386627,
        -0.06221809983253479,
        -0.052160974591970444,
        0.02064274251461029,
        -0.04967578127980232,
        -0.06921716034412384,
        0.01570953242480755,
        0.016087686643004417,
        -0.025581251829862595,
        0.009972120635211468,
        -0.05508173629641533,
        -0.007510888855904341,
        0.025519920513033867,
        -0.0018856130773201585,
        -0.045121461153030396,
        0.02294120565056801,
        -0.015221688896417618,
        0.07977968454360962,
        -0.05726068094372749,
        -0.027389496564865112,
        0.02877582237124443,
        0.06634777784347534,
        0.04209911823272705,
        -0.10370315611362457,
        0.0335858128964901,
        0.08441424369812012,
        -0.02773350104689598,
        0.1107546016573906,
        0.008664410561323166,
        -0.02284342423081398,
        -0.04414503648877144,
        0.09315502643585205,
        0.05615052953362465,
        -0.05502155050635338,
        0.021778520196676254,
        -0.011378506198525429,
        -0.03536197170615196,
        -0.011734708212316036,
        0.04577600583434105,
        -0.04925350844860077,
        0.08796162158250809,
        -0.04198212921619415,
        -0.03276630491018295,
        0.0019911567214876413,
        -0.03691183403134346,
        0.026687687262892723,
        -0.024914486333727837,
        -0.02587784267961979,
        -4.6078529436499593e-8,
        -0.07219521701335907,
        0.005001282785087824,
        -0.05340281128883362,
        0.04103385657072067,
        0.0258210226893425,
        -0.004390358459204435,
        0.023463618010282516,
        0.043450094759464264,
        -0.03589194267988205,
        -0.054817166179418564,
        0.048598844558000565,
        0.07680267840623856,
        0.02892603538930416,
        0.056142814457416534,
        -0.031166788190603256,
        -0.08932817727327347,
        0.007761969231069088,
        0.012500950135290623,
        -0.024540701881051064,
        0.04777384176850319,
        0.025375809520483017,
        0.018949031829833984,
        0.011171221733093262,
        0.025568224489688873,
        0.059743624180555344,
        -0.01216881163418293,
        -0.003315199166536331,
        -0.022535989060997963,
        -0.04326572269201279,
        0.06854251772165298,
        -0.014261269010603428,
        0.010115033946931362,
        0.005387832410633564,
        -0.010452899150550365,
        0.06098417565226555,
        -0.03151143342256546,
        0.05905015766620636,
        -0.03206000477075577,
        -0.010602896101772785,
        0.04971415549516678,
        0.12179713696241379,
        0.029188191518187523,
        0.06815637648105621,
        0.03270447626709938,
        -0.020818525925278664,
        -0.0692787691950798,
        0.0423581637442112,
        -0.05789424479007721,
        0.12491313368082047,
        0.004118175245821476,
        -0.06078144535422325,
        -0.05141925811767578,
        -0.000049612623115535825,
        -0.019735563546419144,
        0.0037235217168927193,
        -0.0402824729681015,
        0.05766759067773819,
        -0.020477136597037315,
        -0.008633887395262718,
        0.07077258080244064,
        0.07350282371044159,
        -0.08002521097660065,
        -0.05553293973207474,
        0.034390199929475784
      ]
    },
    {
      "id": "ca681cb2",
      "filePath": "02-deep-research/src/index.ts",
      "content": "const summary = await summarizeContent(content, state.goal);\n\t\t\t\t\t\treturn { url, summary };\n\t\t\t\t\t});\n\n\t\t\t\t\t// 并发访问（带限流）\n\t\t\t\t\tconst results = await runWithConcurrencyLimit(tasks, 3);\n\n\t\t\t\t\t// 把结果存入 gathered_info\n\t\t\t\t\tfor (const { url, summary } of results) {\n\t\t\t\t\t\tstate.gathered_info.push(`Content of ${url}:\\n${summary}`);\n\t\t\t\t\t\tconsole.log(`📝 Summarized: ${url}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 6. 保存状态到磁盘（每次操作后都保存，方便断点续跑）\n\t\t\tsaveState(state);\n\n\t\t} else {\n\t\t\t// 7. 最终答案\n\t\t\tconst finalAnswer = message.content || '';\n\t\t\tconsole.log(\"\\n✅ Mission Complete!\");\n\t\t\tconsole.log(\"-----------------------------------\");\n\t\t\tconsole.log(finalAnswer);\n\n\t\t\t// 保存结果到 md 文件\n\t\t\tsaveResult(state.goal, finalAnswer, state);\n\t\t\t// 清除状态文件（任务完成）\n\t\t\tclearState();\n\t\t\treturn finalAnswer;\n\t\t}\n\t}\n\n\t// 8. 兜底逻辑\n\tconsole.warn(\"\\n🛑 Max iterations reached. Generating summary...\");\n\tconst fallback = await client.chat.completions.create({\n\t\tmodel: process.env.OPENAI_MODEL || 'gpt-4o',\n\t\tmessages: [\n\t\t\t{ role: \"system\", content: \"Summarize the following research notes into a coherent answer.\" },\n\t\t\t{ role: \"user\", content: `Goal: ${state.goal}\\n\\nNotes:\\n${state.gathered_info.join(\"\\n\\n\")}` }\n\t\t],\n\t});\n\n\tconst fallbackAnswer = fallback.choices[0].message.content || '';\n\t// 保存结果到 md 文件\n\tsaveResult(state.goal, fallbackAnswer, state);\n\t// 清除状态文件\n\tclearState();\n\n\tconsole.log(fallbackAnswer);",
      "startLine": 177,
      "endLine": 226,
      "type": "function",
      "name": "runResearch (part 3)",
      "embedding": [
        -0.030250506475567818,
        0.06596329063177109,
        0.002970105269923806,
        0.03837086260318756,
        0.00862270686775446,
        0.00978151336312294,
        0.03217727318406105,
        0.07204776257276535,
        0.08108512312173843,
        0.017637498676776886,
        -0.015088370069861412,
        -0.041000332683324814,
        0.004552437923848629,
        -0.029044918715953827,
        -0.03157280012965202,
        0.010512965731322765,
        -0.0894690752029419,
        0.020065654069185257,
        -0.076400026679039,
        -0.10275635868310928,
        0.08813444525003433,
        0.0176535751670599,
        0.07772000133991241,
        0.021542735397815704,
        0.04722517728805542,
        0.025126615539193153,
        -0.0463249497115612,
        -0.025962093845009804,
        -0.0021686027757823467,
        0.0358089916408062,
        0.017826586961746216,
        -0.017456721514463425,
        0.009206459857523441,
        0.04526263847947121,
        0.017180465161800385,
        0.11162596940994263,
        -0.053433824330568314,
        -0.09301040321588516,
        0.012632506899535656,
        -0.0011833126191049814,
        -0.014540181495249271,
        0.10561496764421463,
        -0.027005068957805634,
        -0.08418873697519302,
        0.061391618102788925,
        -0.06432158499956131,
        -0.14653438329696655,
        -0.06098540872335434,
        -0.008168990723788738,
        0.03388683497905731,
        -0.0643288642168045,
        0.00949657242745161,
        -0.04858385771512985,
        0.025566019117832184,
        0.0858619213104248,
        0.06077547371387482,
        -0.04933321103453636,
        -0.0420735739171505,
        -0.04152289032936096,
        -0.10501988977193832,
        0.04257434606552124,
        -0.05902790278196335,
        -0.02814340591430664,
        -0.0683102160692215,
        0.018678175285458565,
        -0.007162701338529587,
        -0.015168490819633007,
        0.04467925801873207,
        0.011965390294790268,
        0.04051116853952408,
        -0.0656561404466629,
        0.06429581344127655,
        0.009214757941663265,
        -0.04179619625210762,
        -0.05558285862207413,
        -0.014517243951559067,
        0.017692184075713158,
        0.005320514552295208,
        -0.051500435918569565,
        -0.05903232842683792,
        -0.005205776542425156,
        -0.05979146808385849,
        0.006392303854227066,
        -0.00028162513626739383,
        0.012462862767279148,
        0.043214984238147736,
        -0.03738918527960777,
        -0.01928764581680298,
        0.06125861406326294,
        -0.11094827950000763,
        -0.07959185540676117,
        -0.020481180399656296,
        0.013074642978608608,
        0.08417414873838425,
        0.006781444419175386,
        0.06812290847301483,
        0.04301884025335312,
        0.05140679329633713,
        0.00835295207798481,
        0.08010157197713852,
        0.025318367406725883,
        0.0019926493987441063,
        0.011290382593870163,
        -0.04077395796775818,
        -0.024487104266881943,
        -0.00966642051935196,
        -0.011662629432976246,
        0.0005797694902867079,
        -0.049907855689525604,
        -0.02313506044447422,
        -0.010797909460961819,
        0.03310268744826317,
        -0.008848612196743488,
        0.06605071574449539,
        0.006605227943509817,
        -0.019200816750526428,
        0.03999171406030655,
        -0.059071704745292664,
        0.014409556053578854,
        0.12716154754161835,
        0.16657254099845886,
        0.008758862502872944,
        -0.03716845437884331,
        0.03223187476396561,
        0.01832779124379158,
        -0.07368255406618118,
        0.12991459667682648,
        2.4844798605048695e-33,
        0.03966955468058586,
        -0.07685425132513046,
        0.023622913286089897,
        0.015287550166249275,
        0.06588328629732132,
        0.03341394290328026,
        0.01303933747112751,
        0.01033999864012003,
        -0.12453128397464752,
        -0.014309081248939037,
        -0.10453703254461288,
        0.0443103164434433,
        -0.05669958144426346,
        -0.039053987711668015,
        -0.027240345254540443,
        -0.08860664814710617,
        0.04030240327119827,
        0.04837478697299957,
        0.0498388297855854,
        0.0032821607310324907,
        0.050211481750011444,
        0.025379778817296028,
        -0.01811985671520233,
        0.02216595597565174,
        0.04300309345126152,
        -0.02270248904824257,
        0.02384103834629059,
        -0.017104793339967728,
        -0.12573203444480896,
        -0.01832144893705845,
        0.04199937358498573,
        -0.02703811042010784,
        0.012075107544660568,
        -0.0033271366264671087,
        0.0320146344602108,
        0.00863814726471901,
        0.03359585627913475,
        0.020302843302488327,
        -0.07635460793972015,
        -0.040943216532468796,
        -0.009676638059318066,
        -0.019558358937501907,
        -0.01820625737309456,
        -0.040546078234910965,
        -0.0720490962266922,
        -0.04181031137704849,
        -0.08460258692502975,
        0.0024182905908674,
        0.02938399836421013,
        -0.019002297893166542,
        -0.06660431623458862,
        0.05654731020331383,
        -0.0314113050699234,
        -0.03148446977138519,
        0.032595351338386536,
        -0.03576822206377983,
        0.00883867684751749,
        0.004329924006015062,
        -0.0032217015977948904,
        -0.004904397763311863,
        -0.02774447202682495,
        -0.016100410372018814,
        0.02493552304804325,
        0.003917844500392675,
        0.05673149228096008,
        0.02128193899989128,
        0.013947127386927605,
        0.04117734357714653,
        0.0860980898141861,
        -0.017497897148132324,
        -0.10643704235553741,
        0.016138477250933647,
        0.07095605134963989,
        0.024470852687954903,
        0.029885657131671906,
        -0.06195523589849472,
        -0.03146311640739441,
        -0.04075299948453903,
        -0.059333641082048416,
        -0.06506481021642685,
        0.013223114423453808,
        -0.09397216886281967,
        -0.06062812730669975,
        0.0016839070012792945,
        0.049568306654691696,
        0.07198679447174072,
        0.007496407721191645,
        -0.03468075022101402,
        -0.032573871314525604,
        -0.026303144171833992,
        -0.07618127018213272,
        -0.000645998923573643,
        0.005085111130028963,
        -0.05650718882679939,
        0.000359357480192557,
        -3.600661888791534e-33,
        0.09786288440227509,
        0.017765430733561516,
        -0.027394209057092667,
        0.013302869163453579,
        0.05952970311045647,
        -0.02576187625527382,
        0.038690827786922455,
        -0.022737372666597366,
        -0.07194700837135315,
        -0.013923882506787777,
        -0.041677966713905334,
        -0.02116740681231022,
        0.03973403200507164,
        0.008625974878668785,
        -0.0010948526905849576,
        0.07090448588132858,
        0.006849836558103561,
        -0.060356754809617996,
        0.020757455378770828,
        -0.011667566373944283,
        -0.017000166699290276,
        0.03265155106782913,
        -0.029888736084103584,
        0.015402261167764664,
        -0.025305382907390594,
        0.030945170670747757,
        0.03633992001414299,
        0.01027030497789383,
        -0.010623355396091938,
        -0.06170129403471947,
        0.04268483817577362,
        -0.04266437888145447,
        -0.1383046954870224,
        0.04982827603816986,
        -0.01755291409790516,
        -0.054278288036584854,
        0.060531243681907654,
        -0.0035427622497081757,
        -0.031815748661756516,
        0.08013412356376648,
        0.07497180253267288,
        -0.03920329362154007,
        -0.010389498434960842,
        0.012576643377542496,
        0.027585720643401146,
        -0.02485959231853485,
        0.009974226355552673,
        0.02775552123785019,
        -0.03607621416449547,
        -0.07080817222595215,
        0.05367518588900566,
        -0.11727536469697952,
        -0.08443942666053772,
        0.00828008633106947,
        0.023376217111945152,
        -0.04215598106384277,
        0.00696309469640255,
        -0.11974833160638809,
        -0.06447005271911621,
        -0.04804975539445877,
        -0.020145025104284286,
        -0.026643885299563408,
        0.028827212750911713,
        -0.01851794868707657,
        0.07042702287435532,
        -0.0701613575220108,
        -0.03810066357254982,
        -0.005862872581928968,
        0.06598339229822159,
        0.011262403801083565,
        -0.016540659591555595,
        0.03841249644756317,
        0.05252396687865257,
        0.01583114266395569,
        0.08331526815891266,
        0.029118314385414124,
        -0.052901070564985275,
        -0.03826817497611046,
        0.06667818129062653,
        0.08678166568279266,
        -0.10762544721364975,
        0.013862302526831627,
        0.03724281117320061,
        0.025089705362915993,
        0.003210337832570076,
        -0.028626641258597374,
        0.000542800931725651,
        0.14390632510185242,
        -0.07041855901479721,
        -0.023505236953496933,
        -0.021424660459160805,
        0.06438808888196945,
        0.03893135488033295,
        0.0073591722175478935,
        0.019709128886461258,
        -5.532896452109526e-8,
        -0.13669787347316742,
        -0.029029805213212967,
        -0.1277359575033188,
        0.011567601934075356,
        0.002015338046476245,
        -0.011848127469420433,
        0.01839759759604931,
        -0.0577751062810421,
        0.004748341627418995,
        -0.08971671015024185,
        0.0006369093316607177,
        -0.015319344587624073,
        -0.03850489854812622,
        0.009590983390808105,
        -0.0807010605931282,
        -0.03701386600732803,
        0.005341714713722467,
        0.045848142355680466,
        0.0006671252194792032,
        -0.04066653177142143,
        0.06023947522044182,
        0.00851861946284771,
        -0.004817049019038677,
        -0.03404238447546959,
        0.029009586200118065,
        0.004115279298275709,
        -0.008323642425239086,
        0.09474243968725204,
        -0.052935000509023666,
        0.03040360100567341,
        0.04147610068321228,
        -0.0027940073050558567,
        0.03318898379802704,
        0.007275921292603016,
        0.017179951071739197,
        -0.005512828938663006,
        0.12430845201015472,
        -0.003479574341326952,
        0.019694039598107338,
        0.09548158198595047,
        0.14665350317955017,
        0.08349940180778503,
        -0.0036124929320067167,
        0.026130011305212975,
        0.04256102442741394,
        -0.07062257826328278,
        -0.0031675829086452723,
        -0.015993239358067513,
        0.12682686746120453,
        -0.033338673412799835,
        -0.00764536764472723,
        -0.10464239120483398,
        -0.04678315296769142,
        0.005886230617761612,
        0.031334035098552704,
        -0.042091306298971176,
        0.05674765631556511,
        -0.014398844912648201,
        0.015926921740174294,
        0.03731602802872658,
        0.04199106618762016,
        -0.02819552831351757,
        -0.02831258997321129,
        0.05288755148649216
      ]
    },
    {
      "id": "a717d0b9",
      "filePath": "02-deep-research/src/index.ts",
      "content": "saveResult(state.goal, fallbackAnswer, state);\n\t// 清除状态文件\n\tclearState();\n\n\tconsole.log(fallbackAnswer);\n\treturn fallbackAnswer;\n}\n\n// ============================================\n// 入口\n// ============================================\n\nif (require.main === module) {\n\tconst topic = process.argv[2] || \"What are the key React.js trends in 2024?\";\n\trunResearch(topic);\n}",
      "startLine": 222,
      "endLine": 237,
      "type": "function",
      "name": "runResearch (part 4)",
      "embedding": [
        -0.06688729673624039,
        0.024757396429777145,
        0.015856720507144928,
        0.02563970722258091,
        0.04198239743709564,
        0.06386714428663254,
        0.01857130602002144,
        0.03665986657142639,
        0.015431351028382778,
        -0.01609521172940731,
        -0.03674441948533058,
        0.015772629529237747,
        -0.023896681144833565,
        -0.043720535933971405,
        0.0018355533247813582,
        0.038669366389513016,
        -0.15159638226032257,
        -0.04643278196454048,
        -0.10060814023017883,
        -0.07991903275251389,
        0.057521723210811615,
        -0.05394719913601875,
        0.02982690930366516,
        0.014075228944420815,
        -0.028789523988962173,
        0.07710106670856476,
        0.04982782527804375,
        -0.02647310122847557,
        -0.008023056201636791,
        0.046030983328819275,
        0.006621658336371183,
        0.0509541891515255,
        -0.024473795667290688,
        -0.0013965836260467768,
        0.012001547031104565,
        0.08150960505008698,
        -0.08265908062458038,
        -0.024502083659172058,
        0.041687384247779846,
        0.011655245907604694,
        -0.019253291189670563,
        0.043836865574121475,
        0.011040881276130676,
        -0.05773536488413811,
        0.10206450521945953,
        -0.024830572307109833,
        -0.11414648592472076,
        -0.02539118193089962,
        -0.009279177524149418,
        -0.0014600715367123485,
        -0.06459421664476395,
        0.004726800601929426,
        -0.06296353042125702,
        -0.09798029065132141,
        0.05144015699625015,
        0.010729026049375534,
        0.015850400552153587,
        -0.02046177349984646,
        0.061366334557533264,
        -0.08632159978151321,
        0.04644138365983963,
        -0.03924722597002983,
        -0.032538361847400665,
        -0.0321754515171051,
        0.08609762042760849,
        0.024797536432743073,
        -0.03644252568483353,
        0.05460017919540405,
        0.03756433352828026,
        0.011846022680401802,
        -0.046625442802906036,
        0.06571356952190399,
        0.05420617386698723,
        -0.04163716733455658,
        -0.035286061465740204,
        -0.12850818037986755,
        -0.05894769728183746,
        0.011423167772591114,
        0.07104220986366272,
        -0.061713043600320816,
        0.061950601637363434,
        -0.15522263944149017,
        -0.03589797019958496,
        0.04992274194955826,
        -0.001348606077954173,
        0.07021153718233109,
        0.04330800846219063,
        -0.07878506928682327,
        0.058902155607938766,
        0.01327899843454361,
        -0.06207166612148285,
        -0.08542412519454956,
        0.05941818654537201,
        0.08098332583904266,
        -0.008133993484079838,
        0.07362184673547745,
        -0.005369786638766527,
        -0.0332493893802166,
        0.002246153075248003,
        0.05671112611889839,
        0.030425965785980225,
        0.000916054064873606,
        0.008112642914056778,
        -0.024843087419867516,
        -0.05242220312356949,
        -0.06627126038074493,
        -0.007511467672884464,
        0.01779356598854065,
        0.018482251092791557,
        0.038914524018764496,
        -0.007284507155418396,
        0.11696072667837143,
        -0.002333133714273572,
        -0.003972637001425028,
        -0.002188185229897499,
        -0.06801548600196838,
        0.0856626033782959,
        -0.07544233649969101,
        0.030059006065130234,
        0.07684928178787231,
        0.06805820018053055,
        0.020290425047278404,
        -0.10048790276050568,
        0.04185336083173752,
        -0.03500073030591011,
        -0.023853549733757973,
        0.039279062300920486,
        1.3803069029113965e-32,
        -0.00080927147064358,
        -0.040868278592824936,
        0.01128185074776411,
        0.07304178923368454,
        -0.02919013425707817,
        -0.026038629934191704,
        0.014431750401854515,
        -0.07425037771463394,
        -0.1573052555322647,
        0.0004053028824273497,
        -0.09862757474184036,
        0.047583118081092834,
        -0.06550373882055283,
        -0.04114127531647682,
        -0.02321430668234825,
        -0.13218535482883453,
        0.03991308435797691,
        0.030227994546294212,
        0.010463083162903786,
        -0.03627574443817139,
        -0.0034972091671079397,
        0.03348939120769501,
        -0.01861470192670822,
        -0.002164687030017376,
        0.0652788057923317,
        0.03052261285483837,
        0.026225468143820763,
        -0.011501050554215908,
        -0.07982039451599121,
        -0.00927569530904293,
        0.07470230013132095,
        0.01036795973777771,
        -0.05782933160662651,
        0.009268037974834442,
        0.03901993855834007,
        0.022305220365524292,
        0.03479315713047981,
        -0.022533664479851723,
        -0.06809398531913757,
        -0.03607805445790291,
        -0.017241040244698524,
        0.008846322074532509,
        -0.0698242336511612,
        -0.018226997926831245,
        0.01746000349521637,
        -0.02385540120303631,
        0.016048433259129524,
        -0.003534121671691537,
        0.06070909649133682,
        0.04504551738500595,
        -0.08609599620103836,
        0.09256071597337723,
        0.016696838662028313,
        -0.027944304049015045,
        0.05365856736898422,
        -0.020712561905384064,
        0.03440903127193451,
        -0.01271581556648016,
        0.027065180242061615,
        -0.037808556109666824,
        0.0750063881278038,
        -0.00037123897345736623,
        0.012663580477237701,
        0.0010634418576955795,
        0.019677629694342613,
        0.008538801223039627,
        -0.0028558913618326187,
        -0.017356285825371742,
        0.004407244268804789,
        0.02984553761780262,
        -0.03643352910876274,
        -0.05824956297874451,
        0.07334812730550766,
        -0.019538726657629013,
        0.05510716140270233,
        0.014398021623492241,
        -0.06179530918598175,
        0.013945319689810276,
        -0.008858845569193363,
        -0.09555329382419586,
        -0.0064657037146389484,
        -0.03521401807665825,
        -0.03594914451241493,
        0.02007952518761158,
        0.05728089064359665,
        -0.026888562366366386,
        -0.03603358939290047,
        -0.06477431207895279,
        0.042488038539886475,
        0.05728313326835632,
        -0.0506490096449852,
        -0.059011682868003845,
        0.03248263895511627,
        -0.024344703182578087,
        -0.06193193420767784,
        -1.497863537896524e-32,
        0.054840654134750366,
        -0.027692139148712158,
        -0.044027600437402725,
        0.05934634432196617,
        -0.030702730640769005,
        -0.048550259321928024,
        -0.024960877373814583,
        -0.011166689917445183,
        0.022754475474357605,
        0.05689059570431709,
        0.035318776965141296,
        0.032631050795316696,
        0.09228615462779999,
        0.048873476684093475,
        -0.011884870938956738,
        0.08975591510534286,
        0.003974877763539553,
        -0.014225438237190247,
        -0.01957111246883869,
        -0.03826465457677841,
        -0.0063644214533269405,
        0.04140748083591461,
        -0.11131225526332855,
        0.053859274834394455,
        -0.06610932946205139,
        0.07195185124874115,
        0.05696340650320053,
        -0.023414405062794685,
        -0.04292190074920654,
        -0.09737057238817215,
        -0.06901226937770844,
        -0.02707572840154171,
        -0.06592467427253723,
        0.06719740480184555,
        -0.10390645265579224,
        -0.04546358063817024,
        0.04168923571705818,
        -0.08231554925441742,
        -0.04309440404176712,
        0.010900836437940598,
        0.009413652122020721,
        0.05526969954371452,
        -0.02438982017338276,
        0.02575809136033058,
        -0.002915640827268362,
        -0.008340978063642979,
        0.012832610867917538,
        0.14984531700611115,
        0.04084540531039238,
        -0.07756045460700989,
        0.03858668729662895,
        -0.07439452409744263,
        0.02046804316341877,
        -0.06120190769433975,
        -0.040067899972200394,
        0.012883654795587063,
        -0.009769609197974205,
        -0.06570245325565338,
        -0.09240084886550903,
        0.0487670972943306,
        0.03070882149040699,
        -0.050987206399440765,
        -0.0017354245064780116,
        -0.034381717443466187,
        0.020438339561223984,
        -0.04235699400305748,
        -0.023038141429424286,
        0.03480859473347664,
        0.09594736993312836,
        -0.05307910591363907,
        0.03300520405173302,
        0.04326138272881508,
        0.03426574915647507,
        -0.0044820127077400684,
        0.016434064134955406,
        -0.024142339825630188,
        -0.03800223767757416,
        -0.009659495204687119,
        0.0630231723189354,
        0.046741798520088196,
        0.008060266263782978,
        0.06676735728979111,
        -0.013459349982440472,
        0.012985148467123508,
        -0.01717025600373745,
        0.011136006563901901,
        -0.06664733588695526,
        0.07184914499521255,
        -0.01566353812813759,
        -0.013246229849755764,
        -0.06451854109764099,
        -0.03962443023920059,
        -0.03504475951194763,
        0.014891411177814007,
        0.02512711100280285,
        -7.285833447667756e-8,
        -0.07811829447746277,
        0.0421394445002079,
        -0.12155028432607651,
        -0.016904316842556,
        -0.0307552982121706,
        0.009417143650352955,
        0.01721043884754181,
        -0.08268346637487411,
        0.03817286342382431,
        -0.0792476162314415,
        0.022228185087442398,
        0.009008430875837803,
        -0.060242876410484314,
        0.06773912906646729,
        -0.021119114011526108,
        -0.025053994730114937,
        -0.05639077350497246,
        0.02354227378964424,
        -0.042037367820739746,
        -0.02321169525384903,
        0.07001353055238724,
        0.01576506905257702,
        0.0030089330393821,
        0.04966333135962486,
        0.05675454065203667,
        0.0049540260806679726,
        0.00460903299972415,
        0.09216353297233582,
        0.00934694055467844,
        -0.0201583132147789,
        -0.06338424980640411,
        0.0050232894718647,
        -0.0023213205859065056,
        -0.07201948761940002,
        -0.018523626029491425,
        0.06913203001022339,
        0.137013778090477,
        0.03049689158797264,
        0.06700180470943451,
        0.07133176177740097,
        0.03898097202181816,
        0.050668228417634964,
        -0.06288076937198639,
        0.04477079212665558,
        -0.10476802289485931,
        -0.030713846907019615,
        -0.018691333010792732,
        -0.019445642828941345,
        0.065050408244133,
        -0.04353863000869751,
        -0.05301758274435997,
        -0.05429469048976898,
        -0.06030222401022911,
        0.04567898437380791,
        -0.0009674974135123193,
        0.016909591853618622,
        -0.04964613914489746,
        0.02429158426821232,
        -0.016023721545934677,
        -0.005420330911874771,
        0.07866760343313217,
        -0.04122218117117882,
        -0.07633934915065765,
        -0.0014573647640645504
      ]
    },
    {
      "id": "fc7306b3",
      "filePath": "01-structured-extractor/src/index.ts",
      "content": "import 'dotenv/config';\nimport OpenAI from 'openai';\nimport { z, ZodSchema } from 'zod';\nimport { zodToJsonSchema } from 'zod-to-json-schema';\nimport * as fs from 'fs/promises';\nimport * as path from 'path';\n\nconst client = new OpenAI({\n\tapiKey: process.env.OPENAI_API_KEY,\n\tbaseURL: process.env.OPENAI_BASE_URL,\n});\n\n// Implementation 1: Manual Zod to String Converter (Good for simple prompts)",
      "startLine": 1,
      "endLine": 13,
      "type": "other",
      "embedding": [
        -0.0930887758731842,
        0.09831170737743378,
        -0.08686348050832748,
        0.039759885519742966,
        0.06608590483665466,
        -0.09878885000944138,
        -0.003377629444003105,
        0.0801907628774643,
        0.026686884462833405,
        -0.02856445126235485,
        -0.0260627418756485,
        -0.023282025009393692,
        0.0049363477155566216,
        0.0555000938475132,
        0.12075693905353546,
        0.04861081391572952,
        -0.0726439356803894,
        0.03571225330233574,
        -0.0064410557970404625,
        -0.023068701848387718,
        0.07596290856599808,
        0.10028695315122604,
        0.045762766152620316,
        -0.044993311166763306,
        0.013144326396286488,
        -0.041113853454589844,
        -0.0009818513644859195,
        0.016656121239066124,
        0.022209903225302696,
        0.0530577190220356,
        0.056818459182977676,
        0.011743338778614998,
        -0.0009337487281300128,
        -0.008251070976257324,
        0.08243813365697861,
        0.05273178219795227,
        -0.02278878539800644,
        -0.06300631165504456,
        -0.003224992658942938,
        -0.0515889972448349,
        0.14733178913593292,
        0.0810999646782875,
        -0.05526601895689964,
        -0.0755143016576767,
        0.04219132661819458,
        0.005390315782278776,
        0.003424403490498662,
        -0.028724905103445053,
        -0.04608841985464096,
        0.026413705199956894,
        -0.10429137945175171,
        -0.03154071047902107,
        -0.05427318066358566,
        0.030963962897658348,
        0.010463629849255085,
        0.08714330941438675,
        -0.11747864633798599,
        -0.029925405979156494,
        -0.017209194600582123,
        0.007645230740308762,
        -0.003563931444659829,
        -0.052255913615226746,
        -0.0022521105129271746,
        -0.01856740564107895,
        -0.006736404728144407,
        0.01642862893640995,
        -0.06213811784982681,
        -0.02701260708272457,
        0.006942478474229574,
        -0.1180567741394043,
        0.011916276067495346,
        -0.017900168895721436,
        0.0185939259827137,
        -0.05264665186405182,
        -0.10701445490121841,
        0.009150172583758831,
        -0.03296627849340439,
        -0.004375414922833443,
        -0.005502210929989815,
        -0.03973337262868881,
        0.04012930393218994,
        -0.04787479713559151,
        0.06329143047332764,
        0.06115248054265976,
        0.04776265472173691,
        0.11851280927658081,
        0.001067792414687574,
        -0.023876193910837173,
        0.024093009531497955,
        0.029714003205299377,
        -0.003165150759741664,
        -0.04344296455383301,
        0.010488768108189106,
        0.02181161753833294,
        0.0328972153365612,
        -0.001163075678050518,
        -0.012280866503715515,
        -0.01419868879020214,
        -0.053209125995635986,
        0.10747851431369781,
        0.0016878750175237656,
        0.0031303248833864927,
        0.06204778701066971,
        -0.06412815302610397,
        -0.10067685693502426,
        0.049892358481884,
        0.09832458943128586,
        0.04799022898077965,
        -0.09149327874183655,
        0.06119585409760475,
        -0.02239971049129963,
        0.024887582287192345,
        0.08223076909780502,
        -0.10427887737751007,
        -0.04861733689904213,
        0.007000052370131016,
        -0.08997628837823868,
        0.009451514109969139,
        0.045067355036735535,
        0.06728317588567734,
        0.016139550134539604,
        -0.05138932541012764,
        -0.04923074319958687,
        0.07861199975013733,
        0.042161229997873306,
        0.05200083926320076,
        0.06563326716423035,
        5.185404965194585e-33,
        -0.005670042708516121,
        0.07756547629833221,
        0.012092848308384418,
        -0.03311753645539284,
        0.010168815962970257,
        0.03990604728460312,
        0.07609746605157852,
        -0.007657432928681374,
        -0.03714318946003914,
        -0.019035153090953827,
        -0.08269965648651123,
        0.016692301258444786,
        -0.06758975982666016,
        -0.040157463401556015,
        -0.03496623784303665,
        -0.018761878833174706,
        -0.022178445011377335,
        0.04592668637633324,
        0.09866775572299957,
        0.06861799955368042,
        0.08839861303567886,
        0.0032694751862436533,
        -0.06143109127879143,
        0.0022309913765639067,
        -0.02109399437904358,
        0.013754164800047874,
        -0.045416057109832764,
        -0.07179908454418182,
        0.00131206214427948,
        0.001462584943510592,
        0.12810741364955902,
        -0.021788373589515686,
        -0.024691037833690643,
        0.01733323559165001,
        0.043810706585645676,
        -0.0024827185552567244,
        0.006503177806735039,
        -0.0059055546298623085,
        -0.12214992940425873,
        -0.08741753548383713,
        -0.03096095286309719,
        0.029449915513396263,
        -0.07008327543735504,
        0.05509025976061821,
        -0.07145862281322479,
        0.04439161345362663,
        -0.041547562927007675,
        0.008859049528837204,
        0.05766724795103073,
        -0.07847458124160767,
        -0.05823291093111038,
        0.040827520191669464,
        -0.04309758543968201,
        0.01871524378657341,
        0.00660367589443922,
        -0.1179075613617897,
        -0.0037000717129558325,
        -0.015953825786709785,
        0.07713121920824051,
        -0.02841900661587715,
        -0.0322495736181736,
        0.005150471813976765,
        -0.02000887505710125,
        0.014705716632306576,
        0.005681734997779131,
        0.006202660501003265,
        -0.06209881603717804,
        -0.06960487365722656,
        0.012465354986488819,
        0.02037188410758972,
        -0.037360288202762604,
        0.015272613614797592,
        -0.05756733566522598,
        0.0276790801435709,
        -0.010853748768568039,
        -0.030094902962446213,
        -0.04446282610297203,
        -0.042754676192998886,
        0.07235898822546005,
        -0.059601791203022,
        -0.01416251715272665,
        -0.03145179897546768,
        -0.033036548644304276,
        0.11096180230379105,
        0.03039061650633812,
        0.010018102824687958,
        -0.034416522830724716,
        -0.08349277079105377,
        0.06838887184858322,
        -0.000550164608284831,
        0.019767237827181816,
        -0.08901478350162506,
        -0.04012863337993622,
        -0.020493166521191597,
        -0.04933837428689003,
        -3.787840629718767e-33,
        0.04986872896552086,
        0.010811139829456806,
        -0.015765199437737465,
        0.046256452798843384,
        -0.013261419720947742,
        -0.05708333104848862,
        0.029595844447612762,
        0.013959353789687157,
        0.04436954855918884,
        0.022426936775445938,
        0.006856100633740425,
        -0.017196496948599815,
        0.1294998973608017,
        -0.008123550564050674,
        0.02258201874792576,
        -0.016867123544216156,
        -0.009964585304260254,
        0.03063312917947769,
        0.06478195637464523,
        0.0070859515108168125,
        -0.009797229431569576,
        0.029486844316124916,
        0.006193901877850294,
        -0.00406376738101244,
        0.033403992652893066,
        0.08116280287504196,
        0.03525150194764137,
        -0.016508685424923897,
        -0.04523971676826477,
        0.010549426078796387,
        -0.07142876088619232,
        0.03972421959042549,
        -0.04198306426405907,
        -0.01120847836136818,
        -0.09106305241584778,
        0.04438638687133789,
        0.01686939038336277,
        0.050182223320007324,
        0.024926863610744476,
        -0.02706579491496086,
        0.02266535721719265,
        -0.05870131775736809,
        -0.07257356494665146,
        0.006686332635581493,
        -0.025990180671215057,
        -0.06304367631673813,
        -0.01396465115249157,
        0.05534611642360687,
        -0.025414451956748962,
        -0.05371588468551636,
        0.041548777371644974,
        0.0457242913544178,
        -0.07746855169534683,
        -0.09142959117889404,
        0.06298038363456726,
        0.0036322143860161304,
        0.05925092473626137,
        -0.10559961944818497,
        -0.07330472767353058,
        -0.06631903350353241,
        -0.009714261628687382,
        -0.09490404278039932,
        -0.01789551042020321,
        0.01726073957979679,
        0.05293714255094528,
        -0.028569577261805534,
        0.03270067274570465,
        0.04016399011015892,
        0.045768000185489655,
        -0.05550738424062729,
        -0.04210951551795006,
        -0.06274248659610748,
        0.0648409053683281,
        0.06696368008852005,
        0.02972903475165367,
        -0.03528565540909767,
        0.0013066499959677458,
        -0.020661920309066772,
        0.110981285572052,
        0.018625764176249504,
        -0.045395344495773315,
        -0.05437391623854637,
        0.07302787154912949,
        0.05200217291712761,
        0.04592043533921242,
        -0.05946998670697212,
        0.06793539971113205,
        0.009540780447423458,
        0.02848486416041851,
        0.06936180591583252,
        -0.08233985304832458,
        0.053827617317438126,
        0.024816369637846947,
        0.06843008100986481,
        0.03852111101150513,
        -4.3174214425789614e-8,
        -0.12219006568193436,
        -0.0911787748336792,
        -0.04514520242810249,
        0.07892092317342758,
        -0.0382244735956192,
        0.000968889391515404,
        -0.0024963319301605225,
        -0.052292801439762115,
        0.01566881127655506,
        -0.04273032024502754,
        0.014750947244465351,
        0.07002878189086914,
        -0.04441120848059654,
        -0.034494005143642426,
        -0.012352364137768745,
        0.09311050176620483,
        0.018477115780115128,
        0.0703250989317894,
        -0.013476446270942688,
        -0.021434620022773743,
        0.009223154745995998,
        0.03244907408952713,
        0.023498110473155975,
        -0.06180410459637642,
        0.03782355412840843,
        -0.06573712825775146,
        -0.027988916262984276,
        0.03551887720823288,
        0.0379444845020771,
        -0.053893450647592545,
        -0.03311598673462868,
        -0.052864305675029755,
        0.13240967690944672,
        -0.03980087861418724,
        -0.042628198862075806,
        0.054197706282138824,
        -0.002854918362572789,
        -0.018037473782896996,
        0.013565397821366787,
        -0.04762379825115204,
        0.012411951087415218,
        0.06762810051441193,
        -0.009057991206645966,
        -0.03052033856511116,
        -0.04539098963141441,
        -0.030757607892155647,
        -0.03479136526584625,
        0.027456188574433327,
        0.052349384874105453,
        0.015895714983344078,
        0.00594689417630434,
        -0.0429631806910038,
        0.0036240159533917904,
        0.040477488189935684,
        -0.00432704808190465,
        -0.036138568073511124,
        -0.0068583376705646515,
        -0.007367420010268688,
        -0.03174843266606331,
        0.03218822926282883,
        0.02831263840198517,
        0.042808737605810165,
        0.03345941752195358,
        -0.02122507616877556
      ]
    },
    {
      "id": "0fabe1b8",
      "filePath": "01-structured-extractor/src/index.ts",
      "content": "function manualZodToPrompt(schema: ZodSchema<any>): string {\n\tif (schema instanceof z.ZodObject) {\n\t\tconst shape = schema.shape;\n\t\tconst descriptionLines = Object.keys(shape).map(key => {\n\t\t\tconst field = shape[key];\n\t\t\tlet desc = field.description || '';\n\t\t\t// 简单的类型推断\n\t\t\tlet typeName = 'Unknown';\n\t\t\tif (field instanceof z.ZodString) typeName = 'String';\n\t\t\tif (field instanceof z.ZodNumber) typeName = 'Number';\n\t\t\tif (field instanceof z.ZodBoolean) typeName = 'Boolean';\n\t\t\tif (field instanceof z.ZodArray) typeName = 'Array';\n\n\t\t\treturn `- ${key} (${typeName}): ${desc}`;\n\t\t});\n\t\treturn descriptionLines.join('\\n');\n\t}\n\treturn \"Unknown Schema\";\n}\n\n// ✅ Pro Implementation: The Generic Extractor",
      "startLine": 14,
      "endLine": 34,
      "type": "function",
      "name": "manualZodToPrompt",
      "embedding": [
        -0.08348926156759262,
        0.12995082139968872,
        0.009832354262471199,
        0.0029216220136731863,
        0.024457331746816635,
        -0.03576212748885155,
        0.10624276846647263,
        0.050420958548784256,
        0.01431877352297306,
        -0.015411727130413055,
        0.00970805250108242,
        -0.00641875434666872,
        -0.012596759013831615,
        0.027840185910463333,
        0.025384198874235153,
        0.017436275258660316,
        -0.06624674797058105,
        -0.041193194687366486,
        -0.007751729805022478,
        -0.002878943458199501,
        0.1007852852344513,
        0.042774830013513565,
        0.01904427260160446,
        0.03102206252515316,
        0.0009055875707417727,
        0.025439035147428513,
        -0.019807608798146248,
        0.08798770606517792,
        0.02623046189546585,
        -0.0015152498381212354,
        -0.018757618963718414,
        0.04835478216409683,
        0.03374530002474785,
        0.07652358710765839,
        0.0784936174750328,
        0.046840887516736984,
        -0.05582142993807793,
        0.04380302503705025,
        0.0205043014138937,
        -0.010341545566916466,
        -0.021164976060390472,
        0.0446799136698246,
        -0.017129765823483467,
        -0.04592380300164223,
        0.09076571464538574,
        -0.0033173311967402697,
        -0.08033990114927292,
        -0.06638967990875244,
        -0.022953173145651817,
        0.010761041194200516,
        -0.13377942144870758,
        0.06333576887845993,
        -0.051845401525497437,
        0.028589248657226562,
        0.06998506933450699,
        0.11050467193126678,
        -0.04921496659517288,
        -0.051795169711112976,
        -0.009438960812985897,
        -0.017200063914060593,
        -0.027868952602148056,
        -0.03957698494195938,
        0.044113025069236755,
        -0.05710562691092491,
        0.07200750708580017,
        0.06143793836236,
        -0.05398984253406525,
        0.006100678816437721,
        0.03243256360292435,
        -0.05468982085585594,
        0.0017156617250293493,
        -0.00520037766546011,
        0.04770323261618614,
        -0.004024066962301731,
        -0.10511147975921631,
        0.03166170045733452,
        -0.019698407500982285,
        0.003978727851063013,
        -0.026273613795638084,
        -0.04212699458003044,
        -0.01901058293879032,
        -0.01961728371679783,
        0.03880121186375618,
        0.035698406398296356,
        0.018193062394857407,
        0.08524081856012344,
        0.009459004737436771,
        -0.03711189329624176,
        0.0013304941821843386,
        0.04526489973068237,
        0.006237166002392769,
        -0.06036612391471863,
        0.022759126499295235,
        0.08181434124708176,
        0.03556164354085922,
        0.01670999638736248,
        -0.020180484279990196,
        0.019498471170663834,
        -0.019358815625309944,
        0.07975354045629501,
        0.02709703892469406,
        0.003348655765876174,
        0.058878783136606216,
        -0.1144750639796257,
        -0.1045466884970665,
        0.053829632699489594,
        0.09106117486953735,
        -0.04144059866666794,
        -0.07473485916852951,
        0.06044965982437134,
        -0.026839252561330795,
        0.04682808369398117,
        -0.06888279318809509,
        -0.06624002754688263,
        -0.09520251303911209,
        -0.039119791239500046,
        0.026058584451675415,
        -0.012589764781296253,
        -0.010150492191314697,
        0.030317137017846107,
        0.028953613713383675,
        -0.008719254285097122,
        -0.04242479428648949,
        0.06983339041471481,
        -0.041978683322668076,
        0.049600157886743546,
        0.02466917783021927,
        1.2613523112695535e-32,
        -0.05703053995966911,
        0.029172977432608604,
        -0.0158083438873291,
        0.016714394092559814,
        -0.0605744831264019,
        0.020236575976014137,
        0.00704715121537447,
        0.05154700577259064,
        -0.10041876137256622,
        0.06644859164953232,
        -0.06543304026126862,
        -0.03370356187224388,
        -0.09415359795093536,
        -0.06376691907644272,
        -0.019684122875332832,
        -0.06813089549541473,
        0.01103994995355606,
        0.019396718591451645,
        0.0009100015158765018,
        0.03373006731271744,
        0.08547398447990417,
        -0.006294542457908392,
        -0.12443599104881287,
        -0.027854157611727715,
        0.043735213577747345,
        0.04626695439219475,
        -0.06054437905550003,
        -0.03436024487018585,
        -0.06847462058067322,
        0.0018423888832330704,
        0.11115725338459015,
        -0.04343340918421745,
        0.03168432042002678,
        -0.02339346520602703,
        0.07812818139791489,
        -0.019890256226062775,
        0.02594583109021187,
        0.007246188819408417,
        -0.048341624438762665,
        -0.07178545743227005,
        0.05802911892533302,
        -0.009952639229595661,
        -0.024101896211504936,
        0.008532279171049595,
        0.004372534342110157,
        0.023382235318422318,
        -0.026134232059121132,
        0.04196804016828537,
        0.0017248134827241302,
        -0.11388222873210907,
        -0.025467878207564354,
        0.09774883836507797,
        -0.040073245763778687,
        0.06037336215376854,
        0.04628070443868637,
        0.002830210840329528,
        -0.0376572385430336,
        0.030618632212281227,
        0.05265708640217781,
        0.05128130689263344,
        -0.022203965112566948,
        0.06920818239450455,
        -0.061820320785045624,
        0.02081691101193428,
        0.03173944354057312,
        -0.03221587464213371,
        -0.04715969040989876,
        -0.06441617757081985,
        0.00814948882907629,
        -0.00886138342320919,
        -0.020421667024493217,
        -0.021475844085216522,
        -0.027612153440713882,
        0.053036559373140335,
        0.006849715020507574,
        -0.03959295153617859,
        -0.04853793606162071,
        -0.06074324622750282,
        0.017703218385577202,
        -0.062107279896736145,
        -0.07543694227933884,
        -0.011057582683861256,
        -0.01692895218729973,
        0.03928099945187569,
        -0.006682998035103083,
        0.06008129194378853,
        0.0441574864089489,
        -0.08263841271400452,
        0.03834697976708412,
        -0.03480060398578644,
        0.012024042196571827,
        -0.07503078877925873,
        -0.10919719189405441,
        -0.07998333871364594,
        -0.022040635347366333,
        -1.1379904239644932e-32,
        0.0691523402929306,
        0.037265367805957794,
        0.016584863886237144,
        -0.06223210319876671,
        -0.00983042549341917,
        -0.05763398855924606,
        0.005479983054101467,
        0.029823316261172295,
        -0.01581418700516224,
        0.020554842427372932,
        0.00516226002946496,
        -0.026729552075266838,
        0.007191663142293692,
        -0.06752941012382507,
        0.016741059720516205,
        0.0979747548699379,
        -0.09132451564073563,
        -0.07228793948888779,
        0.028347253799438477,
        0.057566724717617035,
        0.044276896864175797,
        0.07468825578689575,
        -0.009270011447370052,
        0.05345911160111427,
        -0.04772215709090233,
        0.08596409857273102,
        0.07607951015233994,
        0.09673658013343811,
        0.010351707227528095,
        0.003592823166400194,
        -0.047434303909540176,
        0.0012284303084015846,
        -0.04505404829978943,
        0.004270841367542744,
        -0.07521658390760422,
        -0.07392920553684235,
        -0.0012029162608087063,
        0.025415267795324326,
        0.0014883211115375161,
        0.00464907381683588,
        -0.037088558077812195,
        0.046594955027103424,
        -0.07633350789546967,
        -0.0748634934425354,
        -0.008993925526738167,
        -0.02940274588763714,
        0.0411810465157032,
        0.10878653079271317,
        0.06743917614221573,
        -0.04629511013627052,
        0.004316089209169149,
        -0.054327890276908875,
        -0.04172934219241142,
        -0.06831175088882446,
        0.023667167872190475,
        -0.030671406537294388,
        -0.018448730930685997,
        -0.11315072327852249,
        -0.09018559753894806,
        0.001595047302544117,
        0.06442233920097351,
        0.017645064741373062,
        -0.023165913298726082,
        0.028534622862935066,
        0.11265037208795547,
        -0.09019310027360916,
        -0.011183676309883595,
        -0.03972958028316498,
        -0.020116684958338737,
        -0.014723333530128002,
        -0.03311770781874657,
        0.022884849458932877,
        0.026077572256326675,
        0.0012841270072385669,
        0.039522379636764526,
        0.025373050943017006,
        -0.06716807931661606,
        0.042063839733600616,
        0.08752518147230148,
        -0.018596753478050232,
        0.0701141357421875,
        -0.01022282149642706,
        0.08176550269126892,
        0.05890382453799248,
        -0.008582120761275291,
        -0.03823843598365784,
        -0.0024337628856301308,
        0.023461539298295975,
        -0.019645338878035545,
        0.0022811328526586294,
        -0.07672945410013199,
        -0.02958114817738533,
        -0.02930074743926525,
        0.05657181888818741,
        0.0058784494176507,
        -6.59962822169291e-8,
        -0.06344427168369293,
        -0.08563251048326492,
        -0.04812360182404518,
        -0.0659194141626358,
        -0.03869859129190445,
        -0.05415629595518112,
        -0.04107838496565819,
        -0.09355472773313522,
        0.01728048175573349,
        -0.11527256667613983,
        -0.020661715418100357,
        0.05414504185318947,
        -0.09461259096860886,
        0.05282089486718178,
        0.01197321992367506,
        -0.016745561733841896,
        -0.0033176017459481955,
        0.02906162291765213,
        -0.03154418617486954,
        0.018528468906879425,
        0.04296546429395676,
        -0.02930900827050209,
        -0.002511411439627409,
        -0.017862500622868538,
        0.0689680427312851,
        -0.006890660617500544,
        -0.043248265981674194,
        0.020683707669377327,
        0.04576783627271652,
        0.056023597717285156,
        -0.01953454688191414,
        0.02796022780239582,
        0.14076587557792664,
        0.046100351959466934,
        0.06039981544017792,
        0.05284251645207405,
        0.04010656103491783,
        -0.043104324489831924,
        -0.037329696118831635,
        0.008051207289099693,
        0.11690656840801239,
        0.030343646183609962,
        -0.04113633558154106,
        -0.02365703694522381,
        0.02217087335884571,
        -0.10279218852519989,
        0.050444263964891434,
        -0.009626293554902077,
        0.07864316552877426,
        0.04444058611989021,
        -0.014632558450102806,
        0.008290143683552742,
        -0.07385708391666412,
        0.01876627467572689,
        -0.08404368162155151,
        -0.016420632600784302,
        0.05615793168544769,
        0.07325565069913864,
        -0.028009114786982536,
        -0.013933621346950531,
        0.029061652719974518,
        0.003140029264613986,
        0.019656764343380928,
        -0.054849326610565186
      ]
    },
    {
      "id": "d85a5a3a",
      "filePath": "01-structured-extractor/src/index.ts",
      "content": "async function extractData<T>(\n\tcontent: string,\n\tschema: ZodSchema<T>,\n\tuseAutoConverter: boolean = true\n): Promise<T> {\n\n\t// 策略选择：手写转换 vs 库转换\n\tlet schemaDesc = \"\";\n\tif (useAutoConverter) {\n\t\t// 使用 zod-to-json-schema (Production Ready)\n\t\tconst jsonSchema = zodToJsonSchema(schema, \"mySchema\");\n\t\tschemaDesc = JSON.stringify(jsonSchema, null, 2);\n\t} else {\n\t\t// 使用手动转换 (Good for simple cases & debugging)\n\t\tschemaDesc = manualZodToPrompt(schema);\n\t}\n\n\tconsole.log(`\\n🔍 Schema Mode: ${useAutoConverter ? 'Auto (Lib)' : 'Manual (Hand-written)'}`);\n\t// console.log(`📜 Prompt Context:\\n${schemaDesc.slice(0, 200)}... (truncated)\\n`);\n\n\tconst completion = await client.chat.completions.create({\n\t\tmodel: process.env.OPENAI_MODEL || 'gpt-3.5-turbo',\n\t\tmessages: [\n\t\t\t{\n\t\t\t\trole: 'system',\n\t\t\t\tcontent: `You are a strict Data Extraction AI.\nExtract data and return JSON compatible with this schema:\n\n${schemaDesc}\n\nReturn ONLY valid JSON.`,\n\t\t\t},\n\t\t\t{ role: 'user', content },\n\t\t],\n\t\tresponse_format: { type: 'json_object' },\n\t\ttemperature: 0,\n\t});\n\n\tconst result = completion.choices[0].message.content;\n\tif (!result) throw new Error('No content returned');\n\n\t// 🔥 Critical Step: Validation & Sanitization\n\tconst cleanJson = result\n\t\t.replace(/```json/g, '')\n\t\t.replace(/```/g, '')\n\t\t.trim();\n\n\ttry {\n\t\tconst parsedJson = JSON.parse(cleanJson);\n\t\treturn schema.parse(parsedJson);\n\t} catch (e) {\n\t\tconsole.error(\"🔥 Raw LLM Output that failed:\", cleanJson);\n\t\tthrow e;\n\t}\n}\n\n// --- Test Suite: Resume Parser ---",
      "startLine": 35,
      "endLine": 92,
      "type": "function",
      "name": "extractData",
      "embedding": [
        -0.06768915057182312,
        0.08357938379049301,
        0.024715367704629898,
        0.07384155690670013,
        0.04236795753240585,
        -0.06621984392404556,
        -0.008737124502658844,
        0.023943563923239708,
        0.02622523531317711,
        -0.011303870007395744,
        0.014140336774289608,
        -0.04582367092370987,
        -0.047474347054958344,
        0.010357214137911797,
        0.05743898078799248,
        0.02883037179708481,
        -0.061891745775938034,
        -0.0482446551322937,
        -0.0662393793463707,
        -0.06398466974496841,
        0.050902459770441055,
        0.05897894501686096,
        0.01886794902384281,
        -0.022731363773345947,
        0.043408431112766266,
        0.008856994099915028,
        -0.017803002148866653,
        -0.029134439304471016,
        -0.056710656732320786,
        0.042333539575338364,
        0.011225173249840736,
        -0.04503287002444267,
        0.021587403491139412,
        0.022328311577439308,
        0.03075854480266571,
        0.04737560823559761,
        -0.032652053982019424,
        -0.08107677102088928,
        0.07821080833673477,
        -0.017306186258792877,
        0.03479323163628578,
        0.09172867983579636,
        -0.0973927453160286,
        -0.08372755348682404,
        0.07911282032728195,
        -0.09270019829273224,
        -0.07505497336387634,
        -0.05084451660513878,
        -0.0040702782571315765,
        0.06003931537270546,
        -0.07516443729400635,
        0.021423112601041794,
        -0.053331971168518066,
        0.04264375567436218,
        0.053482674062252045,
        0.09220155328512192,
        -0.10866551846265793,
        -0.014077161438763142,
        -0.01619522087275982,
        -0.03511418402194977,
        0.034179020673036575,
        -0.06835092604160309,
        -0.0364433154463768,
        -0.029916364699602127,
        0.056972045451402664,
        -0.03099661134183407,
        -0.07579066604375839,
        -0.00008484177669743076,
        0.014096145518124104,
        0.018182087689638138,
        0.004145214334130287,
        0.004832813050597906,
        -0.020835941657423973,
        -0.01834752783179283,
        -0.08716845512390137,
        -0.010040258057415485,
        -0.011407295241951942,
        -0.03270851448178291,
        -0.06280148029327393,
        0.004589787684381008,
        -0.02456248737871647,
        -0.08918972313404083,
        0.008709905669093132,
        0.050172943621873856,
        -0.029330752789974213,
        0.08313611894845963,
        -0.023492030799388885,
        -0.009496522136032581,
        -0.006528216879814863,
        -0.039211638271808624,
        -0.041162505745887756,
        -0.03075741045176983,
        0.0031040459871292114,
        0.08098731189966202,
        0.011637487448751926,
        0.08446574956178665,
        -0.005776614416390657,
        -0.011045384220778942,
        -0.016380395740270615,
        0.0928601622581482,
        0.006292317528277636,
        -0.017021749168634415,
        0.043749548494815826,
        -0.05474555864930153,
        -0.01520069595426321,
        0.047269050031900406,
        0.040359966456890106,
        -0.010446006432175636,
        -0.09334538131952286,
        0.05010873079299927,
        -0.00817070435732603,
        0.10448085516691208,
        -0.030666803941130638,
        -0.03827444836497307,
        -0.026143254712224007,
        -0.008529857732355595,
        0.01047741249203682,
        -0.01536132674664259,
        0.02924538590013981,
        0.1309565007686615,
        0.14716610312461853,
        -0.010385007597506046,
        -0.008031802251935005,
        0.10073977708816528,
        0.07176955789327621,
        -0.024423284456133842,
        0.08961059153079987,
        8.166817531998892e-33,
        0.01931370049715042,
        -0.03767169266939163,
        0.032461486756801605,
        -0.023030037060379982,
        0.021089723333716393,
        0.05430075153708458,
        0.03298632800579071,
        -0.0004942456725984812,
        -0.06667003780603409,
        0.018442852422595024,
        -0.06779637932777405,
        0.004111273214221001,
        -0.048152823001146317,
        -0.0606519840657711,
        -0.04123871773481369,
        -0.006397046614438295,
        0.005386422388255596,
        -0.006331230513751507,
        0.06530365347862244,
        0.08834213763475418,
        0.06011362746357918,
        -0.010451454669237137,
        -0.0647171139717102,
        0.036784254014492035,
        0.03703209385275841,
        -0.026180442422628403,
        -0.033901769667863846,
        0.02348254807293415,
        -0.09305623173713684,
        -0.004899601452052593,
        0.060819368809461594,
        0.014848574995994568,
        -0.004617299884557724,
        0.02603345736861229,
        0.04664349555969238,
        0.037457775324583054,
        -0.021625811234116554,
        0.01564166508615017,
        -0.11945793032646179,
        -0.05498989298939705,
        0.05992300808429718,
        -0.0006566746160387993,
        -0.06392938643693924,
        -0.013794663362205029,
        -0.07885488122701645,
        -0.011265597306191921,
        -0.04229944944381714,
        0.0024520193692296743,
        0.005042213015258312,
        -0.04495038837194443,
        -0.021734697744250298,
        0.09764505177736282,
        -0.01336633786559105,
        0.017033159732818604,
        0.03027292713522911,
        -0.027128392830491066,
        0.06935349106788635,
        0.0007316296687349677,
        0.05164877325296402,
        -0.01740807667374611,
        -0.031619127839803696,
        0.032583463937044144,
        -0.007634431589394808,
        -0.003241807222366333,
        0.028150679543614388,
        -0.02360793948173523,
        -0.06684570014476776,
        0.011020064353942871,
        -0.02155878208577633,
        -0.04050120711326599,
        -0.07211382687091827,
        -0.004462758079171181,
        0.05631191283464432,
        0.00418192520737648,
        0.005446099676191807,
        -0.09907601773738861,
        -0.07000960409641266,
        -0.009477745741605759,
        -0.008910327218472958,
        -0.059894662350416183,
        0.03363015130162239,
        -0.09464502334594727,
        -0.05213342234492302,
        -0.0021324811968952417,
        -0.004118174314498901,
        0.06663734465837479,
        0.020041674375534058,
        -0.056503910571336746,
        0.017524974420666695,
        0.019290374591946602,
        -0.04122777283191681,
        -0.024262286722660065,
        -0.029919568449258804,
        -0.06029975041747093,
        -0.02896922081708908,
        -7.60773478633255e-33,
        0.05678166449069977,
        0.0016817629802972078,
        -0.005437123589217663,
        0.025141119956970215,
        0.05818045139312744,
        -0.0632653757929802,
        0.06249948963522911,
        0.04117165505886078,
        -0.000458011549199,
        -0.007673329208046198,
        -0.03078317642211914,
        -0.047947660088539124,
        0.0312829464673996,
        -0.04261617735028267,
        0.021279694512486458,
        0.10878535360097885,
        -0.041409146040678024,
        -0.06472869217395782,
        0.027847016230225563,
        0.006740656681358814,
        0.03663116693496704,
        0.08393914997577667,
        0.03580264002084732,
        0.048849910497665405,
        -0.038304850459098816,
        0.017410049214959145,
        0.042747657746076584,
        0.04531783610582352,
        -0.05607974901795387,
        -0.03774268925189972,
        -0.04524968937039375,
        0.03881637752056122,
        -0.05784079059958458,
        0.0074842036701738834,
        -0.009686985053122044,
        -0.07725698500871658,
        0.03495215252041817,
        0.09099791944026947,
        -0.028948405757546425,
        0.02534962259232998,
        0.03427000343799591,
        -0.00609631510451436,
        -0.07917933911085129,
        0.020532608032226562,
        0.01935342513024807,
        -0.022429168224334717,
        0.033999860286712646,
        0.0619378499686718,
        -0.021244801580905914,
        -0.019065724685788155,
        0.024824073538184166,
        -0.037027183920145035,
        -0.03654848784208298,
        0.025355948135256767,
        0.06585695594549179,
        -0.05205683410167694,
        0.03269228711724281,
        -0.13795840740203857,
        -0.005735455546528101,
        0.001876985072158277,
        -0.059615764766931534,
        -0.07836826145648956,
        0.03981940075755119,
        -0.01582559570670128,
        0.13442717492580414,
        -0.07710134983062744,
        -0.025005215778946877,
        0.016633857041597366,
        0.05312521383166313,
        0.01628032512962818,
        -0.08887823671102524,
        -0.03251068666577339,
        0.07314035296440125,
        0.018120678141713142,
        0.07837329804897308,
        -0.01916244626045227,
        -0.0668584555387497,
        -0.08328582346439362,
        0.0534004382789135,
        0.03755977749824524,
        -0.03430460765957832,
        -0.01296712551265955,
        0.06889209151268005,
        0.08264632523059845,
        0.05905995890498161,
        -0.06187279894948006,
        -0.020969964563846588,
        0.05139608308672905,
        -0.04725993052124977,
        -0.002478076610714197,
        -0.04018518701195717,
        -0.012785612605512142,
        0.04029863700270653,
        -0.012004619464278221,
        0.011508798226714134,
        -5.284433512997566e-8,
        -0.10656840354204178,
        -0.102945476770401,
        -0.09465418756008148,
        0.03425372764468193,
        -0.006829933263361454,
        -0.029317565262317657,
        0.003132942132651806,
        -0.03954433649778366,
        0.050119150429964066,
        -0.0865093469619751,
        0.00287997187115252,
        0.09433240443468094,
        -0.026019712910056114,
        0.0027956198900938034,
        -0.017794037237763405,
        -0.030744003131985664,
        0.01444832980632782,
        0.030863836407661438,
        -0.01857883855700493,
        0.02426931820809841,
        0.06474843621253967,
        0.04013708978891373,
        0.011068157851696014,
        -0.016912927851080894,
        0.11014565825462341,
        0.020709125325083733,
        -0.025513824075460434,
        0.05086185038089752,
        -0.04155952110886574,
        0.014941265806555748,
        -0.04450254514813423,
        -0.04857366532087326,
        0.1052350327372551,
        -0.007340544369071722,
        0.03011023811995983,
        -0.0008817717316560447,
        0.12450214475393295,
        -0.027904102578759193,
        -0.014808089472353458,
        0.03744064271450043,
        0.12015123665332794,
        0.0966133400797844,
        -0.04786071926355362,
        -0.01988307759165764,
        -0.03690558671951294,
        -0.11268418282270432,
        0.0313483327627182,
        0.027190355584025383,
        0.1456005573272705,
        0.04029839485883713,
        -0.02422335557639599,
        -0.06170421093702316,
        -0.08165892213582993,
        -0.03046225570142269,
        -0.023353902623057365,
        -0.0720946341753006,
        0.08113391697406769,
        0.03731223940849304,
        -0.023810259997844696,
        0.03126426413655281,
        0.1057581901550293,
        -0.018376236781477928,
        0.008347841911017895,
        -0.032403480261564255
      ]
    },
    {
      "id": "a2accdaa",
      "filePath": "01-structured-extractor/src/index.ts",
      "content": "async function main() {\n\tconst resumePath = path.join(__dirname, '../data/resume.txt');\n\tconsole.log(`📂 Reading file from: ${resumePath}`);\n\n\tlet resumeText = \"\";\n\ttry {\n\t\t// 注意：这里需要确保文件存在，我们之前已经写好了\n\t\tresumeText = await fs.readFile(resumePath, 'utf-8');\n\t} catch (e) {\n\t\tconsole.error(\"❌ File not found. Please ensure data/resume.txt exists.\");\n\t\tconsole.error(e);\n\t\treturn;\n\t}\n\n\t// 🔥 挑战：复杂嵌套结构 + 数组\n\tconst ResumeSchema = z.object({\n\t\tcandidate_name: z.string().describe(\"Full name of the candidate\"),\n\t\temail: z.string().email().nullable().describe(\"Email address provided\"),\n\t\t// Array 1: Simple String Array\n\t\ttop_skills: z.array(z.string()).describe(\"Extract top 5 most important technical skills mentioned\"),\n\t\t// Array 2: Object Array (Hard)\n\t\twork_experience: z.array(z.object({\n\t\t\tcompany: z.string(),\n\t\t\trole: z.string(),\n\t\t\tyears_duration: z.number().describe(\"Approximated years worked there (e.g. 1.5)\"),\n\t\t\tkey_achievement: z.string().describe(\"A summary of their biggest win in one sentence\")\n\t\t})).describe(\"List of work experiences\"),\n\t\t// Calculated Field\n\t\ttotal_experience_years: z.number().describe(\"Sum of years of experience inferred from the timelines\"),\n\t\teducation: z.object({\n\t\t\tschool: z.string(),\n\t\t\tdegree: z.string()\n\t\t}).nullable()\n\t});\n\n\ttry {\n\t\tconsole.log(\"🚀 Extracting structured data from Resume...\");\n\t\tconst startTime = Date.now();\n\n\t\tconst data = await extractData(resumeText, ResumeSchema, true);\n\n\t\tconst duration = Date.now() - startTime;\n\t\tconsole.log(`✅ Extraction Complete in ${duration}ms\\n`);\n\n\t\tconsole.log(JSON.stringify(data, null, 2));\n\n\t\t// 演示类型安全访问\n\t\tconsole.log(`\\nCandidate: ${data.candidate_name}`);\n\t\tconsole.log(`Top Skills: ${data.top_skills.join(\", \")}`);\n\n\t} catch (e) {\n\t\tif (e instanceof z.ZodError) {\n\t\t\tconsole.error(\"🛑 Validation Failed:\", JSON.stringify(e.issues, null, 2));\n\t\t} else {\n\t\t\tconsole.error(\"❌ System Error:\", e);\n\t\t}\n\t}\n}\n\nif (require.main === module) {\n\tmain();\n}",
      "startLine": 93,
      "endLine": 155,
      "type": "function",
      "name": "main",
      "embedding": [
        -0.06018256023526192,
        0.11992654949426651,
        0.004256919492036104,
        0.09592170268297195,
        0.061227258294820786,
        0.02489636279642582,
        -0.013665851205587387,
        0.09452132135629654,
        -0.012291544117033482,
        -0.030106939375400543,
        -0.026063790544867516,
        -0.020792938768863678,
        -0.03165893629193306,
        -0.0055524068884551525,
        -0.03413712978363037,
        -0.003237215569242835,
        -0.159229576587677,
        -0.023738423362374306,
        -0.055862896144390106,
        -0.04510987550020218,
        0.06929589807987213,
        0.015913983806967735,
        0.062792107462883,
        -0.04241884499788284,
        0.04477669298648834,
        0.004625613335520029,
        -0.008106266148388386,
        -0.03124861977994442,
        -0.06328286975622177,
        0.042141713201999664,
        -0.013918879441916943,
        0.025890067219734192,
        -0.030474163591861725,
        0.043520279228687286,
        0.024446219205856323,
        0.045483894646167755,
        -0.04694512113928795,
        -0.011896533891558647,
        0.04464254900813103,
        -0.026191523298621178,
        0.0031285530421882868,
        0.09017552435398102,
        -0.014304385520517826,
        -0.05116990581154823,
        0.1093379557132721,
        -0.10254833847284317,
        -0.036004193127155304,
        -0.07063177227973938,
        0.016699407249689102,
        0.06761814653873444,
        -0.14991895854473114,
        0.011449743062257767,
        -0.05670889467000961,
        0.0035748500376939774,
        0.06287199258804321,
        0.11135493218898773,
        -0.058047786355018616,
        -0.03521881252527237,
        -0.02555403672158718,
        -0.08939798921346664,
        -0.0013150125741958618,
        -0.08438307046890259,
        -0.0069524613209068775,
        -0.043753694742918015,
        0.04267256334424019,
        -0.03167591989040375,
        -0.04469935968518257,
        0.05664493888616562,
        0.03378994017839432,
        -0.00040672908653505147,
        -0.03114631213247776,
        0.06186053529381752,
        -0.03930163383483887,
        0.058953478932380676,
        -0.09445054829120636,
        -0.020561309531331062,
        -0.02160894125699997,
        0.008985818363726139,
        0.02169862948358059,
        -0.019389398396015167,
        -0.011380976065993309,
        -0.06759705394506454,
        0.021287929266691208,
        0.008558756671845913,
        0.03899297118186951,
        0.07660024613142014,
        -0.0013524253154173493,
        -0.003615051507949829,
        -0.04803433641791344,
        -0.0824224054813385,
        -0.04581359028816223,
        0.015990998595952988,
        -0.036646902561187744,
        0.11635420471429825,
        0.030587907880544662,
        0.05173046886920929,
        -0.0027846258599311113,
        0.07700763642787933,
        0.038866493850946426,
        0.059784501791000366,
        -0.0016668273601680994,
        0.016231201589107513,
        -0.027150291949510574,
        -0.022267237305641174,
        -0.06445935368537903,
        -0.005123817827552557,
        0.09624575823545456,
        -0.042577072978019714,
        -0.11538762599229813,
        -0.004809443838894367,
        -0.0001835041184676811,
        0.04207682982087135,
        -0.0717538520693779,
        0.0009889500215649605,
        0.015191552229225636,
        -0.023312494158744812,
        -0.0037862537428736687,
        0.016458414494991302,
        0.0030867126770317554,
        0.1245613768696785,
        0.12113329023122787,
        0.05405637249350548,
        -0.003425321774557233,
        0.010833517648279667,
        -0.018987486138939857,
        -0.11817478388547897,
        0.10791264474391937,
        4.2358244655530176e-33,
        -0.005366109311580658,
        -0.014529089443385601,
        0.003399621695280075,
        0.016278112307190895,
        0.002006410388275981,
        -0.0057893614284694195,
        0.02835298515856266,
        0.07937008142471313,
        -0.0416853092610836,
        0.041313301771879196,
        -0.10086241364479065,
        0.011155102401971817,
        -0.031986359506845474,
        -0.09980997443199158,
        0.0026205540634691715,
        -0.006939302198588848,
        0.02166910097002983,
        -0.005911560729146004,
        0.0602116733789444,
        0.027344970032572746,
        0.07284723967313766,
        -0.04033161699771881,
        -0.04471883550286293,
        0.012540058232843876,
        0.029702305793762207,
        -0.05794060602784157,
        0.02819995954632759,
        0.004943035077303648,
        -0.06872629374265671,
        -0.03015284426510334,
        0.0886010155081749,
        -0.023149903863668442,
        -0.013056528754532337,
        -0.03251642361283302,
        0.1164969876408577,
        0.0023869695141911507,
        0.03661114349961281,
        -0.006204437930136919,
        -0.10103689879179001,
        -0.014089228585362434,
        0.03179767727851868,
        -0.01096161175519228,
        0.022376995533704758,
        -0.0038637593388557434,
        -0.04004979506134987,
        -0.04056951403617859,
        -0.021249789744615555,
        -0.01474442332983017,
        0.03797125816345215,
        -0.015501829795539379,
        -0.04168325662612915,
        0.049306876957416534,
        -0.002708702115342021,
        -0.01777723990380764,
        -0.009122048504650593,
        0.039912935346364975,
        0.0024345554411411285,
        0.03352778032422066,
        -0.02835525944828987,
        0.020029332488775253,
        -0.023535439744591713,
        -0.03481409698724747,
        -0.02239941991865635,
        -0.017618641257286072,
        0.013475046493113041,
        -0.005323627032339573,
        -0.023608829826116562,
        -0.011151465587317944,
        0.05500474572181702,
        -0.009985567070543766,
        -0.038838885724544525,
        -0.04029719531536102,
        0.0410248227417469,
        -0.03433045372366905,
        0.040919698774814606,
        -0.01557865645736456,
        -0.04955118149518967,
        -0.010980697348713875,
        -0.009616616182029247,
        -0.07411165535449982,
        -0.004044733010232449,
        -0.06137701869010925,
        -0.03769734501838684,
        0.021804174408316612,
        0.011235919781029224,
        0.08573715388774872,
        0.021441390737891197,
        -0.049720779061317444,
        0.052487555891275406,
        0.03098096139729023,
        -0.04520973563194275,
        -0.020882580429315567,
        -0.023516010493040085,
        -0.06132858246564865,
        0.041199326515197754,
        -3.497706216074764e-33,
        0.11475867033004761,
        0.023751894012093544,
        -0.00023344512737821788,
        -0.054794490337371826,
        0.11146470159292221,
        0.0005278436583466828,
        0.07896409183740616,
        0.029458800330758095,
        -0.052127715200185776,
        0.007168044336140156,
        0.015414122492074966,
        -0.04654882475733757,
        0.06674595177173615,
        -0.0192105695605278,
        0.0342201329767704,
        0.06807518005371094,
        -0.028214896097779274,
        -0.05024232715368271,
        -0.001951913582161069,
        0.0034598682541400194,
        0.03407364338636398,
        0.054142098873853683,
        0.028902534395456314,
        0.023609917610883713,
        -0.01784667745232582,
        0.0638260766863823,
        0.024888798594474792,
        -0.006390929222106934,
        -0.04360908642411232,
        -0.02310851402580738,
        -0.005636250600218773,
        -0.03164725750684738,
        -0.09315084666013718,
        0.03748425096273422,
        0.005552567075937986,
        -0.06369046121835709,
        0.0301362257450819,
        -0.02325081080198288,
        -0.03515159338712692,
        0.005242541898041964,
        0.022500697523355484,
        0.0032538091763854027,
        -0.042679134756326675,
        -0.08399120718240738,
        0.06193767488002777,
        -0.015358389355242252,
        0.06330375373363495,
        0.07940785586833954,
        0.008387204259634018,
        -0.015321269631385803,
        0.04163625091314316,
        -0.074224092066288,
        -0.05682770162820816,
        -0.0038363609928637743,
        0.0951537936925888,
        -0.0066163986921310425,
        0.07053180038928986,
        -0.19137372076511383,
        0.006246933713555336,
        -0.034315627068281174,
        -0.004623121116310358,
        -0.010790262371301651,
        -0.0009136662702076137,
        -0.02240259014070034,
        0.10874634981155396,
        -0.07997984439134598,
        -0.008359438739717007,
        -0.031983401626348495,
        0.008394671604037285,
        0.02580847591161728,
        -0.05820141360163689,
        0.04770012944936752,
        0.032880764454603195,
        0.006957642268389463,
        0.002007948001846671,
        0.042206622660160065,
        -0.056191496551036835,
        -0.041046593338251114,
        0.04998296871781349,
        0.04071847349405289,
        0.01554348785430193,
        0.000026664511096896604,
        0.0102126719430089,
        0.046514399349689484,
        0.008597678504884243,
        -0.004734283313155174,
        -0.0019174605840817094,
        -0.014954404905438423,
        -0.023754509165883064,
        -0.06203782185912132,
        -0.04910201579332352,
        -0.05618675798177719,
        -0.02686159685254097,
        -0.03372710198163986,
        -0.030906565487384796,
        -4.9618595454603565e-8,
        -0.09987027943134308,
        -0.0106876315549016,
        -0.07199767976999283,
        -0.0230144951492548,
        0.010295426473021507,
        -0.06472446024417877,
        -0.013601468876004219,
        -0.06915467232465744,
        0.05726052448153496,
        -0.0769902914762497,
        0.02378743514418602,
        -0.016045616939663887,
        0.004657878074795008,
        -0.00031859916634857655,
        -0.03070175088942051,
        -0.03297824412584305,
        0.02563387155532837,
        0.021987315267324448,
        -0.0052175624296069145,
        0.030785750597715378,
        0.09887343645095825,
        -0.0069656092673540115,
        -0.023129967972636223,
        0.011624783277511597,
        0.07944058626890182,
        0.025857476517558098,
        0.01279675867408514,
        0.060774561017751694,
        0.017666621133685112,
        0.05232365429401398,
        -0.009017528966069221,
        -0.03810279071331024,
        0.13689446449279785,
        -0.0033784678671509027,
        -0.023168524727225304,
        -0.020276738330721855,
        0.13479937613010406,
        -0.03951983526349068,
        -0.029183123260736465,
        0.06241506710648537,
        0.15076960623264313,
        0.07484296709299088,
        0.08039531856775284,
        0.024757463485002518,
        0.04170748591423035,
        -0.1494227647781372,
        0.01737317070364952,
        -0.006236247252672911,
        0.1308092474937439,
        0.008081378415226936,
        -0.03164486214518547,
        -0.06256386637687683,
        -0.05346854403614998,
        0.008117608726024628,
        -0.05123463273048401,
        -0.045860230922698975,
        0.062283843755722046,
        -0.030521009117364883,
        -0.06495577096939087,
        -0.006308127194643021,
        0.09082473069429398,
        -0.02962283231317997,
        -0.016933036968111992,
        0.015155432745814323
      ]
    },
    {
      "id": "99887c9c",
      "filePath": "llm-service/src/providers/openai.ts",
      "content": "import OpenAI from 'openai'\nimport { nanoid } from 'nanoid'\nimport type { LLMProvider } from '../core/provider.js'\nimport type { UnifiedRequest, UnifiedResponse, UnifiedResponseChunk, ModelPricing } from '../core/types.js'\n\n// OpenAI 模型定价 (USD per 1M tokens) - 2024 pricing\nconst PRICING: Record<string, ModelPricing> = {\n\t'gpt-4o': { inputPer1M: 2.5, outputPer1M: 10 },\n\t'gpt-4o-mini': { inputPer1M: 0.15, outputPer1M: 0.6 },\n\t'gpt-4-turbo': { inputPer1M: 10, outputPer1M: 30 },\n\t'gpt-3.5-turbo': { inputPer1M: 0.5, outputPer1M: 1.5 },\n}\n\nconst DEFAULT_PRICING: ModelPricing = { inputPer1M: 10, outputPer1M: 30 }\n\nexport interface OpenAIProviderOptions {\n\tapiKey: string\n\tbaseURL?: string\n}",
      "startLine": 1,
      "endLine": 20,
      "type": "other",
      "embedding": [
        -0.07259669154882431,
        0.06699810922145844,
        -0.035571664571762085,
        0.045154962688684464,
        0.04144710674881935,
        -0.030321741476655006,
        -0.01132697518914938,
        0.10996989905834198,
        0.030659399926662445,
        0.006790454499423504,
        -0.01620984822511673,
        -0.056705497205257416,
        -0.04673822224140167,
        -0.01688351482152939,
        0.10533438622951508,
        0.010147536173462868,
        -0.084254190325737,
        -0.006028466857969761,
        -0.07678443193435669,
        -0.05682943016290665,
        0.06831508129835129,
        0.042716506868600845,
        0.01819765567779541,
        0.0029641499277204275,
        0.0359882228076458,
        -0.0017640235600993037,
        0.04357939213514328,
        0.0042040590196847916,
        0.017336184158921242,
        0.015215972438454628,
        0.025317899882793427,
        -0.02822260558605194,
        -0.04807701334357262,
        0.030332809314131737,
        0.06582800298929214,
        0.050414327532052994,
        -0.0557311549782753,
        -0.097028449177742,
        -0.014570076949894428,
        -0.044656481593847275,
        0.132515087723732,
        0.047709085047245026,
        -0.05315425992012024,
        -0.07732253521680832,
        0.08045019209384918,
        -0.03665843978524208,
        -0.05663708224892616,
        -0.007069687359035015,
        0.022228362038731575,
        0.008553521707654,
        -0.03334993124008179,
        0.01629834622144699,
        -0.039496563374996185,
        -0.06381828337907791,
        0.022898586466908455,
        0.04376298934221268,
        -0.03198894113302231,
        0.023768002167344093,
        0.018557347357273102,
        -0.08316683769226074,
        0.012805367819964886,
        -0.11055053025484085,
        0.008724899031221867,
        -0.05454280227422714,
        0.017831288278102875,
        -0.009957618080079556,
        -0.05307771638035774,
        0.07606324553489685,
        -0.01875283755362034,
        -0.10217127203941345,
        0.04176829010248184,
        0.030074916779994965,
        -0.028384914621710777,
        -0.06654166430234909,
        -0.04041043668985367,
        -0.05611690878868103,
        0.02807997539639473,
        0.07925494015216827,
        0.06273100525140762,
        -0.0007049462874419987,
        0.043183472007513046,
        -0.048811499029397964,
        0.011619227938354015,
        0.0001646902528591454,
        0.03837759047746658,
        0.009671323001384735,
        0.05803783982992172,
        -0.00860435888171196,
        0.05016537010669708,
        -0.018546806648373604,
        -0.028554145246744156,
        -0.00452489173039794,
        -0.037954337894916534,
        0.01931389607489109,
        0.021711409091949463,
        0.027976714074611664,
        -0.05238434672355652,
        -0.010757793672382832,
        -0.04593405872583389,
        0.09005601704120636,
        0.0004942803061567247,
        -0.03574417158961296,
        0.004269538447260857,
        0.14319060742855072,
        -0.06049460172653198,
        -0.03674889728426933,
        0.024104654788970947,
        0.044105108827352524,
        -0.032413557171821594,
        0.03507016971707344,
        0.016349365934729576,
        0.021624134853482246,
        0.006953673902899027,
        0.02086709439754486,
        -0.05469402298331261,
        0.0068394094705581665,
        -0.030265294015407562,
        -0.02340136654675007,
        0.03122037649154663,
        0.005676135420799255,
        -0.0057209148071706295,
        -0.004562918562442064,
        -0.07895532995462418,
        0.00796247273683548,
        -0.03551643714308739,
        -0.004782863426953554,
        0.1303432136774063,
        9.71088519778563e-33,
        -0.008345292881131172,
        -0.004227197263389826,
        0.009188445284962654,
        -0.0664161965250969,
        0.05263305827975273,
        0.08527348190546036,
        0.0048480345867574215,
        0.05056624859571457,
        -0.009958576411008835,
        0.02559598907828331,
        -0.10749562829732895,
        0.04558654502034187,
        -0.08725319057703018,
        -0.06012482941150665,
        -0.04058259725570679,
        -0.0485009104013443,
        -0.03621566295623779,
        0.03336390480399132,
        0.07965684682130814,
        0.03215724974870682,
        0.015787426382303238,
        0.053340014070272446,
        0.0005973198567517102,
        -0.008600695058703423,
        -0.09353357553482056,
        0.05471859872341156,
        0.003401065245270729,
        -0.0774713009595871,
        0.006429410073906183,
        0.024612218141555786,
        0.08799613267183304,
        -0.038919731974601746,
        0.0005489102331921458,
        0.035743292421102524,
        -0.013330469839274883,
        0.01716724969446659,
        0.01929907128214836,
        -0.030250081792473793,
        -0.13407368957996368,
        -0.043369319289922714,
        -0.0060064843855798244,
        0.07470765709877014,
        0.005442848429083824,
        -0.016461394727230072,
        -0.09839492291212082,
        -0.025604229420423508,
        0.04903165623545647,
        0.011707672849297523,
        0.05618545040488243,
        0.03130407631397247,
        -0.1304628998041153,
        0.03639746084809303,
        -0.05152213200926781,
        -0.08410488069057465,
        0.023064235225319862,
        -0.07171652466058731,
        0.011191786266863346,
        -0.0398024320602417,
        0.006346020847558975,
        -0.06898612529039383,
        -0.03968431428074837,
        -0.013659680262207985,
        0.003434021258726716,
        -0.0159181859344244,
        -0.006591295823454857,
        0.09530653804540634,
        -0.03986838087439537,
        0.013072937726974487,
        0.05936286970973015,
        0.01913667842745781,
        -0.009694715961813927,
        -0.0004577208892442286,
        -0.01115442905575037,
        0.03618471696972847,
        0.04791536554694176,
        -0.028412004932761192,
        0.09087251871824265,
        0.0031373717356473207,
        0.0075490111485123634,
        -0.058039288967847824,
        -0.03030765987932682,
        -0.0080109229311347,
        -0.02511323057115078,
        0.08022292703390121,
        0.018213963136076927,
        0.0019022432388737798,
        -0.035061437636613846,
        -0.013228156603872776,
        0.09048596769571304,
        0.024268487468361855,
        -0.09338866919279099,
        -0.05419469252228737,
        -0.06993253529071808,
        0.018933190032839775,
        -0.028475908562541008,
        -8.346028992621442e-33,
        0.04405052214860916,
        0.0037375101819634438,
        0.008418750017881393,
        0.02865220420062542,
        0.01167411357164383,
        -0.04665593430399895,
        0.02500448189675808,
        0.04918275028467178,
        0.0496782585978508,
        0.08431954681873322,
        0.013454407453536987,
        -0.027871014550328255,
        0.04754894599318504,
        -0.03945844992995262,
        0.03888027369976044,
        -0.02459515631198883,
        -0.058613620698451996,
        -0.0500984825193882,
        0.045216791331768036,
        -0.006663086824119091,
        -0.07762419432401657,
        0.08215297758579254,
        -0.0027335984632372856,
        0.05498962476849556,
        0.0009564684587530792,
        0.07948266714811325,
        0.030373143032193184,
        0.036536552011966705,
        -0.005468153394758701,
        -0.03856249898672104,
        -0.016446692869067192,
        -0.012024028226733208,
        -0.08625471591949463,
        0.07880356162786484,
        -0.10724622756242752,
        0.03486616909503937,
        0.06993026286363602,
        0.131662517786026,
        0.002040180377662182,
        0.07634127885103226,
        -0.011294604279100895,
        -0.038597866892814636,
        -0.05702926591038704,
        0.043694011867046356,
        -0.00025656085927039385,
        -0.046950723975896835,
        0.016542652621865273,
        0.060897137969732285,
        0.00951749924570322,
        -0.06985251605510712,
        0.002621106803417206,
        0.003164763329550624,
        -0.035035450011491776,
        0.04114310070872307,
        -0.07468333840370178,
        -0.019739674404263496,
        0.06740179657936096,
        -0.05514773726463318,
        -0.09198682755231857,
        -0.027195937931537628,
        0.03919902816414833,
        -0.0631415992975235,
        0.026444366201758385,
        0.01576867513358593,
        0.02815920114517212,
        -0.0562618114054203,
        0.004032703582197428,
        -0.031013038009405136,
        0.08236636966466904,
        -0.04207412153482437,
        -0.08755079656839371,
        -0.06821878999471664,
        0.08827155828475952,
        -0.02216237783432007,
        0.03040551394224167,
        -0.00755317322909832,
        -0.0595477819442749,
        -0.026195280253887177,
        0.1818857342004776,
        0.00476702069863677,
        -0.04233422875404358,
        0.03729667142033577,
        0.042564716190099716,
        0.02368267998099327,
        0.0018503973260521889,
        -0.041514065116643906,
        0.09750645607709885,
        0.09400305151939392,
        0.03293959051370621,
        0.07662680745124817,
        -0.11204496026039124,
        0.05611886829137802,
        0.03530750796198845,
        0.04058503732085228,
        -0.03523729369044304,
        -6.143116593193554e-8,
        -0.07212869077920914,
        -0.06141567975282669,
        -0.03854886442422867,
        0.10141146183013916,
        -0.026975538581609726,
        -0.023073099553585052,
        -0.009934842586517334,
        -0.006417667027562857,
        0.034508757293224335,
        -0.015337001532316208,
        -0.0008803381351754069,
        0.052403684705495834,
        -0.10802328586578369,
        -0.07191498577594757,
        -0.04566331207752228,
        0.013883513398468494,
        -0.03327168896794319,
        0.05349326878786087,
        -0.050686731934547424,
        -0.03555185720324516,
        -0.00030414844513870776,
        0.033076211810112,
        0.022555988281965256,
        -0.11219863593578339,
        0.07514213770627975,
        -0.024623584002256393,
        -0.01890392042696476,
        0.06059764325618744,
        0.0484241358935833,
        0.030306629836559296,
        -0.056789275258779526,
        -0.024962151423096657,
        0.08173394948244095,
        -0.03385200724005699,
        -0.0607675202190876,
        -0.026031494140625,
        0.07466908544301987,
        0.046632319688797,
        0.03694205358624458,
        -0.031702421605587006,
        0.02498345822095871,
        0.06328534334897995,
        -0.09750216454267502,
        0.0002954669180326164,
        0.006318304222077131,
        0.020404482260346413,
        -0.04074592515826225,
        0.02433292381465435,
        0.06441301852464676,
        0.038074884563684464,
        -0.026969926431775093,
        -0.045354992151260376,
        -0.019845081493258476,
        0.02607734128832817,
        -0.050758399069309235,
        -0.06406190246343613,
        -0.048598513007164,
        -0.07442327588796616,
        -0.06242983415722847,
        -0.004766897298395634,
        0.04326658323407173,
        -0.07342840731143951,
        -0.013617797754704952,
        -0.020331116393208504
      ]
    },
    {
      "id": "a7be5406",
      "filePath": "llm-service/src/providers/openai.ts",
      "content": "export class OpenAIProvider implements LLMProvider {\n\treadonly name = 'openai'\n\tprivate client: OpenAI\n\n\tconstructor(options: OpenAIProviderOptions) {\n\t\tthis.client = new OpenAI({\n\t\t\tapiKey: options.apiKey,\n\t\t\tbaseURL: options.baseURL,\n\t\t})\n\t}\n\n\tasync chat(request: UnifiedRequest): Promise<UnifiedResponse> {\n\t\tconst startTime = Date.now()\n\t\tconst traceId = nanoid(12)\n\n\t\tconst completion = await this.client.chat.completions.create({\n\t\t\tmodel: request.model,\n\t\t\tmessages: request.messages.map(m => ({\n\t\t\t\trole: m.role,\n\t\t\t\tcontent: m.content,\n\t\t\t})),\n\t\t\ttemperature: request.temperature,\n\t\t\tmax_tokens: request.maxTokens,\n\t\t})\n\n\t\tconst latencyMs = Date.now() - startTime\n\t\tconst usage = completion.usage ?? { prompt_tokens: 0, completion_tokens: 0, total_tokens: 0 }\n\t\tconst pricing = this.getPricing(request.model)",
      "startLine": 21,
      "endLine": 49,
      "type": "class",
      "name": "OpenAIProvider",
      "embedding": [
        -0.025777490809559822,
        -0.0014107116730883718,
        0.01971721090376377,
        0.11992043256759644,
        0.07161019742488861,
        -0.04253116995096207,
        0.0269129928201437,
        0.02668927051126957,
        0.08262975513935089,
        0.006105446722358465,
        0.005343213677406311,
        -0.03997249901294708,
        -0.06683658808469772,
        0.0677407756447792,
        0.1617240458726883,
        0.052844081073999405,
        0.028609182685613632,
        -0.08295313268899918,
        -0.06276730448007584,
        -0.04637278616428375,
        0.03256785497069359,
        0.07011806219816208,
        0.07008463889360428,
        0.002979638986289501,
        0.021697187796235085,
        -0.050735365599393845,
        0.016988864168524742,
        -0.0422622412443161,
        0.03586188703775406,
        0.032607682049274445,
        0.025377703830599785,
        0.00709587661549449,
        0.022511983290314674,
        -0.002595141064375639,
        -0.003191402181982994,
        0.023408884182572365,
        -0.06041822209954262,
        -0.053636424243450165,
        -0.020734045654535294,
        0.004181322176009417,
        0.08656372874975204,
        0.03483300283551216,
        -0.017788363620638847,
        -0.05281336233019829,
        0.08301632106304169,
        -0.05514273792505264,
        -0.010512378998100758,
        -0.020926721394062042,
        0.03353119641542435,
        0.05036485567688942,
        -0.047338634729385376,
        0.02037028782069683,
        -0.0267875287681818,
        -0.003204487496986985,
        0.0081536415964365,
        0.07251384854316711,
        -0.0669165700674057,
        0.002166470279917121,
        -0.01534490380436182,
        -0.04868081957101822,
        -0.007131131365895271,
        -0.1191512867808342,
        0.019318047910928726,
        -0.06734709441661835,
        -0.007563219405710697,
        0.006651993840932846,
        -0.046480391174554825,
        0.04185791686177254,
        0.04567781090736389,
        -0.03625580668449402,
        0.043929342180490494,
        0.03258926421403885,
        0.011927024461328983,
        -0.04713207483291626,
        -0.07024744153022766,
        -0.002990424633026123,
        0.029447045177221298,
        0.05253300070762634,
        0.036187075078487396,
        -0.021593933925032616,
        -0.00041863296064548194,
        -0.05319078266620636,
        -0.01574348472058773,
        0.032027993351221085,
        -0.017796525731682777,
        0.03333570063114166,
        0.04143613204360008,
        -0.014336012303829193,
        0.015082317404448986,
        -0.07128913700580597,
        0.005262083373963833,
        -0.00900940876454115,
        -0.07164894789457321,
        0.04916338250041008,
        0.020874977111816406,
        0.015306752175092697,
        -0.054652415215969086,
        0.0024283521343022585,
        -0.0589316189289093,
        0.08174484968185425,
        -0.037182409316301346,
        -0.05377209186553955,
        -0.02685008943080902,
        0.057705897837877274,
        -0.039776403456926346,
        -0.03849274292588234,
        0.012500904500484467,
        0.028728671371936798,
        -0.06219523400068283,
        0.05745083466172218,
        0.0063548325560987,
        0.002214929321780801,
        0.08290032297372818,
        0.06742381304502487,
        0.054243821650743484,
        0.006555250845849514,
        -0.05159955099225044,
        -0.0017179867718368769,
        0.08233990520238876,
        0.07738594710826874,
        0.04687364399433136,
        -0.031799495220184326,
        -0.0009385247249156237,
        -0.006857611238956451,
        0.009565941989421844,
        0.028137458488345146,
        0.13655397295951843,
        1.1375449850739285e-32,
        0.06704508513212204,
        0.019401174038648605,
        -0.021129552274942398,
        0.04279316961765289,
        0.1164456382393837,
        0.045203275978565216,
        0.039119720458984375,
        -0.01335199736058712,
        -0.019397951662540436,
        -0.04756470024585724,
        -0.08793523907661438,
        0.016043607145547867,
        -0.03672649711370468,
        -0.04253556579351425,
        -0.004380863159894943,
        -0.02610763907432556,
        -0.012313779443502426,
        0.04776352271437645,
        0.1303965449333191,
        0.03327397257089615,
        0.026080386713147163,
        0.006725568789988756,
        0.01513349823653698,
        0.016513129696249962,
        -0.005363598931580782,
        0.04171627387404442,
        0.043085042387247086,
        -0.05230878293514252,
        -0.0347571074962616,
        -0.0005668961093761027,
        0.09141325205564499,
        0.012067965231835842,
        -0.02192205749452114,
        0.05814659595489502,
        0.017690513283014297,
        -0.013390668667852879,
        -0.04538651183247566,
        0.015484822914004326,
        -0.1112806648015976,
        -0.05263660103082657,
        0.019439224153757095,
        0.006282324902713299,
        -0.09359237551689148,
        -0.036131758242845535,
        -0.14891645312309265,
        -0.09274596720933914,
        -0.02170206420123577,
        0.059014804661273956,
        0.06971568614244461,
        0.036044418811798096,
        -0.0800846740603447,
        -0.0024179848842322826,
        -0.029857663437724113,
        -0.049952372908592224,
        0.06917904317378998,
        -0.11358360201120377,
        -0.0038324473425745964,
        -0.009921026416122913,
        0.007074444554746151,
        -0.06850886344909668,
        -0.06986985355615616,
        -0.08260326832532883,
        0.0014732739655300975,
        -0.049388546496629715,
        0.021818963810801506,
        0.05457634478807449,
        -0.07375864684581757,
        -0.009410619735717773,
        0.03152117133140564,
        -0.0970446988940239,
        0.035313934087753296,
        -0.007635065820068121,
        -0.04264359548687935,
        0.002801351249217987,
        -0.04207123816013336,
        -0.031237076967954636,
        -0.0036872292403131723,
        0.02447175234556198,
        0.06579630821943283,
        -0.011969693005084991,
        -0.010558003559708595,
        -0.03145769238471985,
        -0.07347340881824493,
        0.06688790023326874,
        -0.0011720967013388872,
        -0.011119470931589603,
        -0.02809968590736389,
        -0.02780122682452202,
        0.0553281307220459,
        0.08245733380317688,
        -0.10393765568733215,
        -0.037276741117239,
        0.01451743021607399,
        0.10920305550098419,
        -0.06409095972776413,
        -7.806466800018443e-33,
        0.03623323142528534,
        -0.011474954895675182,
        -0.05945838242769241,
        0.02506180852651596,
        0.03306162729859352,
        -0.058796629309654236,
        0.01955919899046421,
        0.05816523730754852,
        0.039293304085731506,
        0.05513416603207588,
        0.030802475288510323,
        -0.04678715392947197,
        0.0728982463479042,
        0.002255395520478487,
        -0.0056404550559818745,
        -0.0093777384608984,
        0.04925067722797394,
        -0.004281471949070692,
        0.014260604046285152,
        -0.018330669030547142,
        -0.06470286846160889,
        -0.009936291724443436,
        -0.06784794479608536,
        -0.03123992308974266,
        0.021444333717226982,
        0.11628477275371552,
        0.045188479125499725,
        0.0037336156237870455,
        -0.04538362845778465,
        -0.0873621478676796,
        -0.012275921180844307,
        -0.015295416116714478,
        -0.09748299419879913,
        0.0500057190656662,
        -0.04250422120094299,
        0.06555895507335663,
        0.061052821576595306,
        0.07029850780963898,
        -0.04083264619112015,
        0.0017542230198159814,
        0.10763174295425415,
        -0.07344020158052444,
        -0.06701042503118515,
        -0.0025020737666636705,
        -0.02877679467201233,
        -0.00840578880161047,
        0.03574342653155327,
        -0.013397853821516037,
        -0.03963816910982132,
        -0.03905024006962776,
        0.07311362028121948,
        -0.06789205968379974,
        0.025000978261232376,
        0.009542998857796192,
        -0.042638588696718216,
        -0.03520709276199341,
        0.10226868093013763,
        -0.08687915652990341,
        0.014981154352426529,
        -0.06800992041826248,
        0.04203026369214058,
        -0.12008754163980484,
        0.042525846511125565,
        -0.009017422795295715,
        -0.0006518213194794953,
        -0.021198604255914688,
        0.004368428606539965,
        0.07709313184022903,
        0.09375341236591339,
        -0.01374588068574667,
        -0.0559343621134758,
        -0.09317765384912491,
        0.00041263343882746994,
        0.006511933170258999,
        0.053094133734703064,
        0.0036454868968576193,
        -0.036658551543951035,
        -0.05895012617111206,
        0.1143883541226387,
        -0.011629707179963589,
        -0.06895619630813599,
        -0.06867112964391708,
        0.008283929899334908,
        0.03740600496530533,
        0.035243626683950424,
        -0.012794800102710724,
        0.06882376223802567,
        0.06358475983142853,
        0.06202661991119385,
        0.08568476885557175,
        -0.07150327414274216,
        -0.011588647030293941,
        -0.03239293769001961,
        0.081479012966156,
        0.058735139667987823,
        -6.186203904690046e-8,
        -0.11884504556655884,
        -0.09203783422708511,
        -0.020518260076642036,
        0.08613742887973785,
        0.0302475243806839,
        -0.030428560450673103,
        0.04287866875529289,
        -0.0036637878511101007,
        0.06695211678743362,
        0.015939390286803246,
        -0.004668584559112787,
        0.02210294082760811,
        -0.031258873641490936,
        -0.10221617668867111,
        0.017408477142453194,
        0.00002883086199290119,
        -0.014950783923268318,
        0.046469829976558685,
        -0.004025149159133434,
        -0.09103211015462875,
        0.011535103432834148,
        -0.011575424112379551,
        0.06097888946533203,
        -0.06680968403816223,
        0.02263030968606472,
        -0.03805466368794441,
        0.015641607344150543,
        0.07448260486125946,
        0.011641087010502815,
        -0.01831275038421154,
        -0.07937689125537872,
        -0.03968624770641327,
        0.06893433630466461,
        -0.02061777003109455,
        -0.04430850222706795,
        -0.027064375579357147,
        0.0416967011988163,
        -0.021268794313073158,
        0.06547197699546814,
        0.03138522803783417,
        0.048918865621089935,
        0.060043349862098694,
        -0.05876170098781586,
        -0.019270287826657295,
        -0.001744613517075777,
        -0.008258809335529804,
        -0.06676695495843887,
        -0.028018442913889885,
        0.035691358149051666,
        0.020813994109630585,
        -0.057161543518304825,
        -0.05042686685919762,
        -0.004769743420183659,
        0.04858016595244408,
        -0.07822318375110626,
        -0.04308531805872917,
        0.023403404280543327,
        -0.03541170433163643,
        -0.019004477187991142,
        0.04600798338651657,
        0.030810318887233734,
        0.00896390713751316,
        -0.08191222697496414,
        -0.030670350417494774
      ]
    },
    {
      "id": "ef7b9227",
      "filePath": "llm-service/src/providers/openai.ts",
      "content": "const outputCost = (usage.completion_tokens / 1_000_000) * pricing.outputPer1M\n\n\t\treturn {\n\t\t\tcontent: completion.choices[0]?.message?.content ?? '',\n\t\t\tusage: {\n\t\t\t\tpromptTokens: usage.prompt_tokens,\n\t\t\t\tcompletionTokens: usage.completion_tokens,\n\t\t\t\ttotalTokens: usage.total_tokens,\n\t\t\t},\n\t\t\tcost: {\n\t\t\t\tinputCost,\n\t\t\t\toutputCost,\n\t\t\t\ttotalCost: inputCost + outputCost,\n\t\t\t},\n\t\t\tmeta: {\n\t\t\t\ttraceId,\n\t\t\t\tmodel: request.model,\n\t\t\t\tprovider: this.name,\n\t\t\t\tlatencyMs,\n\t\t\t},\n\t\t}\n\t}\n\n\tasync *chatStream(request: UnifiedRequest): AsyncIterable<UnifiedResponseChunk> {\n\t\tconst stream = await this.client.chat.completions.create({\n\t\t\tmodel: request.model,\n\t\t\tmessages: request.messages.map(m => ({\n\t\t\t\trole: m.role,\n\t\t\t\tcontent: m.content,\n\t\t\t})),\n\t\t\ttemperature: request.temperature,\n\t\t\tmax_tokens: request.maxTokens,\n\t\t\tstream: true,\n\t\t\tstream_options: { include_usage: true },\n\t\t})\n\n\t\tconst traceId = nanoid(12)\n\t\tconst pricing = this.getPricing(request.model)\n\t\tlet accumulatedContent = ''\n\n\t\tfor await (const chunk of stream) {\n\t\t\tconst content = chunk.choices[0]?.delta?.content ?? ''\n\t\t\taccumulatedContent += content\n\n\t\t\tconst responseChunk: UnifiedResponseChunk = {\n\t\t\t\tcontent,\n\t\t\t\tmeta: {\n\t\t\t\t\ttraceId,\n\t\t\t\t\tmodel: request.model,\n\t\t\t\t\tprovider: this.name,\n\t\t\t\t\tlatencyMs: 0\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (chunk.usage) {\n\t\t\t\tconst usage = {\n\t\t\t\t\tpromptTokens: chunk.usage.prompt_tokens,\n\t\t\t\t\tcompletionTokens: chunk.usage.completion_tokens,\n\t\t\t\t\ttotalTokens: chunk.usage.total_tokens,\n\t\t\t\t}",
      "startLine": 51,
      "endLine": 110,
      "type": "function",
      "name": "outputCost",
      "embedding": [
        -0.0017593218944966793,
        0.06123751774430275,
        0.011389167048037052,
        0.12202214449644089,
        0.04692314565181732,
        -0.03004959411919117,
        0.05553298816084862,
        0.04343452677130699,
        0.05256017670035362,
        0.028044864535331726,
        -0.026303982362151146,
        -0.09737759083509445,
        -0.04825836420059204,
        0.02256280742585659,
        0.08373712748289108,
        0.023913592100143433,
        -0.03031565621495247,
        -0.06916450709104538,
        -0.06315406411886215,
        -0.08096033334732056,
        0.0456964336335659,
        0.07717741280794144,
        0.045156750828027725,
        -0.015665248036384583,
        0.06427296996116638,
        -0.012770738452672958,
        0.0035493066534399986,
        -0.031015807762742043,
        0.01627400889992714,
        0.009611791931092739,
        -0.010531246662139893,
        0.01693582721054554,
        0.003560288343578577,
        0.01384810358285904,
        0.010720302350819111,
        -0.0023374634329229593,
        -0.051423050463199615,
        -0.08923442661762238,
        0.004610471427440643,
        0.0012197315227240324,
        0.09397812932729721,
        0.053194236010313034,
        -0.05389808118343353,
        -0.08777335286140442,
        0.0493442602455616,
        -0.10071176290512085,
        -0.08182322233915329,
        -0.03139209747314453,
        0.052161432802677155,
        0.06078941002488136,
        -0.04693709686398506,
        0.01440492831170559,
        -0.06825317442417145,
        0.03997555002570152,
        0.013271240517497063,
        0.03110365755856037,
        -0.07105592638254166,
        -0.016774941235780716,
        -0.03485875576734543,
        -0.10434330999851227,
        -0.03832064941525459,
        -0.09962918609380722,
        -0.006893471349030733,
        -0.0605587475001812,
        0.03655492886900902,
        -0.010591478087008,
        -0.05022642761468887,
        0.09558548033237457,
        0.0183918084949255,
        0.024779407307505608,
        0.02084248885512352,
        0.0775090903043747,
        -0.006558624096214771,
        -0.05416058748960495,
        -0.049557220190763474,
        -0.026785457506775856,
        0.04928060248494148,
        0.03308727592229843,
        0.03899042680859566,
        -0.015260874293744564,
        -0.013921370729804039,
        -0.0689539834856987,
        -0.015374978072941303,
        0.005395711399614811,
        0.000012826234524254687,
        0.006899721920490265,
        -0.003108522156253457,
        -0.03495367616415024,
        0.018196044489741325,
        -0.1171552762389183,
        -0.02926253341138363,
        -0.009082308039069176,
        -0.04542340338230133,
        0.060131751000881195,
        0.017065931111574173,
        0.09560685604810715,
        -0.060961779206991196,
        0.0057723382487893105,
        -0.008536272682249546,
        0.08450627326965332,
        -0.040132831782102585,
        -0.03460834175348282,
        0.036950770765542984,
        0.039854615926742554,
        -0.015506637282669544,
        -0.03628275915980339,
        0.045296236872673035,
        0.05572865903377533,
        -0.04703579470515251,
        0.008753227069973946,
        -0.0187404602766037,
        0.04842749983072281,
        0.013952353969216347,
        0.060310497879981995,
        0.028977790847420692,
        -0.014812572859227657,
        0.007486511021852493,
        -0.027627192437648773,
        0.06580555438995361,
        0.10656355321407318,
        0.08405190706253052,
        -0.0024651887360960245,
        -0.026867767795920372,
        0.024818792939186096,
        0.004157478921115398,
        -0.05314389243721962,
        0.10920506715774536,
        1.0537352500645734e-32,
        0.04886911064386368,
        -0.012070228345692158,
        -0.0437910333275795,
        0.04429052025079727,
        0.11763739585876465,
        0.06579321622848511,
        0.01952449046075344,
        -0.008230398409068584,
        -0.05159953609108925,
        -0.00044242621515877545,
        -0.09339869022369385,
        0.02321615442633629,
        -0.03269011899828911,
        -0.029961194843053818,
        -0.008376243524253368,
        -0.08159239590167999,
        -0.00020844550454057753,
        0.05269091576337814,
        0.09937909990549088,
        0.021181808784604073,
        0.035970915108919144,
        0.011250149458646774,
        -0.02547675184905529,
        0.020503519102931023,
        0.007531340233981609,
        0.014565381221473217,
        0.027089351788163185,
        -0.002193227643147111,
        -0.09526866674423218,
        -0.018781227990984917,
        0.08257284760475159,
        -0.012510023079812527,
        0.03896530345082283,
        0.020693084225058556,
        0.0397212915122509,
        0.006433484144508839,
        0.004694612696766853,
        -0.006457578856498003,
        -0.1233774796128273,
        -0.0718759074807167,
        0.027641525492072105,
        0.0047143311239778996,
        -0.07028741389513016,
        -0.007597782649099827,
        -0.19091713428497314,
        -0.07747023552656174,
        0.01867915317416191,
        0.022224457934498787,
        0.03222460672259331,
        0.009745282121002674,
        -0.05910346657037735,
        0.026716185733675957,
        -0.01692332699894905,
        -0.03578414395451546,
        0.04353427514433861,
        -0.05126409977674484,
        -0.002386565553024411,
        0.014584722928702831,
        0.04131714999675751,
        -0.04736735671758652,
        -0.05561275780200958,
        -0.039031680673360825,
        0.008046393282711506,
        -0.04338591545820236,
        0.043016768991947174,
        0.060465406626462936,
        -0.05634051933884621,
        0.0006830829079262912,
        0.10289797186851501,
        -0.0713445246219635,
        -0.031521525233983994,
        -0.005847377702593803,
        -0.02085197903215885,
        -0.01339649222791195,
        -0.002286345697939396,
        -0.046562764793634415,
        -0.006997452583163977,
        -0.03430260345339775,
        0.012960636056959629,
        -0.03982189670205116,
        -0.0001521216909168288,
        -0.07711348682641983,
        -0.08927711844444275,
        0.0468568354845047,
        0.03983647748827934,
        0.008962878957390785,
        -0.005105492193251848,
        -0.05788679048418999,
        0.016339849680662155,
        0.00914102140814066,
        -0.06941144168376923,
        0.001983692403882742,
        -0.0017762925708666444,
        -0.007654077373445034,
        -0.018336037173867226,
        -8.497875679440819e-33,
        0.016517966985702515,
        0.02254193089902401,
        -0.03230499476194382,
        -0.012204675935208797,
        0.03898836672306061,
        -0.016315551474690437,
        0.08404257148504257,
        0.007437015883624554,
        0.03591740503907204,
        0.044659584760665894,
        -0.02079232968389988,
        -0.022987408563494682,
        0.023175185546278954,
        -0.02118237130343914,
        0.019259251654148102,
        0.03241867199540138,
        -0.0015352274058386683,
        -0.0837135910987854,
        0.05397652089595795,
        -0.04427541419863701,
        -0.0982746034860611,
        0.06540537625551224,
        -0.02624870091676712,
        0.03120327927172184,
        -0.052017487585544586,
        0.09759198129177094,
        -0.00282783480361104,
        0.02790960669517517,
        -0.01572526805102825,
        -0.07143643498420715,
        0.013549864292144775,
        -0.02859264798462391,
        -0.09465903043746948,
        0.036219555884599686,
        -0.017005786299705505,
        -0.013577291741967201,
        0.08483537286520004,
        0.12571905553340912,
        -0.03333086147904396,
        0.040352266281843185,
        0.07853993028402328,
        -0.059350330382585526,
        -0.05918917804956436,
        0.0049993428401649,
        0.004205212462693453,
        -0.03728361427783966,
        0.09692638367414474,
        0.013885663822293282,
        -0.00937607791274786,
        -0.03950256109237671,
        0.0609646812081337,
        -0.09864307194948196,
        -0.05904030427336693,
        0.07201003283262253,
        -0.053804054856300354,
        -0.031522344797849655,
        0.06194838508963585,
        -0.10754000395536423,
        0.037974920123815536,
        -0.0730726420879364,
        0.02927122637629509,
        -0.06804592162370682,
        0.03885268419981003,
        -0.04649617522954941,
        0.09925451874732971,
        -0.056875038892030716,
        0.0020221848972141743,
        0.005231647752225399,
        0.09706711769104004,
        0.02794349379837513,
        -0.07096244394779205,
        -0.02210947684943676,
        0.05823903903365135,
        -0.0006088454974815249,
        0.09092029929161072,
        0.03573745861649513,
        -0.05981571599841118,
        -0.0536784753203392,
        0.11096149682998657,
        0.01791982352733612,
        -0.07908263802528381,
        -0.014239151030778885,
        0.004253908060491085,
        0.046412862837314606,
        0.0019055209122598171,
        -0.05212138965725899,
        0.056827764958143234,
        0.12293323129415512,
        -0.005681367591023445,
        0.055166278034448624,
        -0.034355681389570236,
        -0.048743799328804016,
        -0.022189242765307426,
        0.06096159666776657,
        -0.010992448776960373,
        -6.884680203711468e-8,
        -0.12508940696716309,
        -0.04521583765745163,
        -0.056782785803079605,
        0.07150252908468246,
        0.03874552994966507,
        -0.03347795456647873,
        0.08237274736166,
        -0.04085239768028259,
        0.050735972821712494,
        -0.026960227638483047,
        -0.017338691279292107,
        0.027521349489688873,
        -0.049093492329120636,
        -0.07106713205575943,
        0.013868377543985844,
        -0.037314217537641525,
        -0.026591608300805092,
        0.03229935094714165,
        -0.044797495007514954,
        -0.07663697749376297,
        0.04417334869503975,
        -0.004044509492814541,
        -0.006277034524828196,
        -0.014024937525391579,
        0.0761900469660759,
        0.01504850946366787,
        0.003905321704223752,
        0.07051418721675873,
        0.02071102149784565,
        0.013959038071334362,
        -0.054001037031412125,
        -0.02219310589134693,
        0.035483576357364655,
        -0.01935943216085434,
        0.0032177725806832314,
        -0.02948582172393799,
        0.07606173306703568,
        -0.017774220556020737,
        0.04083999618887901,
        0.07309674471616745,
        0.061930954456329346,
        0.06681016832590103,
        -0.013966144062578678,
        0.01381351426243782,
        0.011449123732745647,
        -0.02890803851187229,
        -0.050264351069927216,
        -0.011103745549917221,
        0.08337312191724777,
        -0.018435247242450714,
        -0.0338599868118763,
        -0.0814368948340416,
        -0.05774354562163353,
        0.029909435659646988,
        -0.0773966982960701,
        -0.09654535353183746,
        0.04454505071043968,
        -0.009427754208445549,
        -0.02997349202632904,
        0.014702841639518738,
        0.07960808277130127,
        -0.03982771188020706,
        -0.05849253013730049,
        -0.027692513540387154
      ]
    },
    {
      "id": "9b482a37",
      "filePath": "llm-service/src/providers/openai.ts",
      "content": "const outputCost = (usage.completionTokens / 1_000_000) * pricing.outputPer1M\n\n\t\t\t\tresponseChunk.usage = usage\n\t\t\t\tresponseChunk.cost = {\n\t\t\t\t\tinputCost,\n\t\t\t\t\toutputCost,\n\t\t\t\t\ttotalCost: inputCost + outputCost\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tyield responseChunk\n\t\t}\n\t}\n\n\tlistModels(): string[] {\n\t\treturn Object.keys(PRICING)\n\t}\n\n\tgetPricing(model: string): ModelPricing {\n\t\tconst pricing = PRICING[model]\n\t\t// Use default pricing if model known, otherwise strict 0 to avoid null/NaN\n\t\tif (pricing) return pricing\n\t\treturn { inputPer1M: 0, outputPer1M: 0 }\n\t}\n}",
      "startLine": 112,
      "endLine": 137,
      "type": "function",
      "name": "outputCost",
      "embedding": [
        -0.042074013501405716,
        0.05536133050918579,
        -0.036386169493198395,
        0.06079041212797165,
        0.03913286700844765,
        0.010336161591112614,
        0.0278827715665102,
        0.10419045388698578,
        0.05266689881682396,
        0.02405700832605362,
        0.0332464836537838,
        -0.04781804233789444,
        -0.05176982283592224,
        0.004346133675426245,
        0.025903034955263138,
        -0.003637617453932762,
        -0.019794825464487076,
        0.017363326624035835,
        0.014749500900506973,
        -0.07644123584032059,
        0.10425277054309845,
        0.037464722990989685,
        0.007609989959746599,
        0.029177045449614525,
        0.06094253435730934,
        0.02269423007965088,
        0.08609472960233688,
        0.020255563780665398,
        0.003007680643349886,
        -0.034085389226675034,
        -0.03807263821363449,
        -0.017800213769078255,
        0.025266431272029877,
        -0.016607088968157768,
        0.05266069620847702,
        -0.01759226992726326,
        -0.061337169259786606,
        -0.05869706720113754,
        -0.06005312502384186,
        0.020340165123343468,
        0.0540277361869812,
        0.03765260428190231,
        -0.05432360991835594,
        -0.10746444016695023,
        0.09549950808286667,
        -0.061894651502370834,
        -0.03142913430929184,
        -0.016332533210515976,
        0.025554368272423744,
        0.01772579737007618,
        0.01894417218863964,
        0.04025663062930107,
        -0.07685843855142593,
        -0.027015123516321182,
        0.027187896892428398,
        -0.014584295451641083,
        -0.04819519445300102,
        -0.08104778826236725,
        -0.016324814409017563,
        -0.09960135817527771,
        -0.06448587775230408,
        -0.0919504389166832,
        -0.02248569019138813,
        -0.03943037614226341,
        0.0987880602478981,
        0.029530132189393044,
        -0.047735173255205154,
        0.05953435227274895,
        -0.05800376459956169,
        -0.009498286992311478,
        0.06999202817678452,
        0.02185019850730896,
        0.029101788997650146,
        -0.1072297915816307,
        -0.06065026670694351,
        -0.018432309851050377,
        0.09800193458795547,
        0.023660490289330482,
        0.10146872699260712,
        0.03029206581413746,
        -0.007375464309006929,
        -0.07720296084880829,
        -0.025319937616586685,
        -0.020143019035458565,
        0.0333874374628067,
        0.03702013939619064,
        0.03127501904964447,
        0.022741438820958138,
        0.12479722499847412,
        -0.040206946432590485,
        -0.009170368313789368,
        0.017317958176136017,
        -0.048273056745529175,
        0.022741975262761116,
        -0.017831774428486824,
        0.055178605020046234,
        -0.03044651448726654,
        -0.07475205510854721,
        -0.043125662952661514,
        0.05147421732544899,
        -0.054839253425598145,
        -0.021607495844364166,
        0.048626575618982315,
        0.020734556019306183,
        -0.010576308704912663,
        -0.04969498887658119,
        0.07406057417392731,
        0.03826475515961647,
        -0.006220214068889618,
        0.011812237091362476,
        0.023692354559898376,
        0.021293755620718002,
        -0.0033064945600926876,
        0.03968624025583267,
        -0.01650409772992134,
        -0.08722369372844696,
        0.029834715649485588,
        -0.0882868841290474,
        0.03431878611445427,
        0.042089205235242844,
        -0.01639714278280735,
        0.028823675587773323,
        -0.024601545184850693,
        0.02267749421298504,
        -0.051790572702884674,
        -0.062323834747076035,
        0.04476892575621605,
        8.90448725691391e-33,
        -0.05197548121213913,
        -0.03075965866446495,
        0.02416265569627285,
        -0.0035919947549700737,
        0.02879495359957218,
        0.0660104900598526,
        -0.020383739843964577,
        0.03756483644247055,
        -0.02700510434806347,
        0.04995626211166382,
        -0.08375062793493271,
        0.03005027212202549,
        -0.06585892289876938,
        -0.04144839197397232,
        -0.0030988880898803473,
        -0.027420885860919952,
        0.012690195813775063,
        0.04176957532763481,
        0.0516645647585392,
        0.016299821436405182,
        -0.00022814873955212533,
        0.005644176620990038,
        -0.02418973296880722,
        -0.01945471577346325,
        -0.010136415250599384,
        -0.014119990170001984,
        0.011022321879863739,
        -0.02015235275030136,
        -0.06335709244012833,
        0.011478177271783352,
        0.10676641017198563,
        -0.009778383187949657,
        0.025892430916428566,
        0.003892996348440647,
        -0.007078834809362888,
        0.036288801580667496,
        0.0250027347356081,
        0.0003558681346476078,
        -0.05358593910932541,
        -0.07852505892515182,
        0.000037184348911978304,
        0.047339655458927155,
        -0.048183441162109375,
        0.04160221293568611,
        -0.13527493178844452,
        -0.04408540204167366,
        0.06113328039646149,
        0.027261706069111824,
        0.042238667607307434,
        0.046838127076625824,
        -0.08329669386148453,
        0.022592099383473396,
        -0.07649680972099304,
        -0.012017534114420414,
        -0.04664568975567818,
        -0.05926528200507164,
        -0.018681785091757774,
        -0.028422227129340172,
        0.05276808515191078,
        -0.027321355417370796,
        -0.023951159790158272,
        -0.0031508207321166992,
        -0.03616088628768921,
        -0.031204771250486374,
        -0.019439997151494026,
        0.05063039809465408,
        -0.06210307404398918,
        -0.04388302192091942,
        0.0694284662604332,
        -0.039032768458127975,
        0.02068600431084633,
        -0.054245322942733765,
        -0.02680095098912716,
        -0.0010503502562642097,
        0.01229006052017212,
        -0.01920858584344387,
        0.035255540162324905,
        -0.059860680252313614,
        0.04432061314582825,
        -0.04408828169107437,
        0.050552695989608765,
        -0.039283424615859985,
        -0.04291248694062233,
        0.06828856468200684,
        0.07288555800914764,
        0.05042865499854088,
        0.0038707174826413393,
        -0.05239347368478775,
        0.038319941610097885,
        0.05506283417344093,
        -0.0665576383471489,
        -0.020939426496624947,
        -0.05256911367177963,
        0.003400966990739107,
        -0.0018981024622917175,
        -7.212762072300538e-33,
        0.042987558990716934,
        0.09223541617393494,
        0.05323002487421036,
        -0.012553735636174679,
        -0.016569098457694054,
        -0.01003998052328825,
        -0.013293342664837837,
        -0.010013640858232975,
        0.05985742062330246,
        0.046124618500471115,
        0.015536528080701828,
        -0.01186505425721407,
        0.006521246396005154,
        -0.008045502938330173,
        0.025385810062289238,
        -0.01595545932650566,
        -0.009991230443120003,
        -0.08278315514326096,
        0.011912558227777481,
        -0.03670017048716545,
        -0.11817989498376846,
        0.0657268539071083,
        -0.030306920409202576,
        0.012988944537937641,
        -0.0728171169757843,
        0.12661170959472656,
        -0.01954157091677189,
        0.03642433509230614,
        -0.020475255325436592,
        -0.027455223724246025,
        -0.03704529255628586,
        -0.023586099967360497,
        -0.001158163184300065,
        0.011146049946546555,
        -0.09724649786949158,
        0.02665046602487564,
        0.10011932998895645,
        0.12111915647983551,
        0.018718071281909943,
        0.07858516275882721,
        0.006626793649047613,
        -0.010245397686958313,
        -0.05560554936528206,
        0.025642694905400276,
        -0.004761131480336189,
        -0.1283431053161621,
        0.04583287239074707,
        0.00558340223506093,
        0.10610446333885193,
        -0.08385244756937027,
        -0.015372923575341702,
        -0.010662619955837727,
        -0.06243445351719856,
        0.052619922906160355,
        -0.13005267083644867,
        -0.012597771361470222,
        0.004033419769257307,
        -0.08198653161525726,
        0.0026227841153740883,
        -0.02475929446518421,
        0.008876724168658257,
        -0.018568385392427444,
        0.02708638645708561,
        0.011725364252924919,
        0.049505773931741714,
        -0.04607216268777847,
        0.029840828850865364,
        -0.017038803547620773,
        0.08355018496513367,
        -0.04658149555325508,
        -0.0425943098962307,
        0.03147769719362259,
        0.10972318798303604,
        -0.02672894299030304,
        0.005386435426771641,
        -0.04023925960063934,
        -0.07921034097671509,
        -0.016165781766176224,
        0.16824710369110107,
        0.019962921738624573,
        0.007005804684013128,
        0.01037075649946928,
        0.034294839948415756,
        -0.006106864660978317,
        -0.056066349148750305,
        -0.09079056978225708,
        0.13821199536323547,
        0.04988224804401398,
        0.010593763552606106,
        0.06504456698894501,
        -0.07308897376060486,
        -0.01214743684977293,
        -0.005423811264336109,
        0.09219440072774887,
        0.011302807368338108,
        -5.487816068239226e-8,
        -0.12662987411022186,
        -0.06604234874248505,
        0.008763025514781475,
        0.061675991863012314,
        -0.026969796046614647,
        -0.026692651212215424,
        0.05866316333413124,
        -0.02537292055785656,
        0.09292683750391006,
        0.013223606161773205,
        0.01413256861269474,
        0.06846675276756287,
        -0.09072285145521164,
        -0.04801394045352936,
        0.014095382764935493,
        0.07401766628026962,
        0.009959200397133827,
        0.06580182164907455,
        -0.04066753014922142,
        -0.03315991535782814,
        0.0214342400431633,
        0.0019724813755601645,
        0.03176572173833847,
        -0.03315458074212074,
        0.09662748873233795,
        -0.018580274656414986,
        -0.025057082995772362,
        0.06502681225538254,
        0.07561101019382477,
        0.05656151846051216,
        -0.024164848029613495,
        0.0004809706879314035,
        0.07844879478216171,
        -0.006764698773622513,
        -0.028895435854792595,
        -0.005583633203059435,
        0.036182817071676254,
        0.06271911412477493,
        0.038395076990127563,
        0.06761434674263,
        -0.010959802195429802,
        0.0630933940410614,
        -0.09882769733667374,
        0.046528421342372894,
        0.000278012128546834,
        0.0139826200902462,
        -0.03764476999640465,
        -0.014432031661272049,
        0.04516245052218437,
        -0.044353920966386795,
        0.013371438719332218,
        0.021065915003418922,
        -0.055267591029405594,
        0.025894299149513245,
        -0.1241598054766655,
        -0.09931399673223495,
        0.0007279388955794275,
        -0.007690484635531902,
        -0.08758407831192017,
        0.011713271029293537,
        0.04200511425733566,
        -0.10184494405984879,
        -0.03274080157279968,
        -0.008454444818198681
      ]
    },
    {
      "id": "2ece0c6d",
      "filePath": "llm-service/src/interceptors/retry.ts",
      "content": "import type { Interceptor } from '../core/interceptor.js'\nimport type { UnifiedRequest, UnifiedResponse, UnifiedResponseChunk } from '../core/types.js'\nimport type { LLMProvider } from '../core/provider.js'\n\nexport interface RetryOptions {\n\t/** 最大重试次数 */\n\tmaxRetries?: number\n\t/** 请求超时 (ms) */\n\ttimeoutMs?: number\n\t/** 重试延迟基数 (ms)，实际延迟 = baseDelayMs * 2^attempt */\n\tbaseDelayMs?: number\n\t/** 可重试的错误类型 */\n\tretryableErrors?: string[]\n}\n\nconst DEFAULT_OPTIONS: Required<RetryOptions> = {\n\tmaxRetries: 3,\n\ttimeoutMs: 30000,\n\tbaseDelayMs: 1000,\n\tretryableErrors: ['rate_limit_exceeded', 'timeout', 'ECONNRESET', 'ETIMEDOUT'],\n}\n\n/**\n * Retry 拦截器\n * 包装 Provider 的 chat 方法，提供超时和重试能力\n */",
      "startLine": 1,
      "endLine": 26,
      "type": "other",
      "embedding": [
        -0.04311482608318329,
        0.019206184893846512,
        0.00993360672146082,
        0.017546892166137695,
        -0.00004512778832577169,
        -0.0032232755329459906,
        -0.010450661182403564,
        0.0594148114323616,
        -0.0002917214296758175,
        0.0334819070994854,
        -0.01095313485711813,
        -0.022862425073981285,
        -0.023177042603492737,
        0.0022698300890624523,
        -0.004366044886410236,
        -0.029585303738713264,
        0.013686015270650387,
        -0.03581300005316734,
        -0.05682020261883736,
        -0.04766949638724327,
        0.021257560700178146,
        0.05045166239142418,
        0.028786737471818924,
        0.02823708765208721,
        -0.02000555768609047,
        -0.07167483866214752,
        -0.04926346242427826,
        0.007863148115575314,
        -0.01582150347530842,
        0.0011344373924657702,
        -0.012662874534726143,
        0.018860580399632454,
        -0.15507331490516663,
        -0.041404079645872116,
        0.0550822839140892,
        0.0796969085931778,
        -0.023825010284781456,
        -0.0569024421274662,
        0.004292136989533901,
        -0.023041103035211563,
        0.000009250538823835086,
        0.07104295492172241,
        -0.02100837416946888,
        -0.0501168929040432,
        0.08555196225643158,
        -0.03870997577905655,
        -0.05405830219388008,
        -0.008234433829784393,
        -0.023363623768091202,
        0.03707583248615265,
        0.0037762392312288284,
        0.028984863311052322,
        -0.030914533883333206,
        -0.014108486473560333,
        0.08100630342960358,
        0.0013276822865009308,
        -0.04159802198410034,
        0.04079890623688698,
        0.006354581099003553,
        0.022765612229704857,
        -0.042934395372867584,
        -0.08903598040342331,
        0.06858014315366745,
        -0.06121240556240082,
        -0.03639582544565201,
        0.03684642165899277,
        -0.006999115459620953,
        0.04750131815671921,
        0.03304213657975197,
        0.039479851722717285,
        -0.07702608406543732,
        -0.016025424003601074,
        -0.0908697098493576,
        0.016588501632213593,
        -0.005504688713699579,
        -0.07809748500585556,
        -0.0337144173681736,
        0.027943475171923637,
        0.019628943875432014,
        -0.04292786121368408,
        0.013072099536657333,
        -0.07305068522691727,
        -0.023945974186062813,
        0.07790300995111465,
        -0.004203604068607092,
        0.03298252820968628,
        -0.03755887225270271,
        0.0279635451734066,
        0.11502819508314133,
        -0.05136876553297043,
        0.009592399932444096,
        -0.04716718569397926,
        0.0062893652357161045,
        0.06309545040130615,
        -0.05053405091166496,
        0.009524074383080006,
        -0.044233422726392746,
        0.0015919712604954839,
        -0.053570155054330826,
        0.0084967827424407,
        -0.001968319760635495,
        -0.066340871155262,
        -0.00688910111784935,
        0.04234801605343819,
        -0.0722871795296669,
        -0.06842315196990967,
        0.06144021451473236,
        -0.0027758737560361624,
        -0.0060287946835160255,
        0.01796841248869896,
        0.006106944754719734,
        0.06972713768482208,
        0.03152092173695564,
        -0.07080697268247604,
        -0.008308909833431244,
        0.014448395930230618,
        0.010036634281277657,
        -0.062397222965955734,
        0.014422525651752949,
        -0.0411529503762722,
        0.08058764785528183,
        -0.005418476182967424,
        0.03891097009181976,
        -0.04797958955168724,
        0.09148339182138443,
        -0.020064428448677063,
        0.1603386253118515,
        7.240910019214946e-33,
        0.0033625010401010513,
        0.029231645166873932,
        -0.05487152934074402,
        0.06031721830368042,
        0.02763923816382885,
        -0.05675136297941208,
        0.050013795495033264,
        0.03940105438232422,
        -0.0360211618244648,
        0.04676692560315132,
        -0.05934052914381027,
        -0.015625525265932083,
        -0.057160232216119766,
        -0.05516953021287918,
        -0.0032219374552369118,
        -0.0352548211812973,
        0.06475230306386948,
        0.04044411703944206,
        0.0473301038146019,
        0.049449823796749115,
        0.030070634558796883,
        -0.003797883400693536,
        0.007143030408769846,
        -0.00012599003093782812,
        0.06527596712112427,
        0.06565593183040619,
        0.007643727585673332,
        0.05175222083926201,
        -0.06659216433763504,
        -0.011021571233868599,
        0.10441216081380844,
        0.08514323830604553,
        -0.0022113670129328966,
        -0.004260414745658636,
        0.00628155842423439,
        -0.041936468333005905,
        0.011887306347489357,
        -0.011425591073930264,
        -0.08740639686584473,
        -0.038600821048021317,
        -0.05700720474123955,
        0.08169348537921906,
        -0.11375011503696442,
        0.014595459215342999,
        0.04588160663843155,
        -0.10942064225673676,
        -0.014814311638474464,
        -0.05024557188153267,
        0.1508261263370514,
        -0.05514094606041908,
        -0.015167636796832085,
        0.09662666916847229,
        0.04420743137598038,
        -0.013143826276063919,
        0.03339001163840294,
        -0.018529333174228668,
        -0.005396039690822363,
        0.06687141954898834,
        -0.027949631214141846,
        -0.04224736616015434,
        0.002717492403462529,
        -0.09155680984258652,
        0.009852811694145203,
        -0.03186793252825737,
        0.1442149579524994,
        0.10307060182094574,
        -0.047884292900562286,
        0.01979503035545349,
        -0.004223032854497433,
        -0.002866277704015374,
        -0.006808141246438026,
        -0.04336031153798103,
        0.010416549630463123,
        -0.002885808004066348,
        0.004430691711604595,
        -0.06957493722438812,
        0.07174522429704666,
        0.09764531254768372,
        0.050631083548069,
        -0.09282084554433823,
        0.004096695221960545,
        -0.09625400602817535,
        -0.06573060899972916,
        0.04046855494379997,
        0.057959482073783875,
        -0.048435185104608536,
        -0.00303971697576344,
        -0.019438596442341805,
        0.02213340252637863,
        0.03757628798484802,
        -0.062396805733442307,
        -0.024846520274877548,
        -0.01118660718202591,
        0.0083914278075099,
        -0.08611448109149933,
        -9.325330397555613e-33,
        0.04491294547915459,
        0.0018459308193996549,
        -0.08809060603380203,
        0.01984032802283764,
        -0.03837218135595322,
        -0.0127671267837286,
        0.019152678549289703,
        0.13796760141849518,
        0.03591007739305496,
        -0.0042649246752262115,
        -0.0007833002018742263,
        -0.03389963507652283,
        0.04414535313844681,
        -0.006424304097890854,
        -0.030575979501008987,
        0.0056724767200648785,
        -0.08010607212781906,
        -0.014354830607771873,
        0.023233935236930847,
        -0.03954949602484703,
        0.005064491648226976,
        -0.03673975542187691,
        0.03528330847620964,
        0.0029771868139505386,
        -0.04112774878740311,
        0.10885323584079742,
        0.043316666036844254,
        0.04262474179267883,
        -0.021329104900360107,
        -0.11822251975536346,
        0.031325940042734146,
        -0.03728451579809189,
        -0.030383102595806122,
        0.12552793323993683,
        -0.016258664429187775,
        -0.027510233223438263,
        0.020790839567780495,
        0.12615999579429626,
        -0.054430119693279266,
        0.01639378070831299,
        0.08757375180721283,
        0.04721328988671303,
        -0.10314234346151352,
        -0.021938050165772438,
        -0.03845794498920441,
        -0.029664216563105583,
        0.016329480335116386,
        -0.024448417127132416,
        0.057564251124858856,
        -0.06901777535676956,
        0.045615945011377335,
        -0.0975717231631279,
        0.03314885124564171,
        0.0350804477930069,
        0.0129146883264184,
        -0.0005989126511849463,
        0.08837433159351349,
        -0.12060622870922089,
        -0.016920767724514008,
        -0.0020402856171131134,
        0.0157006923109293,
        -0.07751941680908203,
        0.045416515320539474,
        0.03475302830338478,
        0.03503146767616272,
        0.01685943454504013,
        -0.09362252801656723,
        -0.013450843282043934,
        0.0607139952480793,
        -0.0015485339099541306,
        -0.013104819692671299,
        -0.03247592970728874,
        0.042578186839818954,
        -0.025332216173410416,
        0.0019353091483935714,
        -0.029099993407726288,
        -0.09235473722219467,
        -0.1301763951778412,
        0.053017809987068176,
        0.034204620867967606,
        -0.049817830324172974,
        -0.0014560447307303548,
        -0.01859336532652378,
        0.06875059008598328,
        0.003534182906150818,
        -0.042223915457725525,
        -0.019584648311138153,
        0.09137424826622009,
        0.10070914030075073,
        -0.016592102125287056,
        -0.022538941353559494,
        -0.021660473197698593,
        -0.018067389726638794,
        -0.0070709604769945145,
        -0.0055327038280665874,
        -6.128728102794412e-8,
        -0.04876657575368881,
        0.004980801604688168,
        -0.07649030536413193,
        -0.03391319885849953,
        0.016221651807427406,
        0.004680362995713949,
        -0.04939275234937668,
        -0.10444394499063492,
        -0.03616330772638321,
        -0.042795728892087936,
        0.013647976331412792,
        0.03891349211335182,
        -0.009702004492282867,
        -0.004821453709155321,
        -0.01719045639038086,
        -0.11510740220546722,
        -0.012867468409240246,
        0.014146678149700165,
        -0.050946976989507675,
        -0.04756636172533035,
        -0.06162324920296669,
        -0.035264335572719574,
        0.026807371526956558,
        -0.07477397471666336,
        0.029601044952869415,
        0.033093009144067764,
        0.007381815928965807,
        0.0750720202922821,
        0.0009585882071405649,
        -0.021758001297712326,
        -0.13630926609039307,
        -0.0391688272356987,
        0.06102465093135834,
        0.007187661249190569,
        -0.09274947643280029,
        0.05396034196019173,
        0.02899075113236904,
        -0.011353657580912113,
        0.0488070510327816,
        -0.07579430192708969,
        0.010409788228571415,
        0.0013780229492112994,
        -0.026135167106986046,
        0.06546951085329056,
        0.014465461485087872,
        -0.04948000982403755,
        -0.0669400617480278,
        0.030695408582687378,
        0.07320874184370041,
        -0.026717131957411766,
        -0.022131823003292084,
        -0.05710770562291145,
        -0.037707868963479996,
        -0.010595087893307209,
        -0.03585434332489967,
        -0.01553857047110796,
        -0.04442518949508667,
        -0.06830231100320816,
        0.01905854418873787,
        -0.018786782398819923,
        0.10599948465824127,
        -0.017716707661747932,
        0.006856285501271486,
        -0.04134227707982063
      ]
    },
    {
      "id": "07b21f3d",
      "filePath": "llm-service/src/interceptors/retry.ts",
      "content": "export class RetryInterceptor implements Interceptor {\n\treadonly name = 'retry'\n\tprivate options: Required<RetryOptions>\n\n\tconstructor(options: RetryOptions = {}) {\n\t\tthis.options = { ...DEFAULT_OPTIONS, ...options }\n\t}\n\n\t/**\n\t * 包装 Provider，返回带重试能力的新 Provider\n\t */\n\twrapProvider(provider: LLMProvider): LLMProvider {\n\t\tconst self = this\n\t\tconst wrapper: LLMProvider = {\n\t\t\tname: provider.name,\n\t\t\t// Bind context or invoke directly\n\t\t\tlistModels: () => provider.listModels(),\n\t\t\tgetPricing: (model: string) => provider.getPricing(model),\n\n\t\t\tasync chat(request: UnifiedRequest): Promise<UnifiedResponse> {\n\t\t\t\treturn self.executeWithRetry(() => provider.chat(request))\n\t\t\t},\n\t\t}\n\n\t\tif (provider.chatStream) {\n\t\t\twrapper.chatStream = (request: UnifiedRequest) => provider.chatStream!(request)\n\t\t}\n\n\t\treturn wrapper\n\t}\n\n\tprivate async executeWithRetry<T>(fn: () => Promise<T>): Promise<T> {\n\t\tlet lastError: Error | null = null\n\n\t\tfor (let attempt = 0; attempt <= this.options.maxRetries; attempt++) {\n\t\t\ttry {\n\t\t\t\treturn await this.withTimeout(fn(), this.options.timeoutMs)\n\t\t\t} catch (error) {\n\t\t\t\tlastError = error as Error\n\n\t\t\t\tif (!this.isRetryable(lastError) || attempt === this.options.maxRetries) {\n\t\t\t\t\tthrow lastError\n\t\t\t\t}\n\n\t\t\t\tconst delay = this.options.baseDelayMs * Math.pow(2, attempt)\n\t\t\t\tawait this.sleep(delay)\n\t\t\t}\n\t\t}\n\n\t\tthrow lastError",
      "startLine": 27,
      "endLine": 76,
      "type": "class",
      "name": "RetryInterceptor (part 1)",
      "embedding": [
        -0.06404236704111099,
        0.02779608592391014,
        0.02471100352704525,
        0.06231031194329262,
        -0.00036241134512238204,
        -0.0015187171520665288,
        0.030860750004649162,
        0.05513879656791687,
        0.02958645671606064,
        0.02723241038620472,
        0.03644729033112526,
        -0.02612374722957611,
        -0.038794320076704025,
        0.015901241451501846,
        0.04654555395245552,
        -0.022618213668465614,
        0.037660129368305206,
        -0.01977936178445816,
        -0.05846076458692551,
        -0.04056158661842346,
        0.05796900764107704,
        0.05576633661985397,
        0.033387988805770874,
        0.023533476516604424,
        -0.01958741992712021,
        -0.07854221761226654,
        -0.0048544807359576225,
        -0.05356403812766075,
        0.007040143944323063,
        -0.050760481506586075,
        -0.025798819959163666,
        0.036131907254457474,
        -0.134114071726799,
        -0.028745137155056,
        0.016562389209866524,
        0.03563759848475456,
        -0.012775890529155731,
        -0.02048019878566265,
        -0.04030817747116089,
        -0.02370547130703926,
        0.0194904375821352,
        0.05711553245782852,
        -0.03139663115143776,
        -0.06353352218866348,
        0.089095838367939,
        -0.08361982554197311,
        -0.034699946641922,
        -0.01345632504671812,
        0.015568168833851814,
        0.01904381439089775,
        -0.01443597674369812,
        0.05383111909031868,
        -0.03770052641630173,
        0.005580990109592676,
        0.09150123596191406,
        0.004906665999442339,
        0.009188147261738777,
        0.02790992334485054,
        -0.010881276801228523,
        0.012360230088233948,
        -0.01907985284924507,
        -0.06685009598731995,
        -0.011214046739041805,
        -0.05103475600481033,
        -0.01222684420645237,
        0.04239089787006378,
        0.051690854132175446,
        0.05930288881063461,
        0.05613555759191513,
        0.057663608342409134,
        -0.019002502784132957,
        0.005353046115487814,
        -0.03011525422334671,
        -0.00009750371827976778,
        -0.06893130391836166,
        -0.0497455969452858,
        0.044617895036935806,
        0.0232156403362751,
        0.017488839104771614,
        -0.04458589106798172,
        -0.004376565106213093,
        -0.030157899484038353,
        -0.021727774292230606,
        0.03087356872856617,
        -0.01180058903992176,
        -0.0052572693675756454,
        -0.02418796718120575,
        -0.00001042123039951548,
        0.1076921746134758,
        -0.09327626973390579,
        -0.016002856194972992,
        0.029034150764346123,
        -0.04885416105389595,
        0.05222732946276665,
        0.02206253819167614,
        0.05610380321741104,
        -0.01465233787894249,
        -0.004903894383460283,
        -0.0589560940861702,
        0.02442592941224575,
        -0.008955541998147964,
        -0.04827527701854706,
        -0.04248703271150589,
        0.0022547610569745302,
        -0.024987120181322098,
        -0.08509352058172226,
        0.038235027343034744,
        -0.028242766857147217,
        -0.028844516724348068,
        0.04887773096561432,
        -0.022685635834932327,
        0.057086534798145294,
        0.030335674062371254,
        0.008154427632689476,
        0.00535943079739809,
        0.006344818975776434,
        0.03361547738313675,
        -0.015827076509594917,
        0.025662163272500038,
        -0.012897499836981297,
        0.08280317485332489,
        0.029553398489952087,
        0.055975429713726044,
        -0.053442973643541336,
        0.08063945919275284,
        -0.01952001079916954,
        0.11407431215047836,
        1.2361448634737265e-32,
        0.014831478707492352,
        -0.025367090478539467,
        -0.057553499937057495,
        0.06763830780982971,
        0.047247037291526794,
        0.012540910392999649,
        0.058636877685785294,
        0.02503807842731476,
        -0.042024362832307816,
        0.036543358117341995,
        -0.06635487824678421,
        -0.06360329687595367,
        -0.04384790360927582,
        -0.06568455696105957,
        0.028595224022865295,
        -0.024839648976922035,
        0.04637555405497551,
        0.03153103590011597,
        0.06492028385400772,
        0.050174638628959656,
        0.10046286135911942,
        -0.0707554891705513,
        -0.012948228046298027,
        -0.0392531119287014,
        0.04367408901453018,
        0.07052280008792877,
        0.025712722912430763,
        0.06085389107465744,
        -0.07747738808393478,
        -0.005621708929538727,
        0.10694316774606705,
        0.045237552374601364,
        -0.010968264192342758,
        0.02416182868182659,
        0.007061221171170473,
        -0.04685337468981743,
        -0.005331328604370356,
        -0.006132177077233791,
        -0.10403881967067719,
        -0.09143302589654922,
        -0.014066261239349842,
        0.037877053022384644,
        -0.1137913167476654,
        0.03529174625873566,
        -0.03227301314473152,
        -0.12170425802469254,
        -0.016760315746068954,
        -0.004060835111886263,
        0.10161835700273514,
        -0.009344757534563541,
        0.021694518625736237,
        0.07321306318044662,
        -0.017879370599985123,
        -0.030275918543338776,
        0.024695809930562973,
        0.017030008137226105,
        -0.009306736290454865,
        0.049234069883823395,
        -0.024564029648900032,
        0.004949827212840319,
        -0.04843838885426521,
        -0.11956966668367386,
        -0.057985033839941025,
        -0.02782238833606243,
        0.11318100988864899,
        0.0986727923154831,
        -0.09571364521980286,
        -0.07150673866271973,
        0.029752623289823532,
        -0.06745458394289017,
        -0.0064604878425598145,
        -0.055111970752477646,
        0.05190525949001312,
        0.0019150107400491834,
        -0.012775097042322159,
        -0.0960400253534317,
        0.010639850050210953,
        0.018041927367448807,
        0.03720517456531525,
        -0.08425790071487427,
        0.0441923551261425,
        -0.050863076001405716,
        -0.0820717066526413,
        0.08708659559488297,
        0.03779974952340126,
        -0.01438511535525322,
        0.036149200052022934,
        -0.010391363874077797,
        -0.02732441946864128,
        0.06370336562395096,
        -0.11592007428407669,
        -0.016435805708169937,
        0.053252313286066055,
        0.01188430655747652,
        -0.05560649186372757,
        -1.1273084863933803e-32,
        0.015757957473397255,
        -0.012268215417861938,
        -0.04770408570766449,
        0.006338663399219513,
        0.03948509693145752,
        -0.00430665398016572,
        0.020701421424746513,
        0.08103051036596298,
        0.003873258363455534,
        -0.09277462214231491,
        -0.02109937183558941,
        -0.013984862715005875,
        0.017960572615265846,
        0.0207706056535244,
        -0.005899978801608086,
        0.04554124176502228,
        -0.012903958559036255,
        -0.08848697692155838,
        0.017348632216453552,
        0.036367423832416534,
        -0.01827169954776764,
        -0.01438580546528101,
        0.011459861882030964,
        -0.008617334067821503,
        -0.03010379895567894,
        0.11548598110675812,
        0.03077593632042408,
        0.06972222030162811,
        -0.004972751718014479,
        -0.09491018950939178,
        0.04533625394105911,
        -0.08369608968496323,
        -0.07106292992830276,
        0.03388502448797226,
        0.005670609883964062,
        -0.007766009774059057,
        0.035459257662296295,
        0.12903441488742828,
        -0.08532287925481796,
        0.0363689623773098,
        0.1190471276640892,
        -0.0019595634657889605,
        -0.07889023423194885,
        -0.04876454174518585,
        -0.007710014469921589,
        -0.039632998406887054,
        0.037183452397584915,
        -0.04222187027335167,
        0.011116482317447662,
        -0.03431928530335426,
        0.03401341289281845,
        -0.1213725283741951,
        -0.021050946786999702,
        0.07238062471151352,
        0.003541273297742009,
        -0.017576390877366066,
        0.09770291298627853,
        -0.11770601570606232,
        0.04747176542878151,
        -0.0035525814164429903,
        0.004422657657414675,
        -0.08601731806993484,
        0.06269770860671997,
        0.02606843039393425,
        0.10347606241703033,
        0.05598049983382225,
        -0.0157933309674263,
        -0.004380669444799423,
        0.11386895924806595,
        0.04910702258348465,
        -0.022747227922081947,
        0.02178918942809105,
        -0.011508235707879066,
        -0.03760002553462982,
        0.0433444082736969,
        -0.031224897131323814,
        -0.11003907769918442,
        -0.09804356098175049,
        0.06971333175897598,
        0.010229350067675114,
        -0.0449877604842186,
        -0.04444145783782005,
        -0.014045173302292824,
        0.004725849721580744,
        0.02074418030679226,
        -0.04968130216002464,
        0.008939530700445175,
        0.08852238208055496,
        0.09185870736837387,
        -0.007657730020582676,
        -0.04074031859636307,
        -0.06954402476549149,
        -0.02392040379345417,
        0.040041234344244,
        -0.023647671565413475,
        -6.838083521643057e-8,
        -0.05676900967955589,
        -0.005059276707470417,
        -0.012019028887152672,
        0.009496009908616543,
        0.01987563818693161,
        -0.0252595953643322,
        -0.006376045290380716,
        -0.09672078490257263,
        0.00010526017285883427,
        -0.030344566330313683,
        0.01731366477906704,
        0.03614780306816101,
        0.0413360521197319,
        0.004381743259727955,
        0.015342501923441887,
        -0.09846854209899902,
        0.038855697959661484,
        0.0047911242581903934,
        -0.06526784598827362,
        -0.041719526052474976,
        -0.04275333136320114,
        -0.008535590954124928,
        -0.007422687951475382,
        -0.05919574946165085,
        0.04589476063847542,
        0.04388590157032013,
        0.029057268053293228,
        0.06457709521055222,
        0.0666428729891777,
        0.023947054520249367,
        -0.11121752858161926,
        -0.03573368489742279,
        0.06438548117876053,
        0.06283599883317947,
        -0.0642474815249443,
        0.015555732883512974,
        0.050802990794181824,
        -0.021928975358605385,
        0.09713012725114822,
        0.06503284722566605,
        0.05352814868092537,
        0.02637043595314026,
        -0.02909049578011036,
        0.04520238935947418,
        0.03829243779182434,
        -0.054369814693927765,
        -0.046532563865184784,
        -0.06717654317617416,
        0.10035539418458939,
        0.05013169348239899,
        -0.06784547865390778,
        -0.050248730927705765,
        -0.07592956721782684,
        0.00007921499491203576,
        -0.02585436962544918,
        -0.02553589828312397,
        -0.0007788200164213777,
        -0.09797492623329163,
        0.027002578601241112,
        0.04281282424926758,
        0.05038193240761757,
        -0.08647922426462173,
        -0.04662632197141647,
        -0.005627214442938566
      ]
    },
    {
      "id": "3e4b25d6",
      "filePath": "llm-service/src/interceptors/retry.ts",
      "content": "await this.sleep(delay)\n\t\t\t}\n\t\t}\n\n\t\tthrow lastError\n\t}\n\n\tprivate withTimeout<T>(promise: Promise<T>, ms: number): Promise<T> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\treject(new Error(`Request timeout after ${ms}ms`))\n\t\t\t}, ms)\n\n\t\t\tpromise\n\t\t\t\t.then(result => {\n\t\t\t\t\tclearTimeout(timer)\n\t\t\t\t\tresolve(result)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tclearTimeout(timer)\n\t\t\t\t\treject(error)\n\t\t\t\t})\n\t\t})\n\t}\n\n\tprivate isRetryable(error: Error): boolean {\n\t\tconst message = error.message.toLowerCase()\n\t\treturn this.options.retryableErrors.some(e => message.includes(e.toLowerCase()))\n\t}\n\n\tprivate sleep(ms: number): Promise<void> {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms))\n\t}\n}",
      "startLine": 72,
      "endLine": 105,
      "type": "class",
      "name": "RetryInterceptor (part 2)",
      "embedding": [
        -0.054717518389225006,
        0.05810379981994629,
        0.05397424474358559,
        0.08154309540987015,
        0.0313219279050827,
        0.018176063895225525,
        0.020680291578173637,
        0.03466257080435753,
        0.05187825486063957,
        0.030103430151939392,
        0.00958266481757164,
        0.02479337900876999,
        0.0006651187431998551,
        0.02792464569211006,
        -0.022961394861340523,
        -0.02320409193634987,
        0.019219184294342995,
        0.018455784767866135,
        -0.012808643281459808,
        -0.07089558988809586,
        0.08069133758544922,
        0.07428959012031555,
        0.04029467701911926,
        0.06098484620451927,
        -0.061026569455862045,
        -0.05129502713680267,
        -0.014560599811375141,
        -0.06655663996934891,
        0.010191358625888824,
        -0.018663885071873665,
        -0.05586298555135727,
        -0.00047845696099102497,
        -0.14865437150001526,
        -0.043597061187028885,
        -0.021735934540629387,
        0.05641314387321472,
        -0.019693884998559952,
        0.02499144896864891,
        0.001311002066358924,
        -0.006737466435879469,
        0.05110102891921997,
        0.048103272914886475,
        -0.02427777089178562,
        -0.0398356132209301,
        0.07771645486354828,
        -0.07529962807893753,
        0.004836146254092455,
        -0.0212910957634449,
        -0.025846906006336212,
        0.04170474410057068,
        0.019819539040327072,
        0.022870032116770744,
        -0.07413750141859055,
        0.015952307730913162,
        0.09258640557527542,
        -0.009323575533926487,
        -0.006704395171254873,
        0.05058518052101135,
        -0.016113847494125366,
        0.013258812017738819,
        -0.012814019806683064,
        -0.11383464932441711,
        0.04591403529047966,
        -0.06210817024111748,
        0.048200760036706924,
        0.0419314019382,
        0.023769043385982513,
        0.02072078548371792,
        0.059532858431339264,
        0.05527351051568985,
        -0.001411084900610149,
        -0.01279649417847395,
        -0.054719556123018265,
        0.05773346126079559,
        -0.06409594416618347,
        -0.037589967250823975,
        0.01600244641304016,
        0.05032651126384735,
        0.02622685208916664,
        0.02789771929383278,
        0.014400242827832699,
        -0.08483286201953888,
        -0.026807820424437523,
        0.006475243251770735,
        -0.001982243498787284,
        0.00467294454574585,
        0.019290711730718613,
        0.010648504830896854,
        0.06654006242752075,
        -0.07007031887769699,
        0.05622163787484169,
        -0.011898934841156006,
        -0.07342718541622162,
        0.06974533200263977,
        -0.013700190931558609,
        -0.05477361008524895,
        -0.03608712926506996,
        0.007737753912806511,
        -0.022399669513106346,
        0.004036433063447475,
        0.010511850006878376,
        -0.05733373388648033,
        -0.06224021688103676,
        -0.01059772539883852,
        -0.02537613920867443,
        -0.007778560742735863,
        0.03762081637978554,
        -0.03746701404452324,
        -0.022704405710101128,
        0.03690633922815323,
        -0.008980581536889076,
        0.0175982303917408,
        0.05708305537700653,
        0.018541835248470306,
        -0.0008351505966857076,
        0.009689029306173325,
        0.006271871272474527,
        -0.004414782393723726,
        0.04897588863968849,
        -0.0365745909512043,
        0.022798407822847366,
        0.0334136001765728,
        0.07017773389816284,
        -0.08702653646469116,
        0.08589163422584534,
        -0.006708288099616766,
        0.09380141645669937,
        8.017205019130047e-33,
        -0.015057291835546494,
        -0.010516515001654625,
        -0.0986654981970787,
        0.07034672051668167,
        0.06692182272672653,
        -0.016588440164923668,
        0.0659186989068985,
        0.03215843439102173,
        -0.030580762773752213,
        0.0008446644060313702,
        -0.01481522899121046,
        -0.08693467080593109,
        -0.011042986996471882,
        -0.09927331656217575,
        0.012901096604764462,
        -0.011879799887537956,
        0.08212157338857651,
        -0.01356139313429594,
        0.04381348192691803,
        0.028887951746582985,
        0.03427315875887871,
        -0.045188434422016144,
        0.021929219365119934,
        -0.032412339001894,
        0.0437580868601799,
        0.012431853450834751,
        0.00351805635727942,
        0.0345800407230854,
        -0.016366465017199516,
        -0.01601286232471466,
        0.08735377341508865,
        0.09496594965457916,
        -0.00421068025752902,
        0.04533212259411812,
        0.013862674124538898,
        -0.07869701087474823,
        0.028755584731698036,
        0.007015926297754049,
        -0.04833318293094635,
        -0.08204803615808487,
        -0.0483664944767952,
        0.060345038771629333,
        -0.1010492593050003,
        0.04821839556097984,
        -0.000971576024312526,
        -0.15024597942829132,
        -0.007535701151937246,
        0.027571585029363632,
        0.12123223394155502,
        -0.018858417868614197,
        0.06285180896520615,
        0.09882515668869019,
        0.03421594202518463,
        -0.03704502433538437,
        0.04867567494511604,
        0.028039323166012764,
        -0.009165835566818714,
        0.07220644503831863,
        -0.04665796831250191,
        -0.0030386275611817837,
        0.022704552859067917,
        -0.10985297709703445,
        -0.02591492235660553,
        -0.05759592726826668,
        0.08497170358896255,
        0.07631953805685043,
        -0.07107750326395035,
        -0.007085505872964859,
        -0.00033262063516303897,
        -0.08405238389968872,
        0.04272043704986572,
        -0.055892545729875565,
        0.03781973943114281,
        0.04324273392558098,
        -0.022321611642837524,
        -0.07000187784433365,
        0.06353937089443207,
        0.06443197280168533,
        0.015515880659222603,
        -0.11894435435533524,
        0.08196347951889038,
        -0.08809198439121246,
        -0.08819319307804108,
        0.09821737557649612,
        0.009859354235231876,
        -0.015214436687529087,
        0.01351382490247488,
        -0.05340199172496796,
        0.02711506187915802,
        0.06089939922094345,
        -0.12561656534671783,
        -0.032946132123470306,
        0.0324443094432354,
        0.0610102079808712,
        -0.0919417142868042,
        -7.637147124358062e-33,
        0.04376459866762161,
        -0.0021540368907153606,
        -0.051987648010253906,
        0.05449105426669121,
        -0.017027879133820534,
        0.009299562312662601,
        0.019396765157580376,
        0.09181424975395203,
        0.006286416668444872,
        -0.02188744954764843,
        0.004860545042902231,
        -0.009549557231366634,
        0.03159308806061745,
        0.031833019107580185,
        -0.0447089746594429,
        -0.012021412141621113,
        -0.002211649902164936,
        -0.02897186577320099,
        -0.04039477929472923,
        -0.030513744801282883,
        0.050102364271879196,
        -0.05348893254995346,
        0.016335653141140938,
        -0.03804450109601021,
        -0.0507814846932888,
        0.1278475970029831,
        0.012806926853954792,
        0.020348401740193367,
        -0.027871619910001755,
        -0.09785689413547516,
        0.05176547169685364,
        -0.07837808132171631,
        -0.014643963426351547,
        -0.01158786192536354,
        0.044185031205415726,
        0.006675650365650654,
        0.042430005967617035,
        0.07678044587373734,
        -0.04508769512176514,
        0.03785787522792816,
        0.11888034641742706,
        0.027557270601391792,
        -0.06090620905160904,
        -0.051223114132881165,
        -0.014006453566253185,
        -0.05371313914656639,
        0.04447460547089577,
        -0.0555056631565094,
        0.03439180552959442,
        -0.014507687650620937,
        0.032654471695423126,
        -0.1047353595495224,
        0.06578703969717026,
        0.0673336312174797,
        0.004501442890614271,
        -0.03257974237203598,
        0.09455030411481857,
        -0.11276701092720032,
        0.03478793427348137,
        0.02079181745648384,
        0.027124783024191856,
        -0.10168962925672531,
        0.05076390877366066,
        0.017266009002923965,
        0.07558903843164444,
        0.06879542768001556,
        -0.06150613725185394,
        -0.01908213458955288,
        0.11509475857019424,
        0.03679175674915314,
        0.04467839375138283,
        0.01600092090666294,
        -0.05564579367637634,
        -0.013729691505432129,
        0.03649256378412247,
        -0.02367328479886055,
        -0.06695136427879333,
        -0.14638203382492065,
        0.019556408748030663,
        0.009262903593480587,
        -0.004958856385201216,
        -0.04757482558488846,
        -0.022916823625564575,
        0.002547380281612277,
        0.0106552354991436,
        -0.0359494648873806,
        0.0028870271053165197,
        0.04440377652645111,
        0.06638588011264801,
        0.004579357802867889,
        -0.019880255684256554,
        -0.05304994806647301,
        -0.015410364605486393,
        0.02525424212217331,
        -0.0031515832524746656,
        -5.72711478241672e-8,
        -0.046302564442157745,
        -0.011277973651885986,
        0.010055890306830406,
        -0.026251086965203285,
        0.024429241195321083,
        -0.014335253275930882,
        -0.024610765278339386,
        -0.09248275309801102,
        -0.030217140913009644,
        -0.0548328272998333,
        0.011663604527711868,
        0.006975214462727308,
        0.03367767855525017,
        -0.04254577308893204,
        0.03693993762135506,
        -0.09013409167528152,
        -0.031541503965854645,
        -0.026641570031642914,
        -0.033442460000514984,
        -0.06258387863636017,
        -0.05427153408527374,
        -0.020797278732061386,
        0.02750326693058014,
        -0.05195359140634537,
        -0.008856424130499363,
        0.02690274454653263,
        0.08460035920143127,
        0.09421084076166153,
        0.0006996728479862213,
        -0.008014141581952572,
        -0.14650745689868927,
        -0.028283551335334778,
        0.07981711626052856,
        0.04504850506782532,
        -0.07697459310293198,
        0.02585291489958763,
        0.01808144897222519,
        0.0025748813059180975,
        0.07041918486356735,
        0.018568456172943115,
        0.030309448018670082,
        -0.006154388654977083,
        -0.0030823980923742056,
        0.07190705835819244,
        0.008828855119645596,
        -0.049716949462890625,
        -0.0647544339299202,
        -0.010785004124045372,
        0.015819167718291283,
        0.0011711232364177704,
        -0.056817516684532166,
        -0.024902774021029472,
        -0.09768643975257874,
        0.015129391103982925,
        -0.0563863068819046,
        -0.03944835439324379,
        0.007877189666032791,
        -0.09377431869506836,
        -0.0015889196656644344,
        -0.035991933196783066,
        0.06067666411399841,
        -0.032957710325717926,
        -0.025004176422953606,
        -0.05019763857126236
      ]
    },
    {
      "id": "064f3b9b",
      "filePath": "llm-service/src/interceptors/rate-limiter.ts",
      "content": "import type { Interceptor } from '../core/interceptor.js'\nimport type { UnifiedRequest } from '../core/types.js'\n\nexport interface RateLimiterOptions {\n\t/** 每分钟最大请求数 */\n\tmaxRequestsPerMinute: number\n}\n\n/**\n * 本地速率限制拦截器\n * 简单的滑动窗口实现，防止测试时刷爆 API\n */",
      "startLine": 1,
      "endLine": 12,
      "type": "other",
      "embedding": [
        -0.04529291018843651,
        0.013719071634113789,
        -0.012441989034414291,
        -0.005221028346568346,
        -0.006239422131329775,
        -0.004335012286901474,
        -0.006527440622448921,
        0.03669681027531624,
        -0.011639207601547241,
        0.06690847873687744,
        0.005648797377943993,
        -0.03789044916629791,
        -0.01625187136232853,
        0.03326864913105965,
        0.026288941502571106,
        0.031060436740517616,
        0.061452701687812805,
        -0.030942173674702644,
        -0.04359002411365509,
        -0.05242067202925682,
        0.063324935734272,
        0.06392965465784073,
        0.03500160947442055,
        0.02801417000591755,
        -0.01026034913957119,
        -0.06508400291204453,
        -0.04472248628735542,
        -0.01382505614310503,
        0.04031328856945038,
        -0.026075586676597595,
        0.008458644151687622,
        0.03093523345887661,
        -0.11403469741344452,
        -0.018844710662961006,
        0.0025532261934131384,
        -0.026618393138051033,
        -0.04473034292459488,
        -0.04792085289955139,
        0.057285260409116745,
        -0.002698275726288557,
        0.04333898052573204,
        0.07738716155290604,
        -0.005171771626919508,
        -0.06773357838392258,
        0.04353182390332222,
        -0.0267195962369442,
        -0.06768687814474106,
        0.0019298961851745844,
        -0.022980671375989914,
        0.052063729614019394,
        0.011147771030664444,
        0.033571187406778336,
        -0.0026910784654319286,
        -0.05033041909337044,
        0.06435777992010117,
        -0.08751881867647171,
        -0.04315982013940811,
        0.02481132745742798,
        -0.014446702785789967,
        0.0048795402981340885,
        -0.10965561866760254,
        -0.09815973788499832,
        0.04513964056968689,
        -0.06542935967445374,
        0.012486944906413555,
        0.011314146220684052,
        -0.035723235458135605,
        0.0665271133184433,
        -0.015684086829423904,
        0.008344973437488079,
        -0.08326578140258789,
        -0.06410548090934753,
        -0.0437893271446228,
        -0.0019902484491467476,
        -0.010354355908930302,
        -0.10930460691452026,
        -0.07774704694747925,
        0.07606381177902222,
        0.07481027394533157,
        -0.05466868728399277,
        0.054355669766664505,
        -0.09403674304485321,
        0.008229285478591919,
        0.05133276805281639,
        -0.006510947830975056,
        0.054581619799137115,
        0.0054435390047729015,
        0.002557606203481555,
        0.09399259090423584,
        -0.008836434222757816,
        0.016432926058769226,
        0.00015049977810122073,
        -0.025145038962364197,
        0.0746217891573906,
        -0.07171652466058731,
        -0.0005796570330858231,
        -0.08609312027692795,
        -0.024499977007508278,
        -0.06469561904668808,
        0.012627028860151768,
        -0.010479580610990524,
        -0.06518474221229553,
        0.013399737887084484,
        0.0626944825053215,
        -0.059906166046857834,
        -0.08163055777549744,
        0.03726801648736,
        0.05110735818743706,
        0.01968717761337757,
        0.06438081711530685,
        0.05177107825875282,
        0.11948777735233307,
        0.021767280995845795,
        -0.06437589228153229,
        -0.010981852188706398,
        -0.0021829968318343163,
        0.07209225744009018,
        -0.086481973528862,
        0.03147543966770172,
        -0.03383700177073479,
        -0.020140741020441055,
        -0.01820428855717182,
        -0.040699973702430725,
        -0.0031039509922266006,
        0.07096222043037415,
        0.020001133903861046,
        0.15535351634025574,
        3.238754361480214e-33,
        -0.0259624682366848,
        -0.00938020646572113,
        -0.03330794349312782,
        -0.01565311662852764,
        0.004634852055460215,
        -0.03606516867876053,
        0.04063308611512184,
        0.08954768627882004,
        -0.03942962363362312,
        0.04023853689432144,
        -0.0557163842022419,
        -0.022291293367743492,
        -0.06444130092859268,
        0.006474141031503677,
        0.02056119777262211,
        -0.06386423856019974,
        0.0313887894153595,
        0.04481435567140579,
        0.05062776058912277,
        -0.007073267828673124,
        0.025724349543452263,
        -0.00949121918529272,
        -0.03300781920552254,
        -0.008822044357657433,
        0.012149471789598465,
        0.09864576905965805,
        -0.004891677759587765,
        0.03332603722810745,
        -0.028929442167282104,
        0.009048210456967354,
        0.11334385722875595,
        0.10854993015527725,
        0.0028425634372979403,
        0.034626156091690063,
        0.006157014053314924,
        -0.002382251201197505,
        0.0005872517940588295,
        0.009159194305539131,
        -0.054784201085567474,
        -0.03717651963233948,
        -0.052950482815504074,
        0.05174556374549866,
        -0.13918213546276093,
        0.012175170704722404,
        -0.07244246453046799,
        -0.058265674859285355,
        0.03498613461852074,
        -0.05788110941648483,
        0.08797398954629898,
        -0.031062081456184387,
        -0.0034961369819939137,
        0.06594743579626083,
        -0.03393705561757088,
        -0.005248912610113621,
        0.048116713762283325,
        -0.0177927128970623,
        -0.01284564845263958,
        0.06890683621168137,
        0.014685912989079952,
        0.008566680364310741,
        -0.011552426032721996,
        -0.10497833043336868,
        0.023094458505511284,
        -0.03277215734124184,
        0.11374327540397644,
        0.0415022075176239,
        -0.06075464189052582,
        0.04729006439447403,
        0.029954763129353523,
        0.003947328310459852,
        0.04731041193008423,
        -0.027377666905522346,
        0.008660960011184216,
        0.0061656637117266655,
        0.028239522129297256,
        -0.07134303450584412,
        0.08765093237161636,
        0.10896524786949158,
        0.040436431765556335,
        -0.08037364482879639,
        -0.018558958545327187,
        -0.05981390178203583,
        -0.019403304904699326,
        -0.016629857942461967,
        0.07745576649904251,
        -0.04382306709885597,
        0.0033401476684957743,
        0.020405419170856476,
        0.04154255986213684,
        0.004198916256427765,
        -0.04883022606372833,
        -0.046529121696949005,
        -0.011400051414966583,
        0.013475887477397919,
        -0.08652939647436142,
        -4.4316023149985e-33,
        0.026833580806851387,
        0.023608755320310593,
        -0.09358981996774673,
        0.03740393742918968,
        -0.05498681962490082,
        -0.034057069569826126,
        -0.032108988612890244,
        0.12669341266155243,
        0.016602562740445137,
        0.07143750041723251,
        0.02631029486656189,
        0.027435502037405968,
        0.04855833947658539,
        -0.011158181354403496,
        -0.023252232000231743,
        -0.06855636090040207,
        -0.030464986339211464,
        -0.011086365208029747,
        0.0026050028391182423,
        -0.044241104274988174,
        -0.07325304299592972,
        -0.010976106859743595,
        0.056013304740190506,
        -0.02525201439857483,
        -0.05383387207984924,
        0.075175940990448,
        0.023788979277014732,
        0.08724185824394226,
        0.009479251690208912,
        -0.05144659802317619,
        -0.0018705959664657712,
        -0.003952266648411751,
        -0.008936380967497826,
        0.038292910903692245,
        -0.08700140565633774,
        -0.03956477716565132,
        0.02618447318673134,
        0.1427612155675888,
        -0.024482104927301407,
        0.04571397230029106,
        0.01577545888721943,
        -0.0231329333037138,
        -0.10114308446645737,
        0.014515909366309643,
        -0.002063870895653963,
        -0.09646563231945038,
        -0.020088015124201775,
        -0.07712399214506149,
        0.0430586077272892,
        -0.08543197065591812,
        0.047859907150268555,
        -0.056300897151231766,
        0.08425312489271164,
        0.05653778836131096,
        -0.02862691506743431,
        -0.006627579685300589,
        0.10910984128713608,
        -0.1222115010023117,
        0.039219342172145844,
        -0.04000901058316231,
        0.056771695613861084,
        -0.021118933334946632,
        -0.04458661004900932,
        0.00894954428076744,
        0.06282231211662292,
        0.011409023776650429,
        0.0009335511713288724,
        -0.031015658751130104,
        0.03499133512377739,
        0.05182906985282898,
        0.013303372077643871,
        -0.002367614069953561,
        0.08452655375003815,
        0.060026273131370544,
        0.014695310033857822,
        -0.057877637445926666,
        -0.010360046289861202,
        -0.020614290609955788,
        0.07243524491786957,
        -0.01733546517789364,
        -0.05418701469898224,
        0.008550782687962055,
        0.016564656049013138,
        0.0008252473780885339,
        -0.045302119106054306,
        -0.0725078210234642,
        -0.01762218214571476,
        0.025452418252825737,
        0.07102012634277344,
        0.00442102923989296,
        -0.03971711918711662,
        -0.04134363308548927,
        -0.03170163184404373,
        -0.019473671913146973,
        0.006162703037261963,
        -4.3660637771836264e-8,
        -0.05513351410627365,
        0.006177660543471575,
        -0.10306096822023392,
        0.012662373483181,
        0.016896400600671768,
        0.019830770790576935,
        -0.0398152656853199,
        -0.020533638074994087,
        -0.015758590772747993,
        -0.022370632737874985,
        0.06418628990650177,
        0.06264781206846237,
        -0.008017006330192089,
        -0.024812106043100357,
        0.061696961522102356,
        -0.10729502886533737,
        0.03486994653940201,
        0.027394330129027367,
        -0.06040332093834877,
        -0.01611710898578167,
        -0.10596568137407303,
        0.030083388090133667,
        0.046420808881521225,
        -0.10852225869894028,
        0.11291167885065079,
        0.046092234551906586,
        0.005893890745937824,
        0.06696425378322601,
        0.04657648876309395,
        0.01555663626641035,
        -0.13059815764427185,
        0.0028191457968205214,
        0.0007983579416759312,
        -0.03160916268825531,
        -0.08936189860105515,
        0.07014389336109161,
        -0.05409816652536392,
        -0.03046843409538269,
        0.044943924993276596,
        -0.0024965591728687286,
        -0.011795136146247387,
        -0.07407799363136292,
        -0.03311609849333763,
        0.026661181822419167,
        0.03386332467198372,
        0.04274201765656471,
        -0.07327336817979813,
        0.0015049104113131762,
        0.020899523049592972,
        -0.020033428445458412,
        0.005372089799493551,
        -0.02021261304616928,
        -0.017823677510023117,
        0.0018572978442534804,
        -0.07537432760000229,
        -0.04308328777551651,
        -0.04968606308102608,
        -0.05942639335989952,
        -0.050760213285684586,
        -0.04576827958226204,
        0.10694032162427902,
        -0.010462868958711624,
        -0.02271445095539093,
        0.006925645750015974
      ]
    },
    {
      "id": "b8c356ed",
      "filePath": "llm-service/src/interceptors/rate-limiter.ts",
      "content": "export class RateLimiter implements Interceptor {\n\treadonly name = 'rate-limiter'\n\n\tprivate timestamps: number[] = []\n\tprivate maxRequests: number\n\tprivate windowMs = 60_000 // 1 minute\n\n\tconstructor(options: RateLimiterOptions) {\n\t\tthis.maxRequests = options.maxRequestsPerMinute\n\t}\n\n\tasync onRequest(request: UnifiedRequest): Promise<UnifiedRequest> {\n\t\tconst now = Date.now()\n\n\t\t// 清理过期的时间戳\n\t\tthis.timestamps = this.timestamps.filter(t => now - t < this.windowMs)\n\n\t\tif (this.timestamps.length >= this.maxRequests) {\n\t\t\tconst oldestTimestamp = this.timestamps[0]\n\t\t\tconst waitMs = this.windowMs - (now - oldestTimestamp)\n\t\t\tthrow new Error(`Rate limit exceeded. Try again in ${Math.ceil(waitMs / 1000)}s`)\n\t\t}\n\n\t\tthis.timestamps.push(now)\n\t\treturn request\n\t}\n}",
      "startLine": 13,
      "endLine": 40,
      "type": "class",
      "name": "RateLimiter",
      "embedding": [
        -0.06915247440338135,
        0.04469122365117073,
        -0.02445247583091259,
        0.018991800025105476,
        0.006696010008454323,
        -0.02602805383503437,
        -0.019801070913672447,
        0.01630341447889805,
        0.0521504171192646,
        0.030755046755075455,
        0.01355289202183485,
        -0.04700380936264992,
        -0.05900048464536667,
        0.03173007443547249,
        0.03691878169775009,
        0.0011516042286530137,
        0.01389244757592678,
        -0.06346993893384933,
        -0.06440307945013046,
        -0.08771815896034241,
        0.04664008691906929,
        0.0076841809786856174,
        0.04624059796333313,
        0.05868023633956909,
        -0.0015461266739293933,
        -0.05680979788303375,
        -0.0244094580411911,
        -0.032203637063503265,
        0.05803541839122772,
        -0.027493618428707123,
        -0.016614869236946106,
        -0.031601134687662125,
        -0.13505636155605316,
        -0.005193757358938456,
        -0.019885139539837837,
        0.005307767540216446,
        -0.02130214124917984,
        -0.017792511731386185,
        0.05016700178384781,
        -0.04710287228226662,
        0.049972549080848694,
        0.040252942591905594,
        -0.0908135250210762,
        -0.045924875885248184,
        0.04572572186589241,
        -0.02357470989227295,
        -0.025153186172246933,
        0.011481335386633873,
        -0.0023796679452061653,
        0.0756785050034523,
        -0.05079162120819092,
        0.040353164076805115,
        -0.023335684090852737,
        -0.034981753677129745,
        0.08700449764728546,
        0.005162267945706844,
        0.000534725550096482,
        0.04377007484436035,
        -0.03023281879723072,
        -0.033478740602731705,
        -0.09113112837076187,
        -0.10034850984811783,
        0.03606044501066208,
        -0.047680649906396866,
        0.02232598327100277,
        0.007476355880498886,
        -0.03687035292387009,
        0.07584145665168762,
        0.04990820586681366,
        0.04941234737634659,
        -0.04792104661464691,
        -0.021544210612773895,
        0.0006004493916407228,
        0.016509780660271645,
        -0.06302303075790405,
        -0.09736216068267822,
        -0.04408309608697891,
        0.03253629058599472,
        0.04190632700920105,
        -0.019930843263864517,
        0.022495752200484276,
        -0.10492392629384995,
        -0.022041842341423035,
        -0.01365391444414854,
        0.010760197415947914,
        0.0037291303742676973,
        0.05752645805478096,
        0.007601113989949226,
        0.06473007053136826,
        -0.08240440487861633,
        0.04602692276239395,
        0.05192224681377411,
        -0.050927091389894485,
        0.08379565179347992,
        0.008791734464466572,
        0.03746369481086731,
        -0.09226710349321365,
        0.04998817667365074,
        -0.04581117630004883,
        -0.005626228172332048,
        -0.006512151099741459,
        -0.028459660708904266,
        -0.01242835819721222,
        0.06666599959135056,
        -0.013252031058073044,
        -0.08752473443746567,
        0.025899946689605713,
        0.007090749219059944,
        0.004861325025558472,
        0.08604349195957184,
        0.0149119533598423,
        0.09173049032688141,
        0.019744694232940674,
        -0.03847578540444374,
        -0.005134426523000002,
        -0.02808399870991707,
        -0.0018347828881815076,
        -0.04656219482421875,
        0.0316312275826931,
        0.024926841259002686,
        0.03770453482866287,
        0.01676490344107151,
        -0.06581797450780869,
        -0.07662272453308105,
        0.10010389983654022,
        0.01336158812046051,
        0.15692463517189026,
        1.001300561304619e-32,
        -0.016811680048704147,
        -0.022441139444708824,
        -0.0759216696023941,
        -0.05832291394472122,
        0.03965270519256592,
        0.014205285347998142,
        0.05032925680279732,
        0.1014343872666359,
        -0.038112517446279526,
        -0.015193033032119274,
        -0.03201454132795334,
        -0.11453740298748016,
        -0.055045150220394135,
        -0.04992058128118515,
        0.002074658637866378,
        -0.08744461834430695,
        0.04795465245842934,
        -0.01398125197738409,
        0.08242827653884888,
        -0.01048039086163044,
        0.032763004302978516,
        -0.060424674302339554,
        -0.05158880725502968,
        -0.02801309898495674,
        0.02276906557381153,
        0.006275883410125971,
        0.0010111774317920208,
        0.04183875396847725,
        -0.045206423848867416,
        0.004765155725181103,
        0.10513517260551453,
        0.12467475235462189,
        -0.07649442553520203,
        0.03847740963101387,
        0.01220591552555561,
        0.014098264276981354,
        0.020650217309594154,
        0.03102393075823784,
        -0.02670609951019287,
        -0.032639194279909134,
        -0.04680738225579262,
        0.0358029380440712,
        -0.10913729667663574,
        0.08066123723983765,
        -0.0824660137295723,
        -0.09726472198963165,
        0.023672306910157204,
        -0.021863700821995735,
        0.023133771494030952,
        0.021486608311533928,
        -0.007398264482617378,
        0.051293566823005676,
        -0.06317102909088135,
        -0.028156811371445656,
        0.06860390305519104,
        0.033632174134254456,
        0.007472679950296879,
        0.05873769894242287,
        -0.03565138578414917,
        0.028297511860728264,
        -0.016341635957360268,
        -0.12944060564041138,
        0.006689421832561493,
        -0.02198801189661026,
        0.05591448396444321,
        0.04641835018992424,
        -0.023690536618232727,
        0.07266741991043091,
        0.041655588895082474,
        0.009676354937255383,
        0.05137568712234497,
        -0.01605018973350525,
        0.0019958752673119307,
        0.0024535597767680883,
        0.026996411383152008,
        -0.08532362431287766,
        0.12924624979496002,
        0.08667600899934769,
        0.021507155150175095,
        -0.07819359004497528,
        0.06494417786598206,
        -0.08360731601715088,
        -0.05279875546693802,
        0.022560343146324158,
        0.09652049839496613,
        -0.022651366889476776,
        0.020871669054031372,
        0.027553873136639595,
        0.025185277685523033,
        0.04311597719788551,
        -0.09360843151807785,
        -0.011024747975170612,
        0.0590171255171299,
        0.019975611940026283,
        -0.1092698946595192,
        -8.774211626116092e-33,
        0.07909178733825684,
        -0.013193134218454361,
        -0.09133449196815491,
        0.0589040145277977,
        0.0199760552495718,
        -0.014904244802892208,
        -0.05178478732705116,
        0.1069871112704277,
        -0.009256425313651562,
        0.017088521271944046,
        -0.004363853018730879,
        0.022762587293982506,
        0.05032355710864067,
        -0.008675224147737026,
        -0.060146208852529526,
        -0.009652743116021156,
        0.03954370692372322,
        -0.05822831764817238,
        -0.006819270551204681,
        -0.04973220080137253,
        -0.024224240332841873,
        0.019286831840872765,
        0.0002831758465617895,
        -0.005833877250552177,
        -0.035071324557065964,
        0.08205356448888779,
        0.031666889786720276,
        0.012111539952456951,
        0.014446849934756756,
        -0.04996224492788315,
        -0.034537892788648605,
        -0.06356455385684967,
        -0.01646060310304165,
        0.02386128157377243,
        -0.005242189392447472,
        -0.023517809808254242,
        0.07303136587142944,
        0.08582684397697449,
        -0.04848841577768326,
        0.0826706513762474,
        0.07374544441699982,
        0.0057817138731479645,
        -0.08203864097595215,
        -0.04652278125286102,
        -0.009847819805145264,
        -0.028505953028798103,
        0.03419248014688492,
        -0.025380762293934822,
        -0.040481653064489365,
        0.006538584362715483,
        0.023979663848876953,
        -0.11260290443897247,
        0.056489016860723495,
        0.09465017914772034,
        0.0065141054801642895,
        -0.05634310469031334,
        0.049632199108600616,
        -0.13683176040649414,
        0.05357955023646355,
        -0.012578701600432396,
        0.06536698341369629,
        -0.012192645110189915,
        -0.0011904435232281685,
        -0.007622535806149244,
        0.03852561488747597,
        0.0329618901014328,
        0.008034562692046165,
        -0.028634950518608093,
        0.08703270554542542,
        0.10458503663539886,
        0.016391392797231674,
        0.04300902038812637,
        -0.01313196774572134,
        0.05242137610912323,
        -0.016955606639385223,
        0.009957040660083294,
        -0.019887734204530716,
        -0.026893019676208496,
        0.07541099190711975,
        -0.0028975021559745073,
        -0.03846487030386925,
        0.030188601464033127,
        0.02164185419678688,
        -0.011961787939071655,
        -0.03558172658085823,
        -0.05622004717588425,
        0.011917619034647942,
        0.04229794442653656,
        0.09467066079378128,
        -0.011995039880275726,
        -0.0030404829885810614,
        -0.059940170496702194,
        -0.030088961124420166,
        0.03975362703204155,
        -0.006336104590445757,
        -5.843503103619696e-8,
        -0.048032037913799286,
        -0.011865699663758278,
        -0.036749087274074554,
        0.03306011110544205,
        0.026242291554808617,
        -0.02574642188847065,
        -0.010424905456602573,
        -0.04888904467225075,
        -0.01986577734351158,
        -0.055512234568595886,
        0.12415649741888046,
        0.04348783195018768,
        0.024173643440008163,
        -0.033202845603227615,
        0.041440822184085846,
        -0.11891360580921173,
        0.03781675919890404,
        -0.017927659675478935,
        -0.019810635596513748,
        -0.04152241349220276,
        -0.07620090991258621,
        0.03338053449988365,
        0.07860106229782104,
        -0.07482556253671646,
        0.08339127898216248,
        0.09495652467012405,
        0.05113480985164642,
        0.054795172065496445,
        0.02592780999839306,
        -0.0023498667869716883,
        -0.1464730203151703,
        -0.01650206185877323,
        0.04427345097064972,
        -0.008843187242746353,
        -0.060680732131004333,
        -0.03386029973626137,
        -0.06326155364513397,
        -0.02056008018553257,
        0.04450685530900955,
        0.06774423271417618,
        0.03593365103006363,
        -0.05765167623758316,
        -0.00983571819961071,
        0.017200538888573647,
        0.023688938468694687,
        0.006480807438492775,
        -0.049485944211483,
        -0.02847527153789997,
        0.017428118735551834,
        -0.0006065804045647383,
        0.013978458009660244,
        -0.025572841987013817,
        -0.0013908869586884975,
        0.007658934686332941,
        -0.04424219951033592,
        -0.027280384674668312,
        0.0025234168861061335,
        -0.07032988965511322,
        -0.03302673622965813,
        -0.04547083377838135,
        0.08037690073251724,
        -0.011900943703949451,
        -0.06499622762203217,
        0.014400738291442394
      ]
    },
    {
      "id": "1085a381",
      "filePath": "llm-service/src/interceptors/logger.ts",
      "content": "import type { Interceptor } from '../core/interceptor.js'\nimport type { UnifiedRequest, UnifiedResponse } from '../core/types.js'\n\nexport interface LoggerOptions {\n\t/** 是否打印请求内容 */\n\tlogRequest?: boolean\n\t/** 是否打印响应内容 */\n\tlogResponse?: boolean\n\t/** 自定义日志函数 */\n\tlogFn?: (message: string) => void\n}\n\n/**\n * 日志拦截器\n * 记录请求/响应，方便调试\n */",
      "startLine": 1,
      "endLine": 16,
      "type": "other",
      "embedding": [
        0.0018076004926115274,
        0.027340974658727646,
        0.007667378522455692,
        -0.011502754874527454,
        0.014971992000937462,
        -0.028336403891444206,
        0.049544792622327805,
        0.01163202989846468,
        -0.028406592085957527,
        0.08552645146846771,
        -0.019875390455126762,
        -0.05252082645893097,
        -0.007710826583206654,
        0.05454300343990326,
        0.026420429348945618,
        0.005641786847263575,
        -0.023203376680612564,
        -0.03943265229463577,
        -0.06240372359752655,
        0.019332725554704666,
        0.03962497413158417,
        0.05544928088784218,
        0.04694061726331711,
        0.06208733096718788,
        -0.026998238638043404,
        -0.054218217730522156,
        0.009031781926751137,
        -0.04061898961663246,
        0.01874389313161373,
        -0.013731672428548336,
        -0.016418443992733955,
        0.0037326528690755367,
        -0.10417535156011581,
        0.029849758371710777,
        0.031632184982299805,
        0.007463363464921713,
        0.03631461039185524,
        -0.03281442075967789,
        0.042705733329057693,
        -0.04242734611034393,
        0.03291093930602074,
        0.05297607555985451,
        0.026357537135481834,
        -0.11591165512800217,
        0.021347593516111374,
        -0.024470798671245575,
        -0.047445304691791534,
        -0.00468297116458416,
        -0.0160150658339262,
        -0.003945293836295605,
        0.05393578112125397,
        -0.01566479727625847,
        -0.0176704004406929,
        -0.0327509269118309,
        0.06236615777015686,
        0.006112054921686649,
        -0.02478562481701374,
        0.0009307936998084188,
        -0.003563484875485301,
        0.0013562539825215936,
        -0.09190066158771515,
        -0.030724339187145233,
        0.02973446436226368,
        -0.03389905020594597,
        0.0033241419587284327,
        -0.03192206099629402,
        -0.038970619440078735,
        0.10986582189798355,
        0.05587721988558769,
        -0.0096733458340168,
        -0.16513295471668243,
        -0.05129462853074074,
        -0.09184619039297104,
        -0.034613125026226044,
        0.00013702631986234337,
        -0.047290876507759094,
        -0.01986449584364891,
        0.07163145393133163,
        0.014095872640609741,
        -0.06341776251792908,
        0.05018450692296028,
        -0.007524455431848764,
        0.01684720814228058,
        0.10607852786779404,
        0.014507205225527287,
        0.05066370218992233,
        -0.051885705441236496,
        0.016207292675971985,
        0.11254925280809402,
        -0.004028059542179108,
        -0.012852666899561882,
        -0.06488565355539322,
        0.012995708733797073,
        0.08072961121797562,
        -0.10987819731235504,
        -0.016278458759188652,
        -0.02949392795562744,
        0.0406327024102211,
        -0.03829449415206909,
        0.06755656749010086,
        0.01954459585249424,
        0.006304245907813311,
        0.020332632586359978,
        -0.009752124547958374,
        -0.06755754351615906,
        -0.024555616080760956,
        0.021987956017255783,
        0.00044263192103244364,
        -0.019140800461173058,
        -0.0060753291472792625,
        0.024480314925312996,
        0.07970119267702103,
        -0.030751299113035202,
        -0.020064596086740494,
        0.021608712151646614,
        -0.021372918039560318,
        0.06524442881345749,
        -0.1202140673995018,
        -0.06301753222942352,
        -0.04125985875725746,
        0.003887834493070841,
        -0.028570374473929405,
        -0.005287460517138243,
        0.03847511485219002,
        0.10306316614151001,
        -0.03580612316727638,
        0.16418613493442535,
        2.6439147307007887e-33,
        0.0011760670458897948,
        0.07077755779027939,
        -0.016307249665260315,
        0.07851395010948181,
        0.03102121688425541,
        -0.0015191960847005248,
        0.004726181738078594,
        -0.008710931986570358,
        -0.025733746588230133,
        0.06804492324590683,
        -0.07788845151662827,
        -0.020415762439370155,
        -0.04831122234463692,
        -0.031236916780471802,
        0.017171313986182213,
        0.002231741324067116,
        -0.02789386920630932,
        -0.006284330040216446,
        0.05461686849594116,
        0.022852925583720207,
        -0.02685217186808586,
        0.07717518508434296,
        -0.012993157841265202,
        -0.06133845075964928,
        0.05120273679494858,
        0.05184723809361458,
        -0.0071743507869541645,
        -0.010929502546787262,
        -0.05091337114572525,
        0.01418493315577507,
        0.12036091834306717,
        0.024666257202625275,
        0.029911383986473083,
        0.050472158938646317,
        0.023226698860526085,
        0.003484016517177224,
        -0.007415365893393755,
        -0.020833445712924004,
        -0.11283271759748459,
        -0.01625560037791729,
        -0.06202532723546028,
        0.031504105776548386,
        -0.12326930463314056,
        -0.0298771895468235,
        0.03361836075782776,
        -0.08495184779167175,
        -0.050788912922143936,
        -0.014233037829399109,
        0.16869178414344788,
        -0.07930338382720947,
        0.018688710406422615,
        0.07581673562526703,
        0.05127584934234619,
        -0.07353510707616806,
        0.03072184883058071,
        -0.02213909663259983,
        0.07083679735660553,
        0.007886034436523914,
        0.03276441618800163,
        -0.03429501876235008,
        0.004084103740751743,
        -0.09458562731742859,
        -0.013610207475721836,
        -0.024730190634727478,
        0.11351842433214188,
        0.06470740586519241,
        0.004631974268704653,
        0.018387742340564728,
        -0.003579514566808939,
        -0.03897944092750549,
        -0.014633970335125923,
        -0.1095319613814354,
        -0.0034524754155427217,
        0.02962333709001541,
        0.037437453866004944,
        -0.013509402051568031,
        0.021079201251268387,
        0.13934442400932312,
        0.07579374313354492,
        -0.007308523636311293,
        -0.011447261087596416,
        -0.08434629440307617,
        -0.038885537534952164,
        0.040742259472608566,
        0.02856574021279812,
        -0.06429578363895416,
        -0.00881346594542265,
        -0.022324787452816963,
        0.04695696011185646,
        0.04562748223543167,
        -0.08598622679710388,
        0.02782526984810829,
        -0.016142485663294792,
        0.03417287394404411,
        -0.04351292550563812,
        -5.2171297210133556e-33,
        0.037506282329559326,
        0.054262593388557434,
        -0.08287181705236435,
        0.006212471518665552,
        -0.06818146258592606,
        -0.006742455996572971,
        -0.0005785434041172266,
        0.06344645470380783,
        0.02489425055682659,
        0.07567063719034195,
        0.03905778378248215,
        -0.01800585351884365,
        0.057940516620874405,
        0.007230551913380623,
        0.007311602123081684,
        0.026246249675750732,
        -0.03766153007745743,
        0.04164049029350281,
        -0.02745736390352249,
        -0.03518763929605484,
        0.025364020839333534,
        0.019599549472332,
        -0.00821361131966114,
        -0.01877414807677269,
        -0.035281646996736526,
        0.07298940420150757,
        0.07664215564727783,
        0.08415032178163528,
        0.010542758740484715,
        -0.048128776252269745,
        -0.004039229825139046,
        -0.013565880246460438,
        -0.0038052485324442387,
        -0.007150535937398672,
        -0.09043774753808975,
        -0.05468006804585457,
        0.021360592916607857,
        0.13199491798877716,
        -0.04504748061299324,
        -0.02950449101626873,
        -0.02402334474027157,
        0.021746672689914703,
        -0.07835816591978073,
        -0.011308794841170311,
        -0.05337437614798546,
        -0.06319543719291687,
        -0.03693525865674019,
        -0.04954178258776665,
        0.060714080929756165,
        -0.03534435108304024,
        0.046640388667583466,
        -0.08374053984880447,
        0.11942536383867264,
        -0.0021310586016625166,
        -0.028049321845173836,
        0.022372392937541008,
        0.09464891999959946,
        -0.10991863906383514,
        -0.00443202443420887,
        -0.03198492154479027,
        -0.014404780231416225,
        -0.027340607717633247,
        -0.018580781295895576,
        -0.020194802433252335,
        0.00982621405273676,
        -0.07238003611564636,
        -0.014419123530387878,
        -0.00015082943718880415,
        0.016317501664161682,
        -0.09657435864210129,
        0.026506373658776283,
        -0.04595685377717018,
        -0.00044397375313565135,
        -0.002026049420237541,
        0.0511506088078022,
        0.0004831369442399591,
        -0.008884763345122337,
        -0.09724896401166916,
        0.04045063629746437,
        0.03369954973459244,
        -0.04058464616537094,
        -0.04683317244052887,
        -0.019145479425787926,
        0.06098908185958862,
        -0.03726893290877342,
        -0.04451758414506912,
        -0.011719870381057262,
        0.0751790851354599,
        0.03486333414912224,
        -0.02805475704371929,
        -0.02621098794043064,
        0.04477890580892563,
        -0.005620922427624464,
        -0.0240181777626276,
        0.02486897073686123,
        -4.651949936373967e-8,
        -0.10018882900476456,
        -0.049414172768592834,
        -0.08188482373952866,
        -0.029552865773439407,
        -0.00577836437150836,
        0.04559405893087387,
        -0.08191762864589691,
        -0.08286341279745102,
        -0.047516096383333206,
        -0.02305504120886326,
        -0.040412940084934235,
        0.06666980683803558,
        -0.015482498332858086,
        -0.007126772776246071,
        -0.00889007467776537,
        -0.09630019217729568,
        -0.0418856143951416,
        0.015780026093125343,
        -0.07591910660266876,
        -0.01667766273021698,
        -0.023812253028154373,
        -0.004495945759117603,
        0.030250653624534607,
        -0.08414443582296371,
        0.05521368980407715,
        0.028530409559607506,
        -0.0020737764425575733,
        0.05976460129022598,
        -0.02437475137412548,
        -0.003342234995216131,
        -0.05677908658981323,
        0.02791496552526951,
        0.0010017402237281203,
        -0.024363810196518898,
        -0.14405427873134613,
        0.10468275099992752,
        0.09085036814212799,
        -0.07412082701921463,
        0.003966378513723612,
        -0.08872102200984955,
        -0.005063450429588556,
        0.00679751904681325,
        0.008981720544397831,
        0.02633197419345379,
        -0.007776041515171528,
        -0.021636776626110077,
        -0.01105691958218813,
        0.007156588602811098,
        0.04373454302549362,
        -0.01786026544868946,
        -0.003189496463164687,
        -0.018890859559178352,
        -0.0060018026269972324,
        -0.028977351263165474,
        -0.042841698974370956,
        -0.027545174583792686,
        -0.005121312569826841,
        -0.09295489639043808,
        0.08675703406333923,
        -0.04278191551566124,
        0.1420474648475647,
        -0.04249311238527298,
        0.01797027699649334,
        -0.03373626619577408
      ]
    },
    {
      "id": "9da6cc52",
      "filePath": "llm-service/src/interceptors/logger.ts",
      "content": "export class Logger implements Interceptor {\n\treadonly name = 'logger'\n\n\tprivate logRequest: boolean\n\tprivate logResponse: boolean\n\tprivate log: (message: string) => void\n\n\tconstructor(options: LoggerOptions = {}) {\n\t\tthis.logRequest = options.logRequest ?? true\n\t\tthis.logResponse = options.logResponse ?? true\n\t\tthis.log = options.logFn ?? console.log\n\t}\n\n\tonRequest(request: UnifiedRequest): UnifiedRequest {\n\t\tif (this.logRequest) {\n\t\t\tthis.log(`[LLM Request] model=${request.model} messages=${request.messages.length}`)\n\t\t}\n\t\treturn request\n\t}\n\n\tonResponse(response: UnifiedResponse): UnifiedResponse {\n\t\tif (this.logResponse) {\n\t\t\tconst { meta, usage, cost } = response\n\t\t\tthis.log(\n\t\t\t\t`[LLM Response] traceId=${meta.traceId} ` +\n\t\t\t\t`latency=${meta.latencyMs}ms ` +\n\t\t\t\t`tokens=${usage.totalTokens} ` +\n\t\t\t\t`cost=$${cost.totalCost.toFixed(6)}`\n\t\t\t)\n\t\t}\n\t\treturn response\n\t}\n\n\tonError(error: Error): void {\n\t\tthis.log(`[LLM Error] ${error.message}`)\n\t}\n}",
      "startLine": 17,
      "endLine": 54,
      "type": "class",
      "name": "Logger",
      "embedding": [
        -0.009224760346114635,
        0.06952566653490067,
        0.034998055547475815,
        0.031420107930898666,
        0.05981174483895302,
        -0.03740883991122246,
        0.042152032256126404,
        0.051282476633787155,
        0.01910518854856491,
        0.10829442739486694,
        -0.008728891611099243,
        -0.062377944588661194,
        -0.020465156063437462,
        0.06676647812128067,
        0.07879692316055298,
        0.011065133847296238,
        0.003716096980497241,
        -0.06865502893924713,
        -0.08298465609550476,
        0.020888693630695343,
        0.10138945281505585,
        0.10078080743551254,
        0.02326153963804245,
        0.054022666066884995,
        -0.015514514409005642,
        -0.07006090134382248,
        0.014571931213140488,
        -0.02402646653354168,
        -0.027725564315915108,
        -0.03574446588754654,
        -0.037183403968811035,
        0.005549087189137936,
        -0.12019286304712296,
        0.011658307164907455,
        -0.023740360513329506,
        0.0023831522557884455,
        0.030323995277285576,
        -0.01028174627572298,
        0.016842558979988098,
        -0.012852744199335575,
        0.01803457736968994,
        0.09887099266052246,
        -0.01842615194618702,
        -0.16429366171360016,
        0.01597709208726883,
        -0.09538430720567703,
        -0.047218650579452515,
        -0.004535025451332331,
        -0.0036308919079601765,
        0.01141815260052681,
        0.041378188878297806,
        0.0208338163793087,
        0.0055563319474458694,
        -0.02583991177380085,
        0.02579677850008011,
        -0.04313625022768974,
        -0.01659407466650009,
        0.021668992936611176,
        -0.012763358652591705,
        -0.06746712327003479,
        -0.0649772360920906,
        -0.07551620155572891,
        0.041854698210954666,
        -0.0673837959766388,
        0.019262302666902542,
        -0.05380752682685852,
        -0.02495795302093029,
        0.08624541759490967,
        0.03992931544780731,
        0.04201442003250122,
        -0.08621995896100998,
        -0.05358230322599411,
        -0.03560163453221321,
        -0.024604646489024162,
        -0.007182949688285589,
        -0.01332330796867609,
        0.049289826303720474,
        0.07923611253499985,
        0.058053359389305115,
        -0.007199352607131004,
        0.014056115411221981,
        -0.04264650121331215,
        -0.041445232927799225,
        0.06168365851044655,
        0.01987897790968418,
        -0.02064373530447483,
        -0.04497021436691284,
        0.024024836719036102,
        0.10465958714485168,
        -0.05404329672455788,
        0.048814401030540466,
        -0.023580797016620636,
        -0.040728770196437836,
        0.09280925244092941,
        -0.017124827951192856,
        -0.0002558728738222271,
        -0.06375069171190262,
        0.04713893681764603,
        -0.016797175630927086,
        0.04100671038031578,
        0.04290143400430679,
        -0.031138570979237556,
        0.01030503399670124,
        -0.010546698234975338,
        0.005385313183069229,
        -0.02662782557308674,
        0.0305374413728714,
        -0.025646822527050972,
        0.02449408732354641,
        0.031645238399505615,
        0.03118523396551609,
        0.07833811640739441,
        -0.0784429982304573,
        0.04809967428445816,
        0.03865522891283035,
        -0.01598801277577877,
        0.03809760883450508,
        -0.0807286873459816,
        -0.0483810119330883,
        0.01297094114124775,
        -0.013300432823598385,
        -0.012743767350912094,
        0.025330141186714172,
        0.02998078055679798,
        0.10463259369134903,
        -0.07567767798900604,
        0.09677481651306152,
        9.733015348307799e-33,
        0.022741200402379036,
        0.05505472794175148,
        -0.062344565987586975,
        0.06518936157226562,
        0.06402979791164398,
        0.058344919234514236,
        0.02526203915476799,
        0.024982372298836708,
        -0.01997886598110199,
        0.022286757826805115,
        -0.07711625844240189,
        -0.0000757407906348817,
        0.02199017070233822,
        -0.056143615394830704,
        0.03780146315693855,
        0.01064260583370924,
        -0.02548239193856716,
        -0.010394703596830368,
        0.07533525675535202,
        0.027364909648895264,
        0.01743444986641407,
        -0.0026818139012902975,
        0.0029331909026950598,
        -0.06204884499311447,
        0.055137164890766144,
        0.03827163577079773,
        0.04350863769650459,
        -0.013877199031412601,
        -0.10998189449310303,
        0.007420673966407776,
        0.11642671376466751,
        0.031374841928482056,
        0.0817633718252182,
        0.041033387184143066,
        0.04164116457104683,
        -0.06160768121480942,
        0.0008710805559530854,
        0.024971671402454376,
        -0.13281278312206268,
        -0.056921958923339844,
        -0.022061781957745552,
        0.015146035701036453,
        -0.10362259298563004,
        0.013349669054150581,
        -0.05327500030398369,
        -0.11248354613780975,
        0.017410581931471825,
        0.06806562095880508,
        0.13499005138874054,
        -0.0476679727435112,
        -0.010044623166322708,
        0.06236758828163147,
        0.006755259819328785,
        -0.0809016078710556,
        0.058466438204050064,
        0.005715576931834221,
        0.04264075309038162,
        0.016842249780893326,
        0.033791664987802505,
        -0.09047511965036392,
        -0.0015582573832944036,
        -0.08440694957971573,
        0.02797127701342106,
        -0.031204979866743088,
        0.1196015477180481,
        0.0630093440413475,
        0.017637796700000763,
        0.006560677196830511,
        0.03216017782688141,
        -0.07300370186567307,
        -0.007829966023564339,
        -0.12511366605758667,
        0.033094827085733414,
        0.04448073357343674,
        -0.014672894030809402,
        -0.040331825613975525,
        0.035911597311496735,
        0.09461624175310135,
        0.06112360209226608,
        -0.016044702380895615,
        -0.0020229541696608067,
        -0.06903119385242462,
        -0.10850942879915237,
        0.06388679146766663,
        0.0044868821278214455,
        -0.03434998169541359,
        0.001129672396928072,
        -0.01694781705737114,
        0.009855122305452824,
        0.06674987077713013,
        -0.09397722780704498,
        0.005155273713171482,
        -0.03403160721063614,
        0.03427565470337868,
        -0.07496987283229828,
        -9.145908082633884e-33,
        0.011549245566129684,
        0.043608181178569794,
        -0.04370453953742981,
        0.0001278746931347996,
        -0.02368372119963169,
        -0.014601447619497776,
        0.04657730832695961,
        0.0393245704472065,
        0.020309604704380035,
        0.015241577289998531,
        -0.011892156675457954,
        -0.021035032346844673,
        0.02227764017879963,
        0.03953888267278671,
        0.004426490515470505,
        0.06375288963317871,
        -0.06510353088378906,
        -0.030207468196749687,
        0.01889951527118683,
        -0.08255358040332794,
        -0.005101567134261131,
        0.03578105941414833,
        0.02328314259648323,
        -0.018566682934761047,
        -0.09431722015142441,
        0.08814775198698044,
        0.043536026030778885,
        0.024455616250634193,
        0.010267142206430435,
        -0.030430065467953682,
        0.04236290231347084,
        -0.0020188181661069393,
        -0.004453291185200214,
        0.010311328805983067,
        -0.048672568053007126,
        -0.011076327413320541,
        0.07676436752080917,
        0.08276477456092834,
        -0.029911620542407036,
        0.01412312500178814,
        0.009633446112275124,
        0.025269806385040283,
        -0.032778892666101456,
        -0.025592699646949768,
        -0.04232791066169739,
        -0.1104985848069191,
        0.03047013282775879,
        -0.03765959292650223,
        0.07404361665248871,
        -0.06320269405841827,
        0.03128159046173096,
        -0.09280940145254135,
        0.060589198023080826,
        0.07139678299427032,
        -0.024818919599056244,
        -0.00944559182971716,
        0.07231457531452179,
        -0.11197144538164139,
        0.008119242265820503,
        -0.013359946198761463,
        0.0020915705244988203,
        -0.02943490445613861,
        0.010699012316763401,
        -0.04171213135123253,
        0.014326612465083599,
        -0.022460486739873886,
        -0.01595933735370636,
        -0.0618160106241703,
        0.053192030638456345,
        0.0011490278411656618,
        -0.02377980761229992,
        -0.018909715116024017,
        0.007242054212838411,
        -0.01640351489186287,
        0.08529184758663177,
        0.020633753389120102,
        -0.04135153070092201,
        -0.07949753850698471,
        0.059556443244218826,
        0.02209410071372986,
        -0.034833405166864395,
        -0.07398451864719391,
        -0.03783712908625603,
        0.01714385487139225,
        -0.01843884401023388,
        -0.11523381620645523,
        0.029808640480041504,
        0.1364135891199112,
        0.02004127949476242,
        -0.0231739841401577,
        0.011638300493359566,
        -0.03787974640727043,
        0.01034066453576088,
        0.004298940300941467,
        0.017656732350587845,
        -6.029873844681788e-8,
        -0.08816658705472946,
        -0.02702685073018074,
        0.004548483062535524,
        -0.005313850939273834,
        0.0014854288892820477,
        0.01763290911912918,
        0.01957341469824314,
        -0.0590013824403286,
        -0.04709816351532936,
        0.0004233590152580291,
        -0.03759200498461723,
        0.0638314038515091,
        -0.04086042195558548,
        -0.023500369861721992,
        0.013162698596715927,
        -0.12022647261619568,
        -0.060856591910123825,
        0.02206212468445301,
        -0.05172347649931908,
        -0.03227485716342926,
        0.01591547019779682,
        -0.029939040541648865,
        0.007443272974342108,
        -0.06522282212972641,
        0.08365577459335327,
        0.04274750128388405,
        0.03007933497428894,
        0.08139554411172867,
        -0.05402389168739319,
        0.003567150328308344,
        -0.08620084077119827,
        0.02631593868136406,
        0.0341719388961792,
        0.027530811727046967,
        -0.0734177976846695,
        0.015374623239040375,
        0.04040444269776344,
        -0.025813870131969452,
        0.024782242253422737,
        0.036122873425483704,
        0.0041309865191578865,
        0.016166482120752335,
        -0.015313240699470043,
        0.02054385282099247,
        0.008374199271202087,
        -0.0015416373498737812,
        -0.04994948208332062,
        -0.012394323013722897,
        0.03355034068226814,
        -0.011833022348582745,
        -0.019996844232082367,
        -0.036989543586969376,
        -0.06097722053527832,
        0.006343286018818617,
        -0.062170401215553284,
        -0.0176892951130867,
        0.00020634806423913687,
        -0.12500563263893127,
        0.05694664269685745,
        -0.057497382164001465,
        0.14697977900505066,
        -0.034890901297330856,
        -0.056181225925683975,
        -0.06493568420410156
      ]
    },
    {
      "id": "2e75dd43",
      "filePath": "llm-service/src/interceptors/cost-tracker.ts",
      "content": "import type { Interceptor } from '../core/interceptor.js'\nimport type { UnifiedResponse } from '../core/types.js'\n\n/**\n * 成本追踪拦截器\n * 累计所有请求的 Token 消耗和成本\n */",
      "startLine": 1,
      "endLine": 7,
      "type": "other",
      "embedding": [
        -0.050662171095609665,
        -0.006913097109645605,
        -0.022859930992126465,
        0.005132369231432676,
        0.06483615934848785,
        0.025886792689561844,
        0.01988149806857109,
        0.04974614083766937,
        -0.012109698727726936,
        0.0806950107216835,
        -0.012218378484249115,
        -0.046435821801424026,
        -0.010145287960767746,
        0.049493927508592606,
        0.03756842389702797,
        -0.011766685172915459,
        0.03292138874530792,
        -0.0194818377494812,
        -0.01704094372689724,
        -0.013564611785113811,
        0.019683925434947014,
        0.009656454436480999,
        0.060478951781988144,
        0.04897473379969597,
        -0.029626954346895218,
        -0.0634448379278183,
        0.006771743297576904,
        -0.012856462970376015,
        0.02438211999833584,
        -0.017058860510587692,
        -0.036504168063402176,
        0.001880576484836638,
        -0.07991329580545425,
        0.008768987841904163,
        0.034482575953006744,
        0.03079460747539997,
        0.01572190783917904,
        -0.00598672591149807,
        0.02529045008122921,
        -0.044488321989774704,
        0.05347977578639984,
        0.059512969106435776,
        -0.007325382437556982,
        -0.09089358896017075,
        0.02321273647248745,
        -0.03419450670480728,
        -0.02711615152657032,
        -0.000936576456297189,
        -0.04975523427128792,
        0.007399693597108126,
        0.029215481132268906,
        -0.06371328234672546,
        -0.03375165909528732,
        -0.0538996197283268,
        0.0040936279110610485,
        -0.016502022743225098,
        -0.02859495021402836,
        0.05285579338669777,
        -0.0027797510847449303,
        0.0012808709871023893,
        -0.07244715839624405,
        -0.06644763052463531,
        0.07507837563753128,
        -0.04578932002186775,
        0.03245125338435173,
        -0.003860989585518837,
        -0.016100967302918434,
        0.09625379741191864,
        0.013674172572791576,
        -0.05938670039176941,
        -0.0581182986497879,
        -0.07094971835613251,
        -0.012782977893948555,
        -0.03121636062860489,
        -0.028475385159254074,
        -0.07177159935235977,
        0.028867799788713455,
        0.1295795887708664,
        0.09757250547409058,
        -0.05825074389576912,
        0.07061991840600967,
        -0.07499571889638901,
        0.007167445030063391,
        0.09273386746644974,
        0.061162304133176804,
        0.060341134667396545,
        -0.02543560229241848,
        -0.016821274533867836,
        0.11972103267908096,
        -0.01789848320186138,
        0.001666176482103765,
        -0.044327735900878906,
        0.028458189219236374,
        0.038821253925561905,
        -0.12240850925445557,
        -0.03190798684954643,
        -0.052112478762865067,
        0.06189810112118721,
        -0.04268723353743553,
        0.0644611045718193,
        0.00015190553676802665,
        -0.01430429145693779,
        0.047784168273210526,
        0.04746178165078163,
        -0.06346724182367325,
        -0.016346817836165428,
        0.006859776098281145,
        0.02906082384288311,
        0.027549147605895996,
        0.0012081171153113246,
        0.031594399362802505,
        0.0736028179526329,
        -0.05645013228058815,
        0.0003297664225101471,
        -0.02728952281177044,
        -0.0664798840880394,
        0.04864859580993652,
        -0.13375809788703918,
        0.022010916844010353,
        -0.044562261551618576,
        -0.01061567384749651,
        -0.029949352145195007,
        -0.012116074562072754,
        0.012369228526949883,
        0.01711653545498848,
        -0.014879071153700352,
        0.09528180211782455,
        1.3870074778504728e-33,
        -0.036922626197338104,
        0.10255172848701477,
        -0.033936310559511185,
        0.04779474437236786,
        -0.031961891800165176,
        -0.07584759593009949,
        0.03991261124610901,
        0.051856718957424164,
        -0.05557101219892502,
        0.0577058345079422,
        -0.058254264295101166,
        0.019647924229502678,
        -0.0529380701482296,
        0.009400473907589912,
        -0.014579834416508675,
        -0.0568624772131443,
        0.00170930998865515,
        -0.008151445537805557,
        0.04004308581352234,
        -0.030049487948417664,
        0.015917133539915085,
        0.04797361046075821,
        -0.017120307311415672,
        -0.06459798663854599,
        0.06807776540517807,
        0.09861863404512405,
        0.02437792718410492,
        0.0083364462479949,
        -0.028907114639878273,
        0.01373361237347126,
        0.1336800754070282,
        0.0367010198533535,
        0.06032072752714157,
        0.09303136169910431,
        -0.0017333690775558352,
        -0.007965262047946453,
        -0.02271665260195732,
        -0.0025991713628172874,
        -0.07452139258384705,
        -0.023646986111998558,
        0.0034855708945542574,
        0.07035711407661438,
        -0.08072996139526367,
        -0.05886317417025566,
        -0.02766285091638565,
        -0.048611871898174286,
        0.029179967939853668,
        -0.026908263564109802,
        0.16951408982276917,
        -0.06665994971990585,
        -0.04731987044215202,
        0.03646114096045494,
        0.006318691186606884,
        -0.04354057088494301,
        0.012771019712090492,
        -0.026553144678473473,
        -0.007442552596330643,
        0.015687277540564537,
        0.0376456156373024,
        -0.08323027938604355,
        0.01248876005411148,
        -0.11281725764274597,
        -0.027922699227929115,
        -0.034977272152900696,
        0.08127255737781525,
        0.0651327446103096,
        -0.07453566789627075,
        0.014152361080050468,
        -0.0070822108536958694,
        0.008536607958376408,
        0.013828909955918789,
        -0.019564149901270866,
        0.009125260636210442,
        0.039832692593336105,
        0.030179167166352272,
        -0.03250657767057419,
        0.02183161862194538,
        0.1093374490737915,
        0.03274945542216301,
        -0.02168295904994011,
        -0.06350989639759064,
        -0.07375790178775787,
        -0.019905555993318558,
        0.05847516283392906,
        0.08155780285596848,
        -0.058862775564193726,
        -0.01421388890594244,
        0.0009061998571269214,
        0.043753013014793396,
        0.03191143646836281,
        -0.04344213753938675,
        -0.023429030552506447,
        -0.037055425345897675,
        0.07636309415102005,
        -0.0625784769654274,
        -3.468382407467548e-33,
        -0.00029829132836312056,
        0.060723431408405304,
        -0.06445849686861038,
        0.025292029604315758,
        -0.07720208913087845,
        -0.010773323476314545,
        -0.02866501547396183,
        0.05586427450180054,
        0.042236652225255966,
        0.09069442749023438,
        -0.01626911386847496,
        0.002736354246735573,
        0.010014140047132969,
        0.02531016431748867,
        0.029509497806429863,
        0.009528331458568573,
        -0.023905416950583458,
        -0.013043464161455631,
        0.003457177197560668,
        -0.06950141489505768,
        -0.0445670410990715,
        -0.017717743292450905,
        0.05955832451581955,
        -0.018467694520950317,
        -0.04086432605981827,
        0.10839633643627167,
        0.1137084886431694,
        0.06972015649080276,
        -0.006020389497280121,
        -0.0050368113443255424,
        -0.02363424561917782,
        -0.005507538560777903,
        -0.023020947352051735,
        0.04578319564461708,
        -0.15421941876411438,
        -0.026467593386769295,
        -0.005118764936923981,
        0.1188669428229332,
        -0.04768284782767296,
        -0.03882743418216705,
        -0.019368033856153488,
        -0.0037106024101376534,
        -0.0823635682463646,
        0.02613600343465805,
        -0.03990263491868973,
        -0.0908382385969162,
        -0.0015107878716662526,
        -0.06270485371351242,
        0.054656993597745895,
        -0.07972387969493866,
        0.048415668308734894,
        -0.07245476543903351,
        0.04733428359031677,
        -0.05329461023211479,
        -0.08365640789270401,
        0.04023553803563118,
        0.14436635375022888,
        -0.07969911396503448,
        -0.03631099686026573,
        -0.07214546203613281,
        0.028359100222587585,
        -0.016014112159609795,
        -0.05739741027355194,
        -0.03142520412802696,
        0.0321439653635025,
        -0.009190418757498264,
        -0.006062712520360947,
        -0.04108883813023567,
        0.012738958932459354,
        -0.0530700758099556,
        0.003163991728797555,
        0.015302716754376888,
        -0.003837830852717161,
        -0.04997960105538368,
        -0.011173807084560394,
        -0.0397685281932354,
        -0.011587997898459435,
        -0.048010893166065216,
        0.10719448328018188,
        -0.010040802881121635,
        0.01931970752775669,
        -0.04729170724749565,
        -0.004530030768364668,
        -0.030133962631225586,
        -0.03816608712077141,
        -0.027739202603697777,
        0.005359155125916004,
        0.08820778876543045,
        0.020844414830207825,
        -0.0021296192426234484,
        -0.04621640965342522,
        0.025176795199513435,
        -0.0019029114628210664,
        0.003640261711552739,
        0.01881379261612892,
        -4.2790716747731494e-8,
        -0.04288250580430031,
        0.032338548451662064,
        -0.08930926024913788,
        0.01252548024058342,
        -0.04892982542514801,
        -0.01576273702085018,
        -0.05476117879152298,
        0.00129234092310071,
        -0.0013193595223128796,
        0.014055442996323109,
        -0.03264426812529564,
        0.06338442862033844,
        -0.019852440804243088,
        0.026635954156517982,
        -0.018026316538453102,
        -0.07473374903202057,
        -0.08296128362417221,
        0.10482785105705261,
        -0.10053054988384247,
        0.005863150116056204,
        -0.0477532260119915,
        0.044750940054655075,
        0.03654808923602104,
        -0.07932469248771667,
        0.0907154232263565,
        0.0159663837403059,
        -0.03192812576889992,
        0.07132178544998169,
        0.030917342752218246,
        0.005900088232010603,
        -0.13543695211410522,
        0.045911964029073715,
        -0.007982257753610611,
        -0.047443024814128876,
        -0.082586370408535,
        0.06850606948137283,
        0.05856671929359436,
        -0.03846924751996994,
        0.04325588792562485,
        -0.008248156867921352,
        0.030016040429472923,
        0.03856572508811951,
        -0.023502588272094727,
        0.05070354416966438,
        0.022753125056624413,
        0.022156355902552605,
        -0.08041179180145264,
        0.018061110749840736,
        0.022566840052604675,
        -0.039134565740823746,
        0.030000871047377586,
        -0.033563923090696335,
        -0.05721469596028328,
        0.0018304045079275966,
        -0.06438535451889038,
        -0.009928366169333458,
        -0.019006624817848206,
        -0.09225130826234818,
        0.021641915664076805,
        -0.05585421249270439,
        0.1177934929728508,
        -0.09421403706073761,
        0.013276508077979088,
        -0.043953392654657364
      ]
    },
    {
      "id": "ac3706b0",
      "filePath": "llm-service/src/interceptors/cost-tracker.ts",
      "content": "export class CostTracker implements Interceptor {\n\treadonly name = 'cost-tracker'\n\n\tprivate totalInputTokens = 0\n\tprivate totalOutputTokens = 0\n\tprivate totalCost = 0\n\tprivate requestCount = 0\n\n\tonResponse(response: UnifiedResponse): UnifiedResponse {\n\t\tthis.totalInputTokens += response.usage.promptTokens\n\t\tthis.totalOutputTokens += response.usage.completionTokens\n\t\tthis.totalCost += response.cost.totalCost\n\t\tthis.requestCount++\n\t\treturn response\n\t}\n\n\t/** 获取统计摘要 */\n\tgetSummary() {\n\t\treturn {\n\t\t\trequestCount: this.requestCount,\n\t\t\ttotalInputTokens: this.totalInputTokens,\n\t\t\ttotalOutputTokens: this.totalOutputTokens,\n\t\t\ttotalTokens: this.totalInputTokens + this.totalOutputTokens,\n\t\t\ttotalCost: this.totalCost,\n\t\t}\n\t}\n\n\t/** 重置统计 */\n\treset(): void {\n\t\tthis.totalInputTokens = 0\n\t\tthis.totalOutputTokens = 0\n\t\tthis.totalCost = 0\n\t\tthis.requestCount = 0\n\t}\n}",
      "startLine": 8,
      "endLine": 43,
      "type": "class",
      "name": "CostTracker",
      "embedding": [
        -0.044266894459724426,
        0.05900800600647926,
        -0.07528568804264069,
        0.059515442699193954,
        0.0013286577304825187,
        0.02238384075462818,
        0.025209471583366394,
        0.03929208591580391,
        -0.014523199759423733,
        0.08273103088140488,
        0.011598130688071251,
        -0.08473175019025803,
        0.00006462159217335284,
        0.0228987205773592,
        -0.004720738157629967,
        -0.038971416652202606,
        0.04826594516634941,
        -0.03998807817697525,
        -0.04656999558210373,
        -0.059499043971300125,
        0.041960518807172775,
        0.06721612811088562,
        0.046382106840610504,
        0.025698263198137283,
        0.016194229945540428,
        -0.03567928448319435,
        -0.016208820044994354,
        -0.03666136413812637,
        0.040755122900009155,
        -0.014742342755198479,
        -0.0156682338565588,
        -0.015906155109405518,
        -0.0773993656039238,
        -0.013057416304945946,
        0.03507673367857933,
        -0.01431539561599493,
        -0.015174978412687778,
        0.0071245296858251095,
        0.0284897368401289,
        -0.019083896651864052,
        0.013854576274752617,
        0.0740266665816307,
        -0.06035809963941574,
        -0.07677225768566132,
        0.008191150613129139,
        -0.07204771041870117,
        -0.06355495005846024,
        0.01559135690331459,
        0.026569996029138565,
        0.00827763695269823,
        0.02682146243751049,
        -0.02547510340809822,
        -0.013299128040671349,
        0.013941550627350807,
        0.002385158557444811,
        -0.03830818459391594,
        -0.004557538311928511,
        0.02626146748661995,
        -0.007865861058235168,
        -0.01725602336227894,
        -0.07935549318790436,
        -0.12135997414588928,
        0.012401035986840725,
        -0.06977337598800659,
        -0.0029552201740443707,
        -0.006681959610432386,
        -0.06126461178064346,
        0.05766956880688667,
        0.0019061578204855323,
        -0.014468591660261154,
        -0.04056888446211815,
        -0.02653861604630947,
        0.03736269101500511,
        -0.0717088058590889,
        -0.0013587874127551913,
        -0.016704509034752846,
        0.0005786748370155692,
        0.12117879092693329,
        0.06367634236812592,
        -0.05930023640394211,
        0.06375990062952042,
        -0.10315251350402832,
        -0.013865113258361816,
        0.09097541123628616,
        0.034881994128227234,
        0.008628789335489273,
        -0.002235970925539732,
        -0.02608511969447136,
        0.07881226390600204,
        -0.05421571806073189,
        0.05838115140795708,
        0.026505718007683754,
        -0.00789359025657177,
        0.03416532650589943,
        -0.09012063592672348,
        0.020717423409223557,
        -0.0889822393655777,
        0.04832484945654869,
        -0.06271952390670776,
        0.07144085317850113,
        -0.010207831859588623,
        -0.05240482836961746,
        -0.03653544932603836,
        0.0006758091622032225,
        -0.02582407370209694,
        -0.07065132260322571,
        0.07208939641714096,
        0.029705500230193138,
        0.04441480338573456,
        0.047703031450510025,
        0.03127274289727211,
        0.030354760587215424,
        -0.10058042407035828,
        0.03038840927183628,
        -0.011693794280290604,
        -0.03687207028269768,
        0.043651048094034195,
        -0.06520859897136688,
        0.0057962145656347275,
        -0.013214468955993652,
        0.06289738416671753,
        -0.0009797163074836135,
        0.008989169262349606,
        0.0008504329016432166,
        0.03067721426486969,
        -0.026342589408159256,
        0.10180951654911041,
        1.3810243952757796e-32,
        -0.0016648081364110112,
        0.007005024701356888,
        -0.021482085809111595,
        0.03725534304976463,
        -0.030673447996377945,
        -0.0032510850578546524,
        0.0019118246855214238,
        0.06739169359207153,
        0.02079004980623722,
        0.006113417446613312,
        -0.035463154315948486,
        0.025905942544341087,
        -0.03417146950960159,
        0.029141981154680252,
        -0.025001347064971924,
        -0.088782899081707,
        -0.0037736124359071255,
        0.037994638085365295,
        0.05179198458790779,
        0.006210624240338802,
        0.060913506895303726,
        -0.006934123579412699,
        -0.004198032896965742,
        -0.04083540290594101,
        0.08413323760032654,
        0.08361873030662537,
        -0.004804767202585936,
        0.01771080121397972,
        -0.08781225979328156,
        0.011211935430765152,
        0.11717107146978378,
        0.04523804783821106,
        0.011066212318837643,
        0.07188857346773148,
        -0.012339157983660698,
        -0.043612755835056305,
        0.03713977709412575,
        0.00225826189853251,
        -0.0978112518787384,
        -0.05991547554731369,
        -0.04674818739295006,
        0.020750897005200386,
        -0.0737810954451561,
        -0.03779059648513794,
        -0.08590767532587051,
        -0.08326447755098343,
        0.04233244061470032,
        0.0007676726672798395,
        0.11714597046375275,
        -0.008854031562805176,
        -0.051038797944784164,
        0.0563444048166275,
        0.011869829148054123,
        -0.0593719519674778,
        0.003271894296631217,
        -0.030348751693964005,
        -0.009111128747463226,
        0.035507433116436005,
        0.025104958564043045,
        -0.06361556798219681,
        -0.005229039117693901,
        -0.07122749090194702,
        -0.00624326104298234,
        -0.03586793690919876,
        0.05394592881202698,
        0.11648203432559967,
        -0.035490673035383224,
        -0.012650853022933006,
        0.008691764436662197,
        -0.006256996188312769,
        -0.023411637172102928,
        -0.006481253542006016,
        0.055880576372146606,
        0.019066207110881805,
        0.007736155763268471,
        -0.0350000225007534,
        0.04896646365523338,
        0.1048988476395607,
        0.010987979359924793,
        -0.0848463848233223,
        -0.048104170709848404,
        -0.08512129634618759,
        -0.01121070608496666,
        0.048309121280908585,
        0.07708613574504852,
        -0.0392446406185627,
        -0.0026789656840264797,
        -0.02308519184589386,
        0.013721434399485588,
        0.017658641561865807,
        -0.05436558648943901,
        -0.006099546793848276,
        -0.07702410221099854,
        0.060868214815855026,
        -0.048448119312524796,
        -1.386164391261544e-32,
        0.000678849290125072,
        0.08531219512224197,
        -0.05788636952638626,
        -0.047075361013412476,
        -0.05282958969473839,
        -0.004091875161975622,
        -0.013787323608994484,
        0.08248299360275269,
        0.06603032350540161,
        0.13593564927577972,
        -0.04003670811653137,
        0.007606778759509325,
        -0.05651143938302994,
        0.01712126098573208,
        0.03280443698167801,
        -0.0014137494144961238,
        0.015087771229445934,
        -0.028453370556235313,
        0.013948203064501286,
        -0.11099909245967865,
        -0.048984345048666,
        0.042205896228551865,
        0.05004137009382248,
        -0.04896046966314316,
        -0.015572608448565006,
        0.0966419205069542,
        0.08795467764139175,
        0.05889035016298294,
        0.02324751205742359,
        -0.018911728635430336,
        0.014476712793111801,
        -0.06539924442768097,
        -0.025172697380185127,
        0.043613433837890625,
        -0.0963878408074379,
        -0.028878146782517433,
        0.015807215124368668,
        0.14065265655517578,
        -0.005771665368229151,
        0.03131856396794319,
        0.036749329417943954,
        -0.037315793335437775,
        -0.06949452310800552,
        0.01429742481559515,
        0.024791548028588295,
        -0.12613730132579803,
        0.03647361323237419,
        0.0036739851348102093,
        -0.011328589171171188,
        -0.07857105880975723,
        0.1050882413983345,
        -0.07534301280975342,
        0.03178803250193596,
        0.055067893117666245,
        -0.0866282656788826,
        0.028404543176293373,
        0.1405945122241974,
        -0.10408494621515274,
        0.027012499049305916,
        -0.07611862570047379,
        0.06007286533713341,
        -0.03348822519183159,
        -0.06067251041531563,
        0.040584784001111984,
        0.04042157903313637,
        -0.021581215783953667,
        0.03601051867008209,
        -0.09326943755149841,
        0.03089909441769123,
        0.03146454691886902,
        -0.027405964210629463,
        0.004813151899725199,
        -0.004988192114979029,
        -0.05408883094787598,
        0.06691226363182068,
        0.05985818803310394,
        -0.056015487760305405,
        -0.06766857951879501,
        0.07538584619760513,
        0.01762506179511547,
        -0.05596187710762024,
        -0.04667792096734047,
        0.002502213232219219,
        -0.07083243876695633,
        0.007943429984152317,
        -0.0800267904996872,
        -0.011373759247362614,
        0.10071733593940735,
        0.018926111981272697,
        0.044447217136621475,
        -0.04753909632563591,
        -0.015031043440103531,
        -0.002414985094219446,
        0.03244904428720474,
        -0.0045831273309886456,
        -7.139918523080269e-8,
        -0.044021427631378174,
        0.007490902207791805,
        -0.029344286769628525,
        0.047908004373311996,
        0.013252072967588902,
        -0.0333864763379097,
        -0.017178421840071678,
        -0.004687903914600611,
        -0.02311849035322666,
        -0.0188643466681242,
        0.015760933980345726,
        0.017269054427742958,
        -0.023004213348031044,
        0.003336825640872121,
        -0.03128398582339287,
        -0.09221643954515457,
        -0.041847918182611465,
        0.008962816558778286,
        -0.07938865572214127,
        -0.005200117826461792,
        -0.057457368820905685,
        -0.028421878814697266,
        -0.012218978255987167,
        -0.061153825372457504,
        0.07063977420330048,
        0.03518624231219292,
        0.025808103382587433,
        0.12417073547840118,
        0.01770329475402832,
        0.006528954487293959,
        -0.08239511400461197,
        0.02201668545603752,
        0.021450225263834,
        -0.030651099979877472,
        -0.1315697431564331,
        0.04984862357378006,
        -0.005751937627792358,
        -0.013641959056258202,
        0.03751257061958313,
        0.07108867913484573,
        -0.014376092702150345,
        0.005092021077871323,
        -0.016756156459450722,
        0.04962563142180443,
        0.0415007658302784,
        0.01858905516564846,
        -0.11339130252599716,
        -0.013548807241022587,
        0.07823154330253601,
        -0.09304122626781464,
        -0.030527200549840927,
        -0.070870041847229,
        -0.041265714913606644,
        0.005563532467931509,
        -0.0851113423705101,
        -0.03122585080564022,
        -0.010011139325797558,
        -0.1135520190000534,
        0.014463681727647781,
        0.008588181808590889,
        0.0907377228140831,
        -0.05614931136369705,
        -0.03824194148182869,
        -0.009977022185921669
      ]
    },
    {
      "id": "6926522e",
      "filePath": "llm-service/src/server/index.ts",
      "content": "import 'dotenv/config'\nimport express from 'express'\nimport cors from 'cors'\nimport { fileURLToPath } from 'url'\nimport { dirname, join } from 'path'\nimport { UnifiedLLMClient, OpenAIProvider, CostTracker, Logger, RetryInterceptor } from '../index.js'\nimport { UnifiedRequestSchema } from '../core/types.js'\n\nconst __filename = fileURLToPath(import.meta.url)\nconst __dirname = dirname(__filename)\n\nconst PORT = Number(process.env.PORT) || 3000\nconst OPENAI_API_KEY = process.env.OPENAI_API_KEY\nconst OPENAI_BASE_URL = process.env.OPENAI_BASE_URL\nconst DEFAULT_MODEL = process.env.LLM_MODEL || 'mimo-v2-flash'\n\nif (!OPENAI_API_KEY) {\n\tconsole.error('Error: OPENAI_API_KEY environment variable is required')\n\tprocess.exit(1)\n}\n\n// 初始化 LLM Client\nconst retryInterceptor = new RetryInterceptor({ maxRetries: 2, timeoutMs: 60000 })\nconst provider = new OpenAIProvider({\n\tapiKey: OPENAI_API_KEY,\n\tbaseURL: OPENAI_BASE_URL\n})\nconst costTracker = new CostTracker()\n\nconst client = new UnifiedLLMClient(\n\tretryInterceptor.wrapProvider(provider),\n\t[costTracker, new Logger()]\n)\n\n// 创建 Express 实例\nconst app = express()\n\napp.use(cors())\napp.use(express.json())\napp.use(express.static(join(__dirname, '../../public')))\n\n// Chat API\napp.post('/v1/chat', async (req, res) => {\n\ttry {\n\t\t// Filter out irrelevant roles and only keep user/assistant/system\n\t\tif (req.body.messages) {\n\t\t\treq.body.messages = req.body.messages.filter((m: any) =>\n\t\t\t\t['user', 'assistant', 'system'].includes(m.role)\n\t\t\t)\n\t\t}\n\n\t\tconst body = UnifiedRequestSchema.parse(req.body)\n\n\t\tconsole.log(`[Chat Request] Model: ${body.model}, Stream: ${body.stream}`)\n\t\tconsole.log(`[Chat History] Message Count: ${body.messages.length}`)\n\t\tif (body.messages.length > 0) {\n\t\t\tconst lastMsg = body.messages[body.messages.length - 1]\n\t\t\tconsole.log(`[Last Message] ${lastMsg.role}: ${lastMsg.content.slice(0, 50)}...`)\n\t\t}\n\n\t\t// Handle Streaming\n\t\tif (body.stream) {\n\t\t\tres.setHeader('Content-Type', 'text/event-stream')\n\t\t\tres.setHeader('Cache-Control', 'no-cache')\n\t\t\tres.setHeader('Connection', 'keep-alive')\n\n\t\t\ttry {\n\t\t\t\tconst stream = client.chatStream(body)\n\t\t\t\tfor await (const chunk of stream) {\n\t\t\t\t\tres.write(`data: ${JSON.stringify(chunk)}\\n\\n`)\n\t\t\t\t}\n\t\t\t\tres.write('data: [DONE]\\n\\n')\n\t\t\t\tres.end()\n\t\t\t} catch (error) {\n\t\t\t\tconst err = error as Error\n\t\t\t\t// Note: If headers sent, we can't send JSON error.\n\t\t\t\t// Best effort logging here.\n\t\t\t\tconsole.error('Stream error:', err)\n\t\t\t\tres.write(`data: ${JSON.stringify({ error: err.message })}\\n\\n`)\n\t\t\t\tres.end()\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\t// Normal Response\n\t\tconst response = await client.chat(body)\n\t\tres.json(response)\n\t} catch (error) {\n\t\tconst err = error as Error\n\t\tres.status(400).json({ error: err.message })\n\t}\n})\n\n// Stats API\napp.get('/v1/stats', (_req, res) => {\n\tres.json(costTracker.getSummary())\n})\n\n// Config API\napp.get('/v1/config', (_req, res) => {\n\tres.json({ defaultModel: DEFAULT_MODEL })\n})\n\n// 启动服务\napp.listen(PORT, () => {\n\tconsole.log(`Server running at http://localhost:${PORT}`)\n})",
      "startLine": 1,
      "endLine": 108,
      "type": "other",
      "embedding": [
        -0.05700257048010826,
        0.018926497548818588,
        -0.06592566519975662,
        0.05913097783923149,
        0.03481011092662811,
        -0.0681404322385788,
        -0.0030532425735145807,
        0.11017198115587234,
        0.01474885456264019,
        0.023118838667869568,
        0.03847889602184296,
        -0.02780342288315296,
        0.00000223399001697544,
        0.011129073798656464,
        0.05096468701958656,
        -0.02900008112192154,
        -0.018021095544099808,
        -0.02937600575387478,
        -0.01260409690439701,
        -0.03735257312655449,
        0.04256580397486687,
        -0.004048369824886322,
        0.08034120500087738,
        -0.04097959026694298,
        -0.013564147986471653,
        -0.11465629935264587,
        -0.011390534229576588,
        -0.044636983424425125,
        -0.02031315304338932,
        -0.0382925420999527,
        0.06841443479061127,
        -0.020211111754179,
        -0.15351563692092896,
        -0.019115397706627846,
        0.03810415416955948,
        0.07919955253601074,
        0.0035452893935143948,
        -0.1170223280787468,
        -0.030636735260486603,
        -0.02337583526968956,
        0.06248876079916954,
        0.10447264462709427,
        -0.04626771807670593,
        -0.05758005008101463,
        0.09245284646749496,
        -0.08646402508020401,
        -0.05659537762403488,
        -0.010266746394336224,
        0.023314902558922768,
        0.018122419714927673,
        -0.06473984569311142,
        0.048510145395994186,
        -0.07420007139444351,
        0.019849993288517,
        0.01861954666674137,
        0.03999361768364906,
        -0.038444261997938156,
        0.041228268295526505,
        0.005256339441984892,
        -0.04875096306204796,
        0.03242312744259834,
        -0.06913973391056061,
        0.039477888494729996,
        -0.07582691311836243,
        -0.03844895213842392,
        -0.0030999155715107918,
        -0.06791355460882187,
        0.013965679332613945,
        0.03163491562008858,
        -0.03213050588965416,
        -0.02154158242046833,
        0.029478328302502632,
        -0.08813948184251785,
        -0.09105674177408218,
        -0.0586748905479908,
        -0.06553761661052704,
        0.009944631718099117,
        0.07714685797691345,
        -0.008957787416875362,
        -0.02154998853802681,
        0.03821590915322304,
        -0.08716244995594025,
        -0.03199630603194237,
        0.016746647655963898,
        -0.039624955505132675,
        -0.009166873060166836,
        0.0013096120674163103,
        -0.021057555451989174,
        0.06439990550279617,
        -0.1174841970205307,
        -0.012292951345443726,
        0.02104157768189907,
        -0.06396986544132233,
        0.010088612325489521,
        0.09082464873790741,
        0.03305826708674431,
        -0.034568268805742264,
        0.11639679968357086,
        -0.03907575085759163,
        0.03814535215497017,
        -0.034503571689128876,
        -0.06948287785053253,
        -0.019639454782009125,
        0.0781296044588089,
        0.024666758254170418,
        -0.03035053052008152,
        0.07040330767631531,
        0.012346906587481499,
        -0.016263538971543312,
        -0.03762024641036987,
        -0.03494133800268173,
        0.0021331426687538624,
        0.041292063891887665,
        0.054658908396959305,
        0.041541073471307755,
        0.04514250531792641,
        0.025919543579220772,
        -0.01771356165409088,
        0.042934600263834,
        0.09575861692428589,
        0.1452280730009079,
        0.005653067491948605,
        0.006486454512923956,
        -0.004475667141377926,
        0.09317560493946075,
        -0.052173975855112076,
        0.14188894629478455,
        9.089712105824886e-33,
        0.009259953163564205,
        -0.06386802345514297,
        0.01332531776279211,
        0.04484187066555023,
        0.10173417627811432,
        0.024300554767251015,
        0.0666794702410698,
        0.01629631780087948,
        -0.08848106861114502,
        -0.028639111667871475,
        -0.138895183801651,
        0.05051455274224281,
        -0.05040448531508446,
        -0.06141646206378937,
        -0.054644014686346054,
        -0.07647537440061569,
        0.03040696121752262,
        0.04999253526329994,
        0.10183537751436234,
        0.017829323187470436,
        0.0411251038312912,
        0.019616900011897087,
        -0.009863646700978279,
        0.015217362903058529,
        0.02274698205292225,
        -0.0008485650760121644,
        -0.030283620581030846,
        -0.03033379651606083,
        -0.019197754561901093,
        -0.005145770963281393,
        0.08414195477962494,
        0.03640192747116089,
        -0.03429030999541283,
        0.053275659680366516,
        0.0005475810612551868,
        -0.04990772902965546,
        -0.045860640704631805,
        0.02927137166261673,
        -0.12345767021179199,
        -0.0676640048623085,
        -0.05812511965632439,
        0.014197486452758312,
        -0.0678306445479393,
        -0.012888423167169094,
        -0.09366921335458755,
        -0.12253222614526749,
        -0.04224362224340439,
        0.026136793196201324,
        0.03936797007918358,
        0.027275480329990387,
        -0.06087584048509598,
        0.021338600665330887,
        -0.027684606611728668,
        -0.04802919551730156,
        0.049004215747117996,
        -0.04529046639800072,
        -0.004727710969746113,
        0.02811497449874878,
        -0.04022599384188652,
        -0.04620097205042839,
        -0.048717811703681946,
        -0.031730856746435165,
        -0.036845482885837555,
        -0.010859842412173748,
        0.09448445588350296,
        0.00848370511084795,
        -0.036957185715436935,
        -0.014382136054337025,
        0.06180034950375557,
        -0.008293521590530872,
        -0.03538854792714119,
        -0.021307066082954407,
        0.0629478394985199,
        0.014555871486663818,
        -0.0006516691646538675,
        -0.004006229341030121,
        -0.02563776820898056,
        0.05011050030589104,
        -0.07318372279405594,
        -0.05519527196884155,
        0.009918884374201298,
        -0.046369124203920364,
        -0.06818437576293945,
        0.03102099522948265,
        0.02231118269264698,
        -0.004003377631306648,
        -0.026120906695723534,
        -0.03703469783067703,
        0.017394082620739937,
        0.03925301134586334,
        -0.052615515887737274,
        0.03322083503007889,
        0.0418812595307827,
        0.0009476442355662584,
        -0.04195088893175125,
        -8.70955576340102e-33,
        0.023479202762246132,
        -0.007574333809316158,
        0.0006264036055654287,
        -0.0079811317846179,
        0.0594516322016716,
        0.042438071221113205,
        0.08372090756893158,
        -0.02175811678171158,
        0.014531212858855724,
        0.004046252928674221,
        -0.05474989861249924,
        -0.029788028448820114,
        0.058485087007284164,
        0.003829001681879163,
        -0.0029472121968865395,
        0.058352094143629074,
        -0.04340692237019539,
        -0.0246257483959198,
        0.0012940317392349243,
        0.013810272328555584,
        -0.07900329679250717,
        0.08261633664369583,
        0.04546263441443443,
        -0.014837346039712429,
        -0.008755709044635296,
        0.09040793776512146,
        0.0004387431254144758,
        0.06383931636810303,
        -0.08622462302446365,
        -0.08763720095157623,
        -0.013232516124844551,
        -0.021865179762244225,
        -0.10221829265356064,
        0.04352477937936783,
        -0.004353897646069527,
        -0.04160628095269203,
        0.031573742628097534,
        0.12392257153987885,
        0.00141722965054214,
        0.02203788235783577,
        0.12450969964265823,
        -0.02166248857975006,
        -0.020722027868032455,
        -0.04557904601097107,
        0.043792590498924255,
        -0.04310024902224541,
        0.02646793983876705,
        -0.06115487217903137,
        -0.07313183695077896,
        -0.04032183438539505,
        -0.009175259619951248,
        -0.06794423609972,
        0.012043394148349762,
        0.037125855684280396,
        -0.0018751516472548246,
        0.027429256588220596,
        0.1174212321639061,
        -0.0812530368566513,
        0.0022817060817033052,
        -0.009205358102917671,
        0.13803011178970337,
        -0.0909600555896759,
        0.06078594550490379,
        0.008991426788270473,
        0.05127542093396187,
        -0.03974675014615059,
        -0.041907526552677155,
        0.007428543642163277,
        0.042809903621673584,
        0.0013500330969691277,
        -0.03322804719209671,
        -0.01711127534508705,
        0.06409858912229538,
        0.02823375165462494,
        0.058160070329904556,
        0.03301876783370972,
        -0.040139809250831604,
        -0.1215849369764328,
        0.03883838281035423,
        0.00885172002017498,
        -0.13442866504192352,
        -0.004151368513703346,
        -0.022975308820605278,
        0.0036110819783061743,
        -0.029322931542992592,
        -0.015576780773699284,
        0.008711091242730618,
        0.050459686666727066,
        0.0031991417054086924,
        -0.029428675770759583,
        -0.06828419119119644,
        -0.0024713079910725355,
        0.011575116775929928,
        0.003599446965381503,
        0.03725845366716385,
        -6.282797926360217e-8,
        -0.07673367112874985,
        -0.017133329063653946,
        -0.03023756667971611,
        0.07542853057384491,
        0.012615245766937733,
        -0.018211346119642258,
        -0.008823934942483902,
        -0.006251548416912556,
        0.026139404624700546,
        0.04829228296875954,
        -0.020070062950253487,
        -0.015299239195883274,
        0.042996253818273544,
        -0.018398642539978027,
        -0.011056746356189251,
        -0.03512417897582054,
        0.05852939188480377,
        0.02346664108335972,
        -0.01762697473168373,
        -0.030634397640824318,
        0.0455053485929966,
        -0.0012632212601602077,
        0.020613880828022957,
        0.018164368346333504,
        0.014066408388316631,
        -0.015372822061181068,
        0.060004156082868576,
        0.02336527407169342,
        -0.04155668988823891,
        -0.014222128316760063,
        -0.07228507101535797,
        -0.042856670916080475,
        0.08307264000177383,
        0.012727275490760803,
        -0.03460507467389107,
        -0.003726729890331626,
        0.07350728660821915,
        0.015821389853954315,
        -0.016665849834680557,
        0.060397446155548096,
        0.03948657587170601,
        0.11661290377378464,
        -0.005606326274573803,
        -0.03010653331875801,
        0.0636909008026123,
        -0.02706945315003395,
        0.005525417160242796,
        -0.009284822270274162,
        0.08165034651756287,
        0.0614229217171669,
        -0.061462678015232086,
        -0.050339024513959885,
        -0.028750618919730186,
        -0.006325333844870329,
        0.02811252698302269,
        -0.04237527400255203,
        0.0549633763730526,
        -0.04470515996217728,
        -0.02244819514453411,
        0.03810831904411316,
        0.08827943354845047,
        0.023474283516407013,
        0.01256044115871191,
        -0.011372649110853672
      ]
    },
    {
      "id": "8810b154",
      "filePath": "llm-service/src/core/types.ts",
      "content": "import { z } from 'zod'\n\n// Message Schema\nexport const MessageSchema = z.object({\n\trole: z.enum(['system', 'user', 'assistant']),\n\tcontent: z.string(),\n})\n\nexport type Message = z.infer<typeof MessageSchema>\n\n// Unified Request\nexport const UnifiedRequestSchema = z.object({\n\tmodel: z.string(),\n\tmessages: z.array(MessageSchema),\n\ttemperature: z.number().min(0).max(2).optional(),\n\tmaxTokens: z.number().positive().optional(),\n\tstream: z.boolean().optional().default(false),\n})\n\nexport type UnifiedRequest = z.infer<typeof UnifiedRequestSchema>\n\n// Token Usage\nexport interface TokenUsage {\n\tpromptTokens: number\n\tcompletionTokens: number\n\ttotalTokens: number\n}\n\n// Cost Estimate (USD)\nexport interface CostEstimate {\n\tinputCost: number\n\toutputCost: number\n\ttotalCost: number\n}\n\n// Response Metadata\nexport interface ResponseMeta {\n\ttraceId: string\n\tmodel: string\n\tprovider: string\n\tlatencyMs: number\n}\n\n// Unified Response\nexport interface UnifiedResponse {\n\tcontent: string\n\tusage: TokenUsage\n\tcost: CostEstimate\n\tmeta: ResponseMeta\n}\n\n// Unified Response Chunk (Stream)\nexport interface UnifiedResponseChunk {\n\tcontent: string\n\tusage?: TokenUsage\n\tcost?: CostEstimate\n\tmeta?: ResponseMeta\n}\n\n// Model Pricing (per 1M tokens)\nexport interface ModelPricing {\n\tinputPer1M: number\n\toutputPer1M: number\n}",
      "startLine": 1,
      "endLine": 65,
      "type": "other",
      "embedding": [
        -0.03794928267598152,
        0.07325822860002518,
        -0.0157544557005167,
        0.09066421538591385,
        0.03475761041045189,
        -0.04039787873625755,
        0.04332754388451576,
        0.06992831826210022,
        -0.003611767664551735,
        0.036746326833963394,
        -0.04218963906168938,
        -0.09366650134325027,
        0.0010639240499585867,
        0.021615497767925262,
        0.08112258464097977,
        0.0009628763655200601,
        0.005912234075367451,
        -0.09592688083648682,
        -0.06931713223457336,
        -0.03300138935446739,
        0.0728098526597023,
        0.06427983194589615,
        0.05753864720463753,
        -0.02453933097422123,
        0.025685269385576248,
        -0.06816701591014862,
        -0.011044918559491634,
        0.022304648533463478,
        -0.01840565912425518,
        0.0023865848779678345,
        -0.02895667403936386,
        0.06286241114139557,
        -0.03800559788942337,
        0.041577037423849106,
        0.02896973118185997,
        0.023438749834895134,
        0.043176718056201935,
        -0.08601336181163788,
        0.0008864399278536439,
        -0.03479306772351265,
        0.044056009501218796,
        0.10880254954099655,
        -0.0614982470870018,
        -0.10744580626487732,
        0.04556627571582794,
        -0.04209606349468231,
        -0.015716081485152245,
        -0.0551857054233551,
        -0.011456039734184742,
        0.04607338830828667,
        -0.011651123873889446,
        -0.024067534133791924,
        -0.0400889553129673,
        0.05143195018172264,
        0.0488666333258152,
        0.08165459334850311,
        -0.10586690902709961,
        0.018340229988098145,
        -0.029726127162575722,
        -0.06043379008769989,
        -0.05948232486844063,
        -0.13254748284816742,
        0.015300311148166656,
        -0.05501319840550423,
        0.03236807510256767,
        -0.04246087372303009,
        -0.048929084092378616,
        0.050744444131851196,
        0.002092420356348157,
        -0.017747431993484497,
        -0.03627287968993187,
        0.0011796056060120463,
        -0.04491783306002617,
        -0.04989900439977646,
        -0.049026019871234894,
        -0.018316293135285378,
        0.04790561646223068,
        0.0021086749620735645,
        0.03532186523079872,
        -0.0997292697429657,
        -0.0037724690046161413,
        -0.030430501326918602,
        -0.013776475563645363,
        0.07636599987745285,
        0.04395807534456253,
        0.01954691670835018,
        0.018496155738830566,
        -0.03714955225586891,
        0.01712847873568535,
        -0.020725008100271225,
        0.00035751162795349956,
        -0.005330970510840416,
        -0.022672606632113457,
        0.10238476097583771,
        -0.016166945919394493,
        0.07966440916061401,
        -0.05071912705898285,
        0.024453161284327507,
        -0.04387964308261871,
        0.09029000252485275,
        0.008008082397282124,
        -0.02240045554935932,
        0.09815486520528793,
        0.005822683684527874,
        0.000688421365339309,
        0.006319758016616106,
        0.06006395071744919,
        0.03256481885910034,
        -0.08568320423364639,
        0.07912743836641312,
        -0.04021690413355827,
        0.06378693133592606,
        -0.0451214574277401,
        -0.008928222581744194,
        -0.02222941629588604,
        -0.052226461470127106,
        0.019406933337450027,
        -0.027220414951443672,
        -0.025555836036801338,
        0.04090311378240585,
        0.05840997025370598,
        -0.014100871980190277,
        -0.029112063348293304,
        0.05642556771636009,
        0.03669159114360809,
        0.007684638258069754,
        0.11262084543704987,
        1.0516281029723275e-32,
        -0.0011720770271494985,
        0.045956410467624664,
        -0.0054989526979625225,
        0.05330086871981621,
        0.04587075486779213,
        0.06979484111070633,
        0.04016474261879921,
        0.05479143559932709,
        -0.027929965406656265,
        0.0195302851498127,
        -0.10740771889686584,
        0.05090875178575516,
        -0.05185205861926079,
        -0.04499347507953644,
        -0.02611149474978447,
        -0.03660840541124344,
        0.010854617692530155,
        0.040017206221818924,
        0.0763954222202301,
        0.050313662737607956,
        0.05777362361550331,
        0.0158447977155447,
        -0.06985365599393845,
        -0.035579945892095566,
        0.07346542179584503,
        0.024932168424129486,
        0.030502760782837868,
        -0.037737730890512466,
        -0.09974323958158493,
        -0.008914703503251076,
        0.10431118309497833,
        -0.018839821219444275,
        0.046594079583883286,
        0.022425556555390358,
        0.06443026661872864,
        -0.04352115839719772,
        0.0519169420003891,
        0.019855163991451263,
        -0.1543489396572113,
        -0.0807386040687561,
        0.04787858948111534,
        -0.0075125014409422874,
        -0.07011070847511292,
        0.02137652412056923,
        -0.1145804226398468,
        -0.07060343027114868,
        0.036536142230033875,
        0.024800585582852364,
        0.1210494115948677,
        -0.0471353717148304,
        -0.045986950397491455,
        0.01639367826282978,
        -0.006961549166589975,
        -0.0739571750164032,
        0.057009998708963394,
        -0.02489105612039566,
        0.02384282276034355,
        0.04256172105669975,
        -0.0027009560726583004,
        -0.08214911073446274,
        -0.07670066505670547,
        -0.0007171398610807955,
        0.0013491339050233364,
        -0.003293014131486416,
        0.07517316937446594,
        0.06521530449390411,
        -0.06420958042144775,
        -0.05940725654363632,
        0.037269558757543564,
        -0.05591790750622749,
        -0.055495794862508774,
        -0.025075281038880348,
        0.010926110669970512,
        0.07422007620334625,
        0.01790582202374935,
        -0.07481492310762405,
        -0.00163555727340281,
        0.013419964350759983,
        0.05844296142458916,
        -0.0264432393014431,
        -0.04917528107762337,
        -0.07686301320791245,
        -0.07841992378234863,
        0.07794978469610214,
        0.05278521776199341,
        -0.016291169449687004,
        0.0064978161826729774,
        -0.04886094853281975,
        0.07307349890470505,
        0.0034054601565003395,
        -0.07031751424074173,
        -0.04587397351861,
        0.004600547719746828,
        -0.020101157948374748,
        -0.06775616109371185,
        -8.694258908476975e-33,
        -0.008436218835413456,
        0.03384436294436455,
        -0.04124554991722107,
        -0.03242487832903862,
        0.027200059965252876,
        -0.013786491006612778,
        0.08115920424461365,
        0.01741996966302395,
        -0.003426196286454797,
        0.04847134277224541,
        0.02039930410683155,
        -0.0367315411567688,
        0.03472346067428589,
        -0.03560508415102959,
        0.004694089759141207,
        0.024115009233355522,
        -0.06142750754952431,
        -0.07816963642835617,
        0.05707855150103569,
        -0.053796812891960144,
        -0.04259566590189934,
        0.071712426841259,
        0.026595287024974823,
        0.027676047757267952,
        -0.0631333440542221,
        0.07338839769363403,
        0.03262123465538025,
        0.043593741953372955,
        0.011677412316203117,
        -0.030414186418056488,
        0.0010492784203961492,
        -0.03595419600605965,
        -0.04576513171195984,
        -0.016761647537350655,
        -0.06349100917577744,
        -0.0390867181122303,
        0.015049482695758343,
        0.11496619880199432,
        -0.03937113285064697,
        0.04350605607032776,
        0.02827686071395874,
        -0.04583162069320679,
        -0.0828223004937172,
        -0.009179073385894299,
        0.009619503282010555,
        -0.03732423856854439,
        0.0635676383972168,
        0.0025858322624117136,
        -0.004183663055300713,
        -0.013649201951920986,
        0.05653129145503044,
        -0.018617046996951103,
        -0.02455228939652443,
        0.05747581273317337,
        0.01701023243367672,
        -0.014861047267913818,
        0.07913882285356522,
        -0.14911603927612305,
        0.003919391427189112,
        -0.07625196129083633,
        0.05422113090753555,
        -0.06116741523146629,
        0.04299565404653549,
        -0.008857821114361286,
        0.08855560421943665,
        -0.05218072980642319,
        -0.00962836854159832,
        -0.0627911314368248,
        0.04324842616915703,
        0.022975914180278778,
        -0.018157821148633957,
        -0.033853594213724136,
        0.020973756909370422,
        -0.011567538604140282,
        0.10152078419923782,
        -0.01586729846894741,
        -0.0304904542863369,
        -0.07749910652637482,
        0.07148122787475586,
        -0.007147676311433315,
        -0.062385864555835724,
        -0.00669271731749177,
        0.03216647356748581,
        0.08227158337831497,
        -0.011470375582575798,
        -0.0909041166305542,
        0.004558513406664133,
        0.0852256566286087,
        -0.002793594030663371,
        0.038471389561891556,
        -0.05717174708843231,
        -0.04582991823554039,
        -0.011946036480367184,
        0.055747807025909424,
        -0.0631469264626503,
        -5.9294720244906785e-8,
        -0.10813611000776291,
        -0.010859767906367779,
        -0.038954343646764755,
        0.028073441237211227,
        0.017574306577444077,
        -0.027867335826158524,
        -0.018982404842972755,
        -0.06072713062167168,
        0.050463054329156876,
        -0.03404516354203224,
        -0.04331185296177864,
        0.0810023844242096,
        -0.02675481140613556,
        -0.05181029438972473,
        0.0595349483191967,
        -0.04514902085065842,
        0.0005318977637216449,
        0.007524523884057999,
        -0.06225953251123428,
        -0.059680528938770294,
        0.04650060459971428,
        0.035181377083063126,
        -0.03695157915353775,
        -0.03856664150953293,
        0.12437392771244049,
        0.052059195935726166,
        0.01791740581393242,
        0.07591147720813751,
        0.010008998215198517,
        0.019791144877672195,
        -0.04181657359004021,
        -0.021512635052204132,
        0.06488250941038132,
        -0.01096155121922493,
        -0.04063263535499573,
        0.018774161115288734,
        0.035591669380664825,
        -0.008744181133806705,
        -0.00510897021740675,
        0.008337262086570263,
        0.05963476747274399,
        0.08254609256982803,
        -0.02093994803726673,
        0.013102668337523937,
        0.03402687609195709,
        -0.03761148825287819,
        -0.0230578500777483,
        -0.009603649377822876,
        0.12039090692996979,
        0.05641944706439972,
        -0.050347063690423965,
        -0.05906572937965393,
        -0.05619769170880318,
        0.012111217714846134,
        -0.07568847388029099,
        -0.012727713212370872,
        0.019885508343577385,
        -0.054827552288770676,
        0.0029878062196075916,
        0.018889468163251877,
        0.08766117691993713,
        0.0012195141753181815,
        -0.04203680157661438,
        -0.04998079314827919
      ]
    },
    {
      "id": "0a66d07f",
      "filePath": "llm-service/src/core/provider.ts",
      "content": "import type { UnifiedRequest, UnifiedResponse, UnifiedResponseChunk, ModelPricing } from './types.js'\n\n/**\n * LLM Provider 抽象接口\n * 所有具体 Provider (OpenAI, Anthropic 等) 必须实现此接口\n */\nexport interface LLMProvider {\n\t/** Provider 名称 */\n\treadonly name: string\n\n\t/** 执行对话请求 */\n\tchat(request: UnifiedRequest): Promise<UnifiedResponse>\n\n\t/** 执行流式对话请求 */\n\tchatStream?(request: UnifiedRequest): AsyncIterable<UnifiedResponseChunk>\n\n\t/** 获取支持的模型列表 */\n\tlistModels(): string[]\n\n\t/** 获取指定模型的定价 */\n\tgetPricing(model: string): ModelPricing\n}",
      "startLine": 1,
      "endLine": 23,
      "type": "other",
      "embedding": [
        -0.10232444107532501,
        -0.012105299159884453,
        0.0010290546342730522,
        0.031864412128925323,
        0.00028484861832112074,
        0.0063167717307806015,
        -0.00007202210690593347,
        0.08985241502523422,
        0.0606808140873909,
        -0.002772780368104577,
        0.04845061153173447,
        -0.06961393356323242,
        -0.048819392919540405,
        0.007245339918881655,
        0.08848225325345993,
        0.0010306076146662235,
        0.02304196171462536,
        -0.05724921450018883,
        -0.08408866077661514,
        0.01817409135401249,
        0.07354860007762909,
        0.020022721961140633,
        0.019804740324616432,
        0.040466003119945526,
        0.06631532311439514,
        -0.024159740656614304,
        0.001620065770111978,
        0.04844239726662636,
        0.04096497222781181,
        -0.015662861987948418,
        0.0010848428355529904,
        0.05878692492842674,
        -0.023311009630560875,
        0.015622585080564022,
        0.10089324414730072,
        0.04970671981573105,
        -0.0010557769564911723,
        -0.08764462918043137,
        0.019620142877101898,
        -0.034631188958883286,
        0.11041276901960373,
        -0.0040874844416975975,
        -0.021414708346128464,
        -0.10095738619565964,
        0.08994171023368835,
        -0.07270209491252899,
        -0.015518246218562126,
        -0.01866109110414982,
        -0.04034288600087166,
        0.02907463349401951,
        -0.07099991291761398,
        0.009807301685214043,
        -0.06702975928783417,
        0.01539687067270279,
        0.02353845164179802,
        0.008816498331725597,
        -0.04481148719787598,
        0.023120753467082977,
        -0.01760660856962204,
        -0.019244419410824776,
        -0.05414431914687157,
        -0.06537441164255142,
        0.02964191511273384,
        -0.012352506630122662,
        -0.06693845987319946,
        -0.008149577304720879,
        -0.059878889471292496,
        0.12342842668294907,
        0.03862188756465912,
        -0.0875575840473175,
        -0.03312467411160469,
        -0.01981031335890293,
        -0.039755962789058685,
        -0.03383293375372887,
        -0.023804865777492523,
        -0.046741731464862823,
        0.024175619706511497,
        0.051586851477622986,
        0.019548805430531502,
        -0.05474147945642471,
        0.03257390111684799,
        0.015048166736960411,
        0.010736886411905289,
        0.00693510752171278,
        -0.03302942216396332,
        0.033227697014808655,
        -0.015199029818177223,
        -0.003798453137278557,
        0.05640695244073868,
        -0.08229765295982361,
        -0.044775910675525665,
        -0.04569251462817192,
        -0.05342628434300423,
        0.06564772129058838,
        -0.0466235987842083,
        0.04649776592850685,
        -0.02292783558368683,
        0.002019597450271249,
        -0.07908511906862259,
        0.04990195110440254,
        0.012451733462512493,
        0.0346522256731987,
        0.07230083644390106,
        0.04139332100749016,
        -0.07250484824180603,
        -0.05494384095072746,
        -0.0006610145792365074,
        0.01008794829249382,
        -0.01786176860332489,
        -0.04419538378715515,
        -0.027861779555678368,
        0.038334496319293976,
        -0.04333328828215599,
        0.008616171777248383,
        0.008449537679553032,
        -0.042164646089076996,
        -0.03865363821387291,
        -0.0612863153219223,
        0.03353418782353401,
        -0.04427148774266243,
        -0.003910699859261513,
        -0.05468713864684105,
        -0.005120409652590752,
        -0.00817575678229332,
        0.02404090203344822,
        -0.03996352478861809,
        0.10885600745677948,
        5.171355603650351e-33,
        0.030501889064908028,
        0.022089535370469093,
        -0.005455856677144766,
        0.04955237731337547,
        0.11030381172895432,
        0.003961519803851843,
        0.045534320175647736,
        -0.009724360890686512,
        -0.058404937386512756,
        0.04332961142063141,
        -0.10367360711097717,
        -0.010335010476410389,
        -0.10441793501377106,
        -0.05410302057862282,
        -0.06574001908302307,
        0.0030623897910118103,
        -0.01471773348748684,
        0.014875004068017006,
        0.08172555267810822,
        0.07060324400663376,
        0.07139644026756287,
        0.08036985993385315,
        -0.0063086096197366714,
        -0.010357670485973358,
        -0.006078002508729696,
        0.09018571674823761,
        0.041117437183856964,
        -0.03252381086349487,
        -0.06074359267950058,
        0.03666197881102562,
        0.11567746102809906,
        -0.014488227665424347,
        0.008749755099415779,
        0.022800639271736145,
        0.0004883814253844321,
        0.020781155675649643,
        -0.026567569002509117,
        -0.04467128589749336,
        -0.09458991140127182,
        -0.07256646454334259,
        -0.03621099144220352,
        0.01457135658711195,
        -0.06612697243690491,
        -0.018137047067284584,
        -0.0713890790939331,
        -0.058250781148672104,
        -0.04818186163902283,
        -0.010895303450524807,
        0.10615062713623047,
        -0.02374577522277832,
        -0.05919208005070686,
        -0.020653871819376945,
        -0.006871699821203947,
        -0.007036191411316395,
        0.02067342959344387,
        -0.041887812316417694,
        -0.00954357534646988,
        0.03326963260769844,
        0.005225431174039841,
        -0.0818987786769867,
        -0.06022151559591293,
        -0.06246786192059517,
        -0.04693547636270523,
        -0.012910773977637291,
        0.11366688460111618,
        0.048644669353961945,
        -0.05577954277396202,
        -0.07865984737873077,
        0.031771186739206314,
        -0.036677662283182144,
        -0.01645195670425892,
        -0.031387049704790115,
        -0.0288699883967638,
        0.044686224311590195,
        0.027384592220187187,
        -0.06292539834976196,
        -0.000511934922542423,
        0.05268367752432823,
        0.094919852912426,
        -0.014222212135791779,
        -0.02562909945845604,
        -0.0016875873552635312,
        -0.07434990257024765,
        0.05337793007493019,
        0.01824340969324112,
        0.019853366538882256,
        0.021088022738695145,
        -0.04177822172641754,
        0.0516945980489254,
        0.010995888151228428,
        -0.06718722730875015,
        -0.004903225693851709,
        -0.007603645324707031,
        0.003868991509079933,
        -0.04822321608662605,
        -7.289387406242858e-33,
        0.08090819418430328,
        0.014688095077872276,
        -0.052324287593364716,
        -0.006292656995356083,
        0.011335552670061588,
        -0.04036968573927879,
        0.06834211945533752,
        0.08127854764461517,
        0.055526021867990494,
        0.04916241392493248,
        0.0019300596322864294,
        -0.018136944621801376,
        0.046223998069763184,
        -0.014497479423880577,
        0.054027944803237915,
        0.010331809520721436,
        0.016011139377951622,
        -0.05477609485387802,
        -0.009630192071199417,
        -0.022657031193375587,
        -0.06130240112543106,
        0.026435330510139465,
        -0.049339428544044495,
        0.06724002212285995,
        -0.02331640012562275,
        0.08159972727298737,
        0.03791197016835213,
        0.045735858380794525,
        -0.04672499746084213,
        -0.0507763996720314,
        0.01714891381561756,
        -0.01006263680756092,
        -0.08130120486021042,
        0.034944452345371246,
        -0.11291562020778656,
        0.004077037796378136,
        0.028223898261785507,
        0.1305905431509018,
        -0.019785704091191292,
        0.019950656220316887,
        0.048983339220285416,
        -0.02374536730349064,
        -0.10604053735733032,
        0.006010832265019417,
        0.002285923808813095,
        -0.0802173763513565,
        -0.010996677912771702,
        -0.051088009029626846,
        0.024017060175538063,
        -0.08118332922458649,
        0.05726705119013786,
        -0.06339998543262482,
        0.029446406289935112,
        -0.00046816928079351783,
        -0.03745120391249657,
        0.03758462890982628,
        0.09706637263298035,
        -0.08754057437181473,
        -0.05751228332519531,
        -0.12144235521554947,
        0.0186474472284317,
        -0.009198096580803394,
        0.011732812970876694,
        -0.02529744617640972,
        0.005097502376884222,
        -0.006368545349687338,
        -0.019748220220208168,
        -0.05933030694723129,
        0.06654611974954605,
        -0.11028260737657547,
        -0.041532475501298904,
        -0.04476509243249893,
        -0.001975125400349498,
        -0.012010147795081139,
        0.08978614211082458,
        -0.03332696855068207,
        -0.12571598589420319,
        -0.033435460180044174,
        0.12367302924394608,
        0.04007121920585632,
        -0.03141595050692558,
        -0.010730382055044174,
        0.04086774215102196,
        0.06596061587333679,
        -0.015839753672480583,
        -0.10607492923736572,
        0.07030653953552246,
        0.11176809668540955,
        0.04400171712040901,
        -0.034118060022592545,
        -0.04434492066502571,
        -0.005786551628261805,
        -0.02096560224890709,
        0.09235995262861252,
        0.06307882815599442,
        -5.738939279353872e-8,
        -0.16935229301452637,
        -0.04475045204162598,
        -0.055905938148498535,
        0.009506079368293285,
        -0.002037182915955782,
        -0.021013103425502777,
        -0.020785268396139145,
        -0.04712352529168129,
        0.06823307275772095,
        -0.0008537619141861796,
        -0.0610504075884819,
        0.024015028029680252,
        -0.10845443606376648,
        -0.04833868145942688,
        -0.019873324781656265,
        -0.026310408487915993,
        0.034990135580301285,
        0.06051715463399887,
        -0.06713873147964478,
        -0.05512343347072601,
        0.018984904512763023,
        0.007255920674651861,
        0.046452708542346954,
        -0.07946544140577316,
        0.07616676390171051,
        0.0007770793163217604,
        -0.007258359342813492,
        0.03387687727808952,
        -0.003340827999636531,
        0.04095645993947983,
        -0.03942442312836647,
        -0.04095180705189705,
        0.042771290987730026,
        0.016467995941638947,
        -0.040205396711826324,
        0.013572976924479008,
        0.07043692469596863,
        -0.014895906671881676,
        0.05850711092352867,
        0.012828335165977478,
        0.048644840717315674,
        0.032301753759384155,
        -0.06942002475261688,
        0.040730398148298264,
        0.05588692054152489,
        0.01778908632695675,
        -0.03798294439911842,
        -0.048671841621398926,
        0.03951330855488777,
        -0.0009179144981317222,
        -0.015746401622891426,
        -0.0361107774078846,
        -0.04887600615620613,
        -0.007842146791517735,
        -0.115803062915802,
        -0.014091857708990574,
        0.010949956253170967,
        -0.04537055641412735,
        0.010925447568297386,
        -0.03574853390455246,
        0.08838964253664017,
        -0.02867172658443451,
        0.04813509061932564,
        -0.016596846282482147
      ]
    },
    {
      "id": "1ddebb35",
      "filePath": "llm-service/src/core/prompt-template.ts",
      "content": "import type { Message } from './types.js'\n\nexport interface PromptTemplateConfig {\n\t/** System prompt 模板 */\n\tsystem?: string\n\t/** User prompt 模板 */\n\tuser: string\n}\n\n/**\n * Prompt 模板\n * 支持 {{variable}} 语法的变量替换\n */",
      "startLine": 1,
      "endLine": 13,
      "type": "other",
      "embedding": [
        0.026509083807468414,
        0.018490348011255264,
        0.019721180200576782,
        -0.041936010122299194,
        0.05700478330254555,
        0.04634954035282135,
        0.08931306004524231,
        0.10270519554615021,
        0.010580196045339108,
        0.03148385509848595,
        -0.04197866469621658,
        -0.05662428215146065,
        0.007234096061438322,
        0.0290678683668375,
        0.1047256737947464,
        0.011473155580461025,
        0.04504670947790146,
        -0.04902654513716698,
        0.09222941845655441,
        0.025018326938152313,
        0.050277937203645706,
        0.05039812996983528,
        0.07795853167772293,
        0.026760542765259743,
        0.009045640006661415,
        -0.018886806443333626,
        0.05595370754599571,
        0.001035889144986868,
        -0.016486136242747307,
        0.029115235432982445,
        -0.03225156292319298,
        0.06023663282394409,
        0.044771406799554825,
        0.023849237710237503,
        0.04173876345157623,
        0.02554183080792427,
        0.037122443318367004,
        -0.01012379489839077,
        -0.00950942374765873,
        -0.03964385762810707,
        0.011321892030537128,
        0.025556599721312523,
        -0.012058954685926437,
        -0.07558131963014603,
        0.014074569568037987,
        -0.07429575175046921,
        -0.08176689594984055,
        -0.025883352383971214,
        -0.07280532270669937,
        0.0037888288497924805,
        0.015332728624343872,
        -0.06405261904001236,
        0.0014494257047772408,
        -0.07061529904603958,
        0.0009546768851578236,
        -0.0170975923538208,
        0.03426948934793472,
        0.04768461361527443,
        0.00746496208012104,
        0.025598471984267235,
        -0.08954785019159317,
        -0.046690359711647034,
        0.016775041818618774,
        -0.016643278300762177,
        0.08820640295743942,
        0.026856521144509315,
        -0.052124716341495514,
        0.1104051023721695,
        0.010812251828610897,
        -0.009636853821575642,
        -0.05803770199418068,
        -0.01465248130261898,
        -0.0325198732316494,
        -0.0037951767444610596,
        -0.07208356261253357,
        -0.03281930834054947,
        -0.001483453088440001,
        0.06084919348359108,
        -0.023349357768893242,
        -0.023506253957748413,
        0.01211251225322485,
        0.01665077731013298,
        0.007120773196220398,
        0.03739680349826813,
        0.005064905155450106,
        0.027134375646710396,
        -0.029733184725046158,
        0.0012716209748759866,
        0.06204253062605858,
        0.03616227209568024,
        0.02387428842484951,
        -0.10699404776096344,
        0.018357686698436737,
        0.0543760247528553,
        -0.08712297677993774,
        0.050845805555582047,
        -0.07516393065452576,
        -0.07608459144830704,
        -0.022010669112205505,
        -0.0009117951849475503,
        -0.05049389600753784,
        -0.03294098749756813,
        0.09016889333724976,
        0.007778854109346867,
        -0.05319739878177643,
        0.010858322493731976,
        0.0046003046445548534,
        0.0010342630557715893,
        -0.008212320506572723,
        -0.03822049871087074,
        0.012281336821615696,
        0.060835178941488266,
        0.03251678869128227,
        -0.0061219907365739346,
        0.03181919455528259,
        -0.09354763478040695,
        0.03461707755923271,
        -0.05543041229248047,
        0.04971843957901001,
        0.04424026235938072,
        0.04430518299341202,
        -0.1037716418504715,
        -0.04700309783220291,
        0.0216826181858778,
        0.04979582875967026,
        -0.0239022858440876,
        0.1000639796257019,
        4.3687956518340655e-33,
        -0.008246409706771374,
        0.10962484031915665,
        -0.009719624184072018,
        0.09440511465072632,
        0.025563456118106842,
        -0.003942874725908041,
        0.06464847922325134,
        -0.009770364500582218,
        -0.03190479800105095,
        0.02988617867231369,
        -0.05164911970496178,
        0.006199329625815153,
        0.010445719584822655,
        -0.006794990971684456,
        -0.06609370559453964,
        -0.06251074373722076,
        0.07928631454706192,
        0.021259799599647522,
        0.028813650831580162,
        -0.017522167414426804,
        0.03941874951124191,
        0.080662302672863,
        0.03438872843980789,
        0.008611838333308697,
        0.12415429204702377,
        0.03694145008921623,
        0.021336514502763748,
        0.0037584046367555857,
        0.025452855974435806,
        0.006703432649374008,
        0.0897858738899231,
        -0.011996161192655563,
        0.05664292350411415,
        0.08602143079042435,
        -0.03459727391600609,
        0.021009547635912895,
        0.0001488665584474802,
        0.012198321521282196,
        -0.025803396478295326,
        0.004333582241088152,
        0.08752776682376862,
        -0.047178883105516434,
        -0.09673786163330078,
        0.05587833374738693,
        -0.09783574193716049,
        -0.08701997995376587,
        0.002093653427436948,
        -0.02044922485947609,
        0.07414082437753677,
        -0.05351743474602699,
        -0.018074290826916695,
        0.03233715146780014,
        -0.056280046701431274,
        -0.022010434418916702,
        0.09937674552202225,
        -0.03272629529237747,
        0.002056031720712781,
        -0.017699718475341797,
        0.008346201851963997,
        -0.10786173492670059,
        0.010680715553462505,
        -0.005350304767489433,
        0.04817817732691765,
        -0.06705795228481293,
        0.05846521258354187,
        -0.08513084053993225,
        -0.05275219306349754,
        -0.10150302201509476,
        -0.004734913818538189,
        -0.009628803469240665,
        -0.04955029860138893,
        -0.04012515768408775,
        -0.03472641482949257,
        0.04906482249498367,
        -0.015704607591032982,
        -0.05153398960828781,
        -0.05103398486971855,
        0.09199520945549011,
        0.0625147670507431,
        -0.035644497722387314,
        -0.04401819035410881,
        -0.07243873924016953,
        -0.09409837424755096,
        0.029808612540364265,
        0.13599129021167755,
        -0.012849969789385796,
        0.00846609566360712,
        -0.018186170607805252,
        0.022631125524640083,
        0.0014614529209211469,
        -0.022581707686185837,
        -0.05473998934030533,
        -0.014612673781812191,
        0.10677555948495865,
        -0.058787379413843155,
        -5.855083362174073e-33,
        0.04411397874355316,
        0.035705313086509705,
        -0.07191429287195206,
        -0.0070998212322592735,
        -0.08288981765508652,
        -0.011424681171774864,
        0.03519226238131523,
        0.05649826303124428,
        -0.07788050919771194,
        0.046595748513936996,
        0.0031626394484192133,
        0.03173834830522537,
        0.030015887692570686,
        0.0058918967843055725,
        0.01898387260735035,
        0.05606440454721451,
        -0.03186267614364624,
        0.0011753503931686282,
        0.009442661888897419,
        -0.08971820026636124,
        -0.04643228277564049,
        -0.00918020959943533,
        -0.005340419709682465,
        -0.0028271919582039118,
        -0.07967384904623032,
        0.02185089886188507,
        0.07740476727485657,
        0.03407416492700577,
        0.010852286592125893,
        -0.02559012547135353,
        -0.05097654089331627,
        0.01773274689912796,
        0.01594037562608719,
        0.03185370936989784,
        -0.12255889177322388,
        -0.023133812472224236,
        0.015710651874542236,
        0.03823818638920784,
        -0.018182018771767616,
        0.04654999077320099,
        0.036447010934352875,
        -0.024329131469130516,
        -0.06092025339603424,
        -0.02829238958656788,
        -0.07617457211017609,
        -0.04914015904068947,
        0.05485804006457329,
        -0.07541047781705856,
        0.08002278208732605,
        -0.028220435604453087,
        0.06925517320632935,
        -0.11203034222126007,
        0.07818261533975601,
        -0.060972634702920914,
        -0.068016916513443,
        -0.046712759882211685,
        -0.002333354437723756,
        -0.13289324939250946,
        -0.006719629745930433,
        -0.05888044461607933,
        0.026082033291459084,
        -0.04077954217791557,
        0.04481382668018341,
        -0.09232112765312195,
        0.021691501140594482,
        -0.030811559408903122,
        -0.033369794487953186,
        0.010988720692694187,
        0.015802305191755295,
        -0.080764040350914,
        0.06226891279220581,
        -0.01693660020828247,
        -0.01228287909179926,
        0.032819122076034546,
        0.030916983261704445,
        0.007815252989530563,
        -0.05834372341632843,
        -0.0497962087392807,
        0.022962523624300957,
        -0.032368920743465424,
        0.05856046825647354,
        0.04113030061125755,
        -0.05147402733564377,
        0.02615663968026638,
        -0.06480758637189865,
        -0.06616948544979095,
        0.014011332765221596,
        0.15878145396709442,
        0.009680313058197498,
        0.021934686228632927,
        -0.009433181025087833,
        0.034980714321136475,
        0.05644938349723816,
        0.018796347081661224,
        0.04548700898885727,
        -4.3724288190105653e-8,
        -0.09426108002662659,
        -0.04277944192290306,
        -0.014905641786754131,
        -0.051112137734889984,
        -0.010152426548302174,
        -0.017793793231248856,
        0.005959503818303347,
        -0.0885443165898323,
        0.06952901929616928,
        -0.02334454655647278,
        -0.12084738165140152,
        0.055728476494550705,
        -0.025737423449754715,
        0.0009207673720084131,
        0.050048183649778366,
        -0.016397546976804733,
        -0.07220244407653809,
        0.06632009893655777,
        -0.05305885151028633,
        -0.03925536200404167,
        0.0833321288228035,
        0.006931100971996784,
        0.008987023495137691,
        -0.031018085777759552,
        0.07519438117742538,
        0.06794518232345581,
        -0.042072802782058716,
        0.003169108647853136,
        -0.06784296035766602,
        0.01029556430876255,
        -0.09267101436853409,
        -0.026007438078522682,
        -0.0350472554564476,
        -0.006572630722075701,
        -0.049645744264125824,
        0.07603000849485397,
        0.0498228445649147,
        -0.06790199875831604,
        0.07301889359951019,
        -0.0722472220659256,
        0.05633995682001114,
        -0.049437083303928375,
        -0.06341364234685898,
        0.024493418633937836,
        -0.07136009633541107,
        -0.0036470151972025633,
        0.020136643201112747,
        0.009271766059100628,
        -0.022844208404421806,
        -0.02678658626973629,
        -0.005254810210317373,
        -0.027308309450745583,
        -0.050739631056785583,
        0.011209249496459961,
        -0.10781079530715942,
        0.02105473354458809,
        0.010881954804062843,
        0.018466681241989136,
        0.0038173210341483355,
        -0.037436965852975845,
        0.030906682834029198,
        0.0027867264579981565,
        0.018261870369315147,
        -0.09658174961805344
      ]
    },
    {
      "id": "49e550d9",
      "filePath": "llm-service/src/core/prompt-template.ts",
      "content": "export class PromptTemplate {\n\tprivate systemTemplate?: string\n\tprivate userTemplate: string\n\n\tconstructor(config: PromptTemplateConfig) {\n\t\tthis.systemTemplate = config.system\n\t\tthis.userTemplate = config.user\n\t}\n\n\t/**\n\t * 渲染模板为 Messages 数组\n\t */\n\trender(variables: Record<string, string>): Message[] {\n\t\tconst messages: Message[] = []\n\n\t\tif (this.systemTemplate) {\n\t\t\tmessages.push({\n\t\t\t\trole: 'system',\n\t\t\t\tcontent: this.interpolate(this.systemTemplate, variables),\n\t\t\t})\n\t\t}\n\n\t\tmessages.push({\n\t\t\trole: 'user',\n\t\t\tcontent: this.interpolate(this.userTemplate, variables),\n\t\t})\n\n\t\treturn messages\n\t}\n\n\t/**\n\t * 变量替换: {{key}} -> value\n\t */\n\tprivate interpolate(template: string, variables: Record<string, string>): string {\n\t\treturn template.replace(/\\{\\{(\\w+)\\}\\}/g, (_, key) => {\n\t\t\tif (!(key in variables)) {\n\t\t\t\tthrow new Error(`Missing template variable: ${key}`)\n\t\t\t}\n\t\t\treturn variables[key]\n\t\t})\n\t}\n\n\t/**\n\t * 获取模板中的变量名列表\n\t */\n\tgetVariables(): string[] {",
      "startLine": 14,
      "endLine": 59,
      "type": "class",
      "name": "PromptTemplate",
      "embedding": [
        -0.03910747915506363,
        0.10381510108709335,
        0.04963751137256622,
        0.0028247309383004904,
        -0.00838785246014595,
        0.030083326622843742,
        0.083742655813694,
        0.07325054705142975,
        -0.05486821383237839,
        0.010925163514912128,
        -0.002434310270473361,
        -0.0687623992562294,
        0.02836425229907036,
        0.012897290289402008,
        0.1291627734899521,
        0.026518136262893677,
        -0.018614474684000015,
        -0.03556056320667267,
        0.011710377410054207,
        -0.019723620265722275,
        0.04477638751268387,
        0.034409299492836,
        0.030288809910416603,
        0.013214632868766785,
        0.031424399465322495,
        0.04996834322810173,
        0.02038213238120079,
        0.014042584225535393,
        0.005556208081543446,
        0.03424758464097977,
        0.0005157528212293983,
        -0.014687879011034966,
        -0.047256290912628174,
        0.03370637074112892,
        0.0063636414706707,
        0.08352400362491608,
        0.06646239757537842,
        -0.03462614119052887,
        0.00222030864097178,
        -0.0049435836263000965,
        0.042157310992479324,
        0.0930078849196434,
        -0.0460275262594223,
        -0.09328392148017883,
        0.07970073819160461,
        -0.030300041660666466,
        -0.04221610352396965,
        -0.04473808407783508,
        -0.10796698927879333,
        -0.013447055593132973,
        -0.057974331080913544,
        -0.035940077155828476,
        0.004754391498863697,
        -0.005449205636978149,
        0.052815135568380356,
        0.01680510863661766,
        0.01884847693145275,
        0.034930337220430374,
        0.028343893587589264,
        -0.07035861164331436,
        -0.03533567115664482,
        -0.05281299725174904,
        0.013713054358959198,
        -0.01727958396077156,
        0.015727583318948746,
        -0.04647616297006607,
        -0.04105377197265625,
        0.09966497123241425,
        0.03593311086297035,
        0.04551512002944946,
        -0.05673646181821823,
        0.03578587993979454,
        0.0028908983804285526,
        -0.019169123843312263,
        -0.07500135153532028,
        -0.014966477639973164,
        -0.01061907410621643,
        -0.005981319583952427,
        -0.04622437804937363,
        -0.05407257005572319,
        0.07737654447555542,
        0.018473725765943527,
        -0.026530245319008827,
        -0.04650840535759926,
        0.015574829652905464,
        0.0006856841500848532,
        -0.022954894229769707,
        -0.045816775411367416,
        0.002570071490481496,
        0.01178000122308731,
        0.06015586107969284,
        -0.05052931234240532,
        0.02636679634451866,
        0.044803764671087265,
        -0.004908683244138956,
        0.07669033855199814,
        -0.10684384405612946,
        -0.02430826798081398,
        -0.009530562907457352,
        0.05713861808180809,
        -0.036312464624643326,
        -0.043232839554548264,
        0.03817196935415268,
        -0.010573986917734146,
        0.0076286704279482365,
        -0.004220299888402224,
        -0.014128345996141434,
        0.008476386778056622,
        -0.08980689197778702,
        0.025747831910848618,
        -0.00572164636105299,
        0.04050380736589432,
        -0.03888527676463127,
        0.03213180974125862,
        0.039878230541944504,
        -0.10212565958499908,
        0.007494422607123852,
        -0.032872267067432404,
        0.021445224061608315,
        0.0926080197095871,
        0.07300800085067749,
        -0.11188405752182007,
        -0.029296817258000374,
        0.07060202956199646,
        0.03288969397544861,
        -0.0104974415153265,
        0.09189382940530777,
        8.883370235585357e-33,
        0.03415624424815178,
        0.04581976309418678,
        -0.06372788548469543,
        0.08297321945428848,
        0.10467112064361572,
        0.06616850197315216,
        0.015806177631020546,
        0.004626429174095392,
        -0.04761524498462677,
        0.03045506589114666,
        -0.05104219913482666,
        -0.002898640464991331,
        0.008229964412748814,
        -0.039286546409130096,
        -0.08003447949886322,
        -0.037613753229379654,
        0.019196627661585808,
        0.05200083181262016,
        0.058056190609931946,
        -0.007245348766446114,
        0.0749761238694191,
        0.042938292026519775,
        -0.029025211930274963,
        -0.030960429459810257,
        0.057982251048088074,
        0.013194066472351551,
        -0.014335865154862404,
        0.010524539276957512,
        -0.0463622584939003,
        -0.010579272173345089,
        0.11935992538928986,
        0.010559674352407455,
        0.038785774260759354,
        0.05386373773217201,
        -0.015709660947322845,
        -0.021091278642416,
        0.07933563739061356,
        -0.022444406524300575,
        -0.09560377150774002,
        -0.01315314881503582,
        0.048435598611831665,
        -0.06740918010473251,
        -0.03055795095860958,
        0.0945938229560852,
        -0.07085927575826645,
        -0.10098852217197418,
        0.014611444436013699,
        0.05519545078277588,
        0.02355264313519001,
        -0.05010279640555382,
        -0.0900035947561264,
        0.05405865237116814,
        -0.021846534684300423,
        -0.08256953209638596,
        0.10273120552301407,
        -0.03437492251396179,
        0.008939092047512531,
        0.013893228024244308,
        0.0034730101469904184,
        -0.07810711115598679,
        -0.06422281265258789,
        0.02235894463956356,
        0.010391371324658394,
        -0.04240131750702858,
        0.06424026936292648,
        -0.07490768283605576,
        0.02631327696144581,
        -0.1025729551911354,
        0.05423644185066223,
        -0.07963176816701889,
        -0.038583625108003616,
        -0.05631306394934654,
        -0.031910672783851624,
        0.05394110828638077,
        -0.048037122935056686,
        -0.09340810030698776,
        -0.0698915421962738,
        0.051985736936330795,
        0.00019864636124111712,
        -0.03316657617688179,
        -0.03524496778845787,
        -0.058302320539951324,
        -0.07300522923469543,
        0.07129740715026855,
        0.07670696824789047,
        -0.026960065588355064,
        -0.004812262952327728,
        -0.011354045011103153,
        0.018562601879239082,
        -0.0025891351979225874,
        -0.09228134900331497,
        -0.06034953519701958,
        -0.000633411284070462,
        0.03092113696038723,
        -0.04127195477485657,
        -9.39080029010863e-33,
        0.060138024389743805,
        0.011434497311711311,
        -0.016509881243109703,
        -0.008147398941218853,
        -0.031685758382081985,
        -0.01589840091764927,
        0.06440259516239166,
        0.027861328795552254,
        -0.03694003075361252,
        0.00044082102249376476,
        -0.04200255498290062,
        -0.01163687277585268,
        0.07599879056215286,
        0.0352109894156456,
        -0.019319020211696625,
        0.06897155940532684,
        -0.09403428435325623,
        -0.040593650192022324,
        0.023372560739517212,
        -0.06187562271952629,
        -0.009676706045866013,
        0.05642301216721535,
        -0.009755359031260014,
        0.1121819019317627,
        -0.09388954192399979,
        0.05659165233373642,
        0.05003105476498604,
        -0.011415883898735046,
        0.007723407819867134,
        0.01753542572259903,
        0.008237541653215885,
        -0.036677177995443344,
        -0.012053407728672028,
        0.0001367461372865364,
        -0.11354368925094604,
        -0.024813584983348846,
        -0.02351067028939724,
        0.04093429818749428,
        -0.08427588641643524,
        0.11271056532859802,
        0.09580247849225998,
        0.015714671462774277,
        -0.05169494450092316,
        -0.060823675245046616,
        -0.08229386061429977,
        -0.004226112272590399,
        0.08469534665346146,
        -0.03361666947603226,
        0.005714476574212313,
        -0.0016394216800108552,
        0.019030148163437843,
        -0.12239386886358261,
        0.02716301754117012,
        0.03120962157845497,
        -0.014599645510315895,
        -0.0632840022444725,
        -0.0398116335272789,
        -0.15508471429347992,
        -0.008027628064155579,
        -0.015223316848278046,
        0.10648050159215927,
        -0.048507630825042725,
        0.09914351254701614,
        -0.0570308156311512,
        0.05793185159564018,
        -0.042984168976545334,
        -0.035768136382102966,
        -0.018606891855597496,
        0.07091020047664642,
        -0.014029605314135551,
        -0.004406793974339962,
        -0.06022323668003082,
        -0.0038092960603535175,
        -0.01986583322286606,
        0.10041743516921997,
        0.00026470847660675645,
        -0.04102258384227753,
        -0.013852338306605816,
        0.02533852495253086,
        -0.02295588329434395,
        -0.010271764360368252,
        -0.048112329095602036,
        -0.038984138518571854,
        0.040702108293771744,
        -0.034056469798088074,
        -0.07876265048980713,
        0.03633283078670502,
        0.1489744335412979,
        -0.009479171596467495,
        -0.0028372553642839193,
        -0.015182774513959885,
        0.026713449507951736,
        0.017227832227945328,
        0.02459443360567093,
        0.011386828497052193,
        -5.769407351863265e-8,
        -0.0963115394115448,
        -0.020771745592355728,
        -0.03237302228808403,
        0.037193480879068375,
        -0.038238491863012314,
        -0.0472724623978138,
        0.030494099482893944,
        -0.10457517206668854,
        0.03016885183751583,
        -0.006563578732311726,
        -0.07773613929748535,
        0.020849891006946564,
        -0.0034312403295189142,
        -0.042354632169008255,
        0.05648421123623848,
        -0.03628794103860855,
        -0.06316795200109482,
        0.05407710745930672,
        -0.05049413815140724,
        -0.014578270725905895,
        0.08211572468280792,
        0.03140144422650337,
        -0.010730846785008907,
        -0.049649592489004135,
        0.09215543419122696,
        0.07460755854845047,
        -0.03152370825409889,
        -0.01073706429451704,
        -0.0020602706354111433,
        0.06328565627336502,
        -0.04961233213543892,
        -0.037773266434669495,
        0.01890573836863041,
        0.05264013260602951,
        -0.020849309861660004,
        0.021657535806298256,
        0.06940977275371552,
        -0.01555634755641222,
        0.03413667529821396,
        -0.00968948658555746,
        0.06201103329658508,
        -0.01691681705415249,
        -0.051131829619407654,
        0.04219605401158333,
        -0.03228629007935524,
        -0.04572690278291702,
        0.013770305551588535,
        0.0431671142578125,
        0.06265510618686676,
        0.057033050805330276,
        -0.0149054741486907,
        -0.04661886766552925,
        -0.10551752895116806,
        -0.01439624186605215,
        -0.048348262906074524,
        -0.02522384561598301,
        0.0517616905272007,
        0.04486418142914772,
        0.03483404219150543,
        0.00591758219525218,
        0.0210379958152771,
        -0.026323245838284492,
        -0.03132031485438347,
        -0.05947798117995262
      ]
    },
    {
      "id": "5bfb968e",
      "filePath": "llm-service/src/core/prompt-template.ts",
      "content": "const combined = (this.systemTemplate ?? '') + this.userTemplate\n\t\tconst matches = combined.matchAll(/\\{\\{(\\w+)\\}\\}/g)\n\t\treturn [...new Set([...matches].map(m => m[1]))]\n\t}\n}",
      "startLine": 60,
      "endLine": 65,
      "type": "function",
      "name": "combined",
      "embedding": [
        0.020361367613077164,
        0.07501830160617828,
        0.06560319662094116,
        -0.054056864231824875,
        -0.01345057412981987,
        0.05622787028551102,
        0.08998965471982956,
        0.033705029636621475,
        -0.0044157980009913445,
        0.06313711404800415,
        -0.05091118812561035,
        -0.0428103506565094,
        -0.02691957913339138,
        -0.024840299040079117,
        0.09597321599721909,
        0.057643208652734756,
        -0.006945278495550156,
        0.05028596892952919,
        0.06431972235441208,
        -0.04072974994778633,
        0.019420094788074493,
        0.009258793666958809,
        0.016144901514053345,
        -0.0032307705841958523,
        0.049117058515548706,
        0.09786021709442139,
        0.015893978998064995,
        -0.021732041612267494,
        0.035649675875902176,
        0.03939877450466156,
        0.019210530444979668,
        0.0037201715167611837,
        0.025653911754488945,
        0.05397249385714531,
        0.039416395127773285,
        -0.006010203156620264,
        -0.01146776508539915,
        0.027733707800507545,
        0.0166108850389719,
        -0.033928729593753815,
        0.04408462718129158,
        0.04880104586482048,
        0.000508780824020505,
        -0.0590970516204834,
        0.028764594346284866,
        0.029173849150538445,
        -0.0662190392613411,
        0.010936401784420013,
        -0.08121682703495026,
        0.026872577145695686,
        0.013194925151765347,
        -0.059447988867759705,
        -0.051534466445446014,
        -0.04862452670931816,
        0.054305363446474075,
        0.02833804301917553,
        0.00993126817047596,
        -0.01244843378663063,
        0.012782204896211624,
        -0.06537481397390366,
        -0.06389700621366501,
        -0.10022920370101929,
        -0.016932521015405655,
        0.007604788523167372,
        0.11229494214057922,
        0.0037820779252797365,
        -0.00760778458788991,
        0.14568565785884857,
        0.02770252339541912,
        0.041071269661188126,
        -0.007337458431720734,
        -0.024065302684903145,
        0.060692474246025085,
        0.015788765624165535,
        -0.06624355912208557,
        0.0635991245508194,
        -0.018322959542274475,
        -0.004439766053110361,
        0.053049612790346146,
        0.019395459443330765,
        -0.007377572823315859,
        0.0025444526690989733,
        -0.00989100243896246,
        0.006274017505347729,
        0.08362938463687897,
        -0.0017182676820084453,
        -0.08300246298313141,
        -0.05704154446721077,
        0.04448999837040901,
        -0.041102562099695206,
        -0.008057435043156147,
        -0.08690401166677475,
        0.05772251635789871,
        0.019702892750501633,
        -0.035310711711645126,
        0.04679412022233009,
        -0.022612260654568672,
        -0.009570162743330002,
        0.03692835196852684,
        0.03348175808787346,
        -0.05173426866531372,
        -0.0057906825095415115,
        0.0532810352742672,
        -0.03113630600273609,
        -0.042107295244932175,
        0.016716232523322105,
        -0.02970287948846817,
        0.010683469474315643,
        -0.0023975709918886423,
        -0.04730821028351784,
        0.03910696879029274,
        0.006388526409864426,
        0.045309338718652725,
        0.0500263050198555,
        0.0021123725455254316,
        -0.1195349395275116,
        0.07044608891010284,
        -0.06230113282799721,
        0.07560677081346512,
        0.113986536860466,
        0.03473132103681564,
        -0.09898791462182999,
        -0.05152193829417229,
        -0.025432080030441284,
        -0.026482345536351204,
        -0.01425620261579752,
        0.04243911802768707,
        5.4916377739731e-34,
        0.038510944694280624,
        0.02827378176152706,
        -0.04252513498067856,
        0.07024431228637695,
        0.10406825691461563,
        0.022919099777936935,
        -0.010809752158820629,
        -0.0027664091903716326,
        -0.11209209263324738,
        0.0871100053191185,
        -0.06025879085063934,
        0.026708228513598442,
        0.018231568858027458,
        -0.018066929653286934,
        -0.12747333943843842,
        -0.06293394416570663,
        0.06468495726585388,
        0.017715243622660637,
        -0.022644294425845146,
        -0.044626981019973755,
        -0.03515327349305153,
        0.12288514524698257,
        0.010748792439699173,
        -0.03029753267765045,
        0.07748382538557053,
        -0.018835220485925674,
        0.0014017208013683558,
        0.022093094885349274,
        0.014881731010973454,
        0.009293588809669018,
        0.09851270914077759,
        -0.00008076494123088196,
        0.021823029965162277,
        0.08964952826499939,
        -0.0034020142629742622,
        0.027121346443891525,
        0.015410848893225193,
        -0.02842695638537407,
        -0.028808699920773506,
        -0.019639207050204277,
        -0.00907130166888237,
        -0.047516267746686935,
        -0.06218310073018074,
        0.046383604407310486,
        -0.04824063181877136,
        -0.10759791731834412,
        -0.015366117469966412,
        0.021403590217232704,
        0.06772051751613617,
        -0.05703963339328766,
        0.014263622462749481,
        0.05347893014550209,
        -0.16431967914104462,
        -0.037044819444417953,
        -0.004962975159287453,
        0.009459198452532291,
        -0.02713942341506481,
        0.07570153474807739,
        0.09465888142585754,
        -0.019343996420502663,
        -0.04789621755480766,
        0.02656744420528412,
        0.02507132478058338,
        -0.004399086814373732,
        0.055750079452991486,
        -0.07997150719165802,
        0.016681009903550148,
        -0.029080821201205254,
        -0.009471002966165543,
        -0.002286892617121339,
        0.06156303733587265,
        -0.059928543865680695,
        -0.024464452639222145,
        0.03728513419628143,
        0.003387365723028779,
        -0.09487883746623993,
        0.018355200067162514,
        0.025731993839144707,
        -0.06326218694448471,
        -0.03623048588633537,
        -0.02787919156253338,
        -0.0009785640286281705,
        -0.0669700875878334,
        0.025414008647203445,
        0.08845597505569458,
        -0.00964495912194252,
        0.0005006621940992773,
        -0.06162299960851669,
        0.015526765957474709,
        -0.033035758882761,
        -0.06763673573732376,
        -0.05267246812582016,
        -0.039323534816503525,
        0.024928314611315727,
        -0.0005866253632120788,
        -1.28933742007395e-34,
        0.053643856197595596,
        0.05648743733763695,
        0.02530447021126747,
        0.008250493556261063,
        -0.07492695748806,
        -0.09046975523233414,
        0.0640743225812912,
        -0.022211814299225807,
        -0.03794921189546585,
        0.08734924346208572,
        0.09576768428087234,
        -0.019384408369660378,
        0.010595283471047878,
        -0.04220249131321907,
        -0.01471534464508295,
        0.011427181772887707,
        -0.013483662158250809,
        -0.008302838541567326,
        0.07160840183496475,
        -0.06546482443809509,
        0.03894807770848274,
        -0.024395164102315903,
        -0.0055188680998981,
        0.07046273350715637,
        -0.05396221578121185,
        0.03926786780357361,
        0.04685858264565468,
        -0.024580711498856544,
        0.02707924321293831,
        0.033291544765233994,
        0.01378535944968462,
        -0.005956969223916531,
        0.001273085130378604,
        0.026567569002509117,
        -0.11480040103197098,
        0.017326567322015762,
        -0.006353869568556547,
        0.12038224190473557,
        0.0000208243727684021,
        0.03987676277756691,
        0.004472666420042515,
        -0.021954258903861046,
        -0.014802712015807629,
        0.03545987978577614,
        -0.04742128774523735,
        -0.08351588249206543,
        0.09921246021986008,
        -0.025825081393122673,
        0.0671100988984108,
        -0.05384186655282974,
        0.01570040173828602,
        -0.11796434223651886,
        -0.034167949110269547,
        -0.02843201346695423,
        -0.037264563143253326,
        -0.09386400133371353,
        0.019186625257134438,
        -0.09592081606388092,
        -0.03842175379395485,
        -0.0535922609269619,
        0.09574864059686661,
        -0.03840002790093422,
        0.05911334604024887,
        -0.038696981966495514,
        0.1036369726061821,
        0.015304830856621265,
        -0.06436748057603836,
        0.00330552295781672,
        -0.0034573101438581944,
        -0.047085896134376526,
        0.036018114537000656,
        -0.0015240205684676766,
        -0.015826009213924408,
        0.0029985355213284492,
        0.013284174725413322,
        -0.03493693470954895,
        -0.016703665256500244,
        -0.011752981692552567,
        0.06779050827026367,
        -0.03130011260509491,
        -0.041985608637332916,
        -0.020754901692271233,
        -0.03395509719848633,
        0.030709777027368546,
        -0.07866720855236053,
        -0.028398439288139343,
        0.02152758650481701,
        0.1598118096590042,
        -0.008213207125663757,
        0.022642821073532104,
        -0.03285781666636467,
        0.025249961763620377,
        0.031799670308828354,
        0.006811767350882292,
        0.023414677008986473,
        -4.2197545013777926e-8,
        -0.09891628473997116,
        -0.06517300754785538,
        -0.05504290387034416,
        -0.020146114751696587,
        -0.04906885698437691,
        -0.0031078809406608343,
        -0.014026399701833725,
        -0.04221126809716225,
        0.002440490061417222,
        -0.04349294677376747,
        -0.021228281781077385,
        0.06586691737174988,
        -0.08420465141534805,
        -0.04014018177986145,
        0.07843101024627686,
        -0.017930060625076294,
        -0.10311951488256454,
        0.06949605792760849,
        -0.08237534761428833,
        -0.008650066331028938,
        0.0192862581461668,
        0.08002938330173492,
        0.07361093163490295,
        0.01883644424378872,
        0.05139786750078201,
        0.11388573050498962,
        -0.04223864525556564,
        -0.037199895828962326,
        -0.0003460891603026539,
        0.07724247127771378,
        -0.04875057190656662,
        -0.016499055549502373,
        -0.029771121218800545,
        -0.008100290782749653,
        -0.02632809989154339,
        0.02519088424742222,
        -0.004795398097485304,
        0.012117291800677776,
        0.03316456452012062,
        -0.02324669435620308,
        0.058512359857559204,
        -0.07139807194471359,
        -0.013935884460806847,
        0.08754105865955353,
        -0.06264584511518478,
        -0.05078061670064926,
        0.011401061899960041,
        0.023199493065476418,
        0.012566225603222847,
        -0.05220833420753479,
        0.06755495071411133,
        -0.04990772157907486,
        -0.005806548986583948,
        -0.021272655576467514,
        -0.13336239755153656,
        -0.019884498789906502,
        0.07227110117673874,
        0.042033400386571884,
        0.02644527703523636,
        0.0005244741914793849,
        0.009672839194536209,
        -0.06108694151043892,
        0.02288300171494484,
        -0.06535845249891281
      ]
    },
    {
      "id": "447d920a",
      "filePath": "llm-service/src/core/interceptor.ts",
      "content": "import type { UnifiedRequest, UnifiedResponse } from './types.js'\n\n/**\n * 拦截器接口\n * 采用洋葱模型，可拦截请求和响应\n */\nexport interface Interceptor {\n\t/** 拦截器名称 */\n\treadonly name: string\n\n\t/** 请求拦截 (可修改请求) */\n\tonRequest?(request: UnifiedRequest): UnifiedRequest | Promise<UnifiedRequest>\n\n\t/** 响应拦截 (可修改响应) */\n\tonResponse?(response: UnifiedResponse): UnifiedResponse | Promise<UnifiedResponse>\n\n\t/** 流式响应拦截 (可修改流) - Not implemented yet for simplicity */\n\n\t/** 错误处理 */\n\tonError?(error: Error): void\n}",
      "startLine": 1,
      "endLine": 22,
      "type": "other",
      "embedding": [
        -0.11792875826358795,
        -0.01412922702729702,
        0.03170857951045036,
        0.0014164577005431056,
        -0.016015131026506424,
        -0.02098196931183338,
        -0.028962092474102974,
        0.06023444980382919,
        -0.05175499618053436,
        0.039992332458496094,
        -0.019110126420855522,
        -0.03429735451936722,
        -0.051353082060813904,
        0.0471971221268177,
        0.058593206107616425,
        0.018230007961392403,
        0.0432264506816864,
        -0.06923466920852661,
        -0.055347248911857605,
        0.016429688781499863,
        0.0005579341086558998,
        0.01019207015633583,
        0.023627031594514847,
        0.02148691937327385,
        -0.007676104083657265,
        -0.049202777445316315,
        -0.024472245946526527,
        -0.022979943081736565,
        0.052639298141002655,
        -0.021567847579717636,
        0.031500816345214844,
        0.022335439920425415,
        -0.11052072048187256,
        -0.01017692405730486,
        0.0024259211495518684,
        0.06621069461107254,
        0.008399244397878647,
        -0.04491177573800087,
        0.02833971381187439,
        -0.05190620943903923,
        0.0493302084505558,
        0.05701718106865883,
        -0.016343383118510246,
        -0.07867290079593658,
        0.051754988729953766,
        -0.05196736752986908,
        -0.014835523441433907,
        -0.037847764790058136,
        -0.04805779084563255,
        -0.039882317185401917,
        0.0051593841053545475,
        0.013853155076503754,
        -0.02516409195959568,
        0.0021901107393205166,
        0.04143678396940231,
        -0.051778439432382584,
        -0.061890602111816406,
        0.03771543875336647,
        0.02592480182647705,
        0.013025380671024323,
        -0.04834587126970291,
        -0.08082357794046402,
        0.10620488226413727,
        -0.022753123193979263,
        -0.02970658615231514,
        0.04469534754753113,
        -0.02471461333334446,
        0.03767283633351326,
        0.04077403247356415,
        -0.03436805680394173,
        -0.11344818025827408,
        -0.03985832259058952,
        -0.06376999616622925,
        0.005677809007465839,
        -0.007802900392562151,
        -0.041042912751436234,
        -0.008711563423275948,
        0.04059233143925667,
        -0.011420287191867828,
        -0.05487818270921707,
        0.0639573335647583,
        -0.010792331770062447,
        -0.017071882262825966,
        0.08443710952997208,
        0.00950290635228157,
        0.0989224836230278,
        -0.05495170131325722,
        -0.022373564541339874,
        0.06906011700630188,
        -0.022721122950315475,
        0.012024004012346268,
        -0.03658552095293999,
        0.011222349479794502,
        0.09422454982995987,
        -0.08643806725740433,
        -0.04389921575784683,
        0.014054862782359123,
        0.007325281854718924,
        -0.10613220185041428,
        0.07618019729852676,
        0.00955673586577177,
        -0.001491391216404736,
        0.032979924231767654,
        -0.009662463329732418,
        -0.06493737548589706,
        -0.0015303459949791431,
        0.008545388467609882,
        -0.03559638932347298,
        0.004384081810712814,
        -0.016658706590533257,
        0.025259364396333694,
        0.01401099469512701,
        -0.054135486483573914,
        -0.05532970279455185,
        -0.0621335543692112,
        -0.04436623677611351,
        0.038910262286663055,
        -0.07205773890018463,
        0.023322293534874916,
        -0.045159947127103806,
        0.015835599973797798,
        -0.06569039821624756,
        -0.005404922179877758,
        0.010096665471792221,
        0.07899780571460724,
        -0.0795096904039383,
        0.1389283388853073,
        7.285145341004328e-33,
        -0.004148566629737616,
        0.050941064953804016,
        -0.03058074600994587,
        0.0639229267835617,
        0.024976592510938644,
        -0.09821883589029312,
        0.0814339891076088,
        -0.00037363803130574524,
        -0.05667898803949356,
        -0.02972598187625408,
        -0.0127487201243639,
        0.018468398600816727,
        -0.09372343122959137,
        -0.005611620843410492,
        -0.011482023634016514,
        -0.013957339338958263,
        0.028748339042067528,
        -0.005486110225319862,
        0.057844378054142,
        0.04809429869055748,
        0.041773319244384766,
        0.054916102439165115,
        -0.009168343618512154,
        -0.02816539630293846,
        0.009356938302516937,
        0.04568075016140938,
        0.016361242160201073,
        0.016649633646011353,
        -0.04812830686569214,
        0.003005481092259288,
        0.10001755505800247,
        0.04187984764575958,
        0.01274762861430645,
        0.06411807984113693,
        -0.019179677590727806,
        -0.041065946221351624,
        -0.009150512516498566,
        -0.023749347776174545,
        -0.09251751750707626,
        -0.04801476374268532,
        -0.05976667255163193,
        0.07004300504922867,
        -0.09877337515354156,
        -0.0205842237919569,
        0.06574315577745438,
        -0.1432209312915802,
        -0.035929977893829346,
        -0.03018340654671192,
        0.17166024446487427,
        -0.04649878293275833,
        -0.01430277619510889,
        0.039413221180438995,
        0.013231407850980759,
        -0.03338228911161423,
        0.0629439726471901,
        -0.030467629432678223,
        0.030385278165340424,
        0.06234016269445419,
        0.048161931335926056,
        -0.013606310822069645,
        0.008012207224965096,
        -0.11811097711324692,
        -0.02947475202381611,
        0.006678036414086819,
        0.06851934641599655,
        0.05423581227660179,
        -0.05826285853981972,
        -0.016798261553049088,
        -0.02971518039703369,
        -0.02983320690691471,
        -0.014003866352140903,
        -0.062355875968933105,
        -0.019350102171301842,
        0.052001968026161194,
        0.007476626895368099,
        -0.01750202849507332,
        0.002763887634500861,
        0.06882299482822418,
        0.09664266556501389,
        -0.03366262838244438,
        -0.016462162137031555,
        -0.03228599578142166,
        -0.04039527475833893,
        0.08976525813341141,
        -0.008542501367628574,
        -0.022759923711419106,
        0.013545509427785873,
        -0.030116617679595947,
        0.045142754912376404,
        0.027956858277320862,
        -0.07424896210432053,
        -0.0036166366189718246,
        -0.009955686517059803,
        -0.013156307861208916,
        -0.048337630927562714,
        -1.0272870679814535e-32,
        0.06564049422740936,
        0.020861823111772537,
        -0.12413737922906876,
        0.03099801018834114,
        -0.07367876917123795,
        0.008259706199169159,
        0.03791949898004532,
        0.05644596368074417,
        0.04246203228831291,
        0.10298267006874084,
        0.03417901322245598,
        -0.0034467303194105625,
        0.0722603127360344,
        -0.008501339703798294,
        0.0024771576281636953,
        0.006930351722985506,
        -0.0006563925999216735,
        -0.006623466499149799,
        -0.013338682241737843,
        -0.016496315598487854,
        0.01979113183915615,
        0.03209277614951134,
        -0.0009675137116573751,
        -0.017594225704669952,
        -0.05456419661641121,
        0.09745447337627411,
        0.0450451485812664,
        0.07490775734186172,
        -0.0372265987098217,
        -0.024457888677716255,
        -0.03313801437616348,
        0.006714462302625179,
        -0.0012689150171354413,
        0.02355312369763851,
        -0.08652742952108383,
        -0.0068462202325463295,
        0.004820799920707941,
        0.1169072836637497,
        -0.0627286359667778,
        -0.07606042176485062,
        0.05401941388845444,
        -0.02884756028652191,
        -0.10016725212335587,
        0.008426524698734283,
        -0.029980717226862907,
        -0.08685242384672165,
        -0.05240168794989586,
        -0.024943480268120766,
        0.03458639606833458,
        -0.059702470898628235,
        0.06383749842643738,
        -0.007643603254109621,
        0.05931919068098068,
        -0.02924203686416149,
        -0.019187960773706436,
        0.02141570672392845,
        0.13726022839546204,
        -0.11663511395454407,
        -0.025842417031526566,
        -0.03379302844405174,
        0.033710818737745285,
        -0.05362590402364731,
        -0.0027832360938191414,
        -0.008774503134191036,
        0.022059665992856026,
        0.012359966523945332,
        -0.054336003959178925,
        -0.05983936786651611,
        0.03634054586291313,
        -0.04029671102762222,
        0.016963819041848183,
        -0.032415471971035004,
        -0.00009347385639557615,
        -0.05672115832567215,
        0.0688326358795166,
        -0.03128260746598244,
        -0.04770953580737114,
        -0.12628671526908875,
        0.067936472594738,
        0.06014237552881241,
        -0.051811207085847855,
        0.0083149503916502,
        0.02206377685070038,
        0.05626007914543152,
        0.0034389658831059933,
        -0.04923051968216896,
        -0.026331322267651558,
        0.10164938122034073,
        0.039580389857292175,
        -0.009796708822250366,
        -0.00656920438632369,
        0.010374300181865692,
        -0.03526262566447258,
        0.02009812742471695,
        0.07023799419403076,
        -5.631041588571861e-8,
        -0.061539288610219955,
        -0.007475619670003653,
        -0.060913488268852234,
        -0.028840724378824234,
        -0.038342345505952835,
        -0.023055337369441986,
        -0.05127380043268204,
        -0.1329604834318161,
        -0.0034257140941917896,
        -0.04900706559419632,
        -0.05617944151163101,
        0.03200381621718407,
        -0.03506125137209892,
        0.0025956139434129,
        0.03680240362882614,
        -0.05092939734458923,
        -0.003121341811493039,
        0.044128596782684326,
        -0.09172538667917252,
        -0.053612105548381805,
        -0.05111725255846977,
        0.003425048431381583,
        0.022600483149290085,
        -0.11546177417039871,
        0.048615869134664536,
        0.07389582693576813,
        0.018634222447872162,
        0.08028091490268707,
        -0.002276490442454815,
        -0.01462200190871954,
        -0.08878907561302185,
        -0.04004570096731186,
        0.022204730659723282,
        -0.002805286319926381,
        -0.08198490738868713,
        0.08889918774366379,
        0.05374899506568909,
        -0.014835127629339695,
        0.028017595410346985,
        -0.06905834376811981,
        0.008541187271475792,
        0.017874713987112045,
        -0.04223412647843361,
        0.047003451734781265,
        0.029536457732319832,
        0.06957271695137024,
        -0.06369645893573761,
        0.010617667809128761,
        0.03548038750886917,
        -0.028305605053901672,
        -0.02608741819858551,
        -0.06409252434968948,
        -0.06320323795080185,
        -0.021190615370869637,
        -0.06166151911020279,
        0.0037802609149366617,
        -0.04941551014780998,
        -0.06395503133535385,
        0.014824425801634789,
        -0.05191057175397873,
        0.17025648057460785,
        -0.012568471021950245,
        0.03427906334400177,
        -0.022787371650338173
      ]
    },
    {
      "id": "f72bea84",
      "filePath": "llm-service/src/core/client.ts",
      "content": "import type { LLMProvider } from './provider.js'\nimport type { Interceptor } from './interceptor.js'\nimport type { UnifiedRequest, UnifiedResponse, UnifiedResponseChunk } from './types.js'\n\n/**\n * 统一 LLM 客户端\n * 封装 Provider + 拦截器链\n */",
      "startLine": 1,
      "endLine": 8,
      "type": "other",
      "embedding": [
        -0.04652806371450424,
        -0.008140983991324902,
        -0.007101504132151604,
        -0.026997949928045273,
        0.03192683309316635,
        0.012631973251700401,
        0.010490274988114834,
        0.06190153956413269,
        -0.02075154520571232,
        0.07738950103521347,
        -0.03702690452337265,
        0.0032805169466882944,
        -0.001946134609170258,
        0.07392628490924835,
        0.08942297101020813,
        0.027395866811275482,
        0.04891116917133331,
        -0.017997464165091515,
        -0.0010168824810534716,
        0.0019405996426939964,
        -0.025961313396692276,
        -0.02690034732222557,
        0.0697382465004921,
        0.052103541791439056,
        -0.04891086369752884,
        -0.03668561577796936,
        0.024199694395065308,
        0.01498620305210352,
        0.02969309501349926,
        -0.013250943273305893,
        0.0010637331288307905,
        0.002025387017056346,
        -0.07559110969305038,
        -0.011171184480190277,
        -0.00818452425301075,
        0.014604199677705765,
        0.018512316048145294,
        -0.0008251559920608997,
        0.0001495744800195098,
        -0.003968528937548399,
        0.08318191766738892,
        0.06545200943946838,
        0.03135630488395691,
        -0.08319126814603806,
        0.048628855496644974,
        -0.009616479277610779,
        -0.04113799333572388,
        0.00872259121388197,
        -0.05418740212917328,
        0.026825446635484695,
        0.019977355375885963,
        -0.04880670830607414,
        -0.07255131006240845,
        -0.016991468146443367,
        0.011386550031602383,
        -0.04553242400288582,
        -0.042167481034994125,
        0.07069332897663116,
        0.014806801453232765,
        -0.0077719492837786674,
        -0.0511663593351841,
        -0.07286659628152847,
        0.08901116251945496,
        -0.04886408522725105,
        0.04321589320898056,
        0.03623584657907486,
        -0.03415827825665474,
        0.11969039589166641,
        0.022269295528531075,
        -0.05107656866312027,
        -0.041295137256383896,
        -0.06707759946584702,
        -0.031310271471738815,
        -0.005809160880744457,
        -0.07701844722032547,
        -0.08789157122373581,
        -0.005024449434131384,
        0.12270839512348175,
        0.07818193733692169,
        -0.030084069818258286,
        0.06580059975385666,
        -0.008500919677317142,
        0.00620872899889946,
        0.09987329691648483,
        0.01816016063094139,
        0.05032149702310562,
        -0.0548257939517498,
        -0.034587983042001724,
        0.07043005526065826,
        -0.01495162770152092,
        0.006620572879910469,
        -0.06844165176153183,
        -0.01973312348127365,
        0.03178103268146515,
        -0.09674576669931412,
        -0.02126290276646614,
        -0.05420820042490959,
        0.014591997489333153,
        -0.06060061976313591,
        0.04263380169868469,
        -0.015372009947896004,
        -0.02798134833574295,
        0.020641515031456947,
        0.05463993549346924,
        -0.051014091819524765,
        0.0018601837800815701,
        -0.011613309383392334,
        0.004698170814663172,
        0.03980641812086105,
        0.011254087090492249,
        0.018720654770731926,
        0.052489571273326874,
        -0.03093557059764862,
        -0.0030375286005437374,
        0.0014383539091795683,
        -0.09670797735452652,
        0.06689493358135223,
        -0.06871835887432098,
        0.0261492021381855,
        -0.06164366751909256,
        -0.008763330057263374,
        -0.025723421946167946,
        0.0008745451923459768,
        0.00886229332536459,
        0.05850541964173317,
        -0.027605092152953148,
        0.1338600516319275,
        4.432997847198117e-33,
        -0.0017221096204593778,
        0.06784506887197495,
        -0.04440721496939659,
        0.11724968254566193,
        0.022703392431139946,
        -0.06251425296068192,
        0.07685623317956924,
        0.06403575837612152,
        -0.07058427482843399,
        0.06007969379425049,
        -0.07440019398927689,
        0.002231629565358162,
        -0.04777619615197182,
        0.0051342505030334,
        -0.0334734246134758,
        -0.034586984664201736,
        0.02208842895925045,
        -0.034902770072221756,
        0.04554273188114166,
        0.0021275943145155907,
        0.02117333374917507,
        0.09724560379981995,
        0.023644739761948586,
        -0.028873741626739502,
        0.0455530546605587,
        0.07978285104036331,
        0.04153116047382355,
        0.025875309482216835,
        -0.03540845960378647,
        0.013783490285277367,
        0.1235169917345047,
        0.03667758032679558,
        0.01955830678343773,
        0.037044625729322433,
        -0.02440447360277176,
        -0.026049772277474403,
        -0.06253567337989807,
        0.00938376970589161,
        -0.061697445809841156,
        -0.04612373933196068,
        -0.0017394409514963627,
        0.03859937936067581,
        -0.12720225751399994,
        -0.036377377808094025,
        -0.019015751779079437,
        -0.058993712067604065,
        -0.01058311015367508,
        -0.048742879182100296,
        0.17619094252586365,
        -0.07578746229410172,
        -0.029516322538256645,
        0.007719319313764572,
        0.013069060631096363,
        -0.015189121477305889,
        0.04717149958014488,
        0.0014571992214769125,
        0.004371603950858116,
        0.049531351774930954,
        0.020675454288721085,
        -0.08532534539699554,
        0.01934286765754223,
        -0.11111591756343842,
        -0.042987924069166183,
        -0.005126563366502523,
        0.12476807832717896,
        0.047134120017290115,
        -0.12195205688476562,
        0.013711392879486084,
        -0.01195979118347168,
        -0.020963234826922417,
        0.03767348453402519,
        -0.010482542216777802,
        -0.006020653061568737,
        0.03778188303112984,
        -0.01351035013794899,
        -0.0545562319457531,
        0.021055759862065315,
        0.09022759646177292,
        0.06123293191194534,
        -0.0023798260372132063,
        -0.03243556618690491,
        -0.02044024132192135,
        -0.0046705459244549274,
        0.08270511031150818,
        0.048637647181749344,
        -0.027559665963053703,
        0.006570060271769762,
        0.025409827008843422,
        0.06076241284608841,
        0.037848055362701416,
        -0.052058085799217224,
        -0.05070292949676514,
        0.005433983635157347,
        0.06789625436067581,
        -0.06102970242500305,
        -5.072253715694355e-33,
        0.010727986693382263,
        0.022177543491125107,
        -0.10218792408704758,
        0.05321267992258072,
        -0.08739999681711197,
        -0.012430589646100998,
        -0.0094556650146842,
        0.06251715868711472,
        0.0013706213794648647,
        0.112657830119133,
        0.021023055538535118,
        -0.019122403115034103,
        0.04238605499267578,
        -0.0035176961682736874,
        0.005529163405299187,
        0.0014852677704766393,
        -0.03803175687789917,
        0.007493291515856981,
        0.003645383520051837,
        -0.06109155714511871,
        -0.029654592275619507,
        -0.03530828282237053,
        0.08706308156251907,
        -0.04517219215631485,
        -0.03239879012107849,
        0.08792956173419952,
        0.1247837021946907,
        0.06461920589208603,
        0.0026964100543409586,
        -0.025127431377768517,
        -0.018365144729614258,
        0.00386718544177711,
        -0.00876204390078783,
        -0.0019221343100070953,
        -0.14129561185836792,
        -0.01280195266008377,
        -0.010347406379878521,
        0.14179053902626038,
        -0.06205390393733978,
        -0.10243988782167435,
        0.02054486609995365,
        -0.03559410199522972,
        -0.11045709252357483,
        0.022313540801405907,
        -0.019694076851010323,
        -0.058115534484386444,
        -0.03378360718488693,
        -0.02550264075398445,
        0.0898299366235733,
        -0.0582108348608017,
        0.008295256644487381,
        -0.06638598442077637,
        0.0655350312590599,
        -0.0068010808899998665,
        -0.04687948897480965,
        -0.010847323574125767,
        0.1356256604194641,
        -0.08216798305511475,
        -0.0023921257816255093,
        -0.05759001523256302,
        0.028795404359698296,
        -0.04876158386468887,
        -0.010305454954504967,
        -0.05244128778576851,
        0.00007455057493643835,
        0.008339205756783485,
        -0.05498344078660011,
        0.005775677040219307,
        0.020279156044125557,
        -0.029955092817544937,
        -0.0012484915787354112,
        -0.016329877078533173,
        -0.002619468607008457,
        -0.04345100745558739,
        0.047849390655756,
        -0.05155956372618675,
        -0.02837776578962803,
        -0.055600855499506,
        0.09722712635993958,
        -0.007525565102696419,
        -0.018068846315145493,
        -0.02078014798462391,
        -0.04297298938035965,
        0.012045778334140778,
        -0.04039954021573067,
        -0.01689678616821766,
        0.03085043653845787,
        0.07397393137216568,
        0.04371514543890953,
        -0.0022297699470072985,
        -0.02441292814910412,
        0.011746878735721111,
        -0.01930117979645729,
        -0.04257187992334366,
        0.03822428733110428,
        -4.5207780630107663e-8,
        -0.05900008976459503,
        -0.009635573253035545,
        -0.0831291675567627,
        -0.009207403287291527,
        -0.04987983778119087,
        -0.026274776086211205,
        -0.07144375890493393,
        -0.014235221780836582,
        0.02383383736014366,
        0.0015155008295550942,
        -0.049816351383924484,
        0.047195423394441605,
        -0.024016667157411575,
        0.011363105848431587,
        0.014834251254796982,
        -0.028409630060195923,
        -0.02085602469742298,
        0.06992968171834946,
        -0.07322751730680466,
        -0.012048890814185143,
        -0.05389375984668732,
        0.0030274679884314537,
        0.0813690572977066,
        -0.08270625025033951,
        0.06874841451644897,
        0.047495774924755096,
        -0.05117294564843178,
        0.027428604662418365,
        0.02192135900259018,
        -0.018323268741369247,
        -0.14023491740226746,
        -0.02259727381169796,
        -0.0035154118668287992,
        -0.00035816343734040856,
        -0.07083339989185333,
        0.07042662799358368,
        0.03248227760195732,
        -0.04617343470454216,
        0.06940272450447083,
        -0.07978639751672745,
        0.01978716254234314,
        0.004722196608781815,
        -0.021502459421753883,
        0.061592426151037216,
        -0.00040430919034406543,
        0.03144237771630287,
        -0.0483035147190094,
        0.04029049351811409,
        -0.0019457921152934432,
        -0.01720920391380787,
        -0.00041637179674580693,
        -0.04339315742254257,
        -0.038511622697114944,
        -0.016935136169195175,
        -0.06349166482686996,
        0.040083881467580795,
        -0.0012886353069916368,
        -0.1093658059835434,
        0.047632135450839996,
        -0.02903560735285282,
        0.09490175545215607,
        -0.07096866518259048,
        -0.01288309134542942,
        -0.07363547384738922
      ]
    },
    {
      "id": "101fbfc2",
      "filePath": "llm-service/src/core/client.ts",
      "content": "export class UnifiedLLMClient {\n\tprivate provider: LLMProvider\n\tprivate interceptors: Interceptor[]\n\tprivate totalCost = 0\n\tprivate totalTokens = 0\n\n\tconstructor(provider: LLMProvider, interceptors: Interceptor[] = []) {\n\t\tthis.provider = provider\n\t\tthis.interceptors = interceptors\n\t}\n\n\tasync chat(request: UnifiedRequest): Promise<UnifiedResponse> {\n\t\tlet req = { ...request }\n\n\t\t// 请求拦截 (正序)\n\t\tfor (const interceptor of this.interceptors) {\n\t\t\tif (interceptor.onRequest) {\n\t\t\t\treq = await interceptor.onRequest(req)\n\t\t\t}\n\t\t}\n\n\t\tlet response: UnifiedResponse\n\t\ttry {\n\t\t\tresponse = await this.provider.chat(req)\n\t\t} catch (error) {\n\t\t\t// 错误通知 (正序)\n\t\t\tfor (const interceptor of this.interceptors) {\n\t\t\t\tif (interceptor.onError) {\n\t\t\t\t\tinterceptor.onError(error as Error)\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow error\n\t\t}\n\n\t\t// 响应拦截 (逆序 - 洋葱模型)\n\t\tfor (let i = this.interceptors.length - 1; i >= 0; i--) {\n\t\t\tconst interceptor = this.interceptors[i]\n\t\t\tif (interceptor.onResponse) {\n\t\t\t\tresponse = await interceptor.onResponse(response)\n\t\t\t}\n\t\t}\n\n\t\t// 累计统计\n\t\tthis.totalCost += response.cost.totalCost\n\t\tthis.totalTokens += response.usage.totalTokens\n\n\t\treturn response\n\t}\n\n\tasync *chatStream(request: UnifiedRequest): AsyncIterable<UnifiedResponseChunk> {",
      "startLine": 9,
      "endLine": 58,
      "type": "class",
      "name": "UnifiedLLMClient (part 1)",
      "embedding": [
        -0.06974197179079056,
        0.047435514628887177,
        0.019973712041974068,
        0.03491842374205589,
        0.011229310184717178,
        -0.014652836136519909,
        0.036400455981492996,
        0.05538563057780266,
        0.005440314766019583,
        0.06281423568725586,
        -0.028010116890072823,
        -0.06009383872151375,
        0.008203200064599514,
        0.026561446487903595,
        0.044764358550310135,
        -0.0005922411801293492,
        0.04284820333123207,
        -0.017858732491731644,
        -0.05733300745487213,
        -0.008465049788355827,
        0.029095550999045372,
        0.04525602236390114,
        0.07035402953624725,
        0.0241834856569767,
        -0.014033982530236244,
        -0.055976469069719315,
        -0.008716737851500511,
        -0.08343735337257385,
        0.004846184514462948,
        -0.02492031268775463,
        -0.014623982831835747,
        0.02267373539507389,
        -0.13596265017986298,
        0.012604672461748123,
        -0.006814219988882542,
        0.0010319038992747664,
        -0.020512502640485764,
        -0.0008599403081461787,
        0.005348430015146732,
        -0.009697982110083103,
        0.034586407244205475,
        0.0760042816400528,
        -0.028040656819939613,
        -0.08307141810655594,
        0.08736627548933029,
        -0.09810930490493774,
        -0.03710704669356346,
        0.019805021584033966,
        0.038137443363666534,
        0.01880287379026413,
        0.040086016058921814,
        0.029075587168335915,
        -0.11047389358282089,
        0.09263567626476288,
        0.029926985502243042,
        -0.001981897745281458,
        -0.034721098840236664,
        0.04792789742350578,
        0.010453745722770691,
        -0.023432839661836624,
        -0.04115091636776924,
        -0.11886754631996155,
        0.0684649646282196,
        -0.06403930485248566,
        -0.005532273091375828,
        -0.02037118375301361,
        -0.003493682714179158,
        0.09472298622131348,
        0.03395549952983856,
        0.02597247250378132,
        -0.041123226284980774,
        -0.0077322241850197315,
        0.007425194140523672,
        -0.001010759500786662,
        -0.0434144027531147,
        -0.013943548314273357,
        0.02283862791955471,
        0.07179096341133118,
        0.016146546229720116,
        -0.053251996636390686,
        0.022779488936066628,
        -0.01625705510377884,
        0.0014229092048481107,
        0.061653416603803635,
        0.01981009729206562,
        0.04730100929737091,
        -0.03579985350370407,
        -0.04286743700504303,
        0.0317685604095459,
        -0.07074584811925888,
        0.01350905280560255,
        -0.005178577266633511,
        -0.03486182540655136,
        0.07012861222028732,
        -0.004277155734598637,
        0.008376901037991047,
        -0.03053341619670391,
        0.002478100825101137,
        -0.0473053902387619,
        0.05550725385546684,
        -0.009646916761994362,
        -0.051045894622802734,
        -0.02447223663330078,
        -0.007915218360722065,
        -0.008783931843936443,
        -0.027338782325387,
        0.04807138815522194,
        -0.059563081711530685,
        -0.003795840311795473,
        0.005455948878079653,
        -0.017755644395947456,
        0.028900425881147385,
        -0.04294956848025322,
        0.035371050238609314,
        -0.010991666465997696,
        -0.04265785589814186,
        0.056207992136478424,
        -0.06256310641765594,
        0.022327594459056854,
        -0.040074605494737625,
        0.0762573629617691,
        -0.036066461354494095,
        0.07520021498203278,
        0.009769988246262074,
        0.06471496820449829,
        -0.03697649762034416,
        0.12377018481492996,
        9.303209063241076e-33,
        0.012352456338703632,
        0.011732169426977634,
        -0.042875900864601135,
        0.0969962403178215,
        0.025115827098488808,
        0.015332411974668503,
        0.0837288647890091,
        0.031119242310523987,
        -0.016058793291449547,
        -0.015475012362003326,
        -0.0427837111055851,
        -0.031794868409633636,
        -0.02985377237200737,
        -0.025062011554837227,
        -0.013854939490556717,
        -0.042445406317710876,
        0.0183984637260437,
        -0.015451706945896149,
        0.06325484812259674,
        0.03749895095825195,
        0.01634342595934868,
        0.018531767651438713,
        -0.014065665192902088,
        -0.016152989119291306,
        0.0413665696978569,
        0.0011740950867533684,
        -0.009678155183792114,
        0.01752397045493126,
        -0.09789121896028519,
        0.008894410915672779,
        0.11304348707199097,
        0.04745490849018097,
        0.02623305656015873,
        0.03591345623135567,
        0.021683940663933754,
        -0.055211905390024185,
        0.013402171432971954,
        -0.014021279290318489,
        -0.10484237968921661,
        -0.06547684967517853,
        -0.044158343225717545,
        0.02506103739142418,
        -0.0728769302368164,
        -0.0418526753783226,
        -0.04909127205610275,
        -0.13470803201198578,
        0.01900452747941017,
        -0.021469084545969963,
        0.1464471071958542,
        -0.053543925285339355,
        -0.00043138524051755667,
        0.05105959624052048,
        0.03564069792628288,
        -0.044301699846982956,
        0.07134383171796799,
        0.007357059512287378,
        0.01575143076479435,
        0.050739847123622894,
        0.0011053148191422224,
        -0.03363581746816635,
        -0.06838331371545792,
        -0.14342331886291504,
        -0.05385174602270126,
        -0.03911832347512245,
        0.08810482174158096,
        0.11919501423835754,
        -0.10513314604759216,
        -0.0068672336637973785,
        0.006321396678686142,
        -0.07161866873502731,
        0.009204182773828506,
        -0.049340344965457916,
        0.005680744536221027,
        0.005194562952965498,
        0.0034485883079469204,
        -0.03285921737551689,
        0.022362036630511284,
        0.11607085168361664,
        0.031241057440638542,
        -0.07717336714267731,
        -0.013062910176813602,
        -0.035303667187690735,
        -0.07374334335327148,
        0.12523072957992554,
        0.02332208678126335,
        0.04448317736387253,
        0.03400508686900139,
        -0.052680738270282745,
        0.014371687546372414,
        0.08277443796396255,
        -0.07015973329544067,
        -0.023194126784801483,
        0.013115807436406612,
        0.011335887014865875,
        -0.049270447343587875,
        -8.760873438654105e-33,
        0.009780691005289555,
        0.08724625408649445,
        -0.09592849761247635,
        0.004314830526709557,
        -0.03383339196443558,
        0.015317772515118122,
        0.05658632516860962,
        0.023739559575915337,
        -0.0135419312864542,
        0.04115400090813637,
        -0.008662834763526917,
        -0.00934329442679882,
        -0.011275175027549267,
        0.024645201861858368,
        -0.012283746153116226,
        0.020498476922512054,
        0.01334545761346817,
        -0.048751093447208405,
        0.019215721637010574,
        -0.04108006879687309,
        -0.010502152144908905,
        -0.010148542001843452,
        0.08077600598335266,
        -0.038626715540885925,
        -0.03469505533576012,
        0.10382609814405441,
        0.03363694250583649,
        0.07726185768842697,
        -0.0024964658077806234,
        -0.05690651759505272,
        0.0289896372705698,
        -0.06386572867631912,
        -0.04242924228310585,
        0.023640332743525505,
        -0.0025565389078110456,
        -0.04692378267645836,
        0.03351745754480362,
        0.1429683417081833,
        -0.07430210709571838,
        -0.05583759769797325,
        0.08336735516786575,
        -0.06849056482315063,
        -0.0882970541715622,
        -0.012746812775731087,
        0.011006629094481468,
        -0.11047127842903137,
        0.0461314432322979,
        0.0015419950941577554,
        -0.015930088236927986,
        0.005609874613583088,
        0.06180500611662865,
        -0.08412235975265503,
        0.006024465896189213,
        0.06865283846855164,
        -0.033081039786338806,
        0.002611299743875861,
        0.16306373476982117,
        -0.09061048179864883,
        0.08041916787624359,
        -0.05034884065389633,
        0.023783504962921143,
        -0.06947468966245651,
        0.017141053453087807,
        0.006257387809455395,
        0.04960617423057556,
        -0.01754976622760296,
        -0.03240964934229851,
        -0.022041650488972664,
        0.07162855565547943,
        0.08280335366725922,
        -0.017003919929265976,
        0.00490219471976161,
        -0.031524643301963806,
        -0.06723301112651825,
        0.07880578935146332,
        -0.01882307045161724,
        -0.027740534394979477,
        -0.12930837273597717,
        0.0948307067155838,
        0.04232039302587509,
        -0.10339844971895218,
        -0.05033941566944122,
        -0.01309788879007101,
        0.0036155227571725845,
        -0.03344060108065605,
        -0.026532964780926704,
        0.03833118826150894,
        0.08791519701480865,
        0.029254212975502014,
        0.011180535890161991,
        -0.05618290603160858,
        -0.049259595572948456,
        -0.026401225477457047,
        -0.039161164313554764,
        0.011761274188756943,
        -6.031940102957378e-8,
        -0.07035097479820251,
        -0.008814915083348751,
        -0.034183140844106674,
        0.03264697268605232,
        0.004252935294061899,
        -0.04582521691918373,
        -0.04748481512069702,
        -0.07843071967363358,
        -0.01364278607070446,
        -0.036545660346746445,
        -0.01790527254343033,
        0.04141278192400932,
        0.020789265632629395,
        -0.030555998906493187,
        0.01665075682103634,
        -0.06435234099626541,
        0.0069558811374008656,
        -0.01938007026910782,
        -0.09730132669210434,
        -0.03506692498922348,
        -0.04150112345814705,
        0.019014865159988403,
        -0.015934675931930542,
        -0.016532128676772118,
        0.05088904872536659,
        0.06140722706913948,
        0.07901393622159958,
        0.06364414840936661,
        0.030348744243383408,
        0.013062126003205776,
        -0.10684500634670258,
        -0.02956474758684635,
        0.03057432919740677,
        0.008868466131389141,
        -0.06362693011760712,
        0.00818832591176033,
        0.039835646748542786,
        -0.04156409949064255,
        0.06503769755363464,
        0.03812873736023903,
        0.029259098693728447,
        0.02150578610599041,
        0.03482094034552574,
        0.046880368143320084,
        0.038401976227760315,
        0.009902171790599823,
        -0.05063095688819885,
        -0.04352904483675957,
        0.07051568478345871,
        -0.009257606230676174,
        -0.043025270104408264,
        -0.08766461163759232,
        -0.07595901191234589,
        -0.0005845048581250012,
        -0.08237148821353912,
        -0.05454889312386513,
        0.008059155195951462,
        -0.10976066440343857,
        0.05507701262831688,
        0.003965355921536684,
        0.07793179154396057,
        -0.021619360893964767,
        -0.014039729721844196,
        -0.04056442901492119
      ]
    },
    {
      "id": "418fc5cb",
      "filePath": "llm-service/src/core/client.ts",
      "content": "return response\n\t}\n\n\tasync *chatStream(request: UnifiedRequest): AsyncIterable<UnifiedResponseChunk> {\n\t\tlet req = { ...request }\n\n\t\t// Interceptors: onRequest\n\t\tfor (const interceptor of this.interceptors) {\n\t\t\tif (interceptor.onRequest) {\n\t\t\t\treq = await interceptor.onRequest(req)\n\t\t\t}\n\t\t}\n\n\t\tif (!this.provider.chatStream) {\n\t\t\tthrow new Error(`Provider ${this.provider.name} does not support streaming`)\n\t\t}\n\n\t\ttry {\n\t\t\tconst stream = this.provider.chatStream(req)\n\n\t\t\tfor await (const chunk of stream) {\n\t\t\t\t// Track usage if available in the chunk (usually last chunk)\n\t\t\t\tif (chunk.cost) {\n\t\t\t\t\tthis.totalCost += chunk.cost.totalCost\n\t\t\t\t}\n\t\t\t\tif (chunk.usage) {\n\t\t\t\t\tthis.totalTokens += chunk.usage.totalTokens\n\t\t\t\t}\n\t\t\t\tyield chunk\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tfor (const interceptor of this.interceptors) {\n\t\t\t\tif (interceptor.onError) {\n\t\t\t\t\tinterceptor.onError(error as Error)\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow error\n\t\t}\n\t}\n\n\t/** 获取累计成本 (USD) */\n\tgetTotalCost(): number {\n\t\treturn this.totalCost\n\t}\n\n\t/** 获取累计 Token 消耗 */\n\tgetTotalTokens(): number {\n\t\treturn this.totalTokens\n\t}",
      "startLine": 54,
      "endLine": 103,
      "type": "class",
      "name": "UnifiedLLMClient (part 2)",
      "embedding": [
        -0.07887333631515503,
        0.0495426245033741,
        0.021375730633735657,
        0.017828669399023056,
        0.042026832699775696,
        -0.006510937586426735,
        0.04277502000331879,
        0.016901863738894463,
        0.02716660499572754,
        0.0403287336230278,
        -0.049396123737096786,
        -0.05698955059051514,
        -0.030112506821751595,
        0.06476772576570511,
        0.05233412981033325,
        -0.029703330248594284,
        0.06655348837375641,
        -0.03711320087313652,
        -0.02990748919546604,
        -0.0679004043340683,
        0.01996872015297413,
        -0.040010325610637665,
        0.039658136665821075,
        0.050212688744068146,
        0.047719985246658325,
        -0.04573493078351021,
        -0.014425470493733883,
        -0.0703573003411293,
        0.04504777118563652,
        -0.00935194082558155,
        0.04624676704406738,
        0.03333301469683647,
        -0.1298498660326004,
        -0.02653706632554531,
        -0.027456358075141907,
        0.018993526697158813,
        -0.007091928273439407,
        -0.018709419295191765,
        -0.03653353080153465,
        0.010084351524710655,
        0.1037282645702362,
        0.062445491552352905,
        -0.04315385967493057,
        -0.06457240879535675,
        0.04779532179236412,
        -0.06463152915239334,
        -0.04157717898488045,
        0.007086397148668766,
        -0.02769683301448822,
        0.05556240305304527,
        -0.007842355407774448,
        -0.0009691150044091046,
        -0.06916206330060959,
        0.1018042042851448,
        0.022626373916864395,
        -0.02010830119252205,
        -0.03359418362379074,
        0.06705919653177261,
        0.006942126899957657,
        -0.012514224275946617,
        -0.05296985059976578,
        -0.1171809583902359,
        0.04552342742681503,
        -0.07270100712776184,
        -0.01628985069692135,
        -0.00860107596963644,
        -0.02089967578649521,
        0.12398510426282883,
        0.03874018415808678,
        0.03829890862107277,
        0.0024499071296304464,
        0.018320180475711823,
        0.02159826084971428,
        -0.02593175321817398,
        -0.06225815415382385,
        -0.042019378393888474,
        0.04703063145279884,
        0.04238451272249222,
        0.017947325482964516,
        -0.025782490149140358,
        0.020296869799494743,
        -0.013449374586343765,
        0.03861391544342041,
        -0.00973011739552021,
        0.03629879653453827,
        0.03878647834062576,
        -0.00408205995336175,
        -0.08088887482881546,
        0.024020390585064888,
        -0.055418286472558975,
        -0.028676463291049004,
        0.02782519720494747,
        0.01716514676809311,
        0.0668007954955101,
        0.01487794890999794,
        0.030308030545711517,
        -0.04791170731186867,
        0.009926056489348412,
        -0.023472901433706284,
        0.026173250749707222,
        0.01190987415611744,
        0.021463893353939056,
        0.013621504418551922,
        0.01437865849584341,
        -0.0004992922185920179,
        -0.0713251605629921,
        0.005033689085394144,
        0.057162098586559296,
        0.04108599200844765,
        0.027806919068098068,
        -0.041475728154182434,
        0.040168050676584244,
        -0.002645708154886961,
        0.03051741048693657,
        -0.03837784007191658,
        -0.010932885110378265,
        0.017768319696187973,
        -0.09091708809137344,
        0.016275322064757347,
        0.01919969916343689,
        0.0536944679915905,
        -0.03597600758075714,
        0.01957724429666996,
        0.03172288462519646,
        0.07721889764070511,
        -0.004160468466579914,
        0.1221538782119751,
        7.537844300336472e-33,
        -0.011364211328327656,
        0.018679892644286156,
        -0.05804383382201195,
        0.10113943368196487,
        0.02275802567601204,
        0.017799288034439087,
        0.055994488298892975,
        0.042717188596725464,
        -0.024251386523246765,
        -0.02071996033191681,
        -0.04835429787635803,
        -0.009840344078838825,
        -0.06111390143632889,
        -0.027621930465102196,
        -0.01618884690105915,
        -0.08736550062894821,
        -0.010712217539548874,
        -0.006563854869455099,
        0.08029896020889282,
        0.029649507254362106,
        0.013676200993359089,
        0.018856989219784737,
        -0.012689618393778801,
        -0.06768232583999634,
        0.021495342254638672,
        -0.008184082806110382,
        0.010201836004853249,
        -0.01245526596903801,
        -0.03929263725876808,
        0.015770768746733665,
        0.08610354363918304,
        0.041130874305963516,
        0.03607533127069473,
        0.02539673261344433,
        0.05576641857624054,
        -0.07391411811113358,
        0.007013148162513971,
        -0.029665689915418625,
        -0.1417035162448883,
        -0.053679436445236206,
        -0.022763531655073166,
        0.043599456548690796,
        -0.1105150356888771,
        -0.03539154678583145,
        -0.0904107391834259,
        -0.1180611178278923,
        0.015901857987046242,
        -0.03239590674638748,
        0.09869140386581421,
        -0.03204943612217903,
        -0.03095114231109619,
        0.05882050469517708,
        0.019633611664175987,
        -0.01414271630346775,
        0.07871410250663757,
        -0.010990564711391926,
        0.0004495079629123211,
        0.030448630452156067,
        0.0174117311835289,
        -0.03651263937354088,
        -0.04198874533176422,
        -0.12859928607940674,
        -0.04101262614130974,
        -0.009264077991247177,
        0.08168118447065353,
        0.10362423211336136,
        -0.05831874907016754,
        -0.00514086801558733,
        0.01859208755195141,
        -0.07170512527227402,
        -0.002885828958824277,
        -0.019966216757893562,
        0.0011125181335955858,
        0.012630474753677845,
        0.02354155108332634,
        -0.04253923520445824,
        0.041300978511571884,
        0.07294338196516037,
        0.014519253745675087,
        -0.026503173634409904,
        0.01657216064631939,
        -0.06484565883874893,
        0.006959687918424606,
        0.1380939930677414,
        0.02040356583893299,
        0.05168914794921875,
        0.024809755384922028,
        -0.07847554236650467,
        0.014377937652170658,
        0.07353205978870392,
        -0.07052253186702728,
        -0.0035129047464579344,
        0.03558121994137764,
        -0.0002843596739694476,
        -0.032655853778123856,
        -5.873164301999643e-33,
        -0.0047017899341881275,
        0.04558505490422249,
        -0.08451280742883682,
        -0.00161530333571136,
        0.02199038676917553,
        -0.014595435932278633,
        0.04953344911336899,
        0.0717170313000679,
        0.06663042306900024,
        0.037511177361011505,
        -0.03447026386857033,
        -0.024933351203799248,
        -0.042815640568733215,
        0.04843268543481827,
        -0.051612719893455505,
        -0.014054715633392334,
        0.01747433841228485,
        -0.07714610546827316,
        0.046682920306921005,
        -0.04143607243895531,
        -0.0623946376144886,
        -0.0391642302274704,
        0.04553822800517082,
        -0.024263693019747734,
        -0.013333877548575401,
        0.12537986040115356,
        0.04334944859147072,
        0.043953437358140945,
        -0.013073145411908627,
        -0.07085797190666199,
        0.055004045367240906,
        -0.07554107904434204,
        -0.06063370034098625,
        -0.0028616562485694885,
        -0.018961692228913307,
        -0.005817573983222246,
        0.041864246129989624,
        0.19658231735229492,
        -0.10429789125919342,
        -0.01922881044447422,
        0.07399960607290268,
        -0.04823410511016846,
        -0.08319104462862015,
        -0.04550801217556,
        0.028166750445961952,
        -0.08636271208524704,
        0.030211525037884712,
        -0.01929427869617939,
        -0.03223695605993271,
        0.015798229724168777,
        0.050511136651039124,
        -0.08258508890867233,
        0.017879879102110863,
        0.0811433494091034,
        -0.05048631131649017,
        -0.017454475164413452,
        0.16521821916103363,
        -0.06192184239625931,
        0.050049666315317154,
        -0.08111110329627991,
        0.034615643322467804,
        -0.024160927161574364,
        -0.012992504984140396,
        -0.02282879501581192,
        0.05631417781114578,
        0.010330275632441044,
        0.006034317892044783,
        0.012835522182285786,
        0.11480490863323212,
        0.03795664757490158,
        -0.000956690579187125,
        -0.017995383590459824,
        -0.0243398305028677,
        -0.036465927958488464,
        0.08106966316699982,
        0.017919857054948807,
        -0.046083878725767136,
        -0.1011710986495018,
        0.093121737241745,
        0.025655362755060196,
        -0.0999307930469513,
        -0.03049566224217415,
        -0.004623585380613804,
        0.0055279540829360485,
        0.013025911524891853,
        -0.0003797296667471528,
        0.07794933766126633,
        0.037076979875564575,
        0.008477658033370972,
        -0.0023522712290287018,
        0.001567745115607977,
        -0.04755473881959915,
        -0.0922219306230545,
        0.01611431874334812,
        0.04693853110074997,
        -5.8389790780211115e-8,
        -0.07536578923463821,
        -0.03035781718790531,
        -0.08828814327716827,
        0.028717100620269775,
        0.022484736517071724,
        -0.08193747699260712,
        -0.006415479350835085,
        -0.057182904332876205,
        0.005554042290896177,
        -0.006047708913683891,
        -0.03737514838576317,
        0.015821127220988274,
        0.021554667502641678,
        -0.03486406430602074,
        0.002208622172474861,
        -0.08869139105081558,
        -0.01895744539797306,
        0.0027404935099184513,
        -0.09336031228303909,
        -0.014327114447951317,
        -0.037355877459049225,
        0.03775665909051895,
        -0.016050798818469048,
        -0.04070795699954033,
        0.020960209891200066,
        0.04169922694563866,
        0.10472837835550308,
        0.06400102376937866,
        0.04299353063106537,
        -0.042306505143642426,
        -0.11474598199129105,
        0.01695866882801056,
        0.02449318952858448,
        -0.004741249606013298,
        -0.04546341300010681,
        0.012797561474144459,
        -0.0016857079463079572,
        -0.012878218665719032,
        0.036193348467350006,
        0.07427553087472916,
        0.05933745950460434,
        0.03145952895283699,
        0.045359499752521515,
        0.03562978282570839,
        0.05912746116518974,
        0.028290817514061928,
        -0.07622241228818893,
        -0.028945522382855415,
        0.08525160700082779,
        0.004911229480057955,
        -0.031136684119701385,
        -0.027961773797869682,
        -0.06861324608325958,
        0.0028032863046973944,
        -0.004517819732427597,
        -0.09337474405765533,
        0.01379313226789236,
        -0.10866711288690567,
        0.0036378244403749704,
        -0.01569138467311859,
        0.07714724540710449,
        -0.019196683540940285,
        0.007239936850965023,
        -0.005036276299506426
      ]
    },
    {
      "id": "46052a76",
      "filePath": "llm-service/src/core/client.ts",
      "content": "/** 获取累计 Token 消耗 */\n\tgetTotalTokens(): number {\n\t\treturn this.totalTokens\n\t}\n\n\t/** 重置统计 */\n\tresetStats(): void {\n\t\tthis.totalCost = 0\n\t\tthis.totalTokens = 0\n\t}\n}",
      "startLine": 99,
      "endLine": 110,
      "type": "class",
      "name": "UnifiedLLMClient (part 3)",
      "embedding": [
        -0.06415542215108871,
        0.021039705723524094,
        0.00879098754376173,
        -0.0023175105452537537,
        -0.07637012749910355,
        0.05902128294110298,
        0.030896563082933426,
        0.04135201498866081,
        0.03369900956749916,
        0.038956351578235626,
        -0.002929670037701726,
        -0.03511758893728256,
        0.029248462989926338,
        -0.015865905210375786,
        0.01822543889284134,
        0.03258274495601654,
        0.036071278154850006,
        0.06699901074171066,
        0.001277425792068243,
        -0.05323129519820213,
        -0.0068160612136125565,
        0.049715567380189896,
        -0.0069310483522713184,
        0.006970052141696215,
        0.10561017692089081,
        -0.02707674168050289,
        -0.02233484573662281,
        -0.060926053673028946,
        0.030533000826835632,
        0.05363127961754799,
        -0.06061604246497154,
        0.06553886830806732,
        -0.07601422071456909,
        -0.024591023102402687,
        0.04228793457150459,
        0.023661352694034576,
        -0.04728986322879791,
        0.04958976060152054,
        0.04335058853030205,
        0.045156463980674744,
        0.07509998977184296,
        -0.0029382414650171995,
        0.006532132625579834,
        -0.06164233013987541,
        0.052665773779153824,
        0.026811353862285614,
        -0.0853518545627594,
        -0.03251652047038078,
        -0.00993584655225277,
        0.09012139588594437,
        0.09328744560480118,
        0.03602336719632149,
        -0.04921891167759895,
        0.016497401520609856,
        0.008376052603125572,
        -0.07949737459421158,
        -0.03562219440937042,
        0.07752957195043564,
        -0.024156024679541588,
        0.005485749803483486,
        -0.039870020002126694,
        -0.07459219545125961,
        0.0720880776643753,
        -0.05504368618130684,
        0.063514843583107,
        0.0232169758528471,
        -0.028706183657050133,
        0.053723886609077454,
        0.017443513497710228,
        -0.00626246677711606,
        0.04112767428159714,
        0.002800511661916971,
        0.05659135803580284,
        -0.009897634387016296,
        -0.06970203667879105,
        0.03426114842295647,
        0.012359082698822021,
        0.08305446058511734,
        0.08055853843688965,
        0.0016043580835685134,
        0.04208994284272194,
        -0.016127964481711388,
        0.032954975962638855,
        0.028673380613327026,
        0.018123332411050797,
        0.048555172979831696,
        -0.019975481554865837,
        -0.0391509085893631,
        0.04312912002205849,
        -0.01173917856067419,
        0.012478484772145748,
        0.05288253352046013,
        -0.028366640210151672,
        0.012109590694308281,
        -0.05879480019211769,
        -0.04424092546105385,
        -0.0956958532333374,
        0.018635110929608345,
        -0.061626795679330826,
        0.057844195514917374,
        -0.04645648971199989,
        0.010150001384317875,
        0.018105363473296165,
        0.039122872054576874,
        -0.019042927771806717,
        -0.023118743672966957,
        0.03821061924099922,
        -0.031132398173213005,
        0.013966068625450134,
        -0.003025815822184086,
        0.03617481887340546,
        0.0003120591281913221,
        -0.004369474481791258,
        0.050314970314502716,
        -0.06034425273537636,
        -0.08688382059335709,
        0.09844859689474106,
        -0.01674136519432068,
        0.02908407151699066,
        0.02987029030919075,
        0.026931392028927803,
        -0.05925772339105606,
        -0.04395158588886261,
        -0.0012606832897290587,
        -0.08011701703071594,
        -0.009602767415344715,
        0.14026866853237152,
        6.944861032276384e-33,
        -0.005866557359695435,
        -0.04389938712120056,
        0.02622227929532528,
        0.07006242126226425,
        0.026493137702345848,
        -0.03833707422018051,
        0.042558908462524414,
        0.04670275002717972,
        -0.013626565225422382,
        -0.0020951549522578716,
        -0.04351915046572685,
        0.06101466342806816,
        -0.017905568704009056,
        -0.01660391315817833,
        -0.08193573355674744,
        -0.0882052555680275,
        0.04333285987377167,
        -0.004394250456243753,
        0.07090408354997635,
        -0.0956605076789856,
        0.017247803509235382,
        0.0866456925868988,
        0.004855880979448557,
        -0.05241820588707924,
        0.028917232528328896,
        0.03863590955734253,
        0.01789049804210663,
        0.0026144052390009165,
        -0.04746303707361221,
        0.03638370335102081,
        0.07773769646883011,
        0.052504830062389374,
        0.023414546623826027,
        0.03735915943980217,
        -0.08296864479780197,
        0.011070845648646355,
        -0.06987333297729492,
        0.008902397938072681,
        -0.02621140517294407,
        -0.08605123311281204,
        -0.021711478009819984,
        0.009436170570552349,
        -0.07087456434965134,
        -0.0669722929596901,
        -0.13341867923736572,
        -0.05908184126019478,
        0.004283431451767683,
        0.001235635718330741,
        0.09984055906534195,
        -0.027913423255085945,
        -0.01914120465517044,
        0.041045933961868286,
        -0.08884912729263306,
        -0.021775007247924805,
        -0.008797939866781235,
        -0.04750973358750343,
        -0.03459332138299942,
        0.054779525846242905,
        -0.03510972484946251,
        -0.06314324587583542,
        0.0011336624156683683,
        -0.06310644000768661,
        0.03701678290963173,
        -0.04057019576430321,
        0.07140590250492096,
        0.03822007030248642,
        -0.04282581806182861,
        -0.05342230200767517,
        0.00857207179069519,
        -0.056685056537389755,
        0.03256852552294731,
        0.0052689374424517155,
        -0.014851068146526814,
        -0.021021313965320587,
        -0.01080175768584013,
        -0.040646348148584366,
        0.11389974504709244,
        0.03069126419723034,
        -0.07109136879444122,
        -0.02074240706861019,
        0.047850992530584335,
        -0.014074315316975117,
        -0.01100960373878479,
        0.023277826607227325,
        0.11254264414310455,
        0.033097121864557266,
        0.001928600249812007,
        0.030026476830244064,
        0.0025441176258027554,
        -0.01428807433694601,
        0.004812594968825579,
        -0.08444567769765854,
        0.012283697724342346,
        0.08822038024663925,
        -0.08784113824367523,
        -6.212312054627135e-33,
        -0.03640209883451462,
        0.08315146714448929,
        -0.04832368716597557,
        0.008962242864072323,
        -0.06111082434654236,
        -0.012154319323599339,
        0.009894130751490593,
        0.0563979409635067,
        -0.06076625734567642,
        0.14478141069412231,
        0.06254405528306961,
        0.0008072954951785505,
        -0.053466010838747025,
        0.04014113172888756,
        -0.025313254445791245,
        0.0293174609541893,
        -0.03657735511660576,
        0.004919921047985554,
        -0.007083757780492306,
        0.004693286959081888,
        -0.0038408234249800444,
        0.020979391410946846,
        0.026989979669451714,
        0.034434884786605835,
        -0.04228697717189789,
        0.08546285331249237,
        0.027469538152217865,
        0.03340885788202286,
        0.008405029773712158,
        -0.025845084339380264,
        0.0829651728272438,
        -0.06084040179848671,
        -0.024696597829461098,
        0.030118919909000397,
        -0.11993064731359482,
        -0.06345665454864502,
        0.06698612123727798,
        0.10351818799972534,
        0.008085341192781925,
        0.022481031715869904,
        0.03605787083506584,
        -0.08028464019298553,
        -0.056660715490579605,
        0.010048037394881248,
        0.00841086357831955,
        -0.09691399335861206,
        0.1176183745265007,
        -0.08096692711114883,
        0.03408634290099144,
        -0.048178479075431824,
        0.061508625745773315,
        -0.11751831322908401,
        0.04427114129066467,
        0.0656626746058464,
        -0.066629558801651,
        0.07646095007658005,
        0.14798125624656677,
        -0.08467186242341995,
        0.005257456097751856,
        -0.08593805134296417,
        0.04658832028508186,
        -0.04802844673395157,
        -0.03241732716560364,
        -0.003603613469749689,
        -0.02113947458565235,
        0.0465322807431221,
        -0.006966801360249519,
        0.0074623581022024155,
        -0.029016340151429176,
        -0.04629533737897873,
        0.0305216982960701,
        0.05910467356443405,
        -0.038450535386800766,
        -0.050051070749759674,
        -0.00405720341950655,
        0.02192210778594017,
        0.01904739998281002,
        -0.08073949813842773,
        0.05478793382644653,
        -0.018804583698511124,
        -0.04141481593251228,
        -0.07007816433906555,
        -0.016357963904738426,
        0.009139154106378555,
        -0.09235209226608276,
        -0.06762411445379257,
        0.07146245241165161,
        0.06990021467208862,
        0.005390336271375418,
        0.056362736970186234,
        -0.09483352303504944,
        0.001888410421088338,
        0.011905374936759472,
        0.003697814652696252,
        0.030048631131649017,
        -4.48912906847454e-8,
        -0.05055053532123566,
        -0.08805788308382034,
        -0.05954297259449959,
        0.030787890776991844,
        -0.01510013360530138,
        -0.06293264776468277,
        -0.06750451028347015,
        0.051548201590776443,
        0.0075890920124948025,
        -0.0031631579622626305,
        -0.04413749650120735,
        -0.01361110806465149,
        -0.07927499711513519,
        -0.10372238606214523,
        0.02876589447259903,
        -0.005440845154225826,
        -0.01587793044745922,
        0.05542006716132164,
        -0.02232358418405056,
        0.013915374875068665,
        -0.025634203106164932,
        0.00018791790353134274,
        0.09373892843723297,
        -0.08314245939254761,
        0.047341328114271164,
        0.018330641090869904,
        0.0069450996816158295,
        0.12977218627929688,
        -0.0034988895058631897,
        -0.0164729543030262,
        -0.07951667904853821,
        -0.009185438975691795,
        0.011589640751481056,
        -0.006770698353648186,
        -0.13382083177566528,
        0.02952205389738083,
        -0.013993467204272747,
        -0.041040606796741486,
        0.03728276118636131,
        -0.011715325526893139,
        0.0269927941262722,
        -0.00319596822373569,
        -0.009655633941292763,
        0.07546550035476685,
        -0.02295476198196411,
        0.026032863184809685,
        -0.062348511070013046,
        0.007697092369198799,
        -0.029300611466169357,
        -0.07860783487558365,
        -0.016471976414322853,
        -0.00742582930251956,
        -0.03789394348859787,
        0.014743585139513016,
        -0.10534895211458206,
        -0.013400786556303501,
        -0.007436834275722504,
        -0.021101824939250946,
        0.016866039484739304,
        0.06543206423521042,
        -0.004122357815504074,
        -0.00865496601909399,
        -0.0649796649813652,
        -0.06922457367181778
      ]
    },
    {
      "id": "65a25171",
      "filePath": "04-code-janitor/sandbox/src/utils.ts",
      "content": "export function capitalize(str: string): string {\n\tif (!str) return '';\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n/**\n * 反转字符串\n */",
      "startLine": 9,
      "endLine": 16,
      "type": "function",
      "name": "capitalize",
      "embedding": [
        0.01182288583368063,
        0.02955975942313671,
        0.03243087977170944,
        0.03529296815395355,
        0.017281504347920418,
        -0.01744760386645794,
        -0.0005083772703073919,
        -0.0035093643236905336,
        0.008492221124470234,
        0.0027157070580869913,
        0.025642154738307,
        -0.024707302451133728,
        -0.04814525693655014,
        0.0025501614436507225,
        0.0472131073474884,
        -0.026917949318885803,
        -0.08955308049917221,
        0.016000747680664062,
        -0.027587754651904106,
        -0.009784326888620853,
        -0.021373290568590164,
        0.010972672142088413,
        -0.028038015589118004,
        0.004331928212195635,
        0.10151438415050507,
        -0.06074938923120499,
        0.0709870383143425,
        0.014475131407380104,
        -0.04475122690200806,
        -0.015585177578032017,
        0.025205351412296295,
        -0.04425232112407684,
        0.025781450793147087,
        -0.05526500195264816,
        0.05823024734854698,
        0.07431838661432266,
        -0.05904826521873474,
        -0.020443633198738098,
        0.11298412829637527,
        -0.0075649069622159,
        0.0012874192325398326,
        -0.03381604701280594,
        0.06426557153463364,
        -0.049996137619018555,
        0.029464470222592354,
        0.0021586203947663307,
        -0.03453737497329712,
        -0.009586735628545284,
        0.016280779615044594,
        0.037648964673280716,
        -0.04579026624560356,
        -0.032908741384744644,
        -0.09102887660264969,
        -0.005093016196042299,
        0.03638134524226189,
        -0.0070855082012712955,
        -0.02740424871444702,
        -0.018741320818662643,
        -0.0057918536476790905,
        -0.05554644390940666,
        -0.07012636214494705,
        -0.004878117702901363,
        0.08329778164625168,
        -0.052638906985521317,
        0.08886584639549255,
        0.027316322550177574,
        0.01820804364979267,
        0.050290413200855255,
        -0.0690419152379036,
        0.030228514224290848,
        0.004640335217118263,
        -0.03719744086265564,
        -0.060790713876485825,
        0.05010261759161949,
        -0.08743735402822495,
        -0.05139344185590744,
        -0.0698205828666687,
        0.06654636561870575,
        0.09043743461370468,
        0.06821880489587784,
        0.014514179900288582,
        -0.030125048011541367,
        -0.03610551357269287,
        0.05767567828297615,
        -0.04502948001027107,
        0.1032765656709671,
        -0.009479930624365807,
        -0.04419040307402611,
        0.00921753142029047,
        0.029110392555594444,
        0.0020196428522467613,
        -0.017830701544880867,
        0.0833887830376625,
        0.047839973121881485,
        -0.14419764280319214,
        -0.04377608746290207,
        -0.07437431812286377,
        0.0900648906826973,
        -0.06362945586442947,
        0.030459849163889885,
        -0.029678666964173317,
        0.003416655119508505,
        0.04062289372086525,
        -0.1170371025800705,
        -0.02055473066866398,
        0.05194268003106117,
        0.07007484883069992,
        -0.089512899518013,
        0.03308125212788582,
        -0.06443901360034943,
        -0.04118615388870239,
        0.10819853097200394,
        -0.0349205881357193,
        -0.0913924053311348,
        -0.040451984852552414,
        -0.030269023030996323,
        0.003286611521616578,
        -0.08271437883377075,
        0.047803934663534164,
        0.026780568063259125,
        0.04384082928299904,
        0.015931418165564537,
        -0.007772656157612801,
        0.05060948431491852,
        -0.029033130034804344,
        -0.013768224976956844,
        0.08813478797674179,
        5.903308752600527e-33,
        -0.11241650581359863,
        0.07779540121555328,
        -0.006135693751275539,
        -0.0015975190326571465,
        -0.002100097481161356,
        -0.050639763474464417,
        -0.007435765583068132,
        -0.028389541432261467,
        -0.1220705658197403,
        -0.014694726094603539,
        0.0021540410816669464,
        -0.04963663965463638,
        -0.052522171288728714,
        -0.07244715839624405,
        -0.012584748677909374,
        -0.06443909555673599,
        0.07958554476499557,
        -0.05124110355973244,
        -0.005016797222197056,
        -0.02650519274175167,
        0.02746201679110527,
        0.0448080375790596,
        0.008969866670668125,
        0.0001513090101070702,
        -0.02627227082848549,
        -0.036202870309352875,
        0.030322594568133354,
        -0.03140091150999069,
        0.03334550932049751,
        0.01585170067846775,
        0.11035740375518799,
        0.025489402934908867,
        -0.08269595354795456,
        0.06590162217617035,
        -0.02154998481273651,
        0.044459786266088486,
        -0.060340676456689835,
        -0.022095372900366783,
        0.01912813074886799,
        0.08591772615909576,
        0.012859182432293892,
        -0.00914178416132927,
        -0.09566763043403625,
        0.030690673738718033,
        -0.025944851338863373,
        0.07934645563364029,
        0.004166823346167803,
        -0.03712397441267967,
        0.06260766088962555,
        -0.05793989822268486,
        -0.021461104974150658,
        0.02432854473590851,
        -0.0006761340191587806,
        0.09432628005743027,
        0.04505192115902901,
        -0.03242000564932823,
        0.011400877498090267,
        -0.003133197780698538,
        -0.0012353409547358751,
        -0.0023848526179790497,
        0.014250386506319046,
        -0.030693212524056435,
        0.037772152572870255,
        0.02092927321791649,
        -0.02865769900381565,
        -0.023836743086576462,
        0.072053462266922,
        0.008787298575043678,
        -0.04039166867733002,
        -0.0593402124941349,
        0.03664720803499222,
        -0.05654725804924965,
        0.040259286761283875,
        0.07293174415826797,
        -0.008324908092617989,
        -0.014698280021548271,
        -0.030088482424616814,
        0.004475137684494257,
        -0.012555524706840515,
        -0.09828054904937744,
        -0.03337908908724785,
        0.002166914287954569,
        -0.011870475485920906,
        -0.004756292328238487,
        0.047510337084531784,
        -0.019970664754509926,
        0.0280668456107378,
        -0.047693949192762375,
        0.038491394370794296,
        -0.019039206206798553,
        -0.02968643791973591,
        -0.09370758384466171,
        -0.03741244226694107,
        0.028622159734368324,
        -0.030025677755475044,
        -6.566208587937601e-33,
        0.09684111177921295,
        -0.03444933518767357,
        -0.031085846945643425,
        -0.0028185404371470213,
        -0.11073022335767746,
        -0.07384547591209412,
        0.05225447565317154,
        0.03454291447997093,
        -0.051421429961919785,
        0.03835350275039673,
        -0.018244681879878044,
        -0.028979875147342682,
        -0.044280510395765305,
        0.03052152507007122,
        0.030561530962586403,
        0.047437120229005814,
        0.10099469125270844,
        0.03520473092794418,
        -0.012562540359795094,
        -0.07291233539581299,
        0.008853476494550705,
        -0.046119533479213715,
        -0.054614730179309845,
        0.11677418649196625,
        -0.019946476444602013,
        0.09365399181842804,
        0.05580088496208191,
        0.016440128907561302,
        0.06364475935697556,
        0.020351868122816086,
        -0.09373930841684341,
        0.06184443458914757,
        0.02488088048994541,
        0.06420334428548813,
        -0.1496085673570633,
        -0.023319069296121597,
        0.07505103200674057,
        0.011032751761376858,
        0.04575495794415474,
        0.050330787897109985,
        -0.01592014729976654,
        0.022962674498558044,
        0.003962365910410881,
        0.04695369675755501,
        0.0057182288728654385,
        -0.045354098081588745,
        0.017578864470124245,
        0.02217521145939827,
        -0.0001528780412627384,
        -0.0383724607527256,
        0.07215100526809692,
        -0.024842100217938423,
        -0.013563770800828934,
        -0.07451645284891129,
        -0.046057358384132385,
        0.0194716639816761,
        0.05206083506345749,
        -0.11589547246694565,
        -0.07667234539985657,
        -0.028851523995399475,
        0.001203891821205616,
        -0.019118377938866615,
        0.03001737967133522,
        -0.07264900952577591,
        -0.06084369122982025,
        -0.029540181159973145,
        0.0337032675743103,
        0.004583769012242556,
        0.04505869746208191,
        -0.02389458753168583,
        0.018749088048934937,
        -0.0007794279372319579,
        -0.030191438272595406,
        0.01069287583231926,
        -0.06084875017404556,
        0.06665538996458054,
        0.02708693966269493,
        0.0014451543102040887,
        0.05929888039827347,
        0.01269934419542551,
        -0.030968764796853065,
        -0.008898445405066013,
        0.02001207135617733,
        0.020654328167438507,
        -0.027009209617972374,
        0.021268315613269806,
        0.0028377205599099398,
        0.03782065957784653,
        0.018418800085783005,
        -0.0439937599003315,
        0.016413614153862,
        -0.010617999359965324,
        0.04927901178598404,
        0.06102439761161804,
        0.0010205305879935622,
        -4.223580063467125e-8,
        -0.08031602948904037,
        -0.06627905368804932,
        -0.04750559478998184,
        -0.041755158454179764,
        -0.0627393126487732,
        0.0328112356364727,
        -0.03210354223847389,
        -0.08344615250825882,
        0.057679541409015656,
        -0.019529147073626518,
        -0.10595628619194031,
        0.0671556293964386,
        -0.12629161775112152,
        -0.020195012912154198,
        -0.06764240562915802,
        0.041577961295843124,
        -0.014381946064531803,
        0.20732706785202026,
        -0.01789730042219162,
        -0.009992752224206924,
        -0.014270693995058537,
        0.04945668578147888,
        0.0008200323791243136,
        -0.07377707213163376,
        -0.006100220140069723,
        0.01022179052233696,
        -0.014428841881453991,
        0.09955708682537079,
        0.023503420874476433,
        -0.014003931544721127,
        -0.046035848557949066,
        0.024743394926190376,
        -0.039652664214372635,
        -0.06261591613292694,
        -0.02647433802485466,
        0.024580223485827446,
        0.10293181985616684,
        -0.01415912713855505,
        0.028321892023086548,
        0.09204961359500885,
        0.017398139461874962,
        -0.035546157509088516,
        -0.009858153760433197,
        0.022051332518458366,
        -0.03764689341187477,
        -0.00409277668222785,
        -0.02583194151520729,
        0.06201403960585594,
        0.07856891304254532,
        -0.06413928419351578,
        0.12139779329299927,
        -0.015227784402668476,
        -0.07691619545221329,
        0.00816285703331232,
        -0.051565077155828476,
        0.07951008528470993,
        -0.03897784650325775,
        0.06308234483003616,
        -0.05136127397418022,
        -0.06045686453580856,
        0.04027806222438812,
        -0.000053666244639316574,
        0.013003303669393063,
        -0.03561681509017944
      ]
    },
    {
      "id": "9b677027",
      "filePath": "04-code-janitor/sandbox/src/utils.ts",
      "content": "export function reverse(str: string): string {\n\treturn str.split('').reverse().join('');\n}\n\n/**\n * 将字符串转换为URL友好的slug\n * 规则：\n * 1. 转换为小写\n * 2. 将非字母数字字符替换为连字符\n * 3. 移除开头和结尾的连字符\n * 4. 合并多个连续连字符为单个\n */",
      "startLine": 17,
      "endLine": 28,
      "type": "function",
      "name": "reverse",
      "embedding": [
        -0.02417302504181862,
        0.06767808645963669,
        0.06555187702178955,
        0.002934901975095272,
        0.010439176112413406,
        -0.020900264382362366,
        -0.0587368905544281,
        0.016795294359326363,
        0.02652357891201973,
        0.06097570061683655,
        0.03698531165719032,
        -0.015803946182131767,
        -0.03944384679198265,
        -0.05874965339899063,
        -0.0090064387768507,
        0.029847582802176476,
        -0.10156495124101639,
        0.08953166007995605,
        -0.04551905766129494,
        -0.007564076688140631,
        0.03869122266769409,
        -0.02129898965358734,
        0.010313333943486214,
        0.009834340773522854,
        0.12006939202547073,
        -0.05126963183283806,
        0.0327276773750782,
        0.057486336678266525,
        -0.05014980584383011,
        -0.0364893302321434,
        0.06849225610494614,
        -0.021321706473827362,
        0.006246814504265785,
        -0.007131234742701054,
        0.07472037523984909,
        0.08001948893070221,
        -0.013030381873250008,
        -0.04307364299893379,
        0.09581419080495834,
        0.025328150019049644,
        0.029007799923419952,
        0.010999462567269802,
        0.03939126059412956,
        -0.11129274219274521,
        0.008395865559577942,
        -0.01077238004654646,
        -0.13249193131923676,
        0.005399981513619423,
        0.015719382092356682,
        0.03280707448720932,
        -0.061558302491903305,
        0.033421050757169724,
        -0.13107377290725708,
        0.010862215422093868,
        0.04591263085603714,
        0.03908605873584747,
        -0.023751167580485344,
        -0.03336356207728386,
        -0.006002500187605619,
        0.04437079653143883,
        0.019860558211803436,
        -0.04495924711227417,
        0.0129574378952384,
        -0.062161143869161606,
        -0.008899497799575329,
        -0.044217512011528015,
        -0.11852758377790451,
        0.06695645302534103,
        -0.013795943930745125,
        0.021800553426146507,
        -0.10375992208719254,
        -0.021314768120646477,
        -0.0694810226559639,
        0.0026232884265482426,
        -0.026546865701675415,
        -0.06225509196519852,
        -0.11069683730602264,
        0.0409248061478138,
        0.00380442151799798,
        -0.02938070520758629,
        0.06404320895671844,
        -0.014037473127245903,
        0.0489039309322834,
        0.09416410326957703,
        0.03464887663722038,
        0.05666813626885414,
        -0.06309382617473602,
        -0.025235550478100777,
        -0.010352905839681625,
        0.04649774730205536,
        -0.042521748691797256,
        -0.00902219396084547,
        0.1200764924287796,
        0.039741434156894684,
        -0.026308171451091766,
        -0.03495446965098381,
        -0.027447650209069252,
        0.06728731840848923,
        -0.022352440282702446,
        0.010375880636274815,
        -0.03197067603468895,
        0.01313786581158638,
        0.05250173434615135,
        -0.1144973561167717,
        -0.06963261216878891,
        -0.0006023949827067554,
        0.03653181716799736,
        0.005941623821854591,
        0.0935397520661354,
        0.01895543746650219,
        -0.03003111109137535,
        0.044417642056941986,
        -0.00911400094628334,
        -0.09467434883117676,
        -0.04948538541793823,
        -0.033391617238521576,
        -0.015307736583054066,
        -0.08100229501724243,
        -0.006879083346575499,
        -0.0057633561082184315,
        0.004212201107293367,
        -0.015259580686688423,
        -0.037094712257385254,
        0.0025801004376262426,
        -0.018051933497190475,
        -0.03642548248171806,
        0.13356025516986847,
        2.7695251182937813e-33,
        -0.054570313543081284,
        0.05717821046710014,
        0.017128415405750275,
        -0.03696921467781067,
        -0.018004076555371284,
        -0.048141464591026306,
        -0.016194486990571022,
        -0.04572517052292824,
        -0.0655239075422287,
        0.015307718887925148,
        -0.058304790407419205,
        -0.0143284248188138,
        -0.04825441539287567,
        -0.044301245361566544,
        -0.05715346336364746,
        -0.05387731269001961,
        0.04379154369235039,
        0.0008089776383712888,
        0.005026082042604685,
        -0.023867167532444,
        0.02095777913928032,
        0.06575994938611984,
        -0.0005282447091303766,
        -0.08404907584190369,
        0.021952643990516663,
        -0.04315308853983879,
        0.005623083095997572,
        -0.044549811631441116,
        -0.018515614792704582,
        0.020851757377386093,
        0.10160320997238159,
        0.003186075948178768,
        0.017630653455853462,
        -0.004342264030128717,
        -0.00924435630440712,
        0.017183978110551834,
        0.009082801640033722,
        -0.050726234912872314,
        -0.15537409484386444,
        0.022899607196450233,
        -0.07184210419654846,
        -0.037439022213220596,
        -0.058543622493743896,
        -0.008858286775648594,
        -0.024968096986413002,
        0.029570287093520164,
        -0.02779911458492279,
        -0.03878594562411308,
        0.06260675936937332,
        -0.03353617340326309,
        -0.04078645259141922,
        0.04509183019399643,
        -0.0019823461771011353,
        0.08560997992753983,
        -0.005060046445578337,
        -0.05278097838163376,
        0.008060666732490063,
        -0.051407840102910995,
        -0.03524181619286537,
        0.020975908264517784,
        0.022154413163661957,
        0.08034670352935791,
        -0.013097025454044342,
        -0.006150346249341965,
        0.0014020525850355625,
        -0.040733397006988525,
        0.11212831735610962,
        -0.008084679022431374,
        0.01110017765313387,
        -0.011425850912928581,
        -0.019238580018281937,
        -0.039007652550935745,
        -0.038854170590639114,
        -0.03136308118700981,
        -0.023015448823571205,
        -0.007899828255176544,
        -0.04028358310461044,
        0.004222129005938768,
        0.03450312092900276,
        -0.0700761079788208,
        -0.05177906155586243,
        -0.0443551205098629,
        0.011886077001690865,
        -0.0340002216398716,
        0.042246606200933456,
        -0.03033156879246235,
        0.009129055775702,
        -0.04476245120167732,
        0.05416909232735634,
        -0.02023015171289444,
        -0.03565770760178566,
        -0.044725991785526276,
        -0.08130648732185364,
        0.048383161425590515,
        -0.02191973850131035,
        -4.917867226393233e-33,
        0.07838601619005203,
        0.007834486663341522,
        -0.05501604452729225,
        0.02898726984858513,
        -0.08724343776702881,
        0.01841498538851738,
        0.10107529163360596,
        0.06084354221820831,
        0.00013636010407935828,
        0.10464144498109818,
        -0.002716292394325137,
        0.0028127196710556746,
        0.03299550339579582,
        -0.07505912333726883,
        0.10986430943012238,
        0.02362910285592079,
        0.10215049237012863,
        0.029704369604587555,
        0.011474555358290672,
        -0.060413576662540436,
        -0.026246795430779457,
        0.03499647229909897,
        -0.002522891853004694,
        0.10601677745580673,
        -0.00824267789721489,
        0.0914127305150032,
        0.16792882978916168,
        0.016184786334633827,
        -0.003314618719741702,
        -0.010564741678535938,
        0.030204501003026962,
        0.0481962114572525,
        0.045120969414711,
        0.08912647515535355,
        -0.0956781804561615,
        -0.013795989565551281,
        -0.07042945176362991,
        0.05344215780496597,
        0.08362630754709244,
        -0.023351842537522316,
        0.02417326159775257,
        0.023269547149538994,
        -0.04311702400445938,
        0.007316401693969965,
        -0.00018162686319556087,
        -0.09332790970802307,
        -0.014881489798426628,
        0.05244604870676994,
        0.0008080091211013496,
        -0.06282791495323181,
        0.1287045031785965,
        -0.029392872005701065,
        0.0020855413749814034,
        -0.0986827090382576,
        -0.003389377146959305,
        -0.015380743891000748,
        -0.011436617001891136,
        -0.05755716934800148,
        -0.035833947360515594,
        -0.013641664758324623,
        0.003911459352821112,
        0.0021954309195280075,
        0.04802553355693817,
        -0.021737592294812202,
        -0.012175519950687885,
        0.01632723957300186,
        -0.05805905535817146,
        -0.02544623427093029,
        -0.0021540154702961445,
        -0.10599090903997421,
        -0.00577576132491231,
        0.07246357947587967,
        0.023463379591703415,
        0.009506714530289173,
        0.022722119465470314,
        -0.007458888925611973,
        -0.05907971411943436,
        0.07866300642490387,
        0.03468174487352371,
        0.05302199348807335,
        -0.0318218469619751,
        -0.012877211906015873,
        0.08950135111808777,
        0.0060257078148424625,
        -0.04937266930937767,
        -0.10040891170501709,
        -0.0669073835015297,
        0.07533779740333557,
        -0.013384266756474972,
        -0.037406109273433685,
        0.01250527799129486,
        -0.008364326320588589,
        -0.0035795699805021286,
        0.05675866827368736,
        0.05765654146671295,
        -4.55156943246493e-8,
        -0.08215860277414322,
        -0.029090678319334984,
        -0.01738853193819523,
        -0.05056828632950783,
        -0.07309785485267639,
        0.023113418370485306,
        -0.010886101983487606,
        0.001532102469354868,
        0.030462270602583885,
        0.003907121252268553,
        -0.009515123441815376,
        0.029051166027784348,
        -0.05228922516107559,
        0.043990302830934525,
        -0.08286238461732864,
        0.0388784259557724,
        -0.00612335791811347,
        0.11797014623880386,
        0.004225929267704487,
        -0.062401313334703445,
        -0.03456704691052437,
        -0.008069422096014023,
        0.02284948155283928,
        -0.06270966678857803,
        0.017554035410284996,
        -0.03815476596355438,
        -0.11157166957855225,
        0.012621454894542694,
        -0.002610658062621951,
        -0.03674416244029999,
        -0.021939445286989212,
        -0.0032449958380311728,
        -0.0535096749663353,
        -0.039807189255952835,
        -0.04476749524474144,
        0.0820126086473465,
        0.06315091997385025,
        -0.056235674768686295,
        0.05165104568004608,
        0.01807136833667755,
        0.025560012087225914,
        -0.03836565837264061,
        0.0104555394500494,
        0.028592756018042564,
        -0.039937593042850494,
        -0.04355723410844803,
        0.10502804815769196,
        0.038136642426252365,
        0.04232010245323181,
        -0.053809136152267456,
        0.11220105737447739,
        -0.029240554198622704,
        -0.04510333016514778,
        -0.07409346103668213,
        -0.032520681619644165,
        -0.003446056507527828,
        -0.0469331257045269,
        0.026488279923796654,
        -0.09246116876602173,
        0.03079155646264553,
        0.03665583208203316,
        0.038887571543455124,
        0.05902382731437683,
        0.01395212858915329
      ]
    },
    {
      "id": "6b7f1437",
      "filePath": "04-code-janitor/sandbox/src/utils.ts",
      "content": "export function slugify(str: string): string {\n\tif (!str) return '';\n\t\n\treturn str\n\t\t.toLowerCase()\n\t\t.replace(/[^a-z0-9\\s-]/g, '') // 移除非字母数字字符（空格和连字符保留）\n\t\t.replace(/\\s+/g, '-')          // 将空格替换为连字符\n\t\t.replace(/-+/g, '-')           // 合并多个连字符\n\t\t.replace(/^-|-$/g, '');        // 移除开头和结尾的连字符\n}",
      "startLine": 29,
      "endLine": 39,
      "type": "function",
      "name": "slugify",
      "embedding": [
        -0.014317803084850311,
        0.045165520161390305,
        0.10088171064853668,
        -0.014788658358156681,
        -0.0036626108922064304,
        -0.0013105124235153198,
        -0.014614250510931015,
        -0.018712205812335014,
        0.004034457262605429,
        0.03006802126765251,
        0.037001945078372955,
        -0.01565425656735897,
        -0.0013560890220105648,
        -0.03685407713055611,
        -0.022069303318858147,
        -0.00822050403803587,
        -0.08617344498634338,
        0.06223985552787781,
        -0.06759264320135117,
        -0.05499701574444771,
        0.03751099854707718,
        0.023781433701515198,
        0.010113084688782692,
        -0.004288715776056051,
        0.1089034453034401,
        -0.03972082957625389,
        0.0405687540769577,
        0.024114111438393593,
        -0.05767689272761345,
        -0.028902621939778328,
        0.07645344734191895,
        -0.049326520413160324,
        0.025593943893909454,
        -0.0357089638710022,
        0.10051863640546799,
        0.08530515432357788,
        -0.009537333622574806,
        -0.017899829894304276,
        0.07691211253404617,
        0.01383281871676445,
        0.023969776928424835,
        -0.01702987402677536,
        -0.0054655177518725395,
        -0.05545473471283913,
        -0.0017480283277109265,
        -0.03979205712676048,
        -0.037208352237939835,
        -0.05400489270687103,
        -0.09220357984304428,
        0.02841423638164997,
        -0.06509274989366531,
        -0.0482286773622036,
        -0.10880555957555771,
        0.003608048427850008,
        0.02320394478738308,
        -0.025830863043665886,
        -0.002945910906419158,
        0.010653219185769558,
        0.002564976690337062,
        -0.0536406971514225,
        -0.010369246825575829,
        -0.0009726411080919206,
        0.09591512382030487,
        -0.06061986833810806,
        -0.025040918961167336,
        -0.03795665130019188,
        -0.033793091773986816,
        0.05779960751533508,
        0.023045510053634644,
        0.05564941465854645,
        -0.050694651901721954,
        0.014267751015722752,
        -0.07488986104726791,
        0.01742199994623661,
        -0.09497906267642975,
        -0.01166630256921053,
        -0.13156914710998535,
        0.06265834718942642,
        0.03831266611814499,
        0.005433164536952972,
        0.08508502691984177,
        -0.04306328296661377,
        0.06316480040550232,
        0.032929886132478714,
        0.04593941569328308,
        0.08679181337356567,
        -0.08424723148345947,
        -0.0367860347032547,
        -0.029973872005939484,
        0.023446863517165184,
        -0.05126684904098511,
        0.0018082264577969909,
        0.12334850430488586,
        0.0006531929248012602,
        -0.09475939720869064,
        -0.026894239708781242,
        -0.05036469176411629,
        0.10215055197477341,
        -0.01866752840578556,
        0.05614646151661873,
        -0.03666649013757706,
        0.011521185748279095,
        0.016463687643408775,
        -0.10280696302652359,
        -0.06162406504154205,
        0.004803630523383617,
        -0.03963826596736908,
        -0.026134727522730827,
        0.05535002797842026,
        0.01899709366261959,
        -0.04521651566028595,
        0.04360220581293106,
        -0.07287930697202682,
        -0.0807223916053772,
        -0.05718984454870224,
        -0.006246431730687618,
        0.02671744115650654,
        -0.07296249270439148,
        -0.005652519408613443,
        0.03391910716891289,
        0.07158558815717697,
        -0.04183788597583771,
        -0.04570108652114868,
        0.057965684682130814,
        -0.012620638124644756,
        0.011788449250161648,
        0.10311383754014969,
        7.755962419919332e-33,
        -0.05637434870004654,
        0.0761832743883133,
        -0.004683503415435553,
        -0.024663902819156647,
        -0.008166023530066013,
        -0.09351088106632233,
        0.01227329857647419,
        0.018144840374588966,
        -0.06790583580732346,
        -0.005573231261223555,
        -0.07339659333229065,
        -0.03750421851873398,
        -0.04162415862083435,
        -0.020239481702446938,
        -0.009042375721037388,
        -0.06090760603547096,
        0.06920384615659714,
        -0.06636466085910797,
        -0.0034003020264208317,
        -0.06670653820037842,
        0.02662326768040657,
        0.05363953113555908,
        -0.03993191197514534,
        -0.059605374932289124,
        0.027250388637185097,
        -0.030377980321645737,
        0.039498474448919296,
        -0.07355394959449768,
        0.06498751789331436,
        0.004473384004086256,
        0.0968502089381218,
        0.045974813401699066,
        -0.025473834946751595,
        0.05854238197207451,
        0.012527751736342907,
        -0.011509542353451252,
        0.0005055454676039517,
        -0.05471758544445038,
        -0.09319054335355759,
        -0.02866221033036709,
        -0.032988253980875015,
        0.012938146479427814,
        -0.03726430982351303,
        0.013319434598088264,
        0.04506727680563927,
        0.09564800560474396,
        -0.01078804675489664,
        -0.03161398693919182,
        0.061927635222673416,
        -0.060691118240356445,
        -0.01142958179116249,
        0.03865189105272293,
        0.03670686110854149,
        0.13923446834087372,
        -0.0009507647482678294,
        -0.04131755232810974,
        -0.02792142517864704,
        -0.0679226964712143,
        0.003197659505531192,
        0.00867243018001318,
        0.045429982244968414,
        0.024555927142500877,
        0.05530694127082825,
        0.004536189138889313,
        0.0426735058426857,
        -0.029843322932720184,
        0.0758359357714653,
        0.058705709874629974,
        0.033522095531225204,
        -0.010941591113805771,
        0.038160573691129684,
        -0.06817696988582611,
        -0.038648493587970734,
        0.01893337443470955,
        -0.10991322994232178,
        -0.03478720784187317,
        -0.03696056455373764,
        -0.016559531912207603,
        0.010462278500199318,
        -0.11347424238920212,
        -0.03309929370880127,
        -0.04406927898526192,
        0.014744715765118599,
        0.0018120160093531013,
        0.05478852614760399,
        -0.08309309184551239,
        0.024647129699587822,
        -0.022267738357186317,
        0.024967478588223457,
        0.00937270000576973,
        -0.0017790894489735365,
        -0.015289291739463806,
        -0.08388713002204895,
        0.030400779098272324,
        -0.07428032904863358,
        -8.7375729365689e-33,
        0.11194320023059845,
        0.02426178567111492,
        -0.05270197615027428,
        0.08883286267518997,
        -0.07089471817016602,
        -0.011574234813451767,
        0.03313342109322548,
        0.035556573420763016,
        0.005723586771637201,
        0.03080860711634159,
        -0.0791800394654274,
        -0.013296174816787243,
        0.04660120606422424,
        -0.020821254700422287,
        -0.0084983604028821,
        -0.007189800031483173,
        0.04771481826901436,
        -0.003373056882992387,
        -0.01203362736850977,
        -0.02484968863427639,
        0.02129191905260086,
        -0.027273543179035187,
        -0.04435834288597107,
        0.07596475630998611,
        -0.013841560110449791,
        0.08874626457691193,
        0.12682928144931793,
        -0.02000090666115284,
        -0.010639559477567673,
        0.040935665369033813,
        -0.025337105616927147,
        0.09521953016519547,
        -0.002235997235402465,
        0.007048224098980427,
        -0.09329956769943237,
        -0.031064525246620178,
        -0.0012927812058478594,
        0.07554361969232559,
        0.009012794122099876,
        0.026446053758263588,
        -0.01986488699913025,
        0.02590104751288891,
        -0.007491594180464745,
        0.03731926530599594,
        0.02975836955010891,
        -0.03752106428146362,
        0.0041542574763298035,
        0.04284152016043663,
        -0.05092378705739975,
        -0.051073234528303146,
        0.10786919295787811,
        -0.009998640045523643,
        -0.03913258761167526,
        -0.045538969337940216,
        0.029040010645985603,
        0.020260734483599663,
        -0.0117850536480546,
        -0.10009652376174927,
        -0.12430937588214874,
        -0.07836877554655075,
        -0.028666185215115547,
        0.017373111099004745,
        0.0023464858531951904,
        -0.0596453994512558,
        -0.0009047926287166774,
        -0.03832640498876572,
        -0.013720803894102573,
        -0.0013225151924416423,
        0.04961421713232994,
        -0.142917200922966,
        0.02224781922996044,
        -0.0029451055452227592,
        -0.02928655780851841,
        0.034300487488508224,
        -0.01638456992805004,
        -0.055980782955884933,
        0.010445766150951385,
        0.003973951563239098,
        0.06214742362499237,
        0.05510130897164345,
        -0.04559515044093132,
        -0.029073940590023994,
        0.0687013640999794,
        0.007505566347390413,
        -0.04170805215835571,
        -0.02442624419927597,
        -0.03722265735268593,
        0.10168763250112534,
        0.009871072135865688,
        -0.031283747404813766,
        0.0445161871612072,
        0.049496132880449295,
        -0.005215947050601244,
        0.02304881066083908,
        -0.0032766491640359163,
        -5.086124943431969e-8,
        -0.0645415261387825,
        -0.006327425129711628,
        -0.08922496438026428,
        -0.04838719218969345,
        -0.0558202899992466,
        -0.026513773947954178,
        -0.014148902148008347,
        -0.02673267386853695,
        0.026295723393559456,
        -0.05834677070379257,
        -0.00739672314375639,
        0.07351554930210114,
        -0.10487496107816696,
        0.0029055175837129354,
        -0.059436410665512085,
        0.031783729791641235,
        -0.018031174317002296,
        0.14206340909004211,
        -0.052053071558475494,
        0.018368395045399666,
        -0.06418416649103165,
        0.06019000709056854,
        -0.05478149652481079,
        -0.041191376745700836,
        0.039035022258758545,
        -0.03091307543218136,
        -0.10206662863492966,
        -0.003184187924489379,
        0.00860359612852335,
        0.048289328813552856,
        -0.005878102034330368,
        0.01678040809929371,
        0.01654805615544319,
        -0.05607668682932854,
        -0.029910452663898468,
        0.05539155378937721,
        0.09443575888872147,
        -0.046968452632427216,
        0.04924789071083069,
        0.021246202290058136,
        0.05869424715638161,
        -0.05117888003587723,
        0.022389503195881844,
        0.009252464398741722,
        -0.03613166883587837,
        -0.05591118335723877,
        0.06479848176240921,
        0.002958600874990225,
        0.04510729759931564,
        0.016496041789650917,
        0.1427893191576004,
        0.005252818576991558,
        -0.08814293146133423,
        -0.033020928502082825,
        -0.029317043721675873,
        -0.03182452172040939,
        0.0007056333124637604,
        0.04317590221762657,
        -0.0352734737098217,
        -0.011209151707589626,
        0.08015567809343338,
        -0.029079627245664597,
        0.06646297127008438,
        0.015568118542432785
      ]
    }
  ]
}